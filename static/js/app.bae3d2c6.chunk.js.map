{"version":3,"sources":["src/core/theme/index.ts","src/core/animation.ts","src/core/layouts/index.ts","src/constants/index.tsx","src/utils/index.ts","src/components/Image/index.tsx","src/components/Text/index.tsx","src/components/View/index.tsx","src/components/templates/Profile.tsx","src/core/clusters/index.ts","src/components/Graphics/index.tsx","src/components/Pressable/index.tsx","src/core/config.ts","src/hooks/useGraph.ts","src/hooks/useElement.ts","src/hooks/useNode.ts","src/hooks/useGraphEditor.ts","src/components/Container/index.tsx","src/core/utils/events.tsx","src/components/ClusterNodeContainer/index.tsx","src/components/EdgeContainer/index.tsx","src/hooks/useEdge.ts","src/components/NodeContainer/index.tsx","src/components/Graph/DefaultRenderClusterNode.tsx","src/components/Graph/DefaultRenderNode.tsx","src/components/Graph/DefaultRenderEdge.tsx","src/components/Viewport/index.tsx","src/components/Graph/index.tsx","src/components/index.ts","src/components/HoverContainer/index.tsx","src/components/ContextMenu.tsx","src/utils/TimeoutManager/smart-timer.ts","src/utils/TimeoutManager/index.ts","src/components/Icon.tsx","src/utils/DocumentPicker/index.ts","src/components/GraphEditor/ActionBar/LayoutOptions/getFormProps.tsx","src/components/GraphEditor/ActionBar/LayoutOptions/index.tsx","src/components/GraphEditor/ActionBar/index.tsx","src/hooks/useDrag.tsx","src/components/ResizeDivider.tsx","src/components/GraphEditor/DataBar/JSONEditor.tsx","src/components/GraphEditor/DataBar/GlobalNetworkStatistics.tsx","src/components/GraphEditor/DataBar/LocalNetworkStatistics.tsx","src/components/GraphEditor/DataBar/ConnectedElements.tsx","src/components/GraphEditor/DataBar/index.tsx","src/components/GraphEditor/ModalComponent.tsx","src/components/GraphEditor/MouseIcon.tsx","src/components/GraphEditor/PreferencesModal/index.tsx","src/components/GraphEditor/RecordedEventsModal.tsx","src/components/SortableList.tsx","src/components/SpeedDialCreator.tsx","src/components/TabPanel.tsx","src/components/GraphEditor/SettingsBar/ClusterTable/CreateClusterByAlgorithm.tsx","src/components/GraphEditor/SettingsBar/ClusterTable/index.tsx","src/components/GraphEditor/SettingsBar/EventHistoryTable.tsx","src/components/GraphEditor/SettingsBar/PlaylistTable/index.tsx","src/components/GraphEditor/SettingsBar/index.tsx","src/components/GraphEditor/index.tsx","src/utils/useTimeoutManager.tsx","_examples/CaseLawExplorerExample/constants.tsx","src/utils/createHistory.ts","src/components/GraphEditor/modals/ElementSettingsModal.tsx","src/plugins/controller/index.tsx","_examples/CaseLawExplorerExample/API.ts","_examples/CaseLawExplorerExample/QueryBuilder/constants.tsx","_examples/CaseLawExplorerExample/QueryBuilder/index.tsx","_examples/CaseLawExplorerExample/HelpModal.tsx","_examples/CaseLawExplorerExample/index.tsx","src/plugins/createSchema.ts","App.tsx"],"names":["DarkTheme","DefaultTheme","Context","Provider","useProvider","createProvider","value","ThemeProvider","useTheme","animationOptions","animate","animationEasing","animationDuration","animateFilter","animationThreshold","cose","name","ready","stop","refresh","fit","padding","nodeDimensionsIncludeLabels","randomize","componentSpacing","nodeRepulsion","node","nodeOverlap","idealEdgeLength","edge","edgeElasticity","nestingFactor","gravity","numIter","initialTemp","coolingFactor","minTemp","breadthfirst","directed","circle","grid","spacingFactor","avoidOverlap","roots","undefined","maximal","transform","position","concentric","startAngle","Math","PI","sweep","clockwise","equidistant","minNodeSpacing","height","width","degree","levelWidth","nodes","maxDegree","radius","sort","avoidOverlapPadding","condense","rows","cols","random","euler","springLength","springCoeff","mass","pull","theta","dragCoeff","movementThreshold","timeStep","maxIterations","ungrabifyWhileSimulating","cise","nodeSeparation","idealInterClusterEdgeLengthCoefficient","allowNodesInsideCircle","maxRatioOfNodesInsideCircle","gravityRange","cola","maxSimulationTime","handleDisconnected","convergenceThreshold","nodeSpacing","flow","alignment","gapInequalities","edgeLength","edgeSymDiffLength","edgeJaccardLength","unconstrIter","userConstIter","allConstIter","avsdf","dagre","nodeSep","edgeSep","rankSep","rankDir","ranker","minLen","edgeWeight","i","pos","spread","minDist","expandingFactor","prelayout","maxExpandIterations","klay","EVENT","ELEMENT_DATA_FIELDS","EDITOR_MODE","ADD","DELETE","CONTINUES_ADD","CONTINUES_DELETE","DEFAULT","ADD_CLUSTER_ELEMENT","LAYOUT_NAMES","Object","keys","Layouts","CYTOSCAPE_EVENT","QUALITY_LEVEL","processProps","props","mutableInstance","preprocessProps","IS_FLEX_DEFAULT","applyDefaultProps","instance","oldProps","newProps","config","isFlex","rescaleToYoga","style","restProps","flex","yoga","flexDirection","keepAspectRatio","R","resizeMode","fromConfig","_visible","visible","nativeApplyDefaultProps","getTextureFromProps","elementType","pureProps","source","rest","isUriSource","image","uri","texture","emitChange","requestAnimationFrame","window","dispatchEvent","CustomEvent","check","inType","validator","hasOwnProperty","valid","typeofs","some","t","instanceofs","PIXI","result","HTMLImageElement","HTMLVideoElement","HTMLCanvasElement","from","once","getSelectedItemByElement","element","info","id","targetPath","isNode","index","findIndex","targetItem","item","getSelectedElementInfo","controllerState","graphEditor","itemIds","selectedElementIds","selectedItemId","selectedElement","cy","$id","selectedItem","type","getLabel","path","readTextFile","async","blob","encoding","Promise","res","rej","reader","FileReader","addEventListener","error","readAsText","calculateObjectBoundsWithoutChildren","container","x","scale","y","children","length","object","getChildAt","removeChildren","forEach","child","addChild","box","getClusterVisibility","clusters","cluster","ids","includes","calculateVisibilityByContext","context","contextUtils","get","values","settings","visibility","throttleTimeTable","getBoundingBox","startPos","endPos","abs","cyUnselectAll","elements","unselect","getPointerPositionOnViewport","viewport","event","getEventClientPosition","options","interaction","mapPositionToPoint","left","top","e","touches","changedTouches","clientX","clientY","update","data","getNodeContext","getEdgeContext","getElementData","getItemFromElement","ImagePIXI","PixiComponent","create","applyProps","_props","Image","wrapComponent","text","isSprite","pixiText","fill","C","theme","palette","primary","updateText","spriteText","forceToRender","newStyle","Text","ReactPIXIText","ViewPIXI","backgroundColor","borderRadius","borderWidth","borderColor","clear","beginFill","lineStyle","drawCircle","drawRoundedRect","endFill","View","forwardedRef","ref","isForwardRef","ProfileTemplate","__","story","link","onClick","paddingLeft","paddingTop","interactive","buttonMode","pointertap","open","title","paragraph","fontFamily","fontSize","wordWrap","wordWrapWidth","color","getAttribute","params","pathText","edges","find","split","Clusters","markov","attributes","markovClustering","getByItem","configSchema","required","properties","default","expandFactor","inflateFactor","multFactor","configForm","defaultValue","kMeans","k","distance","enum","sensitivityThreshold","choices","kMedoids","fuzzyCMeans","hierarchical","hierarchicalClustering","linkage","mode","threshold","dendrogramDepth","addDendrogram","affinityPropagation","preference","damping","maximum","minimum","includeMin","minIterations","max","min","controlPointsCreator","to","count","unitVector","normVector","upperVector","V","lowerVector","chunkDistanceVector","semiChunkDistanceVector","_","isUpper","startVec","endVec","start","mid","end","midVec","drawLine","fromBoundingBox","toBoundingBox","background","paper","graphics","alpha","arrowHead","margin","undirectedUnitVector","undirectedNormVector","marginVector","radiusFrom","hypot","radiusTo","centerOfFrom","centerOfTo","bottomCenter","unitDistanceVec","perpendicularUnitDistanceVec","leftControlPoint","rightControlPoint","topControlPoint","drawPolygon","drawArrowHead","controlPoints","control1","control2","moveTo","bezierCurveTo","lineTo","zIndex","GraphicsPIXI","Graphics","forwardRef","ROUND_PIXELS","PRECISION_FRAGMENT","LOW","RESOLUTION","SCALE_MODE","NEAREST","mutableGraphMap","useElement","contextRef","renderEvents","initializedRef","useInitializedRef","React","useEffect","current","eventName","on","render","connectedEdges","emit","target","removeListener","oldFiltered","filtered","filter","test","useMemo","hovered","DEFAULT_BOUNDING_BOX","onPositionChange","graphID","isCluster","clustersByNodeId","clustersByChildClusterId","setState","useStateWithCallback","useRef","callback","mutableEdge","boundingBox","add","group","remove","clusterVisibility","oldVisible","useSelector","createStoreProvider","immer","GraphEditorProvider","useGraphEditor","Container","onDrag","draggable","onDown","onMove","mutableData","document","keepDragging","dragTrack","posDiff","parent","originalEvent","DEFAULT_POSITION","ClusterNodeContainer","graphRef","containerRef","positionAcc","clusterElementPos","calculatedPosition","useNode","useCallback","opacity","calculateEdgeGroupInfo","edgeID","targetElement","sourceElement","betweenEdges","edgesWith","betweenEdgesCount","betweenEdgesMedian","floor","edgeIndex","edgeEl","sortedIndex","calculateVectorInfo","fromPosition","toPosition","distanceVector","midpointPosition","sign","EdgeContainer","defaultDrawLine","graphicsRef","drawLineCallback","edgeGroupInfo","sourceElementContext","targetElementContext","selected","main","secondary","nodeFiltered","nodeVisible","nodeDataUpdated","sourceContext","targetContext","sourceVisible","targetVisible","newNodeVisible","forceRender","oldNodeFiltered","newNodeFiltered","useEdge","mouseover","mouseout","NodeContainer","DefaultRenderClusterNode","hasSelectedEdge","justifyContent","alignItems","display","warning","select","substring","DefaultRenderNode","DefaultRenderEdge","DEFAULT_EVENT_HANDLER","ReactViewportComp","app","renderer","ticker","stage","onCreate","onBoxSelectionStart","onBoxSelection","onBoxSelectionEnd","ViewportNative","screenWidth","screenHeight","worldWidth","worldHeight","plugins","passiveWheel","divWheel","view","sortableChildren","drag","pressDrag","pinch","wheel","trackpadPinch","wheelZoom","localDataRef","boxSelection","enabled","startPosition","currentPosition","boxElement","currentTarget","isMultipleTouches","pause","isClick","setTimeout","resume","endPosition","removeChild","destroy","pBoxElement","drawGraphics","preventDefault","mutableViewport","onPress","zoom","resize","clickEvent","toWorld","global","nativeEvent","setZoom","setTransform","scaleX","scaleY","rotation","skewX","skewY","pivotX","pivotY","didMount","willUnmount","Viewport","useApp","viewportRef","useForwardRef","keyboardRef","pressedKeys","intervalTimeout","keyDownListener","body","key","interval","setInterval","center","pointer","map","newCenter","keyUpListener","clearInterval","removeEventListener","DEFAULT_NODE_CONFIG","DEFAULT_EDGE_CONFIG","DEFAULT_CONFIG","Graph","renderNode","renderEdge","extraData","configProp","renderClusterNode","graphId","stageRef","onLoad","isExistRef","graph","cyInstance","cytoscape","headless","styleEnabled","nodeID","clusterById","push","childClusterIds","clusterId","useGraph","graphLayoutRef","objectCount","qualityLevel","oldQualityLevel","HIGH","LINEAR","MEDIUM","adjustVisualQuality","layout","dirty","hitArea","x1","y1","w","h","createLayout","nodeConfigIds","globalNodeConfig","edgeConfigIds","globalEdgeConfig","onPressCallback","resolution","devicePixelRatio","antialias","autoDensity","elementIds","selectedCollection","elementPosition","x_","y_","isPositionInBox","accessor","keyExtractor","renderItem","isEqual","Function","Pressable","viewRef","mutableContainer","HoverContainer","renderHoverElement","state","useState","onHoverStart","onHoverEnd","pointerover","pointerout","EDGE","NODE","ContextMenu","onSelect","items","graphEditorRef","Portal","Menu","onClose","anchorReference","anchorPosition","label","MenuItem","MetadataRecord","constructor","ms","Date","getTime","Timeout","erase","clearTimeout","keyId","metadata","originalMs","args","Error","toString","executedTime","executed","exists","set","paused","metaDataRecord","timeSpentWaiting","startTime","remainingTime","replace","lastExecuted","pending","remaining","restart","newCallback","newMs","newParams","createTimeoutManager","timers","onFinish","onFinishCallback","autostart","onPlayChanged","onPlayChangedCallback","isEmpty","timeoutInstances","afterTotal","started","controller","durationCounter","createDurationCounter","totalDuration","after","duration","currentIndex","finished","timeoutInstance","timer","instantiate","ICONS","assessment","Assessment","add_circle","AddCircle","addjust","Adjust","cancel_rounded","CancelRounded","delete_rounded","DeleteRounded","record_voice_over_rounded","RecordVoiceOverRounded","build_circle_outlined","BuildCircleOutlined","more_vert","MoreVert","edit","Edit","build_circle","BuildCircle","repeat_one","RepeatOne","sort_by_alpha","SortByAlpha","close","Close","info_outlined","InfoOutlined","Filter","arrow_drop_down_rounded","ArrowDropDownRounded","arrow_drop_up_rounded","ArrowDropUpRounded","bookmarks","Bookmarks","bookmark","Bookmark","bookmark_border","BookmarkBorder","minimize","Minimize","videocam","Videocam","fiber_manual_record","FiberManualRecord","Settings","redo","Redo","chevron_left","ChevronLeft","chevron_right","ChevronRight","keyboard_arrow_up","KeyboardArrowUp","keyboard_arrow_down","KeyboardArrowDown","playlist_add","PlaylistAdd","playlist_play","PlaylistPlay","expand_more","ExpandMore","play_arrow","PlayArrow","navigate_before","NavigateBefore","navigate_next","NavigateNext","beenhere","Beenhere","unfold_less","UnfoldLess","unfold_more","UnfoldMore","my_location","MyLocation","drag_handle","DragHandle","Icon","IconSelected","uuidv4","multiple","input","createElement","setAttribute","appendChild","resolve","reject","files","targetFile","onerror","onload","file","lastModified","size","output","readAsDataURL","MouseEvent","asNumber","guessType","utils","nums","Set","processValue","schema","has","every","LayoutNameSelect","disabled","readonly","autofocus","onChange","onBlur","onFocus","rawErrors","enumOptions","enumDisabled","emptyValue","anchorEl","onOpen","useDisclosure","hoveredIndexRef","TextField","autoFocus","InputLabelProps","shrink","SelectProps","indexOf","onMouseEnter","onMouseLeave","LayoutNameItem","openInfo","isOpen","Typography","src","alt","LayoutOptions","onEvent","onSubmitCallback","payload","form","formData","Box","Button","sx","Popover","anchorOrigin","vertical","horizontal","transformOrigin","Backdrop","drawer","uiSchema","onSubmit","DEFAULT_ACTIONS","delete","recordEvents","actions","import","RECORDING_STATUS_MAP","OPTIONS","Import","Export","ImportEvents","MoreOptions","renderMoreAction","onAction","theming","IconButton","option","DocumentPicker","getDocumentAsync","fileText","JSON","parse","handleMenuItemClick","FormControl","fullWidth","InputLabel","Select","labelId","themeOption","ActionBar","autoOpen","recording","eventRecording","LeftComponent","right","RightComponent","graphConfig","editor","animationStyle","animationRef","useAnimation","bottom","autoPlay","play","recordingRef","styles","button","startIcon","variant","onDoubleClick","Recorder","getStream","captureStream","startRecording","stopRecording","status","onStop","icon","avoidHistoryRecording","marginRight","useDrag","prevX","prevY","panelRect","getBoundingClientRect","mousemove","stopPropagation","cancelBubble","returnValue","pauseEvent","newX","newY","mouseup","ResizeDivider","onHover","cursor","JSONEditor","newData","ace","GlobalNetworkStatistics","Accordion","defaultExpanded","AccordionSummary","aria-controls","AccordionDetails","collapsed","onCollapse","noChild","alignContent","LocalNetworkStatistics","ConnectedElements","itemList","toArray","List","dense","ListItem","ListItemIcon","ListItemText","DataBar","editable","header","HeaderComponent","footer","FooterComponent","networkStatistics","globalLabel","localLabel","isGlobalLabelFirst","graphEditorConfig","isGlobalFirst","local","hasStatistics","val","isEditing","onMouseDown","rect","Paper","overflowY","overflowX","wordBreak","isLocalLabel","isGlobalLabel","textDecoration","component","isValidURL","align","href","Divider","url","URL","protocol","ModalComponent","onCloseCallback","Modal","onBackdropClick","maxWidth","maxHeight","overflow","MouseIcon","onMouseMove","PreferencesModal","sidebar","MOCK_SIDEBAR_DATA","components","createDrawer","Slide","in","orientation","flexItem","Breadcrumbs","aria-label","Link","labelTextSize","historyTabVisible","playlistTabVisible","SidebarItem","propItem","setOpen","String","hasChildren","Collapse","timeout","unmountOnExit","disablePadding","ml","RecordedEventsModal","timeoutManager","alert","currentTimer","BackdropProps","CircularProgressWithLabel","CircularProgress","round","SortableList","onReorder","onDragEnd","droppableId","destination","droppableProvided","droppableSnapshot","droppableProps","innerRef","draggableId","provided","snapshot","rubric","placeholder","SpeedDialCreator","SpeedDial","ariaLabel","ICON_SIZE","FabProps","minWidth","minHeight","direction","action","SpeedDialAction","tooltipTitle","tooltipPlacement","TabPanel","role","hidden","aria-labelledby","CLUSTER_ALGORITHM_NAMES","CreateClusterByAlgorithm","updateState","useImmer","selectedClusterName","draft","clusterName","ClusterTable","createClusterForm","editorMode","graphEditorLocalDataRef","expanded","selectedClusterIds","currentTab","createClusterDialog","hasSelected","Card","Checkbox","checked","inputProps","fromIndex","toIndex","draggableProps","SpeedDialActionsView","disableFocusRipple","disableRipple","disableTouchRipple","dragHandleProps","elementId","ListItemAvatar","ListItemSecondaryAction","Dialog","DialogTitle","marginBottom","issuedClusterId","EventHistoryTable","onCreatePlaylistClick","selectedEventIds","eventHistory","avoidEventRecording","events","undoEvents","PlaylistTable","createPlaylistDialog","onCreatePlaylist","playlists","selectedPlaylistIds","playlist","SettingsBar","forms","Fragment","marginTop","playlistWithoutEvents","playlistEvents","eventId","other","date","MODE_ICON_MAP_BY_URL","DEFAULT_HANDLER","DEFAULT_GRAPH_EDITOR_CONFIG","enableNetworkStatistics","extractGraphEditorData","cache","stringify","convert","dataBar","actionBar","GraphEditor","onEventCallback","settingsBar","preferencesModal","isLoading","modals","isFocusMode","initialized","targetNode","newClusterBoxSelection","contextMenu","eventsModal","collection","eventInfo","clusterCollections","clusterLength","el","eventTimeoutsManager","deps","renderOnTimeout","renderOnFinished","renderOnPlayChanged","useTimeoutManager","getMilliseconds","graphEditorValue","delay","_id","time","throttle","pageY","offsetHeight","offsetTop","rightclick","labelPath","modalName","otherItem","SliderUIField","gutterBottom","Slider","valueLabelDisplay","VIEW_CONFIG_SCHEMA","additionalProperties","nodeSize","nodeColor","DEFAULT_HISTORY_DATA_ITEM","EVENT_TYPE","createHistory","record","history","newHistoryRecord","undo","do","undoAll","relatedItems","undoList","doList","redoAll","deleted","getEventIdsByDoItemIds","doItems","doItem","reorder","getId","sidebarItem","selectedPath","join","MOCK_COMPONENTS","General","Visualization","textColor","History","closeAllBars","useController","useControllerData","_graphEditorRef","controllerConfig","DEFAULT_CONTROLLER_CONFIG","localGraphEditorRef","recordedEvents","updater","dataItem","addHistory","oldSelectedElementIds","relatedEdges","edgeItem","edgeItems","oldLayout","positions","metaKey","getUndoEvents","eventRelatedItem","targetDataList","concat","nodeItem","TARGET_SIZE","centerPoint","neighborhood","snapZoom","forceStart","removeOnComplete","removeOnInterrupt","previousDataList","previousData","pop","valueIndex","getValueByType","splice","temporary","changeIndex","additional","additionalItem","eventHistoryData","download","GraphLayouts","positionItem","selectedClusters","selectedCluster","ElementSettings","console","log","sidebar_","normalize","componentId","dataRenderPath","Component","isReact","compatible","convertJSONStringFields","getQueryBuilderSchema","DataSources","uniqueItems","enumNames","Eclis","Keywords","Articles","Instances","Domains","Doctypes","DegreesSources","DegreesTargets","transformData","QueryBuilder","onStart","onError","query","casesData","variables","caseResults","API","graphql","queryNetworkByUserInput","statistics","message","err","HelpModal","videoId","frameBorder","allow","allowFullScreen","ACTIONS","MUIDarkTheme","createMuiTheme","MUILightTheme","edgeSize","toJSONSchema","objects","arrays","DataBarHeader","AppContainer","changeMUITheme","dispatch","alertRef","configRef","visualization","fetching","year","instances","domains","doctypes","degreesSources","popup","liPermission","keywords","degreesTargets","eclis","articles","filtering","indegree","outdegree","FILTER_SCHEMA","getFilterSchema","FETCH_SCHEMA","onPopupPress","getFetchSchema","queryBuilder","THEMES","Dark","Default","helpModal","ActionBarRight","controllerProps","opened","elementData","clusterItemIds","AlertContent","messageInfo","setMessageInfo","handleClose","reason","TransitionUp","handleExited","Snackbar","autoHideDuration","TransitionComponent","Alert","severity","AlertTitle","MUI_THEMES","Light","setTheme","createTheme","use","d3Force","useMeasure"],"mappings":"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","file":"static/js/app.bae3d2c6.chunk.js","sourcesContent":["import { createProvider } from 'colay-ui'\nimport * as C from  'colay/color'\n// export const DefaultTheme = {\n//   palette: {\n//     common: {\n//       black: '#000',\n//       white: '#fff',\n//     },\n//     // mode: 'light',\n//     primary: {\n//       light: '#7986cb',\n//       main: '#3f51b5',\n//       dark: '#303f9f',\n//       contrastText: '#fff',\n//     },\n//     secondary: {\n//       light: '#ff4081',\n//       main: '#f50057',\n//       dark: '#c51162',\n//       contrastText: '#fff',\n//     },\n//     error: {\n//       light: '#e57373',\n//       main: '#f44336',\n//       dark: '#d32f2f',\n//       contrastText: '#fff',\n//     },\n//     warning: {\n//       light: '#ffb74d',\n//       main: '#ff9800',\n//       dark: '#f57c00',\n//       contrastText: 'rgba(0, 0, 0, 0.87)',\n//     },\n//     info: {\n//       light: '#64b5f6',\n//       main: '#2196f3',\n//       dark: '#1976d2',\n//       contrastText: '#fff',\n//     },\n//     success: {\n//       light: '#81c784',\n//       main: '#4caf50',\n//       dark: '#388e3c',\n//       contrastText: 'rgba(0, 0, 0, 0.87)',\n//     },\n//     grey: {\n//       50: '#fafafa',\n//       100: '#f5f5f5',\n//       200: '#eeeeee',\n//       300: '#e0e0e0',\n//       400: '#bdbdbd',\n//       500: '#9e9e9e',\n//       600: '#757575',\n//       700: '#616161',\n//       800: '#424242',\n//       900: '#212121',\n//       A100: '#d5d5d5',\n//       A200: '#aaaaaa',\n//       A400: '#303030',\n//       A700: '#616161',\n//     },\n//     // contrastThreshold: 3,\n//     // tonalOffset: 0.2,\n//     text: {\n//       primary: 'rgba(0, 0, 0, 0.87)',\n//       secondary: 'rgba(0, 0, 0, 0.54)',\n//       disabled: 'rgba(0, 0, 0, 0.38)',\n//     },\n//     divider: 'rgba(0, 0, 0, 0.12)',\n//     background: {\n//       paper: 'rgb(153, 153, 153)',\n//       default: '#fafafa',\n//     },\n//     action: {\n//       active: 'rgba(0, 0, 0, 0.54)',\n//       hover: 'rgba(0, 0, 0, 0.04)',\n//       // hoverOpacity: 0.04,\n//       selected: 'rgba(0, 0, 0, 0.08)',\n//       // selectedOpacity: 0.08,\n//       disabled: 'rgba(0, 0, 0, 0.26)',\n//       disabledBackground: 'rgba(0, 0, 0, 0.12)',\n//       // disabledOpacity: 0.38,\n//       focus: 'rgba(0, 0, 0, 0.12)',\n//       // focusOpacity: 0.12,\n//       // activatedOpacity: 0.12,\n//     },\n//   },\n// }\n\n// export const DarkTheme = {\n//   palette: {\n//     common: {\n//       black: '#000',\n//       white: '#fff',\n//     },\n//     // mode: 'dark',\n//     primary: {\n//       light: '#7986cb',\n//       main: '#3f51b5',\n//       dark: '#303f9f',\n//       contrastText: '#fff',\n//     },\n//     secondary: {\n//       light: '#ff4081',\n//       main: '#f50057',\n//       dark: '#c51162',\n//       contrastText: '#fff',\n//     },\n//     error: {\n//       light: '#e57373',\n//       main: '#f44336',\n//       dark: '#d32f2f',\n//       contrastText: '#fff',\n//     },\n//     warning: {\n//       light: '#ffb74d',\n//       main: '#ff9800',\n//       dark: '#f57c00',\n//       contrastText: 'rgba(0, 0, 0, 0.87)',\n//     },\n//     info: {\n//       light: '#64b5f6',\n//       main: '#2196f3',\n//       dark: '#1976d2',\n//       contrastText: '#fff',\n//     },\n//     success: {\n//       light: '#81c784',\n//       main: '#4caf50',\n//       dark: '#388e3c',\n//       contrastText: 'rgba(0, 0, 0, 0.87)',\n//     },\n//     grey: {\n//       50: '#fafafa',\n//       100: '#f5f5f5',\n//       200: '#eeeeee',\n//       300: '#e0e0e0',\n//       400: '#bdbdbd',\n//       500: '#9e9e9e',\n//       600: '#757575',\n//       700: '#616161',\n//       800: '#424242',\n//       900: '#212121',\n//       A100: '#d5d5d5',\n//       A200: '#aaaaaa',\n//       A400: '#303030',\n//       A700: '#616161',\n//     },\n//     // contrastThreshold: 3,\n//     // tonalOffset: 0.2,\n//     text: {\n//       primary: '#fff',\n//       secondary: 'rgba(255, 255, 255, 0.7)',\n//       disabled: 'rgba(255, 255, 255, 0.5)',\n//       icon: 'rgba(255, 255, 255, 0.5)',\n//     },\n//     divider: 'rgba(255, 255, 255, 0.12)',\n//     background: {\n//       paper: '#808080', // #424242\n//       default: '#303030',\n//     },\n//     action: {\n//       active: '#fff',\n//       hover: 'rgba(255, 255, 255, 0.08)',\n//       // hoverOpacity: 0.08,\n//       selected: 'rgba(255, 255, 255, 0.16)',\n//       // selectedOpacity: 0.16,\n//       disabled: 'rgba(255, 255, 255, 0.3)',\n//       disabledBackground: 'rgba(255, 255, 255, 0.12)',\n//       // disabledOpacity: 0.38,\n//       focus: 'rgba(255, 255, 255, 0.12)',\n//       // focusOpacity: 0.12,\n//       // activatedOpacity: 0.24,\n//     },\n//   },\n// }\n\n// const write = (colors) => {\n//   const newColors = {\n//     palette: {\n\n//     },\n//   }\n//   Object.keys(colors.palette).forEach((menu) => {\n//     newColors.palette[menu] = {}\n//     if (typeof colors.palette[menu] === 'string'){\n//       newColors.palette[menu] = C.rgbNumber(colors.palette[menu])\n//     } else { \n//       Object.keys(colors.palette[menu]).forEach((colorName) => {\n//         console.log(menu, colorName,colors.palette[menu][colorName])\n//         newColors.palette[menu][colorName] = C.rgbNumber(colors.palette[menu][colorName])\n//       })\n//     }\n//   })\n//   return newColors\n// }\n// console.log(write(DefaultTheme))\n// console.log(write(DarkTheme))\n\nexport const DarkTheme = {\n  'palette': {\n    'common': {\n      'black': 0,\n      'white': 16777215,\n    },\n    'primary': {\n      'light': 7964363,\n      'main': 4149685,\n      'dark': 3162015,\n      'contrastText': 16777215,\n    },\n    'secondary': {\n      'light': 16728193,\n      'main': 16056407,\n      'dark': 12915042,\n      'contrastText': 16777215,\n    },\n    'error': {\n      'light': 15037299,\n      'main': 16007990,\n      'dark': 13840175,\n      'contrastText': 16777215,\n    },\n    'warning': {\n      'light': 16758605,\n      'main': 16750592,\n      'dark': 16088064,\n      'contrastText': 0,\n    },\n    'info': {\n      'light': 6600182,\n      'main': 2201331,\n      'dark': 1668818,\n      'contrastText': 16777215,\n    },\n    'success': {\n      'light': 8505220,\n      'main': 5025616,\n      'dark': 3706428,\n      'contrastText': 0,\n    },\n    'grey': {\n      '50': 16448250,\n      '100': 16119285,\n      '200': 15658734,\n      '300': 14737632,\n      '400': 12434877,\n      '500': 10395294,\n      '600': 7697781,\n      '700': 6381921,\n      '800': 4342338,\n      '900': 2171169,\n      'A100': 14013909,\n      'A200': 11184810,\n      'A400': 3158064,\n      'A700': 6381921,\n    },\n    'text': {\n      'primary': 16777215,\n      'secondary': 16777215,\n      'disabled': 16777215,\n      'icon': 16777215,\n    },\n    'divider': 16777215,\n    'background': {\n      'paper': 8421504,\n      'default': 3158064,\n    },\n    'action': {\n      'active': 16777215,\n      'hover': 16777215,\n      'selected': 16777215,\n      'disabled': 16777215,\n      'disabledBackground': 16777215,\n      'focus': 16777215,\n    },\n  },\n}\n\nexport const DefaultTheme = {\n  'palette': {\n    'common': {\n      'black': 0,\n      'white': 16777215,\n    },\n    'primary': {\n      'light': 7964363,\n      'main': 4149685,\n      'dark': 3162015,\n      'contrastText': 16777215,\n    },\n    'secondary': {\n      'light': 16728193,\n      'main': 16056407,\n      'dark': 12915042,\n      'contrastText': 16777215,\n    },\n    'error': {\n      'light': 15037299,\n      'main': 16007990,\n      'dark': 13840175,\n      'contrastText': 16777215,\n    },\n    'warning': {\n      'light': 16758605,\n      'main': 16750592,\n      'dark': 16088064,\n      'contrastText': 0,\n    },\n    'info': {\n      'light': 6600182,\n      'main': 2201331,\n      'dark': 1668818,\n      'contrastText': 16777215,\n    },\n    'success': {\n      'light': 8505220,\n      'main': 5025616,\n      'dark': 3706428,\n      'contrastText': 0,\n    },\n    'grey': {\n      '50': 16448250,\n      '100': 16119285,\n      '200': 15658734,\n      '300': 14737632,\n      '400': 12434877,\n      '500': 10395294,\n      '600': 7697781,\n      '700': 6381921,\n      '800': 4342338,\n      '900': 2171169,\n      'A100': 14013909,\n      'A200': 11184810,\n      'A400': 3158064,\n      'A700': 6381921,\n    },\n    'text': {\n      'primary': 0,\n      'secondary': 0,\n      'disabled': 0,\n    },\n    'divider': 0,\n    'background': {\n      'paper': 10066329,\n      'default': 16448250,\n    },\n    'action': {\n      'active': 0,\n      'hover': 0,\n      'selected': 0,\n      'disabled': 0,\n      'disabledBackground': 0,\n      'focus': 0,\n    },\n  },\n}\nconst {\n  Context,\n  Provider,\n  useProvider,\n} = createProvider({\n  value: DefaultTheme,\n})\n\nexport const ThemeContext = Context\nexport const ThemeProvider = Provider\nexport const useTheme = () => {\n  const [value] = useProvider()\n  return value\n}\n\nexport type Theme = typeof DefaultTheme\n\nexport type ThemeProps = {\n  theme: Theme\n}\n// {\n//   \"breakpoints\": {\n//     \"keys\": [\n//       \"xs\",\n//       \"sm\",\n//       \"md\",\n//       \"lg\",\n//       \"xl\"\n//     ],\n//     \"values\": {\n//       \"xs\": 0,\n//       \"sm\": 600,\n//       \"md\": 960,\n//       \"lg\": 1280,\n//       \"xl\": 1920\n//     },\n//     \"unit\": \"px\"\n//   },\n//   \"direction\": \"ltr\",\n//   \"mixins\": {\n//     \"toolbar\": {\n//       \"minHeight\": 56,\n//       \"@media (min-width:0px) and (orientation: landscape)\": {\n//         \"minHeight\": 48\n//       },\n//       \"@media (min-width:600px)\": {\n//         \"minHeight\": 64\n//       }\n//     }\n//   },\n//   \"components\": {},\n//   \"palette\": {\n//     \"common\": {\n//       \"black\": \"#000\",\n//       \"white\": \"#fff\"\n//     },\n//     \"mode\": \"light\",\n//     \"primary\": {\n//       \"light\": \"#7986cb\",\n//       \"main\": \"#3f51b5\",\n//       \"dark\": \"#303f9f\",\n//       \"contrastText\": \"#fff\"\n//     },\n//     \"secondary\": {\n//       \"light\": \"#ff4081\",\n//       \"main\": \"#f50057\",\n//       \"dark\": \"#c51162\",\n//       \"contrastText\": \"#fff\"\n//     },\n//     \"error\": {\n//       \"light\": \"#e57373\",\n//       \"main\": \"#f44336\",\n//       \"dark\": \"#d32f2f\",\n//       \"contrastText\": \"#fff\"\n//     },\n//     \"warning\": {\n//       \"light\": \"#ffb74d\",\n//       \"main\": \"#ff9800\",\n//       \"dark\": \"#f57c00\",\n//       \"contrastText\": \"rgba(0, 0, 0, 0.87)\"\n//     },\n//     \"info\": {\n//       \"light\": \"#64b5f6\",\n//       \"main\": \"#2196f3\",\n//       \"dark\": \"#1976d2\",\n//       \"contrastText\": \"#fff\"\n//     },\n//     \"success\": {\n//       \"light\": \"#81c784\",\n//       \"main\": \"#4caf50\",\n//       \"dark\": \"#388e3c\",\n//       \"contrastText\": \"rgba(0, 0, 0, 0.87)\"\n//     },\n//     \"grey\": {\n//       \"50\": \"#fafafa\",\n//       \"100\": \"#f5f5f5\",\n//       \"200\": \"#eeeeee\",\n//       \"300\": \"#e0e0e0\",\n//       \"400\": \"#bdbdbd\",\n//       \"500\": \"#9e9e9e\",\n//       \"600\": \"#757575\",\n//       \"700\": \"#616161\",\n//       \"800\": \"#424242\",\n//       \"900\": \"#212121\",\n//       \"A100\": \"#d5d5d5\",\n//       \"A200\": \"#aaaaaa\",\n//       \"A400\": \"#303030\",\n//       \"A700\": \"#616161\"\n//     },\n//     \"contrastThreshold\": 3,\n//     \"tonalOffset\": 0.2,\n//     \"text\": {\n//       \"primary\": \"rgba(0, 0, 0, 0.87)\",\n//       \"secondary\": \"rgba(0, 0, 0, 0.54)\",\n//       \"disabled\": \"rgba(0, 0, 0, 0.38)\"\n//     },\n//     \"divider\": \"rgba(0, 0, 0, 0.12)\",\n//     \"background\": {\n//       \"paper\": \"#fff\",\n//       \"default\": \"#fafafa\"\n//     },\n//     \"action\": {\n//       \"active\": \"rgba(0, 0, 0, 0.54)\",\n//       \"hover\": \"rgba(0, 0, 0, 0.04)\",\n//       \"hoverOpacity\": 0.04,\n//       \"selected\": \"rgba(0, 0, 0, 0.08)\",\n//       \"selectedOpacity\": 0.08,\n//       \"disabled\": \"rgba(0, 0, 0, 0.26)\",\n//       \"disabledBackground\": \"rgba(0, 0, 0, 0.12)\",\n//       \"disabledOpacity\": 0.38,\n//       \"focus\": \"rgba(0, 0, 0, 0.12)\",\n//       \"focusOpacity\": 0.12,\n//       \"activatedOpacity\": 0.12\n//     }\n//   },\n//   \"shadows\": [\n//     \"none\",\n//     \"0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12)\",\n//     \"0px 3px 1px -2px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 1px 5px 0px rgba(0,0,0,0.12)\",\n//     \"0px 3px 3px -2px rgba(0,0,0,0.2),0px 3px 4px 0px rgba(0,0,0,0.14),0px 1px 8px 0px rgba(0,0,0,0.12)\",\n//     \"0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12)\",\n//     \"0px 3px 5px -1px rgba(0,0,0,0.2),0px 5px 8px 0px rgba(0,0,0,0.14),0px 1px 14px 0px rgba(0,0,0,0.12)\",\n//     \"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)\",\n//     \"0px 4px 5px -2px rgba(0,0,0,0.2),0px 7px 10px 1px rgba(0,0,0,0.14),0px 2px 16px 1px rgba(0,0,0,0.12)\",\n//     \"0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12)\",\n//     \"0px 5px 6px -3px rgba(0,0,0,0.2),0px 9px 12px 1px rgba(0,0,0,0.14),0px 3px 16px 2px rgba(0,0,0,0.12)\",\n//     \"0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12)\",\n//     \"0px 6px 7px -4px rgba(0,0,0,0.2),0px 11px 15px 1px rgba(0,0,0,0.14),0px 4px 20px 3px rgba(0,0,0,0.12)\",\n//     \"0px 7px 8px -4px rgba(0,0,0,0.2),0px 12px 17px 2px rgba(0,0,0,0.14),0px 5px 22px 4px rgba(0,0,0,0.12)\",\n//     \"0px 7px 8px -4px rgba(0,0,0,0.2),0px 13px 19px 2px rgba(0,0,0,0.14),0px 5px 24px 4px rgba(0,0,0,0.12)\",\n//     \"0px 7px 9px -4px rgba(0,0,0,0.2),0px 14px 21px 2px rgba(0,0,0,0.14),0px 5px 26px 4px rgba(0,0,0,0.12)\",\n//     \"0px 8px 9px -5px rgba(0,0,0,0.2),0px 15px 22px 2px rgba(0,0,0,0.14),0px 6px 28px 5px rgba(0,0,0,0.12)\",\n//     \"0px 8px 10px -5px rgba(0,0,0,0.2),0px 16px 24px 2px rgba(0,0,0,0.14),0px 6px 30px 5px rgba(0,0,0,0.12)\",\n//     \"0px 8px 11px -5px rgba(0,0,0,0.2),0px 17px 26px 2px rgba(0,0,0,0.14),0px 6px 32px 5px rgba(0,0,0,0.12)\",\n//     \"0px 9px 11px -5px rgba(0,0,0,0.2),0px 18px 28px 2px rgba(0,0,0,0.14),0px 7px 34px 6px rgba(0,0,0,0.12)\",\n//     \"0px 9px 12px -6px rgba(0,0,0,0.2),0px 19px 29px 2px rgba(0,0,0,0.14),0px 7px 36px 6px rgba(0,0,0,0.12)\",\n//     \"0px 10px 13px -6px rgba(0,0,0,0.2),0px 20px 31px 3px rgba(0,0,0,0.14),0px 8px 38px 7px rgba(0,0,0,0.12)\",\n//     \"0px 10px 13px -6px rgba(0,0,0,0.2),0px 21px 33px 3px rgba(0,0,0,0.14),0px 8px 40px 7px rgba(0,0,0,0.12)\",\n//     \"0px 10px 14px -6px rgba(0,0,0,0.2),0px 22px 35px 3px rgba(0,0,0,0.14),0px 8px 42px 7px rgba(0,0,0,0.12)\",\n//     \"0px 11px 14px -7px rgba(0,0,0,0.2),0px 23px 36px 3px rgba(0,0,0,0.14),0px 9px 44px 8px rgba(0,0,0,0.12)\",\n//     \"0px 11px 15px -7px rgba(0,0,0,0.2),0px 24px 38px 3px rgba(0,0,0,0.14),0px 9px 46px 8px rgba(0,0,0,0.12)\"\n//   ],\n//   \"typography\": {\n//     \"htmlFontSize\": 16,\n//     \"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n//     \"fontSize\": 14,\n//     \"fontWeightLight\": 300,\n//     \"fontWeightRegular\": 400,\n//     \"fontWeightMedium\": 500,\n//     \"fontWeightBold\": 700,\n//     \"h1\": {\n//       \"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n//       \"fontWeight\": 300,\n//       \"fontSize\": \"6rem\",\n//       \"lineHeight\": 1.167,\n//       \"letterSpacing\": \"-0.01562em\"\n//     },\n//     \"h2\": {\n//       \"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n//       \"fontWeight\": 300,\n//       \"fontSize\": \"3.75rem\",\n//       \"lineHeight\": 1.2,\n//       \"letterSpacing\": \"-0.00833em\"\n//     },\n//     \"h3\": {\n//       \"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n//       \"fontWeight\": 400,\n//       \"fontSize\": \"3rem\",\n//       \"lineHeight\": 1.167,\n//       \"letterSpacing\": \"0em\"\n//     },\n//     \"h4\": {\n//       \"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n//       \"fontWeight\": 400,\n//       \"fontSize\": \"2.125rem\",\n//       \"lineHeight\": 1.235,\n//       \"letterSpacing\": \"0.00735em\"\n//     },\n//     \"h5\": {\n//       \"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n//       \"fontWeight\": 400,\n//       \"fontSize\": \"1.5rem\",\n//       \"lineHeight\": 1.334,\n//       \"letterSpacing\": \"0em\"\n//     },\n//     \"h6\": {\n//       \"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n//       \"fontWeight\": 500,\n//       \"fontSize\": \"1.25rem\",\n//       \"lineHeight\": 1.6,\n//       \"letterSpacing\": \"0.0075em\"\n//     },\n//     \"subtitle1\": {\n//       \"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n//       \"fontWeight\": 400,\n//       \"fontSize\": \"1rem\",\n//       \"lineHeight\": 1.75,\n//       \"letterSpacing\": \"0.00938em\"\n//     },\n//     \"subtitle2\": {\n//       \"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n//       \"fontWeight\": 500,\n//       \"fontSize\": \"0.875rem\",\n//       \"lineHeight\": 1.57,\n//       \"letterSpacing\": \"0.00714em\"\n//     },\n//     \"body1\": {\n//       \"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n//       \"fontWeight\": 400,\n//       \"fontSize\": \"1rem\",\n//       \"lineHeight\": 1.5,\n//       \"letterSpacing\": \"0.00938em\"\n//     },\n//     \"body2\": {\n//       \"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n//       \"fontWeight\": 400,\n//       \"fontSize\": \"0.875rem\",\n//       \"lineHeight\": 1.43,\n//       \"letterSpacing\": \"0.01071em\"\n//     },\n//     \"button\": {\n//       \"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n//       \"fontWeight\": 500,\n//       \"fontSize\": \"0.875rem\",\n//       \"lineHeight\": 1.75,\n//       \"letterSpacing\": \"0.02857em\",\n//       \"textTransform\": \"uppercase\"\n//     },\n//     \"caption\": {\n//       \"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n//       \"fontWeight\": 400,\n//       \"fontSize\": \"0.75rem\",\n//       \"lineHeight\": 1.66,\n//       \"letterSpacing\": \"0.03333em\"\n//     },\n//     \"overline\": {\n//       \"fontFamily\": \"\\\"Roboto\\\", \\\"Helvetica\\\", \\\"Arial\\\", sans-serif\",\n//       \"fontWeight\": 400,\n//       \"fontSize\": \"0.75rem\",\n//       \"lineHeight\": 2.66,\n//       \"letterSpacing\": \"0.08333em\",\n//       \"textTransform\": \"uppercase\"\n//     }\n//   },\n//   \"shape\": {\n//     \"borderRadius\": 4\n//   },\n//   \"transitions\": {\n//     \"duration\": {\n//       \"shortest\": 150,\n//       \"shorter\": 200,\n//       \"short\": 250,\n//       \"standard\": 300,\n//       \"complex\": 375,\n//       \"enteringScreen\": 225,\n//       \"leavingScreen\": 195\n//     },\n//     \"easing\": {\n//       \"easeInOut\": \"cubic-bezier(0.4, 0, 0.2, 1)\",\n//       \"easeOut\": \"cubic-bezier(0.0, 0, 0.2, 1)\",\n//       \"easeIn\": \"cubic-bezier(0.4, 0, 1, 1)\",\n//       \"sharp\": \"cubic-bezier(0.4, 0, 0.6, 1)\"\n//     }\n//   },\n//   \"zIndex\": {\n//     \"mobileStepper\": 1000,\n//     \"speedDial\": 1050,\n//     \"appBar\": 1100,\n//     \"drawer\": 1200,\n//     \"modal\": 1300,\n//     \"snackbar\": 1400,\n//     \"tooltip\": 1500\n//   }\n// }\n","export const animationOptions = {\n  // // Whether to animate while running the layout\n  // // true : Animate continuously as the layout is running\n  // // false : Just show the end result\n  // // 'end' : Animate with the end result, from the initial positions to the end positions\n  animate: 'end',\n\n  // // Easing of the animation for animate:'end'\n  animationEasing: 'linear',\n\n  // // The duration of the animation for animate:'end'\n  animationDuration: 1000,\n\n  // // A function that determines whether the node should be animated\n  // // All nodes animated by default on animate enabled\n  // // Non-animated nodes are positioned immediately when the layout starts\n  // animateFilter: (node, i) => true,\n  animateFilter: () => true,\n\n  // // The layout animates only after this many milliseconds for animate:true\n  // // (prevents flashing on fast runs)\n  animationThreshold: 250,\n\n} as const\n","// @ts-nocheck\nimport { animationOptions } from '../animation'\n\nexport default {\n  cose: {\n    name: 'cose',\n\n    // // Called on `layoutready`\n    ready() {},\n\n    // // Called on `layoutstop`\n    stop() {},\n\n    // // Number of iterations between consecutive screen positions update\n    refresh: 20,\n\n    // // Whether to fit the network view after when done\n    fit: true,\n\n    // // Padding on fit\n    padding: 30,\n\n    // // Constrain layout bounds; { x1, y1, x2, y2 } or { x1, y1, w, h }\n    // boundingBox: undefined,\n\n    // // Excludes the label when calculating node bounding boxes for the layout algorithm\n    nodeDimensionsIncludeLabels: false,\n\n    // // Randomize the initial positions of the nodes (true) or use existing positions (false)\n    randomize: false,\n\n    // // Extra spacing between components in non-compound graphs\n    componentSpacing: 40,\n\n    // // Node repulsion (non overlapping) multiplier\n    nodeRepulsion: (node) => 2048,\n\n    // // Node repulsion (overlapping) multiplier\n    nodeOverlap: 4,\n\n    // // Ideal edge (non nested) length\n    idealEdgeLength: (edge) => 32,\n\n    // Divisor to compute edge forces\n    edgeElasticity: (edge) => 32,\n\n    // Nesting factor (multiplier) to compute ideal edge length for nested edges\n    nestingFactor: 1.2,\n\n    // Gravity force (constant)\n    gravity: 1,\n\n    // Maximum number of iterations to perform\n    numIter: 1000,\n\n    // Initial temperature (maximum node displacement)\n    initialTemp: 1000,\n\n    // Cooling factor (how the temperature is reduced between consecutive iterations\n    coolingFactor: 0.99,\n\n    // Lower temperature threshold (below this point the layout will end)\n    minTemp: 1.0,\n    ...animationOptions,\n  },\n  breadthfirst: {\n    name: 'breadthfirst',\n\n    fit: true, // whether to fit the viewport to the graph\n    directed: false, // whether the tree is directed downwards (or edges can point in any direction if false)\n    padding: 30, // padding on fit\n    circle: false, // put depths in concentric circles if true, put depths top down if false\n    grid: false, // whether to create an even grid into which the DAG is placed (circle:false only)\n    spacingFactor: 1.75, // positive spacing factor, larger => more space between nodes (N.B. n/a if causes overlap)\n    // boundingBox: undefined, // constrain layout bounds; { x1, y1, x2, y2 } or { x1, y1, w, h }\n    avoidOverlap: true, // prevents node overlap, may overflow boundingBox if not enough space\n    nodeDimensionsIncludeLabels: false, // Excludes the label when calculating node bounding boxes for the layout algorithm\n    roots: undefined, // the roots of the trees\n    maximal: false, // whether to shift nodes down their natural BFS depths in order to avoid upwards edges (DAGS only)\n    ready: undefined, // callback on layoutready\n    stop: undefined, // callback on layoutstop\n    transform: (node, position) => position, // transform a given node position. Useful for changing flow direction in discrete layouts,\n    ...animationOptions,\n\n  },\n  concentric: {\n    name: 'concentric',\n\n    fit: true, // whether to fit the viewport to the graph\n    padding: 30, // the padding on fit\n    startAngle: 3 / 2 * Math.PI, // where nodes start in radians\n    sweep: undefined, // how many radians should be between the first and last node (defaults to full circle)\n    clockwise: true, // whether the layout should go clockwise (true) or counterclockwise/anticlockwise (false)\n    equidistant: false, // whether levels have an equal radial distance betwen them, may cause bounding box overflow\n    minNodeSpacing: 10, // min spacing between outside of nodes (used for radius adjustment)\n    // boundingBox: undefined, // constrain layout bounds; { x1, y1, x2, y2 } or { x1, y1, w, h }\n    avoidOverlap: true, // prevents node overlap, may overflow boundingBox if not enough space\n    nodeDimensionsIncludeLabels: false, // Excludes the label when calculating node bounding boxes for the layout algorithm\n    height: undefined, // height of layout area (overrides container height)\n    width: undefined, // width of layout area (overrides container width)\n    spacingFactor: undefined, // Applies a multiplicative factor (>0) to expand or compress the overall area that the nodes take up\n    concentric: (node) => // returns numeric value for each node, placing higher nodes in levels towards the centre\n      node.degree(),\n    levelWidth: (nodes) => // the letiation of concentric values in each level\n      nodes.maxDegree() / 4,\n    ready: undefined, // callback on layoutready\n    stop: undefined, // callback on layoutstop\n    transform: (node, position) => position, // transform a given node position. Useful for changing flow direction in discrete layouts\n    ...animationOptions,\n  },\n  circle: {\n    name: 'circle',\n\n    fit: true, // whether to fit the viewport to the graph\n    padding: 30, // the padding on fit\n    // boundingBox: undefined, // constrain layout bounds; { x1, y1, x2, y2 } or { x1, y1, w, h }\n    avoidOverlap: true, // prevents node overlap, may overflow boundingBox and radius if not enough space\n    nodeDimensionsIncludeLabels: false, // Excludes the label when calculating node bounding boxes for the layout algorithm\n    spacingFactor: undefined, // Applies a multiplicative factor (>0) to expand or compress the overall area that the nodes take up\n    radius: undefined, // the radius of the circle\n    startAngle: 3 / 2 * Math.PI, // where nodes start in radians\n    sweep: undefined, // how many radians should be between the first and last node (defaults to full circle)\n    clockwise: true, // whether the layout should go clockwise (true) or counterclockwise/anticlockwise (false)\n    sort: undefined, // a sorting function to order the nodes; e.g. function(a, b){ return a.data('weight') - b.data('weight') }\n    ready: undefined, // callback on layoutready\n    stop: undefined, // callback on layoutstop\n    transform: (node, position) => position, // transform a given node position. Useful for changing flow direction in discrete layouts,\n    ...animationOptions,\n  },\n  grid: {\n    name: 'grid',\n\n    fit: true, // whether to fit the viewport to the graph\n    padding: 30, // padding used on fit\n    // boundingBox: undefined, // constrain layout bounds; { x1, y1, x2, y2 } or { x1, y1, w, h }\n    avoidOverlap: true, // prevents node overlap, may overflow boundingBox if not enough space\n    avoidOverlapPadding: 10, // extra spacing around nodes when avoidOverlap: true\n    nodeDimensionsIncludeLabels: false, // Excludes the label when calculating node bounding boxes for the layout algorithm\n    spacingFactor: undefined, // Applies a multiplicative factor (>0) to expand or compress the overall area that the nodes take up\n    condense: false, // uses all available space on false, uses minimal space on true\n    rows: undefined, // force num of rows in the grid\n    cols: undefined, // force num of columns in the grid\n    position: (node) => {}, // returns { row, col } for element\n    sort: undefined, // a sorting function to order the nodes; e.g. function(a, b){ return a.data('weight') - b.data('weight') }\n    ready: undefined, // callback on layoutready\n    stop: undefined, // callback on layoutstop\n    transform: (node, position) => position, // transform a given node position. Useful for changing flow direction in discrete layouts\n    ...animationOptions,\n  },\n  // preset: {\n  //   name: 'preset',\n\n  //   positions: undefined, // map of (node id) => (position obj); or function(node){ return somPos; }\n  //   zoom: undefined, // the zoom level to set (prob want fit = false if set)\n  //   pan: undefined, // the pan level to set (prob want fit = false if set)\n  //   fit: true, // whether to fit to viewport\n  //   padding: 30, // padding on fit\n  //   animate: false, // whether to transition the node positions\n  //   animationDuration: 500, // duration of animation in ms if enabled\n  //   animationEasing: undefined, // easing of animation if enabled\n  //   animateFilter: (node, i) => true, // a function that determines whether the node should be animated.  All nodes animated by default on animate enabled.  Non-animated nodes are positioned immediately when the layout starts\n  //   ready: undefined, // callback on layoutready\n  //   stop: undefined, // callback on layoutstop\n  //   transform: (node, position) => position, // transform a given node position. Useful for changing flow direction in discrete layouts\n  // },\n  random: {\n    name: 'random',\n\n    fit: true, // whether to fit to viewport\n    padding: 30, // fit padding\n    // boundingBox: undefined, // constrain layout bounds; { x1, y1, x2, y2 } or { x1, y1, w, h }\n    ready: undefined, // callback on layoutready\n    stop: undefined, // callback on layoutstop\n    transform: (node, position) => position, // transform a given node position. Useful for changing flow direction in discrete layouts\n    ...animationOptions,\n  },\n  euler: {\n    name: 'euler',\n\n    // The ideal length of a spring\n    // - This acts as a hint for the edge length\n    // - The edge length can be longer or shorter if the forces are set to extreme values\n    // springLength: (edge) => 80,\n    springLength: (edge) => 400,\n\n    // Hooke's law coefficient\n    // - The value ranges on [0, 1]\n    // - Lower values give looser springs\n    // - Higher values give tighter springs\n    springCoeff: (edge) => 0.0008,\n\n    // The mass of the node in the physics simulation\n    // - The mass affects the gravity node repulsion/attraction\n    // mass: (node) => 4,\n    mass: (node) => 40,\n\n    // Coulomb's law coefficient\n    // - Makes the nodes repel each other for negative values\n    // - Makes the nodes attract each other for positive values\n    gravity: -1.2,\n\n    // A force that pulls nodes towards the origin (0, 0)\n    // Higher values keep the components less spread out\n    pull: 0.001,\n\n    // Theta coefficient from Barnes-Hut simulation\n    // - Value ranges on [0, 1]\n    // - Performance is better with smaller values\n    // - Very small values may not create enough force to give a good result\n    theta: 0.666,\n\n    // Friction / drag coefficient to make the system stabilise over time\n    dragCoeff: 0.02,\n\n    // When the total of the squared position deltas is less than this value, the simulation ends\n    movementThreshold: 1,\n\n    // The amount of time passed per tick\n    // - Larger values result in faster runtimes but might spread things out too far\n    // - Smaller values produce more accurate results\n    timeStep: 20,\n\n    // The number of ticks per frame for animate:true\n    // - A larger value reduces rendering cost but can be jerky\n    // - A smaller value increases rendering cost but is smoother\n    refresh: 10,\n\n    // Maximum iterations and time (in ms) before the layout will bail out\n    // - A large value may allow for a better result\n    // - A small value may make the layout end prematurely\n    // - The layout may stop before this if it has settled\n    maxIterations: 1000,\n    // maxSimulationTime: 4000,\n\n    // Prevent the user grabbing nodes during the layout (usually with animate:true)\n    ungrabifyWhileSimulating: false,\n\n    // Whether to fit the viewport to the repositioned graph\n    // true : Fits at end of layout for animate:false or animate:'end'; fits on each frame for animate:true\n    // fit: true,\n\n    // Padding in rendered co-ordinates around the layout\n    padding: 30,\n\n    // Constrain layout bounds with one of\n    // - { x1, y1, x2, y2 }\n    // - { x1, y1, w, h }\n    // - undefined / null : Unconstrained\n    // boundingBox: undefined,\n    avoidOverlap: true,\n\n    // Layout event callbacks; equivalent to `layout.one('layoutready', callback)` for example\n    ready() {}, // on layoutready\n    stop() {}, // on layoutstop\n\n    // Whether to randomize the initial positions of the nodes\n    // true : Use random positions within the bounding box\n    // false : Use the current node positions as the initial positions\n    randomize: false,\n    ...animationOptions,\n  },\n  cise: {\n    name: 'cise',\n\n    // ClusterInfo can be a 2D array contaning node id's or a function that returns cluster ids.\n    // For the 2D array option, the index of the array indicates the cluster ID for all elements in\n    // the collection at that index. Unclustered nodes must NOT be present in this array of clusters.\n    //\n    // For the function, it would be given a Cytoscape node and it is expected to return a cluster id\n    // corresponding to that node. Returning negative numbers, null or undefined is fine for unclustered\n    // nodes.\n    // e.g\n    // Array:                                     OR          function(node){\n    //  [ ['n1','n2','n3'],                                       ...\n    //    ['n5','n6']                                         }\n    //    ['n7', 'n8', 'n9', 'n10'] ]\n    // clusters: clusterInfo,\n\n    // -------- Optional parameters --------\n    // Whether to animate the layout\n    // - true : Animate while the layout is running\n    // - false : Just show the end result\n    // - 'end' : Animate directly to the end result\n    animate: false,\n\n    // number of ticks per frame; higher is faster but more jerky\n    refresh: 10,\n\n    // Animation duration used for animate:'end'\n    animationDuration: undefined,\n\n    // Easing for animate:'end'\n    animationEasing: undefined,\n\n    // Whether to fit the viewport to the repositioned graph\n    // true : Fits at end of layout for animate:false or animate:'end'\n    fit: true,\n\n    // Padding in rendered co-ordinates around the layout\n    padding: 30,\n\n    // separation amount between nodes in a cluster\n    // note: increasing this amount will also increase the simulation time\n    nodeSeparation: 12.5,\n\n    // Inter-cluster edge length factor\n    // (2.0 means inter-cluster edges should be twice as long as intra-cluster edges)\n    idealInterClusterEdgeLengthCoefficient: 1.4,\n\n    // Whether to pull on-circle nodes inside of the circle\n    allowNodesInsideCircle: false,\n\n    // Max percentage of the nodes in a circle that can move inside the circle\n    maxRatioOfNodesInsideCircle: 0.1,\n\n    // - Lower values give looser springs\n    // - Higher values give tighter springs\n    springCoeff: 0.45,\n\n    // Node repulsion (non overlapping) multiplier\n    nodeRepulsion: 4500,\n\n    // Gravity force (constant)\n    gravity: 0.25,\n\n    // Gravity range (constant)\n    gravityRange: 3.8,\n\n    // Layout event callbacks; equivalent to `layout.one('layoutready', callback)` for example\n    ready() {}, // on layoutready\n    stop() {}, // on layoutstop\n    ...animationOptions,\n  },\n  cola: {\n    name: 'cola',\n    animate: true, // whether to show the layout as it's running\n    refresh: 1, // number of ticks per frame; higher is faster but more jerky\n    maxSimulationTime: 4000, // max length in ms to run the layout\n    ungrabifyWhileSimulating: false, // so you can't drag nodes during layout\n    fit: true, // on every layout reposition of nodes, fit the viewport\n    padding: 30, // padding around the simulation\n    // boundingBox: undefined, // constrain layout bounds; { x1, y1, x2, y2 } or { x1, y1, w, h }\n    nodeDimensionsIncludeLabels: false, // whether labels should be included in determining the space used by a node\n\n    // layout event callbacks\n    ready() {}, // on layoutready\n    stop() {}, // on layoutstop\n\n    // positioning options\n    randomize: false, // use random node positions at beginning of layout\n    avoidOverlap: true, // if true, prevents overlap of node bounding boxes\n    handleDisconnected: true, // if true, avoids disconnected components from overlapping\n    convergenceThreshold: 0.01, // when the alpha value (system energy) falls below this value, the layout stops\n    nodeSpacing(node) { return 10 }, // extra spacing around nodes\n    flow: undefined, // use DAG/tree flow layout if specified, e.g. { axis: 'y', minSeparation: 30 }\n    alignment: undefined, // relative alignment constraints on nodes, e.g. {vertical: [[{node: node1, offset: 0}, {node: node2, offset: 5}]], horizontal: [[{node: node3}, {node: node4}], [{node: node5}, {node: node6}]]}\n    gapInequalities: undefined, // list of inequality constraints for the gap between the nodes, e.g. [{\"axis\":\"y\", \"left\":node1, \"right\":node2, \"gap\":25}]\n\n    // different methods of specifying edge length\n    // each can be a constant numerical value or a function like `function( edge ){ return 2; }`\n    edgeLength: undefined, // sets edge length directly in simulation\n    edgeSymDiffLength: undefined, // symmetric diff edge length in simulation\n    edgeJaccardLength: undefined, // jaccard edge length in simulation\n\n    // iterations of cola algorithm; uses default values on undefined\n    unconstrIter: undefined, // unconstrained initial layout iterations\n    userConstIter: undefined, // initial layout iterations with user-specified constraints\n    allConstIter: undefined, // initial layout iterations with all constraints including non-overlap\n    ...animationOptions,\n  },\n  avsdf: {\n    name: 'avsdf',\n    ready() {\n    },\n    // Called on `layoutstop`\n    stop() {\n    },\n    // number of ticks per frame; higher is faster but more jerky\n    refresh: 30,\n    // Whether to fit the network view after when done\n    fit: true,\n    // Padding on fit\n    padding: 10,\n    // Prevent the user grabbing nodes during the layout (usually with animate:true)\n    ungrabifyWhileSimulating: false,\n    // Type of layout animation. The option set is {'during', 'end', false}\n    animate: 'end',\n    // Duration for animate:end\n    animationDuration: 500,\n    // How apart the nodes are\n    nodeSeparation: 60,\n    ...animationOptions,\n  },\n  dagre: {\n    name: 'dagre',\n    nodeSep: undefined, // the separation between adjacent nodes in the same rank\n    edgeSep: undefined, // the separation between adjacent edges in the same rank\n    rankSep: undefined, // the separation between each rank in the layout\n    rankDir: undefined, // 'TB' for top to bottom flow, 'LR' for left to right,\n    ranker: undefined, // Type of algorithm to assign a rank to each node in the input graph. Possible values: 'network-simplex', 'tight-tree' or 'longest-path'\n    minLen(edge) { return 1 }, // number of ranks to keep between the source and target of the edge\n    edgeWeight(edge) { return 1 }, // higher weight edges are generally made shorter and straighter than lower weight edges\n\n    // general layout options\n    fit: true, // whether to fit to viewport\n    padding: 30, // fit padding\n    spacingFactor: undefined, // Applies a multiplicative factor (>0) to expand or compress the overall area that the nodes take up\n    nodeDimensionsIncludeLabels: false, // whether labels should be included in determining the space used by a node\n    animate: false, // whether to transition the node positions\n    animateFilter(node, i) { return true }, // whether to animate specific nodes when animation is on; non-animated nodes immediately go to their final positions\n    animationDuration: 500, // duration of animation in ms if enabled\n    animationEasing: undefined, // easing of animation if enabled\n    // boundingBox: undefined, // constrain layout bounds; { x1, y1, x2, y2 } or { x1, y1, w, h }\n    transform(node, pos) { return pos }, // a function that applies a transform to the final node position\n    ready() {}, // on layoutready\n    stop() {}, // on layoutstop\n    ...animationOptions,\n  },\n  spread: {\n    name: 'spread',\n    animate: true, // Whether to show the layout as it's running\n    ready: undefined, // Callback on layoutready\n    stop: undefined, // Callback on layoutstop\n    fit: true, // Reset viewport to fit default simulationBounds\n    minDist: 20, // Minimum distance between nodes\n    padding: 20, // Padding\n    expandingFactor: -1.0, // If the network does not satisfy the minDist\n    // criterium then it expands the network of this amount\n    // If it is set to -1.0 the amount of expansion is automatically\n    // calculated based on the minDist, the aspect ratio and the\n    // number of nodes\n    prelayout: { name: 'cose' }, // Layout options for the first phase\n    maxExpandIterations: 4, // Maximum number of expanding iterations\n    // boundingBox: undefined, // Constrain layout bounds; { x1, y1, x2, y2 } or { x1, y1, w, h }\n    randomize: false, // Uses random initial node positions on true\n    ...animationOptions,\n  },\n  klay: {\n    // nodeDimensionsIncludeLabels: false, // Boolean which changes whether label dimensions are included when calculating node dimensions\n    // fit: true, // Whether to fit\n    // padding: 20, // Padding on fit\n    // animate: false, // Whether to transition the node positions\n    // animateFilter(node, i) { return true }, // Whether to animate specific nodes when animation is on; non-animated nodes immediately go to their final positions\n    // animationDuration: 500, // Duration of animation in ms if enabled\n    // animationEasing: undefined, // Easing of animation if enabled\n    // transform(node, pos) { return pos }, // A function that applies a transform to the final node position\n    // ready: undefined, // Callback on layoutready\n    // stop: undefined, // Callback on layoutstop\n    // klay: {\n    // // Following descriptions taken from http://layout.rtsys.informatik.uni-kiel.de:9444/Providedlayout.html?algorithm=de.cau.cs.kieler.klay.layered\n    //   addUnnecessaryBendpoints: false, // Adds bend points even if an edge does not change direction.\n    //   aspectRatio: 1.6, // The aimed aspect ratio of the drawing, that is the quotient of width by height\n    //   borderSpacing: 20, // Minimal amount of space to be left to the border\n    //   compactComponents: false, // Tries to further compact components (disconnected sub-graphs).\n    //   crossingMinimization: 'LAYER_SWEEP', // Strategy for crossing minimization.\n    //   /* LAYER_SWEEP The layer sweep algorithm iterates multiple times over the layers, trying to find node orderings that minimize the number of crossings. The algorithm uses randomization to increase the odds of finding a good result. To improve its results, consider increasing the Thoroughness option, which influences the number of iterations done. The Randomization seed also influences results.\n    // INTERACTIVE Orders the nodes of each layer by comparing their positions before the layout algorithm was started. The idea is that the relative order of nodes as it was before layout was applied is not changed. This of course requires valid positions for all nodes to have been set on the input graph before calling the layout algorithm. The interactive layer sweep algorithm uses the Interactive Reference Point option to determine which reference point of nodes are used to compare positions. */\n    //   cycleBreaking: 'GREEDY', // Strategy for cycle breaking. Cycle breaking looks for cycles in the graph and determines which edges to reverse to break the cycles. Reversed edges will end up pointing to the opposite direction of regular edges (that is, reversed edges will point left if edges usually point right).\n    //   /* GREEDY This algorithm reverses edges greedily. The algorithm tries to avoid edges that have the Priority property set.\n    // INTERACTIVE The interactive algorithm tries to reverse edges that already pointed leftwards in the input graph. This requires node and port coordinates to have been set to sensible values. */\n    //   direction: 'UNDEFINED', // Overall direction of edges: horizontal (right / left) or vertical (down / up)\n    //   /* UNDEFINED, RIGHT, LEFT, DOWN, UP */\n    //   edgeRouting: 'ORTHOGONAL', // Defines how edges are routed (POLYLINE, ORTHOGONAL, SPLINES)\n    //   edgeSpacingFactor: 0.5, // Factor by which the object spacing is multiplied to arrive at the minimal spacing between edges.\n    //   feedbackEdges: false, // Whether feedback edges should be highlighted by routing around the nodes.\n    //   fixedAlignment: 'NONE', // Tells the BK node placer to use a certain alignment instead of taking the optimal result.  This option should usually be left alone.\n    //   /* NONE Chooses the smallest layout from the four possible candidates.\n    // LEFTUP Chooses the left-up candidate from the four possible candidates.\n    // RIGHTUP Chooses the right-up candidate from the four possible candidates.\n    // LEFTDOWN Chooses the left-down candidate from the four possible candidates.\n    // RIGHTDOWN Chooses the right-down candidate from the four possible candidates.\n    // BALANCED Creates a balanced layout from the four possible candidates. */\n    //   inLayerSpacingFactor: 1.0, // Factor by which the usual spacing is multiplied to determine the in-layer spacing between objects.\n    //   layoutHierarchy: false, // Whether the selected layouter should consider the full hierarchy\n    //   linearSegmentsDeflectionDampening: 0.3, // Dampens the movement of nodes to keep the diagram from getting too large.\n    //   mergeEdges: false, // Edges that have no ports are merged so they touch the connected nodes at the same points.\n    //   mergeHierarchyCrossingEdges: true, // If hierarchical layout is active, hierarchy-crossing edges use as few hierarchical ports as possible.\n    //   nodeLayering: 'NETWORK_SIMPLEX', // Strategy for node layering.\n    //   /* NETWORK_SIMPLEX This algorithm tries to minimize the length of edges. This is the most computationally intensive algorithm. The number of iterations after which it aborts if it hasn't found a result yet can be set with the Maximal Iterations option.\n    // LONGEST_PATH A very simple algorithm that distributes nodes along their longest path to a sink node.\n    // INTERACTIVE Distributes the nodes into layers by comparing their positions before the layout algorithm was started. The idea is that the relative horizontal order of nodes as it was before layout was applied is not changed. This of course requires valid positions for all nodes to have been set on the input graph before calling the layout algorithm. The interactive node layering algorithm uses the Interactive Reference Point option to determine which reference point of nodes are used to compare positions. */\n    //   nodePlacement: 'BRANDES_KOEPF', // Strategy for Node Placement\n    //   /* BRANDES_KOEPF Minimizes the number of edge bends at the expense of diagram size: diagrams drawn with this algorithm are usually higher than diagrams drawn with other algorithms.\n    // LINEAR_SEGMENTS Computes a balanced placement.\n    // INTERACTIVE Tries to keep the preset y coordinates of nodes from the original layout. For dummy nodes, a guess is made to infer their coordinates. Requires the other interactive phase implementations to have run as well.\n    // SIMPLE Minimizes the area at the expense of... well, pretty much everything else. */\n    //   randomizationSeed: 1, // Seed used for pseudo-random number generators to control the layout algorithm; 0 means a new seed is generated\n    //   routeSelfLoopInside: false, // Whether a self-loop is routed around or inside its node.\n    //   separateConnectedComponents: true, // Whether each connected component should be processed separately\n    //   spacing: 20, // Overall setting for the minimal amount of space to be left between objects\n    //   thoroughness: 7, // How much effort should be spent to produce a nice layout..\n    // },\n    // priority(edge) { return null }, // Edges with a non-nil value are skipped when greedy edge cycle breaking is enabled\n    // ...animationOptions,\n  },\n  // 'd3-force': {\n  //   animate: true, // whether to show the layout as it's running; special 'end' value makes the layout animate like a discrete layout\n  //   maxIterations: 0, // max iterations before the layout will bail out\n  //   maxSimulationTime: 0, // max length in ms to run the layout\n  //   ungrabifyWhileSimulating: false, // so you can't drag nodes during layout\n  //   fixedAfterDragging: false, // fixed node after dragging\n  //   fit: false, // on every layout reposition of nodes, fit the viewport\n  //   padding: 30, // padding around the simulation\n  //   // boundingBox: undefined, // constrain layout bounds; { x1, y1, x2, y2 } or { x1, y1, w, h }\n  //   /** d3-force API* */\n  //   alpha: 1, // sets the current alpha to the specified number in the range [0,1]\n  //   alphaMin: 0.001, // sets the minimum alpha to the specified number in the range [0,1]\n  //   alphaDecay: 1 - Math.pow(0.001, 1 / 300), // sets the alpha decay rate to the specified number in the range [0,1]\n  //   alphaTarget: 0, // sets the current target alpha to the specified number in the range [0,1]\n  //   velocityDecay: 0.4, // sets the velocity decay factor to the specified number in the range [0,1]\n  //   collideRadius: 1, // sets the radius accessor to the specified number or function\n  //   collideStrength: 0.7, // sets the force strength to the specified number in the range [0,1]\n  //   collideIterations: 1, // sets the number of iterations per application to the specified number\n  //   linkId: function id(d) {\n  //     return d.index\n  //   }, // sets the node id accessor to the specified function\n  //   linkDistance: 30, // sets the distance accessor to the specified number or function\n  //   linkStrength: function strength(link) {\n  //     return 1 / Math.min(count(link.source), count(link.target))\n  //   }, // sets the strength accessor to the specified number or function\n  //   linkIterations: 1, // sets the number of iterations per application to the specified number\n  //   manyBodyStrength: -30, // sets the strength accessor to the specified number or function\n  //   manyBodyTheta: 0.9, // sets the BarnesHut approximation criterion to the specified number\n  //   manyBodyDistanceMin: 1, // sets the minimum distance between nodes over which this force is considered\n  //   manyBodyDistanceMax: Infinity, // sets the maximum distance between nodes over which this force is considered\n  //   xStrength: 0.1, // sets the strength accessor to the specified number or function\n  //   xX: 0, // sets the x-coordinate accessor to the specified number or function\n  //   yStrength: 0.1, // sets the strength accessor to the specified number or function\n  //   yY: 0, // sets the y-coordinate accessor to the specified number or function\n  //   radialStrength: 0.1, // sets the strength accessor to the specified number or function\n  //   radialRadius: [20], // sets the circle radius to the specified number or function\n  //   radialX: 0, // sets the x-coordinate of the circle center to the specified number\n  //   radialY: 0, // sets the y-coordinate of the circle center to the specified number\n  //   // layout event callbacks\n  //   ready() {}, // on layoutready\n  //   stop() {}, // on layoutstop\n  //   tick(progress) {}, // on every iteration\n  //   // positioning options\n  //   randomize: false, // use random node positions at beginning of layout\n  //   // infinite layout options\n  //   infinite: false, // overrides all other options for a forces-all-the-time mode\n  // },\n} as const\n","// import { Icon, Text, TouchableOpacity } from 'unitx-ui'\nimport Layouts from '@core/layouts'\nimport { EventInfo } from '@type'\n\nexport const THEME = {\n  backgroundColor: '#3287a8',\n  fillColor: 'rgb(153, 153, 153)'\n  ,\n}\nexport const ELEMENT_TYPE = {\n  EDGE: 'EDGE',\n  NODE: 'NODE',\n} as const\n\nexport const EVENT = {\n  ADD_CLUSTER_ELEMENT: 'ADD_CLUSTER_ELEMENT',\n  ADD_DATA_ADDITIONAL: 'ADD_DATA_ADDITIONAL',\n  ADD_DATA_VALUE_ADDITIONAL: 'ADD_DATA_VALUE_ADDITIONAL',\n  ADD_DATA_VALUE: 'ADD_DATA_VALUE',\n  ADD_DATA: 'ADD_DATA',\n  ADD_EDGE: 'ADD_EDGE',\n  ADD_NODE: 'ADD_NODE',\n  APPLY_EVENTS: 'APPLY_EVENTS',\n  APPLY_RECORDED_EVENTS: 'APPLY_RECORDED_EVENTS',\n  BOX_SELECTION: 'BOX_SELECTION',\n  CALCULATE_GLOBAL_NETWORK_STATISTICS: 'CALCULATE_GLOBAL_NETWORK_STATISTICS',\n  CALCULATE_LOCAL_NETWORK_STATISTICS: 'CALCULATE_LOCAL_NETWORK_STATISTICS',\n  CHANGE_CLUSTER_VISIBILITY: 'CHANGE_CLUSTER_VISIBILITY',\n  CHANGE_DATA_NAME_ADDITIONAL: 'CHANGE_DATA_NAME_ADDITIONAL',\n  CHANGE_DATA_NAME: 'CHANGE_DATA_NAME',\n  CHANGE_DATA_TYPE: 'CHANGE_DATA_TYPE',\n  CHANGE_DATA_VALUE_ADDITIONAL: 'CHANGE_DATA_VALUE_ADDITIONAL',\n  CHANGE_DATA_VALUE: 'CHANGE_DATA_VALUE',\n  CHANGE_THEME: 'CHANGE_THEME',\n  CLEAR_NODE_GLOBAL_LABEL: 'CLEAR_NODE_GLOBAL_LABEL',\n  CLEAR_NODE_LOCAL_LABEL: 'CLEAR_NODE_LOCAL_LABEL',\n  CLOSE_MODAL: 'CLOSE_MODAL',\n  CREATE_CLUSTER_BY_ALGORITHM_FORM_SUBMIT: 'CREATE_CLUSTER_BY_ALGORITHM_FORM_SUBMIT',\n  CREATE_CLUSTER_BY_ALGORITHM: 'CREATE_CLUSTER_BY_ALGORITHM',\n  CREATE_CLUSTER_FORM_SUBMIT: 'CREATE_CLUSTER_FORM_SUBMIT',\n  CREATE_CLUSTER: 'CREATE_CLUSTER',\n  CREATE_PLAYLIST: 'CREATE_PLAYLIST',\n  DEFOCUS: 'DEFOCUS',\n  DATA_VALUE_DOWN: 'DATA_VALUE_DOWN',\n  DATA_VALUE_UP: 'DATA_VALUE_UP',\n  DELETE_CLUSTER_ELEMENT: 'DELETE_CLUSTER_ELEMENT',\n  DELETE_CLUSTER: 'DELETE_CLUSTER',\n  DELETE_DATA_ADDITIONAL: 'DELETE_DATA_ADDITIONAL',\n  DELETE_DATA_VALUE_ADDITIONAL: 'DELETE_DATA_VALUE_ADDITIONAL',\n  DELETE_DATA_VALUE: 'DELETE_DATA_VALUE',\n  DELETE_DATA: 'DELETE_DATA',\n  DELETE_EDGE: 'DELETE_EDGE',\n  DELETE_HISTORY_ITEM: 'DELETE_HISTORY_ITEM',\n  DELETE_NODE: 'DELETE_NODE',\n  DELETE_PLAYLIST: 'DELETE_PLAYLIST',\n  ELEMENT_SELECTED_WITH_ZOOM: 'ELEMENT_SELECTED_WITH_ZOOM',\n  ELEMENT_SELECTED: 'ELEMENT_SELECTED',\n  ELEMENT_SETTINGS: 'ELEMENT_SETTINGS',\n  ELEMENT_SETTINGS_FORM_SUBMIT: 'ELEMENT_SETTINGS_FORM_SUBMIT',\n  EXPORT_DATA: 'EXPORT_DATA',\n  FOCUS: 'FOCUS',\n  IMPORT_DATA: 'IMPORT_DATA',\n  IMPORT_EVENTS: 'IMPORT_EVENTS',\n  LAYOUT_ANIMATION_DURATION_CHANGED: 'LAYOUT_ANIMATION_DURATION_CHANGED',\n  LAYOUT_CHANGED: 'LAYOUT_CHANGED',\n  MAKE_DATA_LABEL_FIRST: 'MAKE_DATA_LABEL_FIRST',\n  MAKE_DATA_LABEL: 'MAKE_DATA_LABEL',\n  MAKE_GLOBAL_DATA_LABEL_FIRST: 'MAKE_GLOBAL_DATA_LABEL_FIRST',\n  MAKE_GLOBAL_DATA_LABEL: 'MAKE_GLOBAL_DATA_LABEL',\n  MODE_CHANGED: 'MODE_CHANGED',\n  PLAY_EVENTS: 'PLAY_EVENTS',\n  PRESS_ADD_CLUSTER_ELEMENT: 'PRESS_ADD_CLUSTER_ELEMENT',\n  PRESS_BACKGROUND: 'PRESS_BACKGROUND',\n  RECORD_FINISHED: 'RECORD_FINISHED',\n  REDO_EVENT: 'REDO_EVENT',\n  REORDER_CLUSTER: 'REORDER_CLUSTER',\n  REORDER_HISTORY_ITEM: 'REORDER_HISTORY_ITEM',\n  REORDER_PLAYLIST: 'REORDER_PLAYLIST',\n  SELECT_CLUSTER: 'SELECT_CLUSTER',\n  SET_NODE_GLOBAL_LABEL: 'SET_NODE_GLOBAL_LABEL',\n  SET_NODE_LOCAL_LABEL: 'SET_NODE_LOCAL_LABEL',\n  SET_POSITIONS_IMPERATIVELY: 'SET_POSITIONS_IMPERATIVELY',\n  SETTINGS_FORM_CHANGED: 'SETTINGS_FORM_CHANGED',\n  TOGGLE_ACTION_BAR: 'TOGGLE_ACTION_BAR',\n  TOGGLE_DATA_BAR: 'TOGGLE_DATA_BAR',\n  TOGGLE_FILTER_BAR: 'TOGGLE_FILTER_BAR',\n  TOGGLE_NODE_GLOBAL_LABEL_FIRST: 'TOGGLE_NODE_GLOBAL_LABEL_FIRST',\n  TOGGLE_PREFERENCES_MODAL: 'TOGGLE_PREFERENCES_MODAL',\n  TOGGLE_RECORD_ACTIONS: 'TOGGLE_RECORD_ACTIONS',\n  TOGGLE_RECORD_EVENTS: 'TOGGLE_RECORD_EVENTS',\n  TOGGLE_RECORD: 'TOGGLE_RECORD',\n  UNDO_EVENT: 'UNDO_EVENT',\n  UPDATE_DATA: 'UPDATE_DATA',\n} as const\n\nexport const ELEMENT_DATA_FIELDS = {\n  POSITION: 'position',\n  ID: 'id',\n  DATA: 'data',\n  CONTEXT: '__context',\n} as const\n\nexport const EDITOR_MODE = {\n  ADD: 'ADD',\n  DELETE: 'DELETE',\n  CONTINUES_ADD: 'CONTINUES_ADD',\n  CONTINUES_DELETE: 'CONTINUES_DELETE',\n  DEFAULT: 'DEFAULT',\n  ADD_CLUSTER_ELEMENT: 'ADD_CLUSTER_ELEMENT',\n} as const\n\nexport const DATA_TYPE = {\n  number: 'number',\n  string: 'string',\n  id: 'id',\n  unknown: 'unknown',\n} as const\n\nexport const DATA_TYPE_BY_INDEX = [\n  'string',\n  'number',\n  'id',\n  'unknown',\n] as const\n\nexport const LAYOUT_NAMES = Object.keys(Layouts)\n\n\n\nexport const SIDE_PANEL_DEFAULT_WIDTH = 330\n// export const eventHandlers = [\n//   'click',\n//   'mousedown',\n//   'mousemove',\n//   'mouseout',\n//   'mouseover',\n//   'mouseup',\n//   'mouseupoutside',\n//   'tap',\n//   'touchstart',\n//   'touchmove',\n//   'touchend',\n//   'touchendoutside',\n//   'pointercancel',\n//   'pointerout',\n//   'pointerover',\n//   'pointertap',\n//   'pointerdown',\n//   'pointerup',\n//   'pointerupoutside',\n//   'pointermove',\n//   'rightclick',\n//   'rightdown',\n//   'rightup',\n//   'rightupoutside',\n//   'touchcancel',\n//   'touchendoutside',\n//   'touchmove',\n//   'touchstart',\n// ]\n\nexport const CYTOSCAPE_EVENT = {\n  select: 'select',\n  unselect: 'unselect',\n  position: 'position',\n  selectEdge: 'selectEdge',\n  unselectEdge: 'unselectEdge',\n  selectNode: 'selectNode',\n  unselectNode: 'unselectNode',\n  data: 'data',\n  mouseover: 'mouseover',\n  mouseout: 'mouseout',\n} as const\nexport const EDGE_LINE_Z_INDEX = -100\nexport const EDGE_CONTAINER_Z_INDEX = -99\n\nexport const MOCK_DATA = {\n  events: [{\n    type: 'ELEMENT_SELECTED', elementId: 'http://deeplink.rechtspraak.nl/uitspraak?id=ECLI:NL:HR:2007:BB5172', event: { data: { originalEvent: { metaKey: false } } }, id: '97a3057d-8e8a-437a-8180-13382e4d05a0', date: '2021-03-05T12:24:25.666Z',\n  }, {\n    type: 'PRESS_BACKGROUND', payload: { x: 2447.24609375, y: 1719.8828125 }, id: '7160a81a-85cc-493a-9ba5-5b515c4e260d', date: '2021-03-05T12:24:26.238Z', event: {},\n  }, {\n    type: 'ELEMENT_SELECTED', elementId: 'http://deeplink.rechtspraak.nl/uitspraak?id=ECLI:NL:HR:2013:BZ1717', event: { data: { originalEvent: { metaKey: false } } }, id: '78e7c6c2-11a4-431d-9662-99713fc8df41', date: '2021-03-05T12:24:27.128Z',\n  }, {\n    type: 'PRESS_BACKGROUND', payload: { x: 2928.828125, y: 1769.6484375 }, id: '83ea6691-70c5-4f6a-b389-bbdc46181c6c', date: '2021-03-05T12:24:27.643Z', event: {},\n  }, {\n    type: 'ELEMENT_SELECTED', elementId: 'http://deeplink.rechtspraak.nl/uitspraak?id=ECLI:NL:HR:2011:BR5215', event: { data: { originalEvent: { metaKey: false } } }, id: 'f522d845-000a-4583-9355-16c56cbd0d66', date: '2021-03-05T12:24:28.695Z',\n  }] as EventInfo[],\n}\n\nexport const  QUALITY_LEVEL = {\n  HIGH: 2,\n  MEDIUM: 1,\n  LOW: 0,\n} as const","import * as R from 'colay/ramda'\nimport * as C from 'colay/color'\nimport * as PIXI from 'pixi.js'\nimport { applyDefaultProps as nativeApplyDefaultProps } from '@inlet/react-pixi'\nimport { EventMap } from 'colay-ui/type'\nimport { BoundingBox, Position } from 'colay/type'\n// import { Properties } from 'csstype'\n// import * as C from 'colay/color'\nimport {\n  Element, NodeData, EdgeData, ElementData,\n  DisplayObjectWithYoga, NodeContext, EdgeContext,\n  Cluster, EventInfo, GraphEditorRef, ControllerState,\n  ViewportRef, LightEventInfo,\n  EdgeElement, NodeElement,\n} from '@type'\nimport {\n  ELEMENT_DATA_FIELDS, EVENT,\n  QUALITY_LEVEL,\n} from '@constants'\n\n// type Result = {\n//   x: number;\n//   y: number;\n//   width: number;\n//   height: number;\n//   fill: number;\n// }\n// export const processStyle = (style: Properties): Result => {\n//   const newStyle: Result = {} as Result\n//   const _ = R.forEachObjIndexed((val: any, key: string) => {\n//     let isNumber = true\n//     if (R.isString(val) && R.includes(val, '%')) {\n//       isNumber = false\n//       val = (parseFloat(R.replace(val, '%', '')) / 100)\n//     }\n//     switch (key) {\n//       case 'width':\n//         newStyle.width = isNumber ? val : val * parent.width\n//         break\n//       case 'height':\n//         newStyle.height = isNumber ? val : val * parent.height\n//         break\n//       case 'top':\n//         newStyle.y = isNumber ? val : val * parent.height\n//         break\n//       case 'left':\n//         newStyle.x = isNumber ? val : val * parent.width\n//         break\n//       case 'backgroundColor':\n//         newStyle.fill = C.rgbNumber(val)\n//         break\n//       case 'borderRadius':\n//         newStyle.radius = val\n//         break\n//       default:\n//         break\n//     }\n//   }, style)\n//   return newStyle\n// }\n\nexport const processStyle = (props: any = {}, mutableInstance): any => {\n  const { parent } = mutableInstance\n  const {\n    style = {},\n  } = props\n  const newProps: any = {}\n  R.forEachObjIndexed((val: any, key: string) => {\n    let isNumber = true\n    if (R.is(String)(val) && R.includes(val, '%')) {\n      isNumber = false\n      val = (parseFloat(R.replace(val, '%', '')) / 100)\n    }\n    switch (key) {\n      case 'width':\n        newProps.width = isNumber ? val : val * parent.width\n        break\n      case 'height':\n        newProps.height = isNumber ? val : val * parent.height\n        break\n      case 'top':\n        newProps.y = isNumber ? val : val * parent.height\n        break\n      case 'left':\n        newProps.x = isNumber ? val : val * parent.width\n        break\n      case 'backgroundColor':\n        newProps.fill = C.rgbNumber(val)\n        break\n      case 'borderRadius':\n        newProps.radius = val\n        break\n      default:\n        break\n    }\n  }, style)\n  return newProps\n}\n\nconst JUSTIFY_CONTENT = {\n  'flex-start': 'left',\n  center: 'center',\n  'flex-end': 'right',\n}\nexport const processTextStyle = (style: {\n  fontFamily?: string;\n  fontWeight?: string;\n  fontSize?: number;\n  justifyContent?: keyof typeof JUSTIFY_CONTENT;\n  color?: string;\n  width?: number;\n}) => {\n  const {\n    fontFamily,\n    fontWeight,\n    fontSize,\n    justifyContent,\n    color,\n    width,\n    // fontStyle,\n    // letterSpacing,\n    // textDecorationLine,\n    // textTransform,\n  } = style\n\n  return new PIXI.TextStyle({\n    // @ts-ignore\n    align: JUSTIFY_CONTENT[justifyContent ?? 'flex-start'],\n    ...(fontFamily ? { fontFamily } : {}),\n    ...(fontSize ? { fontSize: parseFloat(R.replace(`${fontSize}`, '%', '')) * width! } : {}),\n    ...(fontWeight ? { fontWeight: `${parseFloat(fontWeight)}` } : {}),\n    fill: color, // gradient\n    stroke: color,\n    strokeThickness: 20,\n    letterSpacing: 20,\n    // dropShadow: true,\n    // dropShadowColor: '#ccced2',\n    // dropShadowBlur: 4,\n    // dropShadowAngle: Math.PI / 6,\n    // dropShadowDistance: 6,\n    // wordWrap: true,\n    // wordWrapWidth: 440,\n  })\n}\n\nexport type EventType = (e: PIXI.InteractionEvent) => void\nexport type Events = EventMap\n\nexport const applyEvents = (\n  instance: PIXI.DisplayObject,\n  props: Record<string, any>,\n) => {\n  \n}\n\nconst processProps = (props: Record<string, any>, mutableInstance) => {\n  return props\n}\n\ntype ApplyDefaultPropsConfig = {\n  isFlex?: boolean;\n  rescaleToYoga?: boolean;\n}\n\nexport const preprocessProps = <T extends Record<string, any>>(props: T): T => ({\n  ...props,\n})\n\nexport const IS_FLEX_DEFAULT = false\n\nexport const applyDefaultProps = <P extends Record<string, any> >(\n  instance: PIXI.Graphics | PIXI.DisplayObject | PIXI.Container,\n  oldProps: P,\n  // @ts-ignore\n  newProps: P = {},\n  config: ApplyDefaultPropsConfig = {\n    isFlex: IS_FLEX_DEFAULT,\n    rescaleToYoga: false,\n  },\n) => {\n  const mutableInstance = instance as DisplayObjectWithYoga\n  const {\n    isFlex = IS_FLEX_DEFAULT,\n    rescaleToYoga = false,\n  } = config\n  const { style = {}, ...restProps } = newProps\n  if (isFlex) {\n    mutableInstance.flex = true // display === 'flex'\n    mutableInstance.yoga.flexDirection = style?.flexDirection ?? 'column'\n    mutableInstance.yoga.keepAspectRatio = R.equals(\n      newProps.resizeMode,\n      'contain',\n    )\n    // @TODO: was true\n    mutableInstance.yoga.rescaleToYoga = rescaleToYoga\n    mutableInstance.yoga.fromConfig(style)\n  }\n  // FOR CULLING\n  mutableInstance._visible = newProps.visible\n  // FOR CULLING\n  return nativeApplyDefaultProps(\n    mutableInstance,\n    processProps(oldProps, mutableInstance),\n    processProps(restProps, mutableInstance),\n  )\n}\n\n/**\n * Helper util for fetching the texture from props\n * Can be either texture or image\n *\n * @param {string} elementType\n * @param {object} props\n * @returns {PIXI.Texture|null}\n */\nexport const getTextureFromProps = (elementType: string, pureProps: Record<string, any> = {}) => {\n  const {\n    source,\n    ...rest\n  } = pureProps\n  const isUriSource = R.has('uri')(source)\n  const props: Record<string, any> = {\n    ...rest,\n    ...(isUriSource ? ({ image: source.uri }) : ({ texture: source })),\n  }\n  const emitChange = () => requestAnimationFrame(() => {\n    window.dispatchEvent(new CustomEvent('__REACT_PIXI_REQUEST_RENDER__'))\n  })\n\n  const check = (inType: any, validator: any) => {\n    if (props.hasOwnProperty(inType)) {\n      const valid = validator.typeofs.some((t: any) => typeof props[inType] === t)\n        || validator.instanceofs.some((i: any) => props[inType] instanceof i)\n      R.throwWhen([\n        [R.always(!valid), R.always(`${elementType} ${inType} prop is invalid`)],\n      ])('')\n      return props[inType]\n    }\n  }\n\n  if (props.texture) {\n    R.throwWhen([\n      [R.always(R.not(props.texture instanceof PIXI.Texture)), R.always(`${elementType} texture needs to be typeof \\`PIXI.Texture\\``)],\n    ])('')\n    return props.texture\n  }\n  const result = check('image', { typeofs: ['string'], instanceofs: [HTMLImageElement] })\n      || check('video', { typeofs: ['string'], instanceofs: [HTMLVideoElement] })\n      || check('source', {\n        typeofs: ['string', 'number'],\n        instanceofs: [HTMLImageElement, HTMLVideoElement, HTMLCanvasElement, PIXI.Texture],\n      })\n\n  R.throwWhen([\n    [R.always(!result), R.always(`${elementType} could not get texture from props`)],\n  ])('')\n\n  const texture = PIXI.Texture.from(result)\n  texture.once('update', emitChange)\n  texture.once('loaded', emitChange)\n\n  if (texture.valid) {\n    emitChange()\n  }\n\n  return texture\n}\n\nexport const getSelectedItemByElement = (\n  element: Element,\n  info: { nodes: NodeData[]; edges: EdgeData[]},\n) => {\n  const id = element.id()\n  const isNode = element.isNode()\n  const targetPath = isNode ? 'nodes' : 'edges'\n  const index = info[targetPath].findIndex((targetItem: ElementData) => targetItem.id === id)\n  return {\n    item: info[targetPath][index] as NodeData | EdgeData,\n    index: index as number,\n  }\n}\n\nexport const getSelectedElementInfo = (\n  controllerState: ControllerState, graphEditor: GraphEditorRef,\n) => {\n  const itemIds = controllerState.selectedElementIds\n  const selectedItemId = R.last(itemIds ?? [])\n  const selectedElement = selectedItemId\n    ? graphEditor.cy.$id(`${selectedItemId}`)\n    : null\n  if (!selectedElement) {\n    return {}\n  }\n  const isNode = selectedElement.isNode()\n  const targetPath = isNode ? 'nodes' : 'edges'\n  const index = controllerState[targetPath].findIndex(\n    (targetItem: ElementData) => targetItem.id === selectedItemId,\n  )\n  return {\n    selectedItem: controllerState[targetPath][index],\n    selectedElement,\n    index,\n    type: targetPath,\n  }\n}\n\nexport const getLabel = (path: string[] = [], item: ElementData): string => (R.isEmpty(path)\n  ? item.id\n  : (R.path([ELEMENT_DATA_FIELDS.DATA, ...path], item) ?? item.id))\n// const firstKey = path[0]\n// if (firstKey === ELEMENT_DATA_FIELDS.DATA) {\n//   const name = path[1]\n//   const foundDataItem = item.data?.find((dataItem) => dataItem.name === name)\n//   return foundDataItem?.value[0] ?? ''\n// }\n// return R.path(path)(item)\n\nexport const readTextFile = async (blob: Blob, encoding?: string) => new Promise<string>(\n  (res, rej) => {\n    const reader = new FileReader()\n    reader.addEventListener('load', () => {\n      const { result } = reader\n      // @ts-ignore\n      res(result)\n    })\n    reader.addEventListener('error', (error) => {\n      rej(error)\n    })\n    reader.readAsText(blob, encoding)\n  },\n)\n\nexport const calculateObjectBoundsWithoutChildren = (\n  container: PIXI.Container,\n): BoundingBox => {\n  const position = {\n    x: container.x * container.scale.x,\n    y: container.y * container.scale.y,\n  }\n  if (container.children.length === 0) {\n    return {\n      ...position,\n      width: 0,\n      height: 0,\n    }\n  }\n  const object = container.getChildAt(0) as PIXI.Container\n  const children = object.removeChildren()\n  if (object.width === 0) {\n    children.forEach((child) => {\n      object.addChild(child)\n    })\n    return {\n      ...calculateObjectBoundsWithoutChildren(object),\n      ...position,\n    } as BoundingBox\n  }\n  const box: BoundingBox = {\n    ...position,\n    width: object.width * object.scale.x,\n    height: object.height * object.scale.y,\n  }\n  children.forEach((child) => {\n    object.addChild(child)\n  })\n  return box\n}\n\nexport const getClusterVisibility = (id: string, clusters: Cluster[] = []) => {\n  let visible = true\n  clusters.forEach((cluster) => {\n    if (cluster.ids.includes(id)) {\n      visible = visible && !(cluster.visible ?? true)\n    }\n  })\n  return visible\n}\n// export const calculateDisplayObjectBounds = (object: PIXI.Container) => {\n//   const box = object.getLocalBounds()\n//   box.width = 45\n//   box.height = 45\n//   return {\n//     // x: object.x + (box.x - object.pivot.x) * object.scale.x,\n//     // y: object.y + (box.y - object.pivot.y) * object.scale.y,\n//     width: box.width * object.scale.x,\n//     height: box.height * object.scale.y,\n//     x: object.x * object.scale.x,\n//     y: object.y * object.scale.y,}\n//   }\n\nexport const calculateVisibilityByContext = (\n  element: EdgeElement|NodeElement,\n): boolean => {\n  const context = contextUtils.get(element)\n  const visibility = R.all(R.isTrue)(Object.values(context.settings.visibility))\n  // if (element.isEdge()) {\n  //   const target = element.target()\n  //   const source = element.source()\n  //   return visibility && calculateVisibilityByContext(target)\n  //   && calculateVisibilityByContext(source)\n  // }\n  return visibility\n}\n\n// @ts-ignore\nexport const filterEdges = (nodes: NodeData[]) => (\n  edges: EdgeData[],\n) => {\n  const nodeMap = R.groupBy(R.prop('id'), nodes)\n  return R.filter(\n    (\n      edge: EdgeData,\n    ) => !!(nodeMap[edge.source] && nodeMap[edge.target]),\n    edges,\n  )\n}\n\ntype GetUndoActionsSettings = {\n  controllerState: ControllerState,\n  graphEditor: GraphEditorRef\n}\nexport const getUndoEvents = (events: EventInfo[], settings: GetUndoActionsSettings) => {\n  const {\n    controllerState,\n    graphEditor,\n  } = settings\n  // const addHistory = true\n  const undoEvents: LightEventInfo[] = R.unnest(\n    events.map((event): LightEventInfo[] => {\n      const {\n        // elementId,\n        type,\n        payload,\n      } = event\n      const oldSelectedElementIds = controllerState.selectedElementIds\n      const {\n        selectedElement,\n        selectedItem,\n      } = getSelectedElementInfo(controllerState, graphEditor)\n      switch (type) {\n        case EVENT.ADD_CLUSTER_ELEMENT:\n          return [\n            {\n              type: EVENT.DELETE_CLUSTER_ELEMENT,\n              payload,\n            },\n          ]\n        case EVENT.ADD_EDGE:\n          return [\n            {\n              type: EVENT.DELETE_EDGE,\n              payload,\n            },\n          ]\n        case EVENT.ADD_NODE:\n          return [\n            {\n              type: EVENT.DELETE_NODE,\n              payload,\n            },\n          ]\n        case EVENT.CHANGE_THEME:\n          return [\n            {\n              type: EVENT.CHANGE_THEME,\n              payload: {\n                value: controllerState.actionBar?.theming?.value,\n              },\n            },\n          ]\n        case EVENT.CHANGE_CLUSTER_VISIBILITY:\n          return [\n            {\n              type: EVENT.CHANGE_CLUSTER_VISIBILITY,\n              payload: {\n                ...payload,\n                value: !payload.value,\n              },\n            },\n          ]\n        case EVENT.CLEAR_NODE_GLOBAL_LABEL:\n          return [\n            {\n              type: EVENT.SET_NODE_GLOBAL_LABEL,\n              payload: {\n                value: controllerState.label!.global!.nodes!,\n              },\n            },\n          ]\n        case EVENT.CLEAR_NODE_LOCAL_LABEL:\n          return [\n            {\n              type: EVENT.SET_NODE_LOCAL_LABEL,\n              payload: {\n                value: controllerState.label!.nodes[selectedItem!.id],\n              },\n            },\n          ]\n        case EVENT.CREATE_PLAYLIST:\n          return [\n            {\n              type: EVENT.DELETE_PLAYLIST,\n              payload: {\n                itemIds: payload.items?.map((item) => item.id),\n              },\n            },\n          ]\n        case EVENT.CREATE_CLUSTER:\n          return [\n            {\n              type: EVENT.DELETE_CLUSTER,\n              payload: {\n                itemIds: payload.items?.map((item) => item.id),\n              },\n            },\n          ]\n        case EVENT.DELETE_CLUSTER: {\n          const {\n            itemIds = [],\n          } = payload\n          const items = controllerState.graphConfig?.clusters?.filter(\n            (cluster) => itemIds.includes(cluster.id),\n          )\n          return [\n            {\n              type: EVENT.CREATE_CLUSTER,\n              payload: {\n                items,\n              },\n            },\n          ]\n        }\n        case EVENT.DELETE_CLUSTER_ELEMENT: {\n          return [\n            {\n              type: EVENT.ADD_CLUSTER_ELEMENT,\n              payload,\n            },\n          ]\n        }\n\n        case EVENT.DELETE_EDGE:\n          return [\n            {\n              type: EVENT.ADD_EDGE,\n              payload: {\n                items: controllerState.edges!.filter(\n                  (item) => payload.itemIds.includes(item.id),\n                ),\n              },\n            },\n          ]\n        case EVENT.DELETE_NODE: {\n          const {\n            itemIds,\n          } = payload\n          const relatedEdges = controllerState.edges.filter(\n            (edgeItem) => itemIds.includes(edgeItem.source)\n            || itemIds.includes(edgeItem.target),\n          )\n          return [\n            {\n              type: EVENT.ADD_NODE,\n              payload: {\n                items: controllerState.nodes!.filter(\n                  (item) => itemIds.includes(item.id),\n                ).map((item) => {\n                  const position = graphEditor.cy.$id(item.id).position()\n                  return {\n                    ...item,\n                    position,\n                  }\n                }),\n                edgeItems: relatedEdges,\n              },\n            },\n          ] }\n        case EVENT.DELETE_PLAYLIST:\n          return [\n            {\n              type: EVENT.CREATE_PLAYLIST,\n              payload: {\n                items: controllerState.playlists!.filter(\n                  (playlist) => payload.itemIds.includes(playlist.id),\n                ),\n              },\n            },\n          ]\n        case EVENT.ELEMENT_SELECTED:\n          return (oldSelectedElementIds && oldSelectedElementIds.length > 0)\n            ? [\n              {\n                ...event,\n                type: EVENT.ELEMENT_SELECTED,\n                payload: {\n                  itemIds: oldSelectedElementIds,\n                },\n              },\n            ]\n            : [\n              {\n                type: EVENT.PRESS_BACKGROUND,\n                payload: {\n                  x: graphEditor.viewport.center.x,\n                  y: graphEditor.viewport.center.y,\n                },\n              },\n            ]\n        case EVENT.ELEMENT_SELECTED_WITH_ZOOM:\n          return (oldSelectedElementIds && oldSelectedElementIds.length > 0)\n            ? [\n              {\n                ...event,\n                type: EVENT.ELEMENT_SELECTED,\n                payload: {\n                  itemIds: oldSelectedElementIds,\n                },\n              },\n            ]\n            : [\n              {\n                type: EVENT.PRESS_BACKGROUND,\n                payload: {\n                  x: graphEditor.viewport.center.x,\n                  y: graphEditor.viewport.center.y,\n                },\n              },\n            ]\n        case EVENT.LAYOUT_CHANGED:\n          return [\n            {\n              type: EVENT.SET_POSITIONS_IMPERATIVELY,\n              payload: {\n                oldLayout: controllerState.graphConfig?.layout,\n                positions: graphEditor.cy.nodes().map((element) => ({\n                  position: {\n                    x: element.position().x,\n                    y: element.position().y,\n                  },\n                  elementId: element.id(),\n                })),\n              },\n            },\n          ]\n\n        case EVENT.MODE_CHANGED:\n          return [\n            {\n              type: EVENT.MODE_CHANGED,\n              payload: {\n                value: controllerState.mode,\n              },\n            },\n          ]\n\n        case EVENT.PRESS_BACKGROUND:\n          // @ts-ignore\n          return oldSelectedElementIds\n            ? [\n              {\n                ...event,\n                payload: {\n                  itemIds: oldSelectedElementIds,\n                },\n                type: EVENT.ELEMENT_SELECTED,\n                event: {\n                  data: {\n                    originalEvent: {\n                      metaKey: false,\n                    },\n                  },\n                },\n              },\n            ]\n            : []\n        case EVENT.SET_NODE_GLOBAL_LABEL:\n          return [\n            {\n              type: EVENT.SET_NODE_GLOBAL_LABEL,\n              payload: {\n                value: controllerState.label!.global!.nodes!,\n              },\n            },\n          ]\n        case EVENT.SET_NODE_LOCAL_LABEL:\n          return [\n            {\n              type: EVENT.SET_NODE_LOCAL_LABEL,\n              payload: {\n                value: controllerState.label!.nodes[selectedItem!.id],\n              },\n            },\n          ]\n        case EVENT.UPDATE_DATA:\n          return [\n            {\n              type: EVENT.UPDATE_DATA,\n              payload: {\n                value: selectedItem!.data,\n              },\n            },\n          ]\n        case EVENT.SET_POSITIONS_IMPERATIVELY:\n          return [\n            {\n              type: EVENT.SET_POSITIONS_IMPERATIVELY,\n              payload: {\n                oldLayout: controllerState.graphConfig?.layout,\n                positions: payload.positions.map(({ elementId }) => {\n                  const element = graphEditor.cy.$id(`${elementId}`)\n                  return {\n                    position: {\n                      x: element.position().x,\n                      y: element.position().y,\n                    },\n                    elementId,\n                  }\n                }),\n\n              },\n            },\n          ]\n        default:\n          break\n      }\n      return []\n    }),\n  )\n  return {\n    addHistory: !R.isEmpty(undoEvents),\n    events: undoEvents,\n  }\n}\n\nconst throttleTimeTable: Record<string, number> = {}\nexport const throttle = (callback: (id: string)=> void, delay: number, _id?: string) => {\n  const time = (new Date()).getTime()\n  const id = _id ?? R.uuid()\n  const diff = throttleTimeTable[id] ? (time - throttleTimeTable[id]) : time\n\n  if (diff > delay) {\n    throttleTimeTable[id] = time\n    callback(id)\n  }\n}\n\nexport const isPositionInBox = (position: Position, box: BoundingBox) => {\n  const {\n    x,\n    y,\n  } = position\n  const x_ = box.x + box.width\n  const y_ = box.y + box.height\n  const startPos = {\n    x: box.x < x_ ? box.x : x_,\n    y: box.y < y_ ? box.y : y_,\n  }\n  const endPos = {\n    x: box.x < x_ ? x_ : box.x,\n    y: box.y < y_ ? y_ : box.y,\n  }\n  return x >= startPos.x && y >= startPos.y && x <= endPos.x\n  && y <= endPos.y\n}\n\nexport const getBoundingBox = (\n  startPos: Position, endPos: Position, abs = false,\n) => {\n  const width = endPos.x - startPos.x\n  const height = endPos.y - startPos.y\n  // const x = startPos.x < endPos.x ? startPos.x : endPos.x\n  // const y = startPos.y < endPos.y ? startPos.y : endPos.y\n  return {\n    ...startPos,\n    // x,\n    // y,\n    width: abs ? Math.abs(width) : width,\n    height: abs ? Math.abs(height) : height,\n  }\n}\n\nexport const cyUnselectAll = (cy: cytoscape.Core) => {\n  cy.elements(':selected').unselect()\n}\n\nexport const getElementsCollectionByIds = (cy: cytoscape.Core, ids: string[]) => {\n  let collection = cy.collection()\n  ids.forEach((id) => {\n    collection = collection.merge(cy.$id(id))\n  })\n  return collection\n}\n\nexport const getPointerPositionOnViewport = (\n  viewport: ViewportRef,\n  event: MouseEvent,\n) => {\n  const position = getEventClientPosition(event)\n  // @ts-ignore\n  if (viewport.options.interaction) {\n    // @ts-ignore\n    viewport.options.interaction.mapPositionToPoint(position, position.x, position.y)\n  }\n  position.x /= viewport.scale.x\n  position.y /= viewport.scale.y\n  position.x += viewport.left\n  position.y += viewport.top\n  return position\n}\n\nexport const getEventClientPosition = (e) => {\n  const event = e.touches?.[0] ?? e.changedTouches?.[0] ?? e\n  return {\n    x: event.clientX,\n    y: event.clientY,\n  }\n}\n\nexport const isMultipleTouches = (e) => {\n  const touches = e.touches ?? e.changedTouches\n  return touches && touches.length > 0\n}\n\nexport const contextUtils = {\n  update: (element: Element, context: any) => {\n    element.data({\n      [ELEMENT_DATA_FIELDS.CONTEXT]: context,\n    })\n  },\n  get: (element: Element) => element.data(ELEMENT_DATA_FIELDS.CONTEXT),\n  getNodeContext: (element: Element): NodeContext => element.data(\n    ELEMENT_DATA_FIELDS.CONTEXT,\n  ),\n  getEdgeContext: (element: Element): EdgeContext => element.data(\n    ELEMENT_DATA_FIELDS.CONTEXT,\n  ),\n}\n\nexport const getElementData = (element: Element) => element.data(ELEMENT_DATA_FIELDS.DATA)\n\nexport const getItemFromElement = (element: Element) => ({\n  id: element.id(),\n  data: getElementData(element),\n})\n\nexport const pauseEvent = (e) => {\n  if (e.stopPropagation) e.stopPropagation()\n  if (e.preventDefault) e.preventDefault()\n  e.cancelBubble = true\n  e.returnValue = false\n  return false\n}\n\nexport const adjustVisualQuality = (objectCount: number, viewport: ViewportRef)=>{\n  const qualityLevel = objectCount < 150\n    ? QUALITY_LEVEL.HIGH\n    : (\n      objectCount < 400\n        ? QUALITY_LEVEL.MEDIUM\n        : QUALITY_LEVEL.LOW\n    )\n  if (viewport.qualityLevel !== qualityLevel) {\n    viewport.oldQualityLevel = viewport.qualityLevel\n    viewport.qualityLevel = qualityLevel\n    // viewport.qualityChanged = true\n    switch (qualityLevel) {\n      case QUALITY_LEVEL.HIGH:\n        // HIGH\n        PIXI.settings.ROUND_PIXELS = true\n        // @ts-ignore\n        PIXI.settings.PRECISION_FRAGMENT = PIXI.PRECISION.HIGH\n        PIXI.settings.RESOLUTION = 32// 64// window.devicePixelRatio\n        PIXI.settings.SCALE_MODE = PIXI.SCALE_MODES.LINEAR\n        break\n      case QUALITY_LEVEL.MEDIUM:\n        PIXI.settings.ROUND_PIXELS = false// true\n        // @ts-ignore\n        PIXI.settings.PRECISION_FRAGMENT = PIXI.PRECISION.MEDIUM\n        PIXI.settings.RESOLUTION = 12// 32// 64// window.devicePixelRatio\n        PIXI.settings.SCALE_MODE = PIXI.SCALE_MODES.NEAREST\n        break\n      case QUALITY_LEVEL.LOW:\n        PIXI.settings.ROUND_PIXELS = false\n        // @ts-ignore\n        PIXI.settings.PRECISION_FRAGMENT = PIXI.PRECISION.LOW\n        PIXI.settings.RESOLUTION = 0.8// 32// 64// window.devicePixelRatio\n        PIXI.settings.SCALE_MODE = PIXI.SCALE_MODES.NEAREST\n        break\n      default:\n        break\n    }\n  }\n}","import React from 'react'\nimport { PixiComponent } from '@inlet/react-pixi'\nimport * as R from 'colay/ramda'\nimport { wrapComponent } from 'colay-ui'\nimport * as PIXI from 'pixi.js'\nimport {\n  applyDefaultProps, getTextureFromProps, preprocessProps,\n} from '@utils'\nimport { PIXIBasicStyle, PIXIShapeStyle } from '@type'\n\ntype ImageURISource = { uri: string}\n\nexport type ImageProps = {\n  style: PIXIBasicStyle & PIXIShapeStyle;\n  source: ImageURISource;\n}\n\n// @ts-ignore\nconst ImagePIXI = PixiComponent<ImageProps, PIXI.Sprite>('Image', {\n  create: (props: ImageProps) => {\n    const instance = new PIXI.Sprite(getTextureFromProps('Sprite', props))\n    return instance\n  },\n  applyProps: (mutableInstance: PIXI.Sprite, oldProps, _props) => {\n    const props = preprocessProps(_props)\n    const {\n      // image,\n      // texture,\n      source,\n      ...restProps\n    } = props\n    const isUriSource = R.has('uri')(source)\n    if (\n      (isUriSource && source.uri !== oldProps.source?.uri)\n        || source !== oldProps.source\n    ) {\n      mutableInstance.texture = getTextureFromProps('Sprite', props)\n    }\n    // R.when(\n    //   R.anyPass([\n    //     R.always(isUriSource && source.uri !== oldProps.source?.uri),\n    //     R.always(source !== oldProps.source),\n    //   ]),\n    //   () => {\n    //     mutableInstance.texture = getTextureFromProps('Sprite', props)\n    //   },\n    //   source,\n    // )\n    applyDefaultProps(mutableInstance, oldProps, restProps, { rescaleToYoga: true })\n  },\n})\n\nfunction ImageElement(props: ImageProps) {\n  return (\n    <ImagePIXI\n      {...props}\n    />\n  )\n}\n\nexport const Image = wrapComponent<ImageProps>(ImageElement)\n","import React from 'react'\nimport * as PIXI from 'pixi.js'\nimport { wrapComponent } from 'colay-ui'\nimport { PropsWithRef } from 'colay-ui/type'\nimport { PixiComponent, Text as ReactPIXIText } from '@inlet/react-pixi'\nimport { useTheme, ThemeProps } from '@core/theme'\nimport * as C from 'colay/color'\nimport { applyDefaultProps } from '@utils'\n\ntype TextStyle = any\n\ntype TextPIXIProps = {\n  text: string;\n  style?: TextStyle;\n  color?: string;\n  isSprite?: boolean;\n}\n// dropShadow\n// dropShadowAlpha\n// dropShadowAngle\n// dropShadowBlur\n// dropShadowColor\n// dropShadowDistance\n// const PositionStyleKeys = ['left', 'top', 'width', 'height']\n// const processTextProps = (props: TextPIXIProps) => {\n//   const { style = {} } = props\n//   return {\n//     ...props,\n//     style: R.pick(PositionStyleKeys)(style),\n//     textStyle: R.pipe(\n//       // @ts-ignore\n//       R.toPairs,\n//       R.map(\n//         ([key, value]: [string, any]) => R.cond([\n//           [R.equals('color'), () => (['fill', C.rgbNumber(value)])],\n//           [R.equals('textShadowColor'), () => (['dropShadowColor', C.rgbNumber(value)])],\n//           [R.equals('textShadowRadius'), () => (['dropShadowBlur', C.rgbNumber(value)])],\n//           [R.equals('textShadowOffset'), () => (['dropShadowDistance', R.values(value)?.[0]])],\n//           [R.T, R.always([key, value])],\n//           // @ts-ignore\n//         ])(key),\n//       ),\n//       R.fromPairs,\n//       R.cond([\n//         [\n//           R.anyPass([\n//             R.has('dropShadowColor'),\n//             R.has('dropShadowBlur'),\n//             R.has('dropShadowDistance'),\n//           ]),\n//           R.set(R.lensProp('dropShadow'), true),\n//         ],\n//         [\n//           R.T,\n//           R.identity,\n//         ],\n//       ]),\n//       // @ts-ignore\n//     )(R.omit([PositionStyleKeys])({ ...style })),\n//   }\n// }\n\n// @ts-ignore\nconst TextPIXI = PixiComponent<TextPIXIProps & ThemeProps, PIXI.Text>('PIXIText', {\n  create: (props) => {\n    const {\n      style = {},\n      text = '', \n      isSprite,\n    } = props\n    // processTextProps({\n    //   ...props,\n    //   style: {\n    //     color: props.theme.palette.text.primary,\n    //     ...style,\n    //   },\n    // })\n    const pixiText = new PIXI.Text(text, {\n      ...style,\n      fill: C.rgbNumber(style.fill ?? props.theme.palette.text.primary ),\n    })\n    if (isSprite) {\n      pixiText.updateText(false)\n      const spriteText = new PIXI.Sprite(pixiText.texture)\n      spriteText.pixiText = pixiText\n      // spriteText.text = pixiText\n      return spriteText\n    }\n    return pixiText\n  },\n  applyProps: (\n    instance: PIXI.Text,\n    oldProps,\n    props,\n  ) => {\n    const {\n      style = {},\n      text = '', \n      isSprite,\n    } = props\n    instance.forceToRender = props.forceToRender\n    applyDefaultProps(\n      instance,\n      oldProps,\n      props,\n    )\n    const newStyle = {\n      ...style,\n      fill: C.rgbNumber(style.fill ?? props.theme.palette.text.primary ),\n    }\n    if (isSprite) {\n      // const pixiText = new PIXI.Text(text, {\n      //   ...style,\n      //   fill: C.rgbNumber(style.fill ?? props.theme.palette.text.primary ),\n      // })\n      // pixiText.updateText(false)\n      instance.pixiText.text = text\n      instance.style = newStyle\n      instance.texture = pixiText.texture\n    } else {\n      instance.text = text\n      instance.style = newStyle\n    }\n  },\n})\n\nexport type TextProps = {\n  children: string;\n  style?: TextStyle;\n  isSprite?: boolean;\n}\n\nconst TextElement = (\n  props: TextProps,\n  forwardedRef: React.ForwardedRef<PIXI.Text>,\n) => {\n  const { children, ...rest } = props\n  const theme = useTheme()\n  const [count, setCount] = React.useState(0)\n  return (\n    <TextPIXI\n      ref={forwardedRef}\n      text={children}\n      theme={theme}\n      forceToRender={() => setCount((c) => c + 1)}\n      {...rest}\n    />\n  )\n}\n\nexport const Text = ReactPIXIText\n// export const Text = wrapComponent<\n// PropsWithRef<PIXI.Text, TextProps>\n// >(TextElement, { isForwardRef: true })\n","import React from 'react'\nimport { PixiComponent } from '@inlet/react-pixi'\nimport { PropsWithRef } from 'colay-ui/type'\nimport { wrapComponent } from 'colay-ui'\nimport { useTheme, ThemeProps } from '@core/theme'\nimport * as PIXI from 'pixi.js'\nimport * as C from 'colay/color'\nimport {\n  applyDefaultProps, preprocessProps,\n} from '@utils'\nimport {\n  PIXIBasicStyle, PIXIShapeStyle, PIXIBasicProps,\n} from '@type'\n\nexport type ViewProps = PIXIBasicProps & {\n  style?: PIXIBasicStyle & PIXIShapeStyle;\n  children?: React.ReactNode;\n}\n\nexport type ViewType = React.FC<ViewProps>\n\nexport type ViewRef = PIXI.Graphics\n\n// @ts-ignore\nconst ViewPIXI = PixiComponent<ViewProps & ThemeProps, PIXI.Graphics>('View', {\n  create: () => {\n    const instance = new PIXI.Graphics()\n    // contextMenu\n    // instance.contextMenu = createContextMenu({ items: contextMenu })\n    // instance.on('rightclick', (e: PIXI.interaction.InteractionEvent) => {\n    //   instance.contextMenu.onContextMenu(e.data.originalEvent)\n    // })\n    return instance\n  },\n  applyProps: (instance: PIXI.Graphics, oldProps, _props) => {\n    const props = preprocessProps(_props)\n    const {\n      style: {\n        width = instance.width,\n        height = instance.height,\n        backgroundColor = 0xffffff, \n        borderRadius = 0,\n        borderWidth = 0,\n        borderColor = 0xffffff,\n      } = {},\n    } = props\n    instance.clear()\n    if (backgroundColor) {\n      instance.beginFill(backgroundColor, C.getAlpha(backgroundColor))\n      instance.lineStyle(borderWidth, borderColor)\n      const radius = width / 2\n      if ((width === height) && (borderRadius >= radius)) {\n        instance.drawCircle(radius, radius, radius)\n      } else {\n        instance.drawRoundedRect(0, 0, width, height, borderRadius)\n      }\n    }\n    instance.endFill()\n    applyDefaultProps(instance, oldProps, props)\n  },\n})\n\nconst ViewElement = (\n  props: ViewProps,\n  forwardedRef: React.ForwardedRef<ViewRef>,\n) => {\n  const theme = useTheme()\n  return (\n    <ViewPIXI\n      ref={forwardedRef}\n      theme={theme}\n      {...props}\n    />\n\n  )\n}\n\nexport const View = wrapComponent<\nPropsWithRef<PIXI.Container, ViewProps>\n>(ViewElement, { isForwardRef: true })\n// >\n//   <FlexContainer style={rest.style}>\n//     {children}\n//   </FlexContainer>\n// </ViewPIXI>\n","import React from 'react'\nimport { wrapComponent } from 'colay-ui'\nimport {\n  NodeData,\n} from '@type'\nimport { Position } from 'colay-ui/type'\nimport { Pressable } from '@components/Pressable'\nimport { Image } from '@components/Image'\nimport { Text } from '@components/Text'\nimport { View, ViewProps } from '@components/View'\n\nexport type ProfileProps = {\n  name: string;\n  story: string;\n  image: string;\n  link?: string;\n  style?: ViewProps['style'];\n  onClick?: () => void;\n}\n// const SWITCH_COLLAPSE = 'SWITCH_COLLAPSE'\n\nexport type ProfileType = React.FC<ProfileProps>\n\nconst ProfileElement = (\n  props: ProfileProps,\n  __: React.ForwardedRef<ProfileType>,\n) => {\n  const {\n    name,\n    image,\n    story,\n    link,\n    onClick,\n  } = props\n  return (\n    <>\n      <View style={{\n        width: 300,\n        height: 150,\n        flexDirection: 'row',\n        borderRadius: 30,\n        backgroundColor: '#304e57',\n        paddingLeft: 10,\n        paddingTop: 10,\n      }}\n      >\n        <Image\n          source={{ uri: image }}\n          style={{\n            width: 100,\n            height: 100,\n          }}\n        />\n        <View\n          style={{ flexDirection: 'column', width: 200 }}\n        >\n          <View\n            style={{\n              left: 10,\n            }}\n            interactive\n            buttonMode\n            pointertap={() => {\n              if (link) {\n                window.open(link, '_blank')\n              }\n              onClick?.()\n            }}\n          >\n            <Text\n              style={style.title}\n            >\n              {name}\n            </Text>\n          </View>\n          <Text\n          // @ts-ignore\n            style={style.paragraph}\n          >\n            {story}\n          </Text>\n\n        </View>\n      </View>\n\n    </>\n  )\n}\n\nexport const ProfileTemplate = wrapComponent<ProfileProps>(\n  ProfileElement,\n  {\n    isForwardRef: true,\n  },\n)\n\nconst style = {\n  paragraph: {\n    // align: 'center',\n    fontFamily: '\"Source Sans Pro\", Helvetica, sans-serif',\n    fontSize: 10,\n    // fontWeight: 300,\n    // fill: ['#ffffff', '#00ff99'], // gradient\n    // stroke: '#01d27e',\n    // strokeThickness: 5,\n    // letterSpacing: 20,\n    // dropShadow: false,\n    // dropShadowColor: '#ccced2',\n    // dropShadowBlur: 4,\n    // dropShadowAngle: Math.PI / 6,\n    // dropShadowDistance: 6,\n    width: 150,\n    wordWrap: true,\n    wordWrapWidth: 150,\n    color: 'white',\n    left: 30,\n  },\n  title: {\n    // align: 'center',\n    fontFamily: '\"Source Sans Pro\", Helvetica, sans-serif',\n    fontSize: 16,\n    // fontWeight: 400,\n    // fill: ['#ffffff', '#00ff99'], // gradient\n    // stroke: '#01d27e',\n    // strokeThickness: 5,\n    // letterSpacing: 20,\n    // dropShadow: false,\n    // dropShadowColor: '#ccced2',\n    // dropShadowBlur: 4,\n    // dropShadowAngle: Math.PI / 6,\n    // dropShadowDistance: 6,\n    width: 150,\n    wordWrap: true,\n    wordWrapWidth: 150,\n    color: 'white',\n  },\n}\n\n// const createLayout = layoutCreator({\n//   graphID,\n//   predicate: (element) => element.id() === id || _.find(cluster, { id: element.id() }),\n//   options: {\n//     name: 'grid',\n//     boundingBox: {\n//       x1: 0, y1: 0, w: window.innerWidth, h: window.innerHeight,\n//     },\n//     transform: (node, position) => {\n//       // const anim = new Animation({\n//       //   autoplay: false,\n//       //   from: {\n//       //     ...node.position(),\n//       //   },\n//       //   to: position,\n//       //   update: (s) => {\n//       //     node.position(s)\n//       //     getContext(node).render()\n//       //   },\n//       //   // duration: 10,\n//       // })\n//       // anim.play()\n//       return position\n//     },\n//   },\n// })\n","// @ts-nocheck\n\nimport * as R from 'colay/ramda'\nimport {\n  Core,\n  EdgeSingular,\n  NodeSingular,\n  Collection,\n} from 'cytoscape'\n\n// configSchema: {\n//   required: [],\n//   properties: {\n\n//   },\n// },\n\nconst getAttribute = (params: {\n  pathText: string;\n  nodes: any[];\n  edges: any[];\n}) => (element: any) => {\n  const {\n    pathText,\n    nodes = [],\n    edges = [],\n  } = params\n  const id = element.id()\n  const item = (element.isNode() ? nodes : edges).find((item) => item.id === id)\n  return R.path(pathText.split('.'), item)\n}\n\ntype ClusterAlgorithm = {\n  get: (arg: { cy: cytoscape.Core; attributes: string}) => Collection[];\n  getByItem: (\n    arg: {\n      cy: Core;\n      attributes: string;\n      nodes: NodeSingular[];\n      edges: EdgeSingular[];\n    }\n  ) => cytoscape.Collection[];\n  configSchema: any;\n  configForm: any;\n}\nexport const Clusters: Record<string, ClusterAlgorithm> = {\n  markov: {\n    /**\n                 * @function\n                 * @param {{ cy: cytoscape.Core, attributes: [string] | string}} options\n                *  @return {}\n                 */\n    // @ts-ignore\n    get: ({ cy, attributes, ...options }) => cy.elements().markovClustering({\n      ...options,\n      attributes: [\n        (edge: EdgeSingular) => edge.data(attributes),\n      ],\n    }),\n    getByItem: ({\n      cy, nodes, edges, attributes, ...options\n      // @ts-ignore\n    }) => cy.elements().markovClustering({\n      ...options,\n      attributes: [\n        getAttribute({\n          edges,\n          nodes,\n          pathText: attributes,\n        }),\n      ],\n    }),\n    configSchema: {\n      required: ['attributes'],\n      properties: {\n        attributes: {\n          type: 'string',\n          default: 'label',\n          info: 'each of which returns a numeric attribute value for the specified edge. Attributes are used to cluster the nodes; i.e. the attributes of an edge indicate similarity between its nodes.',\n        },\n        expandFactor: {\n          type: 'number',\n          default: 2,\n          info: 'A number that affects time of computation and cluster granularity to some extent: M * M (defaultValue 2)',\n        },\n        inflateFactor: {\n          type: 'number',\n          default: 1,\n          info: 'A number that affects cluster granularity (the greater the value, the more clusters): M(i,j) / E(j)',\n        },\n        multFactor: {\n          type: 'number',\n          default: 1,\n          info: 'Optional number of self loops for each node. Use a neutral value to improve cluster computations',\n        },\n        maxIterations: {\n          type: 'number',\n          default: 20,\n          info: 'Maximum number of iterations of the MCL algorithm in a single run',\n        },\n      },\n    },\n    configForm: {\n      attributes: {\n        type: 'string',\n        defaultValue: 'label',\n        info: 'each of which returns a numeric attribute value for the specified edge. Attributes are used to cluster the nodes; i.e. the attributes of an edge indicate similarity between its nodes.',\n        required: true,\n      },\n      expandFactor: {\n        type: 'number',\n        defaultValue: 2,\n        info: 'A number that affects time of computation and cluster granularity to some extent: M * M (defaultValue 2)',\n      },\n      inflateFactor: {\n        type: 'number',\n        defaultValue: 1,\n        info: 'A number that affects cluster granularity (the greater the value, the more clusters): M(i,j) / E(j)',\n      },\n      multFactor: {\n        type: 'number',\n        defaultValue: 1,\n        info: 'Optional number of self loops for each node. Use a neutral value to improve cluster computations',\n      },\n      maxIterations: {\n        type: 'number',\n        defaultValue: 20,\n        info: 'Maximum number of iterations of the MCL algorithm in a single run',\n      },\n    },\n  },\n  kMeans: {\n    /**\n                 * @function\n                 * @param {{ cy: cytoscape,attributes: [string] | string, k: number}} options\n                *  @return {function}\n                 */\n    // @ts-ignore\n    get: ({ cy, attributes, ...options }) => cy.nodes().kMeans({\n      ...options,\n      attributes: [\n        (node: NodeSingular) => node.data(attributes),\n      ],\n    }),\n    getByItem: ({\n      cy, nodes, edges, attributes, ...options\n      // @ts-ignore\n    }) => cy.elements().kMeans({\n      ...options,\n      attributes: [\n        getAttribute({\n          edges,\n          nodes,\n          pathText: attributes,\n        }),\n      ],\n    }),\n    configSchema: {\n      required: ['attributes', 'k', 'distance'],\n      properties: {\n        attributes: {\n          type: 'string',\n          default: 'label',\n          info: 'each of which returns a numeric attribute value for the specified node. Attributes are used to cluster the nodes; i.e. two nodes with similar attributes tend to be in the same cluster. Each attribute may have to be normalised in order for the chosen distance metric to make sense. Attributes must be specified unless a custom distance: function( nodeP, nodeQ ) is specified.',\n        },\n        k: {\n          type: 'number',\n          default: 2,\n          info: 'The number of clusters to return.',\n        },\n        distance: {\n          type: 'string',\n          default: 'euclidean',\n          enum: ['euclidean', 'squaredEuclidean', 'manhattan', 'max'],\n          info: 'The distance classifier used to compare attribute vectors. It is optional if attributes are specified.',\n        },\n        maxIterations: {\n          type: 'number',\n          default: 10,\n          info: 'The maximum number of iterations of the algorithm to run ',\n        },\n        sensitivityThreshold: {\n          type: 'number',\n          default: 0.001,\n          info: 'The coefficients difference threshold used to determine whether the algorithm has converged',\n        },\n      },\n    },\n    configForm: {\n      attributes: {\n        type: 'string',\n        defaultValue: 'label',\n        info: 'each of which returns a numeric attribute value for the specified node. Attributes are used to cluster the nodes; i.e. two nodes with similar attributes tend to be in the same cluster. Each attribute may have to be normalised in order for the chosen distance metric to make sense. Attributes must be specified unless a custom distance: function( nodeP, nodeQ ) is specified.',\n        required: true,\n      },\n      k: {\n        type: 'number',\n        defaultValue: 2,\n        info: 'The number of clusters to return.',\n        required: true,\n      },\n      distance: {\n        type: 'choice',\n        defaultValue: 'euclidean',\n        choices: ['euclidean', 'squaredEuclidean', 'manhattan', 'max'],\n        info: 'The distance classifier used to compare attribute vectors. It is optional if attributes are specified.',\n        required: true,\n      },\n      maxIterations: {\n        type: 'number',\n        defaultValue: 10,\n        info: 'The maximum number of iterations of the algorithm to run ',\n      },\n      sensitivityThreshold: {\n        type: 'number',\n        defaultValue: 0.001,\n        info: 'The coefficients difference threshold used to determine whether the algorithm has converged',\n      },\n    },\n  },\n  kMedoids: {\n    /**\n                 * @function\n                 * @param {{ cy: cytoscape,attributes: [string] | string, k: number}} options\n                *  @return {function}\n                 */\n    // @ts-ignore\n    get: ({ cy, attributes, ...options }) => cy.nodes().kMedoids({\n      ...options,\n      attributes: [\n        (node: NodeSingular) => node.data(attributes),\n      ],\n    }),\n    getByItem: ({\n      cy, nodes, edges, attributes, ...options\n    }) => cy.elements().kMedoids({\n      ...options,\n      attributes: [\n        getAttribute({\n          edges,\n          nodes,\n          pathText: attributes,\n        }),\n      ],\n    }),\n    configSchema: {\n      required: ['attributes', 'k', 'distance'],\n      properties: {\n        attributes: {\n          type: 'string',\n          default: 'label',\n          info: 'each of which returns a numeric attribute value for the specified node. Attributes are used to cluster the nodes; i.e. two nodes with similar attributes tend to be in the same cluster. Each attribute may have to be normalised in order for the chosen distance metric to make sense',\n        },\n        k: {\n          type: 'number',\n          default: 2,\n          info: 'The number of clusters to return.',\n        },\n        distance: {\n          type: 'string',\n          default: 'euclidean',\n          enum: ['euclidean', 'squaredEuclidean', 'manhattan', 'max'],\n          info: 'The distance classifier used to compare attribute vectors. It is optional if attributes are specified.',\n        },\n        maxIterations: {\n          type: 'number',\n          default: 10,\n          info: 'The maximum number of iterations of the algorithm to run ',\n        },\n      },\n    },\n    configForm: {\n      attributes: {\n        type: 'string',\n        defaultValue: 'label',\n        info: 'each of which returns a numeric attribute value for the specified node. Attributes are used to cluster the nodes; i.e. two nodes with similar attributes tend to be in the same cluster. Each attribute may have to be normalised in order for the chosen distance metric to make sense',\n        required: true,\n      },\n      k: {\n        type: 'number',\n        defaultValue: 2,\n        info: 'The number of clusters to return.',\n        required: true,\n      },\n      distance: {\n        type: 'choice',\n        defaultValue: 'euclidean',\n        choices: ['euclidean', 'squaredEuclidean', 'manhattan', 'max'],\n        info: 'The distance classifier used to compare attribute vectors. It is optional if attributes are specified.',\n        required: true,\n      },\n      maxIterations: {\n        type: 'number',\n        defaultValue: 10,\n        info: 'The maximum number of iterations of the algorithm to run ',\n      },\n    },\n  },\n  fuzzyCMeans: {\n    /**\n                 * @function\n                 * @param {{ cy: cytoscape,attributes: [string] | string, k: number}} options\n                *  @return {function}\n                 */\n    get: ({ cy, attributes, ...options }) => cy.nodes().fuzzyCMeans({\n      ...options,\n      attributes: [\n        (node: NodeSingular) => node.data(attributes),\n      ],\n    }),\n    getByItem: ({\n      cy, nodes, edges, attributes, ...options\n      // @ts-ignore\n    }) => cy.elements().fuzzyCMeans({\n      ...options,\n      attributes: [\n        getAttribute({\n          edges,\n          nodes,\n          pathText: attributes,\n        }),\n      ],\n    }),\n    configSchema: {\n      required: [\n        'attributes',\n        'k',\n        'distance',\n      ],\n      properties: {\n        attributes: {\n          type: 'string',\n          default: 'label',\n          info: 'each of which returns a numeric attribute value for the specified node. Attributes are used to cluster the nodes; i.e. two nodes with similar attributes tend to be in the same cluster. Each attribute may have to be normalised in order for the chosen distance metric to make sense',\n        },\n        k: {\n          type: 'number',\n          default: 2,\n          info: 'The number of clusters to return.',\n        },\n        distance: {\n          type: 'string',\n          default: 'euclidean',\n          enum: ['euclidean', 'squaredEuclidean', 'manhattan', 'max'],\n          info: 'The distance classifier used to compare attribute vectors. It is optional if attributes are specified.',\n        },\n        maxIterations: {\n          type: 'number',\n          default: 10,\n          info: 'The maximum number of iterations of the algorithm to run ',\n        },\n        sensitivityThreshold: {\n          type: 'number',\n          default: 0.001,\n          info: 'The coefficients difference threshold used to determine whether the algorithm has converged',\n        },\n      },\n    },\n    configForm: {\n      attributes: {\n        type: 'string',\n        defaultValue: 'label',\n        info: 'each of which returns a numeric attribute value for the specified node. Attributes are used to cluster the nodes; i.e. two nodes with similar attributes tend to be in the same cluster. Each attribute may have to be normalised in order for the chosen distance metric to make sense',\n        required: true,\n      },\n      k: {\n        type: 'number',\n        defaultValue: 2,\n        info: 'The number of clusters to return.',\n        required: true,\n      },\n      distance: {\n        type: 'choice',\n        defaultValue: 'euclidean',\n        choices: ['euclidean', 'squaredEuclidean', 'manhattan', 'max'],\n        info: 'The distance classifier used to compare attribute vectors. It is optional if attributes are specified.',\n        required: true,\n      },\n      maxIterations: {\n        type: 'number',\n        defaultValue: 10,\n        info: 'The maximum number of iterations of the algorithm to run ',\n      },\n      sensitivityThreshold: {\n        type: 'number',\n        defaultValue: 0.001,\n        info: 'The coefficients difference threshold used to determine whether the algorithm has converged',\n      },\n    },\n  },\n  hierarchical: {\n    /**\n                 * @function\n                 * @param {{ cy: cytoscape,mode: 'threshold', threshold: number, attributes: [string] | string}} param_name\n                *  @return {function}\n                 */\n    // @ts-ignore\n    get: ({ cy, attributes, ...options }) => cy.nodes().hierarchicalClustering({\n      ...options,\n      attributes: [\n        (node: NodeSingular) => node.data(attributes),\n      ],\n    }),\n    getByItem: ({\n      cy, nodes, edges, attributes, ...options\n    }) => cy.elements().hierarchicalClustering({\n      ...options,\n      attributes: [\n        getAttribute({\n          edges,\n          nodes,\n          pathText: attributes,\n        }),\n      ],\n    }),\n    configSchema: {\n      required: ['attributes', 'distance', 'mode'],\n      properties: {\n        attributes: {\n          type: 'string',\n          default: 'label',\n          info: 'each of which returns a numeric attribute value for the specified node. Attributes are used to cluster the nodes; i.e. two nodes with similar attributes tend to be in the same cluster. Each attribute may have to be normalised in order for the chosen distance metric to make sense',\n        },\n        distance: {\n          type: 'string',\n          default: 'euclidean',\n          enum: ['euclidean', 'squaredEuclidean', 'manhattan', 'max'],\n          info: 'The distance classifier used to compare attribute vectors. It is optional if attributes are specified.',\n          required: true,\n        },\n        linkage: {\n          type: 'string',\n          default: 'single',\n          enum: ['mean', 'min', 'complete', 'max'],\n          info: 'The linkage criterion for measuring the distance between two clusters;',\n        },\n        mode: {\n          type: 'string',\n          default: 'threshold',\n          enum: ['threshold', 'dendogram'],\n          info: ' The mode of the algorithm. For \\'threshold\\' (defaultValue), clusters are merged until they are at least the specified distance apart. For \\'dendrogram\\', the clusters are recursively merged using the branches in a dendrogram (tree) structure beyond a specified depth.',\n        },\n        threshold: {\n          type: 'number',\n          default: null,\n          info: 'In mode: \\'threshold\\', distance threshold for stopping the algorithm. All pairs of the returned clusters are at least threshold distance apart. Without specifying this value for mode: \\'threshold\\', all clusters will eventually be merged into a single cluster.',\n        },\n        dendrogramDepth: {\n          type: 'number',\n          default: null,\n          info: 'In mode: \\'dendrogram\\', the depth beyond which branches are merged in the tree. For example, a value of 0 (defaultValue) results in all branches being merged into a single cluster.',\n        },\n        addDendrogram: {\n          type: 'number',\n          default: null,\n          info: 'In mode: \\'dendrogram\\', whether to add nodes and edges to the graph for the dendrogram (defaultValue false). This is not necessary to run the algorithm, but it is useful for visualising the results.',\n        },\n      },\n    },\n    configForm: {\n      attributes: {\n        type: 'string',\n        defaultValue: 'label',\n        info: 'each of which returns a numeric attribute value for the specified node. Attributes are used to cluster the nodes; i.e. two nodes with similar attributes tend to be in the same cluster. Each attribute may have to be normalised in order for the chosen distance metric to make sense',\n        required: true,\n      },\n      distance: {\n        type: 'choice',\n        defaultValue: 'euclidean',\n        choices: ['euclidean', 'squaredEuclidean', 'manhattan', 'max'],\n        info: 'The distance classifier used to compare attribute vectors. It is optional if attributes are specified.',\n        required: true,\n      },\n      linkage: {\n        type: 'choice',\n        defaultValue: 'single',\n        choices: ['mean', 'min', 'complete', 'max'],\n        info: 'The linkage criterion for measuring the distance between two clusters;',\n      },\n      mode: {\n        type: 'choice',\n        defaultValue: 'threshold',\n        choices: ['threshold', 'dendogram'],\n        info: ' The mode of the algorithm. For \\'threshold\\' (defaultValue), clusters are merged until they are at least the specified distance apart. For \\'dendrogram\\', the clusters are recursively merged using the branches in a dendrogram (tree) structure beyond a specified depth.',\n        required: true,\n      },\n      threshold: {\n        type: 'number',\n        defaultValue: null,\n        info: 'In mode: \\'threshold\\', distance threshold for stopping the algorithm. All pairs of the returned clusters are at least threshold distance apart. Without specifying this value for mode: \\'threshold\\', all clusters will eventually be merged into a single cluster.',\n      },\n      dendrogramDepth: {\n        type: 'number',\n        defaultValue: null,\n        info: 'In mode: \\'dendrogram\\', the depth beyond which branches are merged in the tree. For example, a value of 0 (defaultValue) results in all branches being merged into a single cluster.',\n      },\n      addDendrogram: {\n        type: 'number',\n        defaultValue: null,\n        info: 'In mode: \\'dendrogram\\', whether to add nodes and edges to the graph for the dendrogram (defaultValue false). This is not necessary to run the algorithm, but it is useful for visualising the results.',\n      },\n    },\n  },\n  affinityPropagation: {\n    /**\n                 * @function\n                 * @param {{ cy: cytoscape,attributes: [string] | string}} options\n                *  @return {function}\n                 */\n    // @ts-ignore\n    get: ({ cy, attributes, ...options }) => cy.nodes().affinityPropagation({\n      ...options,\n      attributes: [\n        (node: NodeSingular) => node.data(attributes),\n      ],\n    }),\n    getByItem: ({\n      cy, nodes, edges, attributes, ...options\n      // @ts-ignore\n    }) => cy.elements().affinityPropagation({\n      ...options,\n      attributes: [\n        getAttribute({\n          edges,\n          nodes,\n          pathText: attributes,\n        }),\n      ],\n    }),\n    configSchema: {\n      required: ['attributes', 'distance'],\n      properties: {\n        attributes: {\n          type: 'string',\n          default: 'label',\n          info: 'each of which returns a numeric attribute value for the specified node. Attributes are used to cluster the nodes; i.e. two nodes with similar attributes tend to be in the same cluster. Each attribute may have to be normalised in order for the chosen distance metric to make sense',\n        },\n        distance: {\n          type: 'string',\n          default: 'euclidean',\n          enum: ['euclidean', 'squaredEuclidean', 'manhattan', 'max'],\n          info: 'The distance classifier used to compare attribute vectors. It is optional if attributes are specified.',\n        },\n        preference: {\n          type: 'string',\n          default: 'median',\n          enum: ['mean', 'min', 'complete', 'max'],\n          info: 'The metric used to determine the suitability of a data point (i.e. node attribute vector) to serve as an exemplar. It may take on one of several special values, which are determined from the similarity matrix (i.e. the negative distance matrix). Or a manual, numeric value may be used (generally of the opposite sign of your distance values)',\n        },\n        damping: {\n          type: 'number',\n          default: 0.8,\n          maximum: 1,\n          minimum: 0.5,\n          includeMin: true,\n          info: 'A damping factor on [0.5, 1)',\n        },\n        minIterations: {\n          type: 'number',\n          default: 100,\n          info: 'The minimum number of iteraions the algorithm will run before stopping',\n        },\n        maxIterations: {\n          type: 'number',\n          default: 1000,\n          info: 'The maximum number of iteraions the algorithm will run before stopping',\n        },\n      },\n    },\n    configForm: {\n      attributes: {\n        type: 'string',\n        defaultValue: 'label',\n        info: 'each of which returns a numeric attribute value for the specified node. Attributes are used to cluster the nodes; i.e. two nodes with similar attributes tend to be in the same cluster. Each attribute may have to be normalised in order for the chosen distance metric to make sense',\n        required: true,\n      },\n      distance: {\n        type: 'choice',\n        defaultValue: 'euclidean',\n        choices: ['euclidean', 'squaredEuclidean', 'manhattan', 'max'],\n        info: 'The distance classifier used to compare attribute vectors. It is optional if attributes are specified.',\n        required: true,\n      },\n      preference: {\n        type: 'choice',\n        defaultValue: 'median',\n        choices: ['mean', 'min', 'complete', 'max'],\n        info: 'The metric used to determine the suitability of a data point (i.e. node attribute vector) to serve as an exemplar. It may take on one of several special values, which are determined from the similarity matrix (i.e. the negative distance matrix). Or a manual, numeric value may be used (generally of the opposite sign of your distance values)',\n      },\n      damping: {\n        type: 'number',\n        defaultValue: 0.8,\n        max: 1,\n        min: 0.5,\n        includeMin: true,\n        info: 'A damping factor on [0.5, 1)',\n      },\n      minIterations: {\n        type: 'number',\n        defaultValue: 100,\n        info: 'The minimum number of iteraions the algorithm will run before stopping',\n      },\n      maxIterations: {\n        type: 'number',\n        defaultValue: 1000,\n        info: 'The maximum number of iteraions the algorithm will run before stopping',\n      },\n    },\n  },\n} as const\n","import React from 'react'\nimport { Position } from 'colay-ui/type'\nimport { BoundingBox, NodeElement } from '@type'\nimport * as PIXI from 'pixi.js'\nimport {\n  PixiComponent,\n} from '@inlet/react-pixi'\nimport * as R from 'colay/ramda'\nimport * as V from 'colay/vector'\nimport * as C from 'colay/color'\nimport { applyDefaultProps, preprocessProps } from '@utils'\nimport { DefaultTheme } from '@core/theme'\nimport { wrapComponent } from 'colay-ui'\nimport { EDGE_LINE_Z_INDEX } from '@constants'\n\nexport type GraphicsProps = {\n\n}\n\ntype BezierLinePoints = {\n  start: Position;\n  mid: Position;\n  end: Position;\n}\nconst controlPointsCreator = {\n  bezier: (config: {\n    from: Position;\n    to: Position;\n    unitVector: Position;\n    distance: number;\n    count: number;\n    normVector: Position;\n  }): BezierLinePoints[] => {\n    const {\n      from,\n      to,\n      distance,\n      count,\n      unitVector,\n      normVector,\n    } = config\n    const upperVector = V.multiplyScalar(distance)(normVector)\n    const lowerVector = V.multiplyScalar(-1)(upperVector)\n    const chunkDistanceVector = R.pipe(\n      V.subtract(from),\n      V.divideScalar(count),\n    )(to)\n    const semiChunkDistanceVector = V.divideScalar(2)(chunkDistanceVector)\n    return R.mapIndexed(\n      (_, index: number) => {\n        const isUpper = index % 2 === 0\n        const startVec = R.pipe(\n          V.multiplyScalar(index),\n          V.add(from),\n        )(chunkDistanceVector)\n        const endVec = V.add(startVec)(chunkDistanceVector)\n        const midVec = R.pipe(\n          V.add(semiChunkDistanceVector),\n          V.add(isUpper ? upperVector : lowerVector),\n        )(startVec)\n        return {\n          start: startVec,\n          mid: midVec,\n          end: endVec,\n          upperVector,\n          midVec: R.pipe(\n            V.add(semiChunkDistanceVector),\n          )(startVec),\n        }\n      },\n    )(R.range(0, count))\n  },\n}\nconst drawArrowHead = ({\n  graphics,\n  to,\n  radius = 10,\n  unitVector,\n  fill,\n}: {\n  graphics: PIXI.Graphics;\n  unitVector: Position;\n  to: Position;\n  radius?: number;\n  fill: number;\n}) => {\n  const bottomCenter = to\n  const unitDistanceVec = V.multiplyScalar(radius)(unitVector)\n  const perpendicularUnitDistanceVec = V.rotate(-Math.PI / 2)(unitDistanceVec)\n  const leftControlPoint = R.pipe(\n    V.multiplyScalar(-1),\n    V.add(bottomCenter),\n  )(perpendicularUnitDistanceVec)\n  const rightControlPoint = R.pipe(\n    V.add(bottomCenter),\n  )(perpendicularUnitDistanceVec)\n  const topControlPoint = V.add(unitDistanceVec)(to)\n  graphics.beginFill(fill)\n  graphics.drawPolygon(\n    new PIXI.Point(leftControlPoint.x, leftControlPoint.y),\n    new PIXI.Point(rightControlPoint.x, rightControlPoint.y),\n    new PIXI.Point(topControlPoint.x, topControlPoint.y),\n  )\n  graphics.endFill()\n  graphics.isSprite = true\n}\nexport const drawLine = (\n  config: {\n    graphics: PIXI.Graphics;\n    sourceElement: NodeElement;\n    targetElement: NodeElement;\n    from: BoundingBox;\n    to: BoundingBox;\n    unitVector: Position;\n    distanceVector: Position;\n    normVector: Position;\n    undirectedUnitVector:Position;\n    undirectedNormVector:Position;\n    fill?: number;\n    directed?: boolean;\n    type?: 'bezier' | 'segments' | 'straight';\n    width?: number;\n    alpha?: number;\n    arrowHead?: {\n      radius?: number;\n    };\n    distance?: number;\n    margin?: Position;\n  },\n) => {\n  const {\n    from: fromBoundingBox,\n    to: toBoundingBox,\n    fill = C.rgbNumber(DefaultTheme.palette.background.paper),\n    directed,\n    type, //= 'bezier',\n    graphics,\n    width = 6,\n    alpha = 1,\n    arrowHead = {\n      radius: 2,\n    },\n    distance,\n    margin = {\n      x: 0,\n      y: 0,\n    },\n    unitVector,\n    normVector,\n    undirectedUnitVector,\n    undirectedNormVector,\n    // distanceVector,\n  } = config\n  const marginVector = {\n    x: undirectedNormVector.x * margin.x,\n    y: undirectedNormVector.y * margin.y,\n  }\n  const radiusFrom = Math.hypot(fromBoundingBox.width, fromBoundingBox.height) / 2\n  const radiusTo = Math.hypot(toBoundingBox.width, toBoundingBox.height) / 2\n  const centerOfFrom = V.add(\n    fromBoundingBox.width / 2,\n    fromBoundingBox.height / 2,\n  )(fromBoundingBox)\n  const centerOfTo = V.add(\n    toBoundingBox.width / 2,\n    toBoundingBox.height / 2,\n  )(toBoundingBox)\n  const from = R.pipe(\n    V.add(V.multiplyScalar(radiusFrom)(unitVector)),\n    V.add(marginVector),\n  )(centerOfFrom)\n  const to = R.pipe(\n    V.subtract(V.multiplyScalar(radiusTo)(unitVector)),\n    V.add(marginVector),\n  )(centerOfTo)\n  graphics.clear()\n  graphics.lineStyle(width, fill, alpha)\n\n  if (directed) {\n    drawArrowHead({\n      graphics,\n      unitVector,\n      to,\n      fill,\n      ...arrowHead,\n    })\n  }\n\n  R.cond([\n    [\n      R.equals('bezier'),\n      () => {\n        const controlPoints = controlPointsCreator.bezier({\n          from,\n          to,\n          count: 2,\n          distance: 100,\n          unitVector: undirectedUnitVector,\n          normVector: undirectedNormVector,\n        })\n        R.map(\n          ({\n            start,\n            end,\n            control1,\n            control2,\n          }: BezierLinePoints) => {\n            graphics.moveTo(start.x, start.y)\n            graphics.bezierCurveTo(\n              control1.x, control1.y, control2.x, control2.y, end.x, end.y,\n            )\n          },\n        )(controlPoints)\n      },\n    ],\n    [\n      R.equals('segments'),\n      () => {\n        const controlPoints = controlPointsCreator.bezier({\n          from,\n          to,\n          count: 4,\n          distance: 100,\n          unitVector: undirectedUnitVector,\n          normVector: undirectedNormVector,\n        })\n        R.map(\n          ({\n            start,\n            mid,\n            end,\n          }: BezierLinePoints) => {\n            graphics.moveTo(start.x, start.y)\n            graphics.lineTo(\n              mid.x, mid.y,\n            )\n            graphics.moveTo(mid.x, mid.y)\n            graphics.lineTo(\n              end.x, end.y,\n            )\n          },\n        )(controlPoints)\n      },\n    ],\n    [\n      R.T,\n      () => {\n        if (distance) {\n          const controlPoints = controlPointsCreator.bezier({\n            from,\n            to,\n            count: 1,\n            distance,\n            unitVector: undirectedUnitVector,\n            normVector: undirectedNormVector,\n          })\n          R.map(\n            ({\n              mid,\n              start,\n              end,\n            }: BezierLinePoints) => {\n              graphics.moveTo(start.x, start.y)\n              graphics.bezierCurveTo(\n                start.x, start.y, mid.x, mid.y, end.x, end.y,\n              )\n            },\n          )(controlPoints)\n        } else {\n          graphics.moveTo(from.x, from.y)\n          graphics.lineTo(to.x, to.y)\n        }\n      },\n    ],\n  ])(type)\n  graphics.endFill()\n  graphics.zIndex = EDGE_LINE_Z_INDEX\n}\n\nexport const drawGraphics = (instance: PIXI.Graphics, props: {\n  style: any\n}) => {\n  const {\n    style: {\n      width = 0,\n      height = 0,\n      backgroundColor = 'black',\n      borderRadius = 0,\n      borderWidth = 0,\n      borderColor = 'black',\n    } = {},\n  } = props\n  instance.clear()\n  instance.beginFill(C.rgbNumber(backgroundColor), C.getAlpha(backgroundColor))\n  instance.lineStyle(borderWidth, C.rgbNumber(borderColor))\n  const radius = width / 2\n  if ((width === height) && (borderRadius >= radius)) {\n    instance.drawCircle(radius, radius, radius)\n  } else {\n    instance.drawRoundedRect(0, 0, width, height, borderRadius)\n  }\n  instance.endFill()\n}\n\n// @ts-ignore\nconst GraphicsPIXI = PixiComponent<GraphProps, PIXI.Graphics>('Graphics2', {\n  create: (props: GraphProps) => {\n    const instance = new PIXI.Graphics()\n    return instance\n  },\n  applyProps: (mutableInstance: PIXI.Graphics, oldProps, _props) => {\n    const props = preprocessProps(_props)\n    const {\n      ...restProps\n    } = props\n\n    applyDefaultProps(mutableInstance, oldProps, restProps)\n  },\n})\n\nfunction GraphicsElement(props: GraphProps, forwardRef: any) {\n  return (\n    <GraphicsPIXI\n      ref={forwardRef}\n      {...props}\n    />\n  )\n}\n\nexport const Graphics = wrapComponent<GraphProps>(\n  GraphicsElement, {\n    isForwardRef: true,\n  },\n)\n","import React from 'react'\nimport * as PIXI from 'pixi.js'\nimport * as R from 'colay/ramda'\nimport { PIXIBasicStyle, PIXIShapeStyle } from '@type'\nimport { View, ViewProps } from '../View'\n\nexport type PressableProps = {\n  style?: PIXIBasicStyle & PIXIShapeStyle;\n  children?: React.ReactNode;\n  buttonMode?: boolean;\n} & ViewProps\n\n// const PressablePIXI = PixiComponent<PressableProps, PIXI.Container>('PressablePIXI', {\n//   create: () => {\n//     const mutableInstance = new PIXI.Container()\n//     mutableInstance.interactive = true\n//     mutableInstance.buttonMode = true\n//     return mutableInstance\n//   },\n//   applyProps: (\n//     instance: PIXI.Graphics,\n//     oldProps,\n//     _props,\n//   ) => applyDefaultProps(instance, oldProps, preprocessProps(_props))\n//   ,\n// })\n\nexport const Pressable = (props: PressableProps) => {\n  const {\n    // onLongPress,\n    // onPress,\n    // onDoublePress,\n    // onHoverEnd,\n    // onHoverStart,\n    // onPressChange,\n    // onPressEnd,\n    // onPressMove,\n    // onPressStart,\n    buttonMode,\n    ...rest\n  } = props\n  // const events = useEvents(\n  //   R.omitBy(R.isNil, {\n  //     onLongPress,\n  //     onPress,\n  //     onDoublePress,\n  //     onHoverEnd,\n  //     onHoverStart,\n  //     onPressChange,\n  //     onPressEnd,\n  //     onPressMove,\n  //     onPressStart,\n  //   }),\n  //   {\n  //     extraData: [\n  //       onLongPress,\n  //       onPress,\n  //       onDoublePress,\n  //       onHoverEnd,\n  //       onHoverStart,\n  //       onPressChange,\n  //       onPressEnd,\n  //       onPressMove,\n  //       onPressStart,\n  //     ],\n  //   },\n  // )\n  const viewRef = React.useRef<PIXI.Container>(null)\n  React.useEffect(() => {\n    R.when(\n      R.isNotNil,\n      () => {\n        const mutableContainer = viewRef.current as PIXI.Container\n        mutableContainer.buttonMode = !!buttonMode\n        mutableContainer.interactive = true\n      },\n    )(viewRef.current)\n  }, [viewRef, buttonMode])\n  return (\n    <View\n      ref={viewRef}\n      {...rest}\n      // {...events}\n    />\n  )\n}\n\n\n","// import '@utils/addFlexLayout'\nimport cytoscape from 'cytoscape'\nimport * as PIXI from 'pixi.js'\n// @ts-ignore\n// import euler from 'cytoscape-euler'\n// @ts-ignore\n// import cise from 'cytoscape-cise'\n// @ts-ignore\n// import d3Force from 'cytoscape-d3-force'\n// @ts-ignore\n// import cola from 'cytoscape-cola'\n// @ts-ignore\n// import avsdf from 'cytoscape-avsdf'\n// @ts-ignore\n// import dagre from 'cytoscape-dagre'\n// @ts-ignore\n// import spread from 'cytoscape-spread'\n// @ts-ignore\n// import klay from 'cytoscape-klay'\n\n// cytoscape.use(klay)\n// spread(cytoscape)\n// cytoscape.use(dagre)\n// cytoscape.use(avsdf)\n// cytoscape.use(euler)\n// cytoscape.use(cise)\n// cytoscape.use(cola)\n// cytoscape.use(d3Force)\n\n// HIGH\n// PIXI.settings.ROUND_PIXELS = true\n// // @ts-ignore\n// PIXI.settings.PRECISION_FRAGMENT = PIXI.PRECISION.HIGH\n// PIXI.settings.RESOLUTION = 32// 64// window.devicePixelRatio\n// PIXI.settings.SCALE_MODE = PIXI.SCALE_MODES.LINEAR\n\n// LOW\nPIXI.settings.ROUND_PIXELS = false// true\n// @ts-ignore\nPIXI.settings.PRECISION_FRAGMENT = PIXI.PRECISION.LOW\nPIXI.settings.RESOLUTION = 1// 32// 64// window.devicePixelRatio\nPIXI.settings.SCALE_MODE = PIXI.SCALE_MODES.NEAREST\n","import React from 'react'\nimport cytoscape, { Core } from 'cytoscape'\nimport { Cluster, ClustersByNodeId, ClustersByChildClusterId } from '@type'\n\nexport const mutableGraphMap: Record<string, {\n  cy: Core;\n  clustersByNodeId: ClustersByNodeId;\n  clustersByChildClusterId: ClustersByChildClusterId;\n}> = {}\n\nexport type Props = {\n  id: string;\n  onLoad?: (cy: Core) => void;\n  create?: true;\n  clusters?: Cluster[];\n}\n\n// const createCanvas = () => {\n//   const canvas = document.createElement('canvas')\n//   canvas.width = window.innerWidth\n//   canvas.height = window.innerHeight\n//   document.body.appendChild(canvas)\n//   return canvas\n// }\nexport default (props: Props) => {\n  const {\n    onLoad,\n    id,\n    clusters = [],\n  } = props\n  const isExistRef = React.useRef(false)\n  const graph = React.useMemo(() => {\n    if (mutableGraphMap[id]) {\n      isExistRef.current = true\n      return mutableGraphMap[id]\n    }\n    const cyInstance = cytoscape({ // // create\n      elements: [],\n      headless: true,\n      styleEnabled: true,\n      // container: createCanvas(),\n      // style: [ // the stylesheet for the graph\n      //   {\n      //     selector: 'node',\n      //     style: {\n      //       'background-color': '#666',\n      //       label: 'data(id)',\n      //       width: 100,\n      //       height: 100,\n      //     },\n      //   },\n\n      //   {\n      //     selector: 'edge',\n      //     style: {\n      //       width: 3,\n      //       'line-color': '#ccc',\n      //       'target-arrow-color': '#ccc',\n      //       'target-arrow-shape': 'triangle',\n      //       // 'curve-style': 'bezier',\n      //     },\n      //   },\n      // ],\n\n    })\n    mutableGraphMap[id] = {\n      cy: cyInstance,\n      clustersByNodeId: {},\n      clustersByChildClusterId: {},\n    }\n    return mutableGraphMap[id]\n  }, [id])\n  const {\n    cy,\n  } = graph\n  React.useMemo(() => {\n    const clustersByNodeId: ClustersByNodeId = {}\n    clusters.forEach((cluster) => {\n      cluster.ids.forEach((nodeID) => {\n        const clusterById = clustersByNodeId[nodeID] ?? []\n        clusterById.push(cluster)\n        clustersByNodeId[nodeID] = clusterById\n      })\n    })\n    const clustersByChildClusterId: ClustersByChildClusterId = {}\n    clusters.forEach((cluster) => {\n      cluster.childClusterIds.forEach((clusterId) => {\n        const clusterById = clustersByChildClusterId[clusterId] ?? []\n        clusterById.push(cluster)\n        clustersByChildClusterId[clusterId] = clusterById\n      })\n    })\n    graph.clustersByNodeId = clustersByNodeId\n    graph.clustersByChildClusterId = clustersByChildClusterId\n  }, [graph, clusters])\n  React.useEffect(() => {\n    if (isExistRef.current) return\n    setTimeout(() => {\n      onLoad?.(cy)\n    }, 500)\n    return () => {\n      if (!isExistRef.current) {\n        delete mutableGraphMap[id]\n        cy.destroy()\n      }\n    }\n  }, // destroy\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [cy])\n  return graph\n}\n","import React from 'react'\nimport { Core, NodeSingular, EdgeSingular } from 'cytoscape'\nimport {\n  ElementContext, Element,\n  NodeConfig,\n  EdgeConfig,\n  ElementData,\n  ElementFilterOption,\n} from '@type'\nimport { CYTOSCAPE_EVENT, ELEMENT_DATA_FIELDS } from '@constants'\nimport { calculateVisibilityByContext, contextUtils } from '@utils'\nimport { useInitializedRef } from 'colay-ui/hooks/useInitializedRef'\n\nexport type Props = {\n  element: Element;\n  item: ElementData\n  cy: Core;\n  contextRef: React.RefObject<ElementContext>;\n  config: NodeConfig | EdgeConfig;\n  filter?: ElementFilterOption<Element>\n}\n\ntype Result = {\n\n}\n\nexport const useElement = (props: Props): Result => {\n  const {\n    // cy,\n    element,\n    contextRef,\n    config,\n    item,\n  } = props\n  const {\n    renderEvents = [],\n  } = config\n  const initializedRef = useInitializedRef()\n  // Update data\n  React.useEffect(\n    () => {\n      if (initializedRef.current) {\n        element.data({\n          [ELEMENT_DATA_FIELDS.DATA]: item?.data,\n        })\n      }\n    },\n    [item?.data],\n  )\n  // EventListeners\n  React.useEffect(\n    () => {\n      renderEvents.forEach((eventName) => {\n        element.on(eventName, () => {\n          contextRef.current?.render?.()\n        })\n      })\n      /// ADD SELECT_EDGE and SELECT_NODE Events ***\n      const isNode = element.isNode()\n      element.on(CYTOSCAPE_EVENT.select, () => {\n        if (isNode) {\n          (element as NodeSingular).connectedEdges().forEach((edge) => {\n            edge.emit(CYTOSCAPE_EVENT.selectNode)\n          })\n        } else {\n          const edge = element as EdgeSingular\n          edge.source().emit(CYTOSCAPE_EVENT.selectEdge)\n          edge.target().emit(CYTOSCAPE_EVENT.selectEdge)\n        }\n      })\n      element.on(CYTOSCAPE_EVENT.unselect, () => {\n        if (isNode) {\n          (element as NodeSingular).connectedEdges().forEach((edge) => {\n            edge.emit(CYTOSCAPE_EVENT.unselectNode)\n          })\n        } else {\n          const edge = element as EdgeSingular\n          edge.source().emit(CYTOSCAPE_EVENT.unselectEdge)\n          edge.target().emit(CYTOSCAPE_EVENT.unselectEdge)\n        }\n      })\n      /// ***ADD SELECT_EDGE and SELECT_NODE Events\n      return () => {\n        renderEvents.forEach((eventName) => {\n          element.removeListener(eventName)\n        })\n        /// ADD SELECT_EDGE and SELECT_NODE Events ***\n        element.removeListener(CYTOSCAPE_EVENT.select)\n        element.removeListener(CYTOSCAPE_EVENT.unselect)\n        /// *** ADD SELECT_EDGE and SELECT_NODE Events\n      }\n    },\n    [element, renderEvents],\n  )\n  // Filter\n  React.useEffect(() => {\n    const oldFiltered = contextRef.current!.settings.filtered\n    // @ts-ignore\n    const filtered = config.filter?.test?.({ element, item }) ?? true\n    contextRef.current!.settings.filtered = filtered\n    if (oldFiltered !== filtered) {\n      contextUtils.update(element, contextRef.current)\n      // @ts-ignore\n      if (calculateVisibilityByContext(element)) {\n        contextRef.current?.render()\n      }\n    }\n  }, [config.filter])\n\n  // Add fields\n  React.useMemo(() => {\n    element.hovered = () => contextRef.current?.settings.hovered\n    element.filtered = () => contextRef.current?.settings.filtered\n  }, [element])\n  return {\n\n  }\n}\n","import React from 'react'\nimport { useStateWithCallback } from 'colay-ui'\nimport { NodeSingular, Core } from 'cytoscape'\nimport { Position } from 'colay/type'\nimport {\n  NodeContext,\n  NodeConfig,\n  Cluster,\n  NodeData,\n} from '@type'\nimport { getClusterVisibility, calculateVisibilityByContext, contextUtils } from '@utils'\nimport { CYTOSCAPE_EVENT, ELEMENT_DATA_FIELDS } from '@constants'\nimport { useInitializedRef } from 'colay-ui/hooks/useInitializedRef'\nimport { mutableGraphMap } from './useGraph'\nimport { useElement } from './useElement'\n\nexport type Props = {\n  graphID: string;\n  position: Position;\n  isCluster?: boolean;\n  onPositionChange?: (c: {element: NodeSingular; context: NodeContext }) => void|any;\n  config?: NodeConfig;\n  item: NodeData;\n}\n\ntype Result = {\n  element: NodeSingular;\n  context: NodeContext;\n  clusters?: Cluster[];\n  cy: Core;\n}\n\nconst DEFAULT_BOUNDING_BOX = {\n  x: 0,\n  y: 0,\n  width: 0,\n  height: 0,\n}\n\nexport default (props: Props): Result => {\n  const {\n    position,\n    onPositionChange,\n    graphID,\n    config = {},\n    item,\n    isCluster = false,\n  } = props\n  const {\n    id,\n  } = item\n  const initializedRef = useInitializedRef()\n  const { cy, clustersByNodeId, clustersByChildClusterId } = mutableGraphMap[graphID]\n  const clusters = isCluster\n    ? clustersByChildClusterId[id]\n    : clustersByNodeId[id]\n  const [, setState] = useStateWithCallback({}, () => {})\n  const contextRef = React.useRef<NodeContext>({\n    render: (callback: () => {}) => setState({}, callback),\n    onPositionChange: () => {\n      onPositionChange?.({ element, context: contextRef.current })\n      element.connectedEdges().forEach((mutableEdge) => {\n        const edgeContext = contextUtils.get(mutableEdge)\n        edgeContext.onPositionChange()\n      })\n    },\n    boundingBox: DEFAULT_BOUNDING_BOX,\n    settings: {\n      filtered: true,\n      visibility: {\n        cluster: getClusterVisibility(id, clusters),\n      },\n      hovered: false,\n    },\n  } as NodeContext)\n  const element = React.useMemo(() => cy!.add({\n    data: {\n      id,\n      [ELEMENT_DATA_FIELDS.CONTEXT]: contextRef.current,\n      [ELEMENT_DATA_FIELDS.DATA]: item?.data,\n    }, // ...(parentID ? { parent: parentID } : {}),\n    position: { ...position },\n    group: 'nodes',\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }) as NodeSingular, [cy, id])\n  React.useEffect(\n    () => {\n      const {\n        current: {\n          onPositionChange,\n        },\n      } = contextRef\n      const onHover = () => {\n        contextRef.current.settings.hovered = true\n        contextUtils.update(element, contextRef.current)\n      }\n      const onHoverExit = () => {\n        contextRef.current.settings.hovered = false\n        contextUtils.update(element, contextRef.current)\n      }\n      element.on(CYTOSCAPE_EVENT.position, onPositionChange)\n      element.on(CYTOSCAPE_EVENT.mouseover, onHover)\n      element.on(CYTOSCAPE_EVENT.mouseout, onHoverExit)\n      return () => {\n        // element.off(CYTOSCAPE_EVENT.position, `#${element.id()}`, onPositionChange)\n        // element.off(CYTOSCAPE_EVENT.mouseover, `#${element.id()}`, onHover)\n        // element.off(CYTOSCAPE_EVENT.mouseout, `#${element.id()}`, onHoverExit)\n        element.removeListener(CYTOSCAPE_EVENT.position)\n        element.removeListener(CYTOSCAPE_EVENT.mouseover)\n        element.removeListener(CYTOSCAPE_EVENT.mouseout)\n        cy!.remove(element!)\n      }\n    }, // destroy\n    [cy, id],\n  )\n  React.useMemo(() => {\n    if (initializedRef.current) {\n      element.position(position)\n    }\n  }, [position.x, position.y])\n  // Update Visibility\n  React.useMemo(() => {\n    const clusterVisibility = getClusterVisibility(element.id(), clusters)\n    if (clusterVisibility !== contextRef.current.settings.visibility.cluster) {\n      const oldVisible = calculateVisibilityByContext(element)\n      contextRef.current.settings.visibility.cluster = clusterVisibility\n      // contextRef.current.settings = {\n      //   ...contextRef.current.settings,\n      //   visibility,\n      // }\n      contextUtils.update(element, contextRef.current)\n      if (oldVisible !== calculateVisibilityByContext(element)) {\n        contextRef.current.render()\n      }\n    }\n  }, [element, clusters])\n  useElement({\n    contextRef,\n    cy,\n    element,\n    config,\n    item,\n  })\n  return {\n    element,\n    context: contextRef.current,\n    clusters,\n    cy,\n  }\n}\n","import { createStoreProvider } from 'colay-ui'\n// import { createStoreProvider } from '@root/components/GraphEditor/createStoreProvider'\nimport {\n  GraphEditorContext as GraphEditorContextType,\n} from '@type'\n\nconst {\n  // store,\n  Context,\n  useSelector,\n  Provider,\n} = createStoreProvider<GraphEditorContextType>(\n  {} as unknown as GraphEditorContextType, { immer: false },\n)\n\nexport const GraphEditorContext = Context\nexport const GraphEditorProvider = Provider\nexport const useGraphEditor = useSelector\n","import React from 'react'\nimport {\n  PixiComponent,\n  Container as PIXIReactContainer,\n} from '@inlet/react-pixi'\nimport * as PIXI from 'pixi.js'\nimport { dragTrack } from '@core/utils/events'\nimport {\n  applyDefaultProps, preprocessProps,\n  getEventClientPosition,\n} from '@utils'\nimport {\n  PIXIFlexStyle,\n  PIXIBasicStyle,\n  PIXIDisplayObjectProps,\n  PIXIBasicProps,\n} from '@type'\nimport { Position, PropsWithRef } from 'colay-ui/type'\nimport { Enumerable } from 'colay/type'\n\nexport type ContainerProps = PIXIBasicProps & PIXIDisplayObjectProps\n& Omit<React.ComponentProps<typeof PIXIReactContainer>, 'children'> &{\n  style: PIXIFlexStyle & PIXIBasicStyle;\n  children: Enumerable<React.ReactNode>;\n  draggable?: boolean;\n  onDrag?: (param: Position) => void;\n}\n\ntype ContainerPropsWithRef = PropsWithRef<\nPIXI.Container,\nContainerProps\n>\n\nexport type ContainerType = React.FC<ContainerPropsWithRef>\nexport type ContainerRef = PIXI.Container\n\n// @ts-ignore\nexport const Container = PixiComponent<ContainerProps, PIXI.Container>(\n  'PIXIContainer',\n  {\n    create: (props) => {\n      const {\n        onDrag,\n        draggable = false,\n        interactive = false,\n      } = props\n      const instance = new PIXI.Container()\n      instance.interactive = interactive || draggable\n      if (draggable) {\n        const { onDown, onMove } = dragTrack((posDiff) => {\n          const { parent: { scale } } = instance\n          instance.x += posDiff.x / scale.x\n          instance.y += posDiff.y / scale.y\n          onDrag && onDrag({ x: instance.x, y: instance.y })\n        })\n        instance\n          .on('pointerdown', (e: PIXI.InteractionEvent) => {\n            const { originalEvent } = e.data\n            const { x, y } = getEventClientPosition(originalEvent)// originalEvent as MouseEvent\n            onDown({ x, y })\n          })\n          .on('pointermove', (e: PIXI.InteractionEvent) => {\n            const { originalEvent } = e.data\n            const { x, y } = getEventClientPosition(originalEvent)// originalEvent as MouseEvent\n            onMove({ x, y })\n          })\n      }\n      // applyEvents(instance, props)\n      return instance\n    },\n    applyProps: (mutableInstance: PIXI.Container, oldProps, _props) => {\n      const props = preprocessProps(_props)\n      const {\n        left = 0,\n        top = 0,\n        width,\n        height,\n      } = props.style ?? {}\n      applyDefaultProps(\n        mutableInstance,\n        oldProps,\n        props,\n        {\n          isFlex: false,\n        },\n      )\n      mutableInstance.x = left\n      mutableInstance.y = top\n      width && (mutableInstance.width = width)\n      height && (mutableInstance.height = height)\n    },\n  },\n) as unknown as ContainerType\n","import * as R from 'colay/ramda'\nimport { Position } from 'colay/type'\nimport * as V from 'colay/vector'\n\ntype OnDragResult = {\n  keepDragging?: boolean;\n  position?: Position;\n}\n\nexport function dragTrack(\n  onDrag: (pos: Position) => {keepDragging?: boolean; position?: Position }|void,\n) {\n  const mutableData: { position: Position | null} = { position: null }\n  const onDown = (position: Position) => {\n    mutableData.position = position\n  }\n  const onMove = (position: Position) => R.when(\n    R.isNotNil,\n    () => {\n      const result = (onDrag(V.subtract(mutableData.position!)(position)) ?? {}) as OnDragResult\n\n      mutableData.position = position\n      if (result?.keepDragging === false) {\n        mutableData.position = null\n      }\n      if (R.has('position', result)) {\n        (mutableData as OnDragResult).position = result.position\n      }\n      return result\n      // return R.pipe(\n      //   R.tap(\n      //     R.when(\n      //       R.propEq('keepDragging', false),\n      //       () => {\n      //         mutableData.position = null\n      //       },\n      //     ),\n      //   ),\n      //   R.tap(\n      //     R.when(\n      //       R.has('position'),\n      //       () => {\n      //         // @ts-ignore\n      //         mutableData.position = result.position\n      //       },\n      //     ),\n      //   ),\n      // )(result ?? {})\n    },\n  )(mutableData.position)\n  document.addEventListener('pointerup', () => {\n    mutableData.position = null\n  })\n  return {\n    onDown,\n    onMove,\n  }\n}\n","import React from 'react'\nimport { wrapComponent } from 'colay-ui'\nimport { useNode } from '@hooks'\nimport {\n  RenderClusterNode, NodeConfig, GraphRef,\n  Cluster,\n} from '@type'\nimport {\n  calculateObjectBoundsWithoutChildren,\n  calculateVisibilityByContext,\n} from '@utils'\nimport { useTheme } from '@core/theme'\nimport { Container, ContainerRef } from '../Container'\n\nexport type ClusterNodeContainerProps = {\n  children: RenderClusterNode;\n  item: Cluster;\n  graphID: string;\n  graphRef: React.RefObject<GraphRef>;\n  config?: NodeConfig;\n\n}\n\nexport type ClusterNodeContainerType = React.ForwardedRef<ClusterNodeContainerProps>\n\nconst DEFAULT_POSITION = { x: 0, y: 0 }\nconst ClusterNodeContainerElement = (\n  props: ClusterNodeContainerProps,\n  __: React.ForwardedRef<ClusterNodeContainerType>,\n) => {\n  const {\n    item,\n    graphID,\n    children,\n    config = {} as NodeConfig,\n    graphRef,\n  } = props\n  const containerRef = React.useRef<ContainerRef>(null)\n  React.useEffect(() => {\n    if (item.ids.length > 0) {\n      const positionAcc = {\n        x: 0,\n        y: 0,\n      }\n      item.ids.forEach((id) => {\n        const clusterElement = cy.$id(id)\n        const clusterElementPos = clusterElement.position()\n        positionAcc.x += clusterElementPos.x\n        positionAcc.y += clusterElementPos.y\n      })\n      const { length } = item.ids\n      const calculatedPosition = {\n        x: positionAcc.x / length,\n        y: positionAcc.y / length,\n      }\n      element.position(calculatedPosition)\n    }\n  }, [item.ids])\n  const { element, context, cy } = useNode({\n    graphID,\n    config,\n    position: config.position ?? DEFAULT_POSITION,\n    onPositionChange: ({ element }) => {\n      const container = containerRef.current!\n      const { x, y } = element.position()\n      container.x = x\n      container.y = y\n      context.boundingBox.x = x\n      context.boundingBox.y = y\n    },\n    item,\n  })\n  const { x, y } = element.position()\n  const onDrag = React.useCallback(\n    (pos) => {\n      element.position(pos)\n    },\n    [element],\n  )\n  React.useEffect(() => {\n    const container = containerRef.current!\n    context.boundingBox = calculateObjectBoundsWithoutChildren(\n      container,\n    )\n  })\n  const theme = useTheme()\n  const visible = calculateVisibilityByContext(element) && (item.visible ?? true)\n  const opacity = context.settings.filtered\n    ? 1\n    : (config.filter?.settings?.opacity ?? 0.2)\n  return (\n    <Container\n      ref={containerRef}\n      style={{\n        left: x,\n        top: y,\n      }}\n      alpha={opacity}\n      visible={visible}\n      draggable\n      onDrag={onDrag}\n      // onRightPress={(event) => {\n      //   event.data.originalEvent.preventDefault()\n      //   event.data.originalEvent.stopPropagation()\n      // }}\n    >\n      {children({\n        item,\n        element,\n        cy,\n        theme,\n        graphRef,\n      })}\n    </Container>\n  )\n}\n\nexport const ClusterNodeContainer = wrapComponent<ClusterNodeContainerProps>(\n  ClusterNodeContainerElement,\n  {\n    isForwardRef: true,\n  },\n)\n","import React from 'react'\nimport { wrapComponent } from 'colay-ui'\nimport * as R from 'colay/ramda'\nimport * as C from 'colay/color'\nimport * as PIXI from 'pixi.js'\nimport { useTheme } from '@core/theme'\nimport { useEdge } from '@hooks'\nimport { contextUtils, calculateVisibilityByContext } from '@utils'\nimport { EDGE_CONTAINER_Z_INDEX, CYTOSCAPE_EVENT } from '@constants'\nimport {\n  RenderEdge,\n  EdgeConfig,\n  DrawLine,\n  EdgeElement,\n  NodeElement,\n  GraphRef,\n} from '@type'\nimport * as V from 'colay/vector'\nimport { Graphics, drawLine as defaultDrawLine } from '../Graphics'\nimport { Container, ContainerRef } from '../Container'\n\nexport type EdgeContainerProps = {\n  children: RenderEdge;\n  item: any;\n  graphID: string;\n  drawLine?: DrawLine;\n  config?: EdgeConfig;\n  graphRef: React.RefObject<GraphRef>;\n}\n\nexport type EdgeContainerType = React.FC<EdgeContainerProps>\nconst DEFAULT_DISTANCE = 36\nconst DEFAULT_MARGIN = 10\n\nexport const calculateEdgeGroupInfo = (edge: EdgeElement) => {\n  const edgeID = edge.id()\n  const targetElement = edge.target()\n  const sourceElement = edge.source()\n  const betweenEdges = targetElement.edgesWith(sourceElement)\n  const betweenEdgesCount = betweenEdges.length\n  const betweenEdgesMedian = Math.floor(betweenEdgesCount / 2)\n  let edgeIndex = 0\n  betweenEdges.forEach((edgeEl, i) => {\n    if (edgeEl.id() === edgeID) {\n      edgeIndex = i\n    }\n  })\n  let sortedIndex = 0\n  if (betweenEdgesCount > 1) {\n    sortedIndex = R.range(-betweenEdgesMedian, betweenEdgesMedian + 1)[edgeIndex]\n    if (betweenEdgesCount % 2 === 0 && sortedIndex >= 0) {\n      sortedIndex += 1\n    }\n  }\n  return {\n    sortedIndex,\n    index: edgeIndex,\n    count: betweenEdgesCount,\n  }\n}\nexport const calculateVectorInfo = (\n  source: NodeElement,\n  to: NodeElement,\n) => {\n  const fromPosition = source.position()\n  const toPosition = to.position()\n  const distanceVector = V.subtract(fromPosition)(toPosition)\n  // const distanceVector = R.pipe(\n  //   V.subtract(fromPosition),\n  // )(toPosition)\n  const unitVector = V.normalize(distanceVector)\n  const normVector = V.rotate(Math.PI / 2)(unitVector)\n  // V.multiplyScalar(sortedIndex > 0 ? 1 : -1)(V.rotate(Math.PI / 2)(unitVector))\n  const midpointPosition = V.midpoint(fromPosition)(toPosition)\n  const sign = source.id() > to.id() ? 1 : -1\n  return {\n    fromPosition,\n    toPosition,\n    distanceVector,\n    unitVector,\n    normVector,\n    midpointPosition,\n    undirectedUnitVector: V.multiplyScalar(sign)(unitVector),\n    undirectedNormVector: V.multiplyScalar(sign)(normVector),\n  }\n}\nconst EdgeContainerElement = (\n  props: EdgeContainerProps,\n  __: React.ForwardedRef<EdgeContainerType>,\n) => {\n  const {\n    item,\n    // item: _item,\n    graphID,\n    children,\n    drawLine = defaultDrawLine,\n    config = {},\n    graphRef,\n  } = props\n  const theme = useTheme()\n  const graphicsRef = React.useRef<PIXI.Graphics>(null)\n  const containerRef = React.useRef<ContainerRef>(null)\n  // const edgeID = React.useMemo(() => _item.id ?? R.uuid(), [])\n  // const item = {\n  //   ..._item,\n  //   id: edgeID,\n  // }\n  const drawLineCallback = React.useCallback(({\n    element,\n    cy,\n  }: {\n    cy: cytoscape.Core,\n    element: EdgeElement,\n  }) => {\n    const targetElement = element.target()\n    const sourceElement = element.source()\n    const edgeGroupInfo = calculateEdgeGroupInfo(element)\n    const {\n      distanceVector,\n      // fromPosition,\n      // toPosition,\n      midpointPosition,\n      normVector,\n      unitVector,\n      undirectedUnitVector,\n      undirectedNormVector,\n    } = calculateVectorInfo(sourceElement, targetElement)\n    containerRef.current!.x = midpointPosition.x + (\n      edgeGroupInfo.sortedIndex * undirectedNormVector.x * DEFAULT_DISTANCE\n    )\n    containerRef.current!.y = midpointPosition.y + (\n      edgeGroupInfo.sortedIndex * undirectedNormVector.y * DEFAULT_DISTANCE\n    )\n    const sourceElementContext = contextUtils.getNodeContext(sourceElement)\n    const targetElementContext = contextUtils.getNodeContext(targetElement)\n    // calculate sortedIndex\n    return drawLine({\n      item,\n      element,\n      // cy,\n      graphRef,\n      theme,\n      sourceElement,\n      targetElement,\n      fill: C.rgbNumber(\n        element.selected()\n          ? theme.palette.primary.main\n          : (element.source().selected() || element.target().selected())\n            ? theme.palette.secondary.main\n            : theme.palette.background.paper,\n      ),\n      graphics: graphicsRef.current!,\n      to: targetElementContext.boundingBox,\n      from: sourceElementContext.boundingBox,\n      directed: true,\n      distance: edgeGroupInfo.sortedIndex * DEFAULT_DISTANCE,\n      margin: {\n        x: edgeGroupInfo.sortedIndex * DEFAULT_MARGIN,\n        y: edgeGroupInfo.sortedIndex * DEFAULT_MARGIN,\n      },\n      distanceVector,\n      unitVector,\n      normVector,\n      undirectedUnitVector,\n      undirectedNormVector,\n      ...edgeGroupInfo,\n      cy,\n    })\n  }, [containerRef, graphicsRef])\n  const onPositionChange = React.useCallback(({ element }) => {\n    drawLineCallback({\n      cy,\n      element,\n    })\n  }, [drawLineCallback])\n  const { element, cy, context } = useEdge({\n    graphID,\n    onPositionChange,\n    config,\n    item,\n  })\n  React.useEffect(\n    () => {\n      drawLineCallback({\n        cy,\n        element,\n      })\n    },\n  )\n  React.useEffect(\n    () => {\n      containerRef.current!.zIndex = EDGE_CONTAINER_Z_INDEX\n    },\n    [],\n  )\n  const edgeGroupInfo = calculateEdgeGroupInfo(element)\n  const {\n    // normVector,\n    midpointPosition,\n    toPosition,\n    fromPosition,\n    undirectedNormVector,\n  } = calculateVectorInfo(element.source(), element.target())\n  const visible = calculateVisibilityByContext(element)\n  const filtered = context.settings.filtered && context.settings.nodeFiltered\n  const opacity = filtered\n    ? 1\n    : (config?.filter?.settings?.opacity ?? 0.2)\n\n  const targetElement = element.target()\n  const sourceElement = element.source()\n  return (\n    <>\n      <Container\n        ref={containerRef}\n        alpha={opacity}\n        visible={visible}\n        style={{\n          left: midpointPosition.x + (\n            edgeGroupInfo.sortedIndex * undirectedNormVector.x * DEFAULT_DISTANCE\n          ),\n          top: midpointPosition.y + (\n            edgeGroupInfo.sortedIndex * undirectedNormVector.y * DEFAULT_DISTANCE\n          ),\n          zIndex: EDGE_CONTAINER_Z_INDEX,\n        }}\n        interactive\n        mouseover={() => {\n          element.emit(CYTOSCAPE_EVENT.mouseover)\n        }}\n        mouseout={() => {\n          element.emit(CYTOSCAPE_EVENT.mouseout)\n        }}\n      >\n        {\n          children({\n            item,\n            element,\n            to: toPosition,\n            from: fromPosition,\n            cy,\n            theme,\n            graphRef,\n            ...edgeGroupInfo,\n            targetElement,\n            sourceElement,\n          })\n        }\n      </Container>\n      <Graphics\n        ref={graphicsRef}\n        visible={visible}\n        alpha={opacity}\n        // interactive\n        // buttonMode\n      />\n    </>\n  )\n}\n\nexport const EdgeContainer = wrapComponent<EdgeContainerProps>(\n  EdgeContainerElement,\n  {\n    isForwardRef: true,\n  },\n)\n","import { useStateWithCallback } from 'colay-ui'\nimport { EdgeSingular, Core } from 'cytoscape'\nimport React from 'react'\nimport {\n  EdgeContext,\n  EdgeConfig,\n  EdgeElement,\n  EdgeData,\n} from '@type'\nimport { CYTOSCAPE_EVENT, ELEMENT_DATA_FIELDS } from '@constants'\nimport { calculateVisibilityByContext, contextUtils } from '@utils'\nimport { mutableGraphMap } from './useGraph'\nimport { useElement } from './useElement'\n\nexport type Props<T> = {\n  children?: React.ReactNode;\n  item: EdgeData;\n  graphID: string;\n  onPositionChange?: (c: {element: EdgeSingular; context: EdgeContext; cy: Core }) => void;\n  config?: EdgeConfig;\n}\n\ntype Result<T> = {\n  element: EdgeSingular;\n  context: EdgeContext;\n  cy: Core;\n}\n\nexport default <T>(props: Props<T>): Result<T> => {\n  const {\n    onPositionChange,\n    graphID,\n    config = {},\n    item,\n  } = props\n  const {\n    id,\n    source,\n    target,\n  } = item\n  const { cy } = mutableGraphMap[graphID]\n  const [, setState] = useStateWithCallback({}, () => {\n  })\n  const contextRef = React.useRef<EdgeContext>({\n    render: (callback: () => {}) => {\n      setState({}, callback)\n    },\n    onPositionChange: () => {\n      onPositionChange?.({\n      // @ts-ignore\n        element: contextRef.current.element,\n        context: contextRef.current,\n        cy,\n      })\n    },\n    element: null as unknown as EdgeElement,\n    settings: {\n      filtered: true,\n      nodeFiltered: true,\n      visibility: {\n        nodeVisible: true,\n      },\n    },\n  } as EdgeContext)\n  contextRef.current.element = React.useMemo(() => {\n    const {\n      current: {\n        element,\n      },\n    } = contextRef\n    if (element) {\n      cy.remove(element)\n    }\n    return cy!.add({\n      data: {\n        id,\n        source,\n        target,\n        [ELEMENT_DATA_FIELDS.CONTEXT]: contextRef.current,\n        [ELEMENT_DATA_FIELDS.DATA]: item?.data,\n      },\n      group: 'edges',\n    })\n  },\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [cy, id, source, target])\n  const {\n    current: {\n      element,\n    },\n  } = contextRef\n  React.useEffect(\n    () => {\n      contextRef.current.onPositionChange = () => {\n        onPositionChange?.({ cy, element, context: contextRef.current })\n      }\n      contextUtils.update(\n        element,\n        contextRef.current,\n      )\n    },\n    [onPositionChange],\n  )\n  React.useEffect(() => () => { cy!.remove(element!) },\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n    [cy, id, source, target])\n\n  // Visibility Change\n  // EventListeners\n  React.useEffect(\n    () => {\n      const nodeDataUpdated = () => {\n        // Update visibility\n        const oldVisible = calculateVisibilityByContext(element)\n        const sourceContext = contextUtils.get(element.source())\n        const targetContext = contextUtils.get(element.target())\n        const sourceVisible = calculateVisibilityByContext(element.source())\n        const targetVisible = calculateVisibilityByContext(element.target())\n        const newNodeVisible = sourceVisible && targetVisible\n        let forceRender = false\n        if (newNodeVisible !== contextRef.current.settings.visibility.nodeVisible) {\n          contextRef.current.settings.visibility.nodeVisible = newNodeVisible\n          contextUtils.update(element, contextRef.current)\n          if (oldVisible !== calculateVisibilityByContext(element)) {\n            forceRender = false\n          }\n        }\n        const oldNodeFiltered = contextRef.current.settings.nodeFiltered\n        const newNodeFiltered = sourceContext.settings.filtered\n        && targetContext.settings.filtered\n        contextRef.current.settings.nodeFiltered = newNodeFiltered\n        if (newNodeFiltered !== oldNodeFiltered) {\n          forceRender = true\n          contextUtils.update(element, contextRef.current)\n        }\n        if (forceRender) {\n          contextRef.current.render()\n        }\n      }\n      element.source().on(CYTOSCAPE_EVENT.data, nodeDataUpdated)\n      element.target().on(CYTOSCAPE_EVENT.data, nodeDataUpdated)\n      // element.source().emit(CYTOSCAPE_EVENT.data)\n      return () => {\n        // element.source().off(CYTOSCAPE_EVENT.data, `#${element.id()}`, nodeDataUpdated)\n        // element.target().off(CYTOSCAPE_EVENT.data, `#${element.id()}`, nodeDataUpdated)\n        element.source().removeListener(CYTOSCAPE_EVENT.data)\n        element.target().removeListener(CYTOSCAPE_EVENT.data)\n      }\n    },\n    [element],\n  )\n  useElement({\n    contextRef,\n    cy,\n    element,\n    item,\n    config,\n  })\n  return {\n    element,\n    context: contextRef.current,\n    cy,\n  }\n}\n","import React from 'react'\nimport { wrapComponent } from 'colay-ui'\nimport { useNode } from '@hooks'\nimport { CYTOSCAPE_EVENT } from '@constants'\nimport {\n  RenderNode, NodeConfig, GraphRef,\n} from '@type'\nimport {\n  calculateObjectBoundsWithoutChildren,\n  calculateVisibilityByContext,\n} from '@utils'\nimport { useTheme } from '@core/theme'\nimport { Container } from '../Container'\n\nexport type NodeContainerProps = {\n  children: RenderNode;\n  item: any;\n  graphID: string;\n  graphRef: React.RefObject<GraphRef>;\n  config?: NodeConfig;\n}\n\nexport type NodeContainerType = React.ForwardedRef<NodeContainerProps>\nconst DEFAULT_POSITION = { x: 0, y: 0 }\nconst NodeContainerElement = (\n  props: NodeContainerProps,\n  __: React.ForwardedRef<NodeContainerType>,\n) => {\n  const {\n    item,\n    graphID,\n    children,\n    config = {} as NodeConfig,\n    graphRef,\n  } = props\n  const containerRef = React.useRef(null)\n  const { element, context, cy } = useNode({\n    graphID,\n    config,\n    position: config.position ?? item.position ?? DEFAULT_POSITION,\n    onPositionChange: ({ element }) => {\n      const { x, y } = element.position()\n      // @ts-ignore\n      containerRef.current.x = x\n      // @ts-ignore\n      containerRef.current.y = y\n      context.boundingBox.x = x\n      context.boundingBox.y = y\n    },\n    item,\n  })\n  const { x, y } = element.position()\n  const onDrag = React.useCallback(\n    (pos) => {\n      element.position(pos)\n    },\n    [element],\n  )\n  React.useEffect(() => {\n    // @ts-ignore\n    context.boundingBox = calculateObjectBoundsWithoutChildren(\n      containerRef.current!,\n    )\n  })\n  const theme = useTheme()\n  const visible = calculateVisibilityByContext(element)\n  const opacity = context.settings.filtered\n    ? 1\n    : (config.filter?.settings?.opacity ?? 0.2)\n  return (\n    <Container\n      ref={containerRef}\n      style={{\n        left: x,\n        top: y,\n      }}\n      alpha={opacity}\n      visible={visible}\n      draggable\n      onDrag={onDrag}\n      mouseover={() => {\n        element.emit(CYTOSCAPE_EVENT.mouseover)\n      }}\n      mouseout={() => {\n        element.emit(CYTOSCAPE_EVENT.mouseout)\n      }}\n      // onRightPress={(event) => {\n      //   event.data.originalEvent.preventDefault()\n      //   event.data.originalEvent.stopPropagation()\n      // }}\n    >\n      {children({\n        item,\n        element,\n        cy,\n        theme,\n        graphRef,\n        context,\n      })}\n    </Container>\n  )\n}\n\nexport const NodeContainer = wrapComponent<NodeContainerProps>(\n  NodeContainerElement,\n  {\n    isForwardRef: true,\n  },\n)\n","import { RenderNode } from '@type'\nimport { cyUnselectAll } from '@utils'\nimport * as R from 'colay/ramda'\nimport React from 'react'\nimport { Text as GraphText } from '../Text'\nimport { View as GraphView } from '../View'\n\nexport const DefaultRenderClusterNode: RenderNode = ({\n  item, element, cy, theme,\n}) => {\n  const hasSelectedEdge = element.connectedEdges(':selected').length > 0\n  return (\n    <GraphView\n      style={{\n        width: 150,\n        height: 150,\n        justifyContent: 'center',\n        alignItems: 'center',\n        display: 'flex',\n        backgroundColor: hasSelectedEdge\n          ? theme.palette.secondary.main\n          : (element.selected()\n            ? theme.palette.primary.main\n            : theme.palette.warning.main),\n        borderRadius: 20,\n      }}\n      interactive\n      pointertap={() => {\n        cyUnselectAll(cy)\n        element.select()\n      }}\n    >\n      <GraphText\n        style={{\n          position: 'absolute',\n          top: -90,\n          color: 'black',\n        }}\n        isSprite\n      >\n        {R.last(item.id.split('/'))?.substring(0, 10) ?? item.id}\n      </GraphText>\n    </GraphView>\n  )\n}\n","import { RenderNode } from '@type'\nimport { cyUnselectAll } from '@utils'\nimport * as R from 'colay/ramda'\nimport React from 'react'\nimport { Text as GraphText } from '../Text'\nimport { View as GraphView } from '../View'\nimport { CYTOSCAPE_EVENT } from '@constants'\n\nexport const DefaultRenderNode: RenderNode = ({\n  item, element, cy, theme,\n}) => {\n  const hasSelectedEdge = element.connectedEdges(':selected').length > 0\n  return (\n    <GraphView\n      style={{\n        width: 50,\n        height: 50,\n        justifyContent: 'center',\n        alignItems: 'center',\n        display: 'flex',\n        backgroundColor: hasSelectedEdge\n          ? theme.palette.secondary.main\n          : (element.selected()\n            ? theme.palette.primary.main\n            : theme.palette.background.paper),\n        borderRadius: 50,\n      }}\n      interactive\n      pointertap={() => {\n        cyUnselectAll(cy)\n        element.select()\n      }}\n    >\n      <GraphText\n        isSprite\n        text={R.last(item.id.split('/'))?.substring(0, 10) ?? item.id}\n      />\n    </GraphView>\n  )\n}\n","import { RenderEdge } from '@type'\nimport { cyUnselectAll } from '@utils'\nimport * as R from 'colay/ramda'\nimport React from 'react'\nimport { Text as GraphText } from '../Text'\nimport { View as GraphView } from '../View'\n\nexport const DefaultRenderEdge: RenderEdge = ({\n  cy,\n  item,\n  element,\n}) => (\n  <GraphView\n    style={{\n      // backgroundColor: DefaultTheme.palette.background.paper,\n      // element.selected()\n      //   ? DefaultTheme.palette.primary.main\n      //   : DefaultTheme.palette.background.paper,\n      // borderRadius: 50,\n    }}\n    pointertap={() => {\n      cyUnselectAll(cy)\n      element.select()\n    }}\n  >\n    <GraphText\n      isSprite\n      text={R.last(item.id.split('/'))?.substring(0, 10) ?? item.id}\n    />\n  </GraphView>\n)\n","import { PixiComponent, useApp } from '@inlet/react-pixi'\nimport * as R from 'colay/ramda'\nimport { Viewport as ViewportNative } from 'pixi-viewport'\nimport * as PIXI from 'pixi.js'\nimport * as V from 'colay/vector'\n// import Cull from 'pixi-cull'\nimport React from 'react'\nimport { wrapComponent, useForwardRef } from 'colay-ui'\nimport {\n  getBoundingBox,\n  getPointerPositionOnViewport,\n  isMultipleTouches,\n  adjustVisualQuality,\n} from '@utils'\nimport { Position, BoundingBox } from 'colay/type'\nimport { drawGraphics } from '@components/Graphics'\nimport { QUALITY_LEVEL } from '@constants'\nimport { ViewportType } from '@type'\nimport { Simple } from 'pixi-cull'\n\n\n\ntype NativeViewportProps = {\n  app: PIXI.Application;\n  width: number;\n  height: number;\n  onCreate?: (v: ViewportNative) => void;\n  onPress?: (c: {\n    nativeEvent: PIXI.InteractionEvent;\n    position: Position;\n  }) => void | undefined;\n  zoom?: number;\n  transform?: {\n    x?: number;\n    y?: number;\n    scaleX?: number;\n    scaleY?: number;\n    rotation?: number;\n    skewX?: number;\n    skewY?: number;\n    pivotX?: number;\n    pivotY?: number;\n  };\n  onBoxSelectionStart: (c: {\n    event: PIXI.InteractionEvent;\n    startPosition: Position;\n  }) => void;\n  onBoxSelection: (c: {\n    event: PIXI.InteractionEvent;\n    startPosition: Position;\n    endPosition: Position;\n    boundingBox: BoundingBox;\n  }) => void;\n  onBoxSelectionEnd: (c: {\n    event: PIXI.InteractionEvent;\n    startPosition: Position;\n    endPosition: Position;\n    boundingBox: BoundingBox;\n  }) => void;\n\n}\n\nconst DEFAULT_EVENT_HANDLER = () => {}\nconst ReactViewportComp = PixiComponent('Viewport', {\n  create: (props: NativeViewportProps) => {\n    const {\n      app: {\n        renderer,\n        ticker,\n        stage,\n      },\n      height,\n      width,\n      onCreate,\n      onBoxSelectionStart = DEFAULT_EVENT_HANDLER,\n      onBoxSelection = DEFAULT_EVENT_HANDLER,\n      onBoxSelectionEnd = DEFAULT_EVENT_HANDLER,\n    } = props\n    const viewport: ViewportType = new ViewportNative({\n      screenWidth: width,\n      screenHeight: height,\n      worldWidth: width,\n      worldHeight: height,\n      ticker,\n      interaction: renderer.plugins.interaction,\n      passiveWheel: false,\n      divWheel: renderer.view,\n    }) as ViewportType\n    onCreate?.(viewport)\n    viewport.sortableChildren = true\n    viewport\n      .drag({ pressDrag: false })\n      .pinch()\n      .wheel({\n        trackpadPinch: true,\n        wheelZoom: false,\n      })\n    const localDataRef = {\n      current: {\n        boxSelection: {\n          enabled: false,\n          startPosition: null as Position | null,\n          currentPosition: null as Position | null,\n          boxElement: null as PIXI.Graphics | null,\n        },\n      },\n    }\n    // to avoid dragging when onClick child\n    viewport.on(\n      'pointerdown',\n      (e) => {\n        // const { metaKey } = e.data.originalEvent\n        // BOX_SELECTION\n        // @ts-ignore\n        if (\n          e.target === e.currentTarget\n          && !isMultipleTouches(e)\n        ) {\n          // @ts-ignore\n          const position = getPointerPositionOnViewport(viewport, e.data.originalEvent)\n          localDataRef.current.boxSelection.startPosition = {\n            x: position.x,\n            y: position.y,\n          }\n          viewport.plugins.pause('drag')\n        }\n        // const { x, y } = viewport.toWorld(e.data.global)\n        viewport.isClick = true\n        setTimeout(() => {\n          viewport.isClick = false\n        }, 250)\n      },\n    )\n    viewport.on('pointerup', (e) => {\n      viewport.plugins.resume('drag')\n      if (localDataRef.current.boxSelection.enabled) {\n        const {\n          boxElement,\n          currentPosition,\n          startPosition,\n        } = localDataRef.current.boxSelection\n        onBoxSelectionEnd({\n          event: e,\n          startPosition: startPosition!,\n          endPosition: currentPosition!,\n          boundingBox: getBoundingBox(startPosition!, currentPosition!),\n        })\n        viewport.removeChild(boxElement!)\n        boxElement?.destroy()\n      }\n      localDataRef.current.boxSelection = {}\n    })\n    viewport.on('pointermove', (e) => {\n      // const { metaKey } = e.data.originalEvent\n      if (localDataRef.current.boxSelection.startPosition && !localDataRef.current.boxSelection.boxElement) {\n        const position = getPointerPositionOnViewport(viewport, e.data.originalEvent)\n        if (\n          R.pipe(\n            V.subtract(localDataRef.current.boxSelection.startPosition),\n            V.length,\n          )(position) > 20) {\n          const boxElement = new PIXI.Graphics()\n          viewport.addChild(boxElement!)\n          localDataRef.current.boxSelection.boxElement = boxElement\n          onBoxSelectionStart({\n            event: e,\n            startPosition: localDataRef.current.boxSelection.startPosition,\n          })\n          localDataRef.current.boxSelection.enabled = true\n        }\n      }\n      if (localDataRef.current.boxSelection.enabled) {\n        // @ts-ignore\n        const position = getPointerPositionOnViewport(viewport, e.data.originalEvent)\n        localDataRef.current.boxSelection.currentPosition = {\n          x: position.x,\n          y: position.y,\n        }\n        const {\n          startPosition,\n          currentPosition,\n          boxElement: pBoxElement,\n        } = localDataRef.current.boxSelection\n        const boxElement = pBoxElement!\n        const boundingBox = getBoundingBox(startPosition!, currentPosition!)\n        onBoxSelection({\n          event: e,\n          endPosition: currentPosition!,\n          startPosition: startPosition!,\n          boundingBox,\n        })\n        boxElement.x = boundingBox.x\n        boxElement.y = boundingBox.y\n        drawGraphics(boxElement, {\n          style: {\n            width: boundingBox.width,\n            height: boundingBox.height,\n            backgroundColor: 'rgba(0,0,0,0)',\n            borderColor: 'rgba(0,0,0,0.7)',\n            borderWidth: 1 / viewport.scale.x,\n          },\n        })\n      }\n    })\n    viewport.on('wheel', (data) => {\n      // @ts-ignore\n      data.event.preventDefault()\n    })\n\n    // // PIXI CULL\n    // const cull = new Simple({\n    //   dirtyTest: false,\n    // }) // new SpatialHash()\n    // cull.addList(viewport.children)\n    // cull.cull(viewport.getVisibleBounds())\n\n    // // cull whenever the viewport moves\n    // PIXI.Ticker.shared.add(() => {\n    // Cull the viewport\n    // if (viewport.dirty) {\n    //   cull.cull(viewport.getVisibleBounds())\n    //   viewport.children.map((child) => {\n    //     if (R.isFalse(child._visible)) {\n    //       child.visible = child._visible\n    //     }\n    //   })\n    //   viewport.dirty = false\n    // }\n    // PERFORMANCE\n    // const visibleChildren = viewport.children.filter((child) => child.visible)\n    // const objectCount = visibleChildren.length\n    // adjustVisualQuality(objectCount, viewport)\n      \n        \n    // const traverse = (displayObject: PIXI.DisplayObject) => {\n    //   // if (displayObject instanceof PIXI.Sprite) {\n    //   //   displayObject.forceToRender()\n    //   // }\n    //   // if (displayObject.children) {\n    //   //   displayObject.children.forEach((child) => {\n    //   //     traverse(child)\n    //   //   })\n    //   // }\n    //   const qualityLevelChanged = (\n    //     displayObject.qualityLevel ?? QUALITY_LEVEL.LOW\n    //   ) < viewport.qualityLevel\n    //   if (\n    //     displayObject instanceof PIXI.Sprite\n    //     && qualityLevelChanged) {\n    //     displayObject.qualityLevel = viewport.qualityLevel\n    //     displayObject.forceToRender()\n    //   }\n    //   if (displayObject.children && qualityLevelChanged) {\n    //     displayObject.children.forEach((child) => {\n    //       traverse(child)\n    //     })\n    //   }\n    // }\n    // const update = () => {\n    //   visibleChildren.forEach((child) => {\n    //     traverse(child)\n    //   })\n    // }\n      \n    // // if (viewport.qualityChanged && !viewport.moving) {\n    // //   viewport.qualityChanged = false\n    // //   if (viewport.oldQualityLevel < viewport.qualityLevel) {\n    // //     update()\n    // //   }\n    // // }\n    // if (!viewport.moving) {\n    //   update()\n    // }\n    // })\n    // PIXI CULL\n    return viewport\n  },\n  applyProps: (\n    mutableViewport: ViewportType,\n    oldProps,\n    newProps,\n  ) => {\n    const {\n      transform,\n      onPress,\n      zoom,\n      width,\n      height,\n    } = newProps\n    mutableViewport.resize(width, height)\n    mutableViewport.removeListener('pointertap', mutableViewport.clickEvent)\n    mutableViewport.clickEvent = (e: PIXI.InteractionEvent) => R.ifElse(\n      R.equals(e.target),\n      () => {\n        const { x, y } = mutableViewport.toWorld(e.data.global)\n        return R.when(\n          R.equals(true),\n          () => onPress?.({ nativeEvent: e, position: { x, y } }),\n        )(mutableViewport.isClick)\n      },\n      R.identity,\n    )(e.currentTarget)\n    R.unless(\n      R.equals(oldProps.zoom),\n      () => mutableViewport.setZoom(zoom ?? 1, true),\n    )(zoom)\n    R.unless(\n      R.equals(oldProps.transform),\n      () => mutableViewport.setTransform(\n        transform?.x,\n        transform?.y,\n        transform?.scaleX,\n        transform?.scaleY,\n        transform?.rotation,\n        transform?.skewX,\n        transform?.skewY,\n        transform?.pivotX,\n        transform?.pivotY,\n      ),\n    )(transform)\n    mutableViewport.on('pointertap', mutableViewport.clickEvent)\n    // return\n  },\n  didMount: () => {\n  },\n  willUnmount: () => {\n  },\n})\n\nexport type ViewportProps = {\n  children?: React.ReactNode;\n} & Omit<NativeViewportProps, 'app'>\n\nfunction ViewportElement(props: ViewportProps, ref: React.ForwardedRef<ViewportType>) {\n  const {\n    children,\n    ...rest\n  } = props\n  const app = useApp()\n  const viewportRef = useForwardRef(ref, {})\n\n  const keyboardRef = React.useRef({\n    pressedKeys: {},\n    intervalTimeout: null,\n  })\n  React.useEffect(() => {\n    const keyDownListener = (e) => {\n      if (document.body === e.target) {\n        keyboardRef.current.pressedKeys[e.key] = true\n        if (!keyboardRef.current.intervalTimeout) {\n          const interval = setInterval(() => {\n            const {\n              current: {\n                center,\n              },\n            } = viewportRef\n            const {\n              current: {\n                pressedKeys,\n              },\n            } = keyboardRef\n            const pointer = {\n              x: 0,\n              y: 0,\n            }\n            const MULTIPLIER = 30\n            Object.keys(pressedKeys).map((key) => {\n              switch (key) {\n                case 'ArrowRight':\n                  pointer.x += MULTIPLIER\n                  break\n                case 'ArrowLeft':\n                  pointer.x -= MULTIPLIER\n                  break\n                case 'ArrowUp':\n                  pointer.y -= MULTIPLIER\n                  break\n                case 'ArrowDown':\n                  pointer.y += MULTIPLIER\n                  break\n\n                default:\n                  break\n              }\n            })\n            const newCenter = new PIXI.Point(center.x + pointer.x, center.y + pointer.y)\n            viewportRef.current.center = newCenter\n          }, 5)\n          keyboardRef.current.intervalTimeout = interval\n        }\n        // viewportRef.current.center =\n      }\n    }\n    const keyUpListener = (e) => {\n      clearInterval(keyboardRef.current.intervalTimeout)\n      keyboardRef.current.intervalTimeout = null\n      keyboardRef.current.pressedKeys = {}\n    }\n    document.addEventListener('keydown', keyDownListener)\n    document.addEventListener('keyup', keyUpListener)\n    return () => {\n      document.removeEventListener('keydown', keyDownListener)\n      document.removeEventListener('keyup', keyUpListener)\n    }\n  }, [])\n  return (\n    <ReactViewportComp\n      ref={viewportRef}\n      app={app}\n      {...rest}\n    >\n      {children}\n    </ReactViewportComp>\n  )\n}\n\nexport const Viewport = wrapComponent<ViewportProps>(\n  ViewportElement, {\n    isForwardRef: true,\n  },\n)\n","import '@core/config'\nimport { DefaultTheme, ThemeProvider } from '@core/theme'\nimport { useGraph } from '@hooks'\nimport { Stage } from '@inlet/react-pixi'\nimport {\n  DrawLine, EdgeData, GraphConfig,\n  GraphRef, NodeData, RenderEdge, RenderNode,\n  RenderClusterNode,\n} from '@type'\nimport {\n  calculateVisibilityByContext, \n  contextUtils, cyUnselectAll, isPositionInBox,\n  adjustVisualQuality,\n} from '@utils'\nimport { CYTOSCAPE_EVENT } from '@constants'\nimport {\n  DataRender, useForwardRef,\n  View,\n  ViewProps, wrapComponent,\n} from 'colay-ui'\nimport { PropsWithRef } from 'colay-ui/type'\nimport * as C from 'colay/color'\nimport * as R from 'colay/ramda'\nimport { BoundingBox } from 'colay/type'\nimport React from 'react'\nimport * as PIXI from 'pixi.js'\nimport { ClusterNodeContainer } from '../ClusterNodeContainer'\nimport { EdgeContainer } from '../EdgeContainer'\nimport { NodeContainer } from '../NodeContainer'\nimport { DefaultRenderClusterNode } from './DefaultRenderClusterNode'\nimport { DefaultRenderNode } from './DefaultRenderNode'\nimport { DefaultRenderEdge } from './DefaultRenderEdge'\nimport { Viewport, ViewportProps } from '../Viewport'\n\nexport type GraphProps = {\n  children?: React.ReactNode;\n  extraData?: any;\n  nodes: NodeData[];\n  edges: EdgeData[];\n  style?: ViewProps['style'];\n  renderNode?: RenderNode;\n  renderEdge?: RenderEdge;\n  renderClusterNode?: RenderClusterNode;\n  onPress?: ViewportProps['onPress'];\n  drawLine?: DrawLine;\n  config?: GraphConfig;\n  onBoxSelection?: (c: {\n    event: PIXI.InteractionEvent,\n    elements: cytoscape.Collection,\n    elementIds: string[],\n    boundingBox: BoundingBox;\n  }) => void;\n  selectedElementIds?: string[]\n}\n\nconst GraphElement = (props: GraphProps, ref: React.ForwardedRef<GraphRef>) => {\n  const {\n    style = {},\n    nodes = [],\n    edges = [],\n    onPress,\n    renderNode = DefaultRenderNode,\n    renderEdge = DefaultRenderEdge,\n    drawLine,\n    extraData,\n    config: configProp = {} as Partial<GraphConfig>,\n    onBoxSelection,\n    selectedElementIds = [],\n    children,\n    renderClusterNode = DefaultRenderClusterNode,\n  } = props\n  // const boxSelectionEnabled = !!onBoxSelection\n  const width = style?.width as number\n  const height = style?.height as number\n  const config = React.useMemo(() => ({\n    ...DEFAULT_CONFIG,\n    ...configProp,\n  }), [configProp])\n  const { theme } = config\n  const graphID = React.useMemo<string>(() => config.graphId ?? R.uuid(), [config.graphId])\n  const stageRef = React.useRef<{ app: PIXI.Application }>(null)\n  const { cy } = useGraph({\n    id: graphID,\n    onLoad: () => {\n    },\n    clusters: config.clusters,\n  })\n  const graphRef = useForwardRef<GraphRef>(ref, { cy })\n  const graphLayoutRef = React.useRef<cytoscape.Layouts>(null)\n  React.useMemo(() => {\n    const objectCount  = nodes.length + edges.length\n\n    if (graphRef.current.viewport){\n      adjustVisualQuality(objectCount, graphRef.current.viewport)\n    }\n  }, [nodes, edges])\n  React.useEffect(() => {\n    if (!graphRef.current.app && !config.layout) {\n      graphRef.current.viewport.dirty = true\n    }\n    graphRef.current.app = stageRef.current?.app!\n    if (graphRef.current.app) {\n      graphRef.current.app.view.addEventListener('contextmenu', (e) => {\n        e.preventDefault()\n      })\n    }\n  }, [stageRef.current])\n  React.useEffect(() => {\n    cyUnselectAll(cy)\n    selectedElementIds.forEach((id) => {\n      cy.$id(id).select()\n    })\n  }, [selectedElementIds, cy])\n  React.useEffect(() => {\n    if (stageRef.current && config.layout) {\n      const { hitArea } = graphRef.current.viewport\n      const boundingBox = {\n        x1: hitArea.x,\n        y1: hitArea.y,\n        w: hitArea.width,\n        h: hitArea.height,\n      }\n      graphLayoutRef.current?.stop()\n      // @ts-ignore\n      graphLayoutRef.current = cy.createLayout({\n        boundingBox,\n        ...config.layout,\n      })\n      graphLayoutRef.current.on('layoutstop', () => {\n        // @ts-ignore\n        graphLayoutRef.current = null\n        // Fix the edge lines\n        cy.edges().forEach((edge) => {\n          const edgeContext = contextUtils.get(edge)\n          edgeContext.onPositionChange()\n        })\n        // FOR CULLING\n        graphRef.current.viewport.dirty = true\n      })\n      graphLayoutRef.current.start()\n    }\n  }, [config.layout])\n  const backgroundColor = React.useMemo(\n    () => C.rgbNumber(theme.palette.background.default),\n    [theme.palette.background.default],\n  )\n  React.useEffect(() => {\n    stageRef.current!.app.renderer.backgroundColor = backgroundColor\n  }, [backgroundColor])\n  const {\n    ids: nodeConfigIds,\n    ...globalNodeConfig\n  } = {\n    ...DEFAULT_NODE_CONFIG,\n    ...(config.nodes ?? {}),\n  }\n  const {\n    ids: edgeConfigIds,\n    ...globalEdgeConfig\n  } = {\n    ...DEFAULT_EDGE_CONFIG,\n    ...(config.edges ?? {}),\n  }\n\n  const onPressCallback = React.useCallback((e) => {\n    cyUnselectAll(cy)\n    onPress?.(e)\n  }, [cy, onPress])\n  return (\n    <View\n      style={style}\n    >\n      <Stage\n        // @ts-ignore\n        ref={stageRef}\n        {...{ width, height }}\n        options={{\n          width,\n          height,\n          resolution: window.devicePixelRatio || 1, // 64, // window.devicePixelRatio || 1,\n          antialias: true,\n          autoDensity: true,\n          backgroundColor,\n        }}\n      >\n        <ThemeProvider\n          value={theme}\n        >\n          <Viewport\n            onCreate={(viewport) => {\n              graphRef.current.viewport = viewport\n            }}\n            onPress={onPressCallback}\n            zoom={config.zoom}\n            transform={config.transform}\n            {...{ width, height }}\n            onBoxSelectionEnd={({\n              event,\n              boundingBox,\n            }) => {\n              cyUnselectAll(cy)\n              const elementIds: string[] = []\n              const selectedCollection = cy.nodes().filter((element) => {\n                const elementPosition = element.position()\n                const elementContext = contextUtils.get(element)\n                const selected = calculateVisibilityByContext(element)\n                  && isPositionInBox(elementPosition, boundingBox)\n                if (selected) {\n                  element.select()\n                  elementIds.push(element.id())\n                }\n                return selected\n              })\n              onBoxSelection?.({\n                boundingBox,\n                elements: selectedCollection,\n                event,\n                elementIds,\n              })\n            }}\n          >\n            <DataRender\n              extraData={[extraData, config.nodes, config.clusters]}\n              data={nodes}\n              accessor={['children']}\n              keyExtractor={(item) => item.id}\n              renderItem={({ item }) => {\n                return (\n                  <NodeContainer\n                    graphID={graphID}\n                    item={item}\n                    graphRef={graphRef}\n                    config={{\n                      ...(globalNodeConfig ?? {}),\n                      ...(nodeConfigIds?.[item.id] ?? {}),\n                    }}\n                  >\n                    {renderNode}\n                  </NodeContainer>\n                )\n              }}\n            />\n            <DataRender\n              extraData={[extraData, config.edges, config.clusters]}\n              data={edges}\n              accessor={['children']}\n              keyExtractor={(item) => item.id}\n              renderItem={({ item }) => (\n                <EdgeContainer\n                  graphID={graphID}\n                  item={item}\n                  graphRef={graphRef}\n                  drawLine={drawLine}\n                  config={{\n                    ...(globalEdgeConfig ?? {}),\n                    ...(edgeConfigIds?.[item.id] ?? {}),\n                  }}\n                >\n                  {renderEdge}\n                </EdgeContainer>\n              )}\n            />\n            <DataRender\n              extraData={[extraData]}\n              data={config.clusters ?? []}\n              accessor={['children']}\n              keyExtractor={(item) => item.id}\n              renderItem={({ item }) => (\n                <ClusterNodeContainer\n                  graphID={graphID}\n                  item={item}\n                  graphRef={graphRef}\n                  config={{\n                    ...(globalNodeConfig ?? {}),\n                    ...(nodeConfigIds?.[item.id] ?? {}),\n                  }}\n                >\n                  {renderClusterNode}\n                </ClusterNodeContainer>\n              )}\n            />\n            {children}\n          </Viewport>\n        </ThemeProvider>\n      </Stage>\n    </View>\n  )\n}\n\nconst DEFAULT_NODE_CONFIG = {\n  renderEvents: [\n    CYTOSCAPE_EVENT.select,\n    CYTOSCAPE_EVENT.unselect,\n    CYTOSCAPE_EVENT.selectEdge,\n    CYTOSCAPE_EVENT.unselectEdge,\n    CYTOSCAPE_EVENT.mouseover,\n    CYTOSCAPE_EVENT.mouseout,\n  ],\n}\n\nconst DEFAULT_EDGE_CONFIG = {\n  renderEvents: [\n    CYTOSCAPE_EVENT.select,\n    CYTOSCAPE_EVENT.unselect,\n    CYTOSCAPE_EVENT.selectNode,\n    CYTOSCAPE_EVENT.unselectNode,\n    CYTOSCAPE_EVENT.mouseover,\n    CYTOSCAPE_EVENT.mouseout,\n  ],\n}\n\nconst DEFAULT_CONFIG = {\n  theme: DefaultTheme,\n}\n\nexport const Graph = wrapComponent<PropsWithRef<GraphRef, GraphProps>>(\n  GraphElement,\n  {\n    isForwardRef: true,\n    isEqual: R.equalsExclude(R.is(Function)),\n  },\n)\n\nexport { DefaultRenderClusterNode } from './DefaultRenderClusterNode'\nexport { DefaultRenderNode } from './DefaultRenderNode'\nexport { DefaultRenderEdge } from './DefaultRenderEdge'\n","import { ProfileTemplate } from '@components/templates/Profile'\nimport { ComponentType } from 'colay-ui/type'\nimport Layouts from '@core/layouts'\nimport { Clusters } from '@core/clusters'\nimport { ELEMENT_TYPE } from '@constants'\nimport { View } from './View'\nimport { Graphics } from './Graphics'\nimport { Pressable } from './Pressable'\nimport { Text } from './Text'\nimport { Image } from './Image'\nimport { HoverContainer } from './HoverContainer'\nimport { Graph as NativeGraph, GraphProps } from './Graph'\n\nexport const Graph = NativeGraph as ComponentType<GraphProps> & {\n  View: typeof View;\n  Text: typeof Text;\n  Image: typeof Image;\n  Pressable: typeof Pressable;\n  Graphics: typeof Graphics;\n  ProfileTemplate: typeof ProfileTemplate;\n  Layouts: typeof Layouts;\n  Clusters: typeof Clusters;\n  HoverContainer: typeof HoverContainer;\n  elementType: typeof ELEMENT_TYPE;\n}\n\nGraph.View = View\nGraph.Text = Text\nGraph.Image = Image\nGraph.Pressable = Pressable\nGraph.Graphics = Graphics\nGraph.ProfileTemplate = ProfileTemplate\nGraph.Layouts = Layouts\nGraph.Clusters = Clusters\nGraph.HoverContainer = HoverContainer\nGraph.elementType = ELEMENT_TYPE\n\nexport { DefaultRenderEdge, DefaultRenderNode } from './Graph'\nexport {\n  ProfileTemplate,\n} from './templates/Profile'\n\nexport type { GraphProps } from './Graph'\n\nexport {\n  drawLine,\n} from './Graphics'\n\n// export {\n//   GraphEditor,\n//   GraphEditorProps,\n// } from './GraphEditor'\n","import React from 'react'\nimport { View, ViewProps } from '../View'\n\nexport type HoverContainerProps = {\n  renderHoverElement: () => React.ReactChild;\n} & ViewProps\n\nexport const HoverContainer = (props: HoverContainerProps) => {\n  const {\n    children,\n    renderHoverElement,\n    ...rest\n  } = props\n  const [state, setState] = React.useState({ hovered: false })\n  const onHoverStart = React.useCallback(() => {\n    setState({ hovered: true })\n  }, [])\n  const onHoverEnd = React.useCallback(() => {\n    setState({ hovered: false })\n  }, [])\n  return (\n    <View\n      interactive\n      {...rest}\n      pointerover={onHoverStart}\n      pointerout={onHoverEnd}\n    >\n      {children}\n      {state.hovered && renderHoverElement()}\n    </View>\n  )\n}\n\n/**\n * ## Usage\n * To use Image on Graph\n * Check example\n *\n * ```js live=true\n * <Graph\n *  style={{ width: '100%', height: 250 }}\n *  nodes={[\n *    {\n *      id: 1,\n *      position: { x: 10, y: 10 },\n *      data: {\n *        title: 'Edison',\n *        image: 'https://www.biography.com/.image/t_share/MTE4MDAzNDEwNTEzMDA0MDQ2/thomas-edison-9284349-1-402.jpg'\n *       }\n *    },\n *    {\n *      id: 2,\n *      position: { x: 300, y: 10 },\n *      data: {\n *        title: 'lamp',\n *        image: 'https://images.unsplash.com/photo-1552529232-9e6cb081de19?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60'\n *      }\n *    },\n *  ]}\n *  edges={[\n *    { id: 51, source: 1, target: 2 }\n *  ]}\n *  renderNode={({ item: { data } }) => (\n *    <Graph.HoverContainer\n *      style={{\n          width: 100,\n          height: 100,\n          backgroundColor: '#3291a8',\n          alignItems: 'center',\n          justifyContent: 'center',\n          borderRadius: 25\n        }}\n        renderHoverElement={() => (\n          <Graph.View\n            style={{\n              backgroundColor: 'white',\n              width: NODE_SIZE.width * 2,\n              height: 20,\n              position: 'absolute',\n              left: 0\n            }}\n          >\n            <Graph.Text style={{fontSize: 20, textAlign: 'center'}}>\n              {R.replace('ECLI:NL:', '')(data.ecli)}\n            </Graph.Text>\n          </Graph.View>\n        )}\n *    >\n *      <Graph.Image\n *        style={{ width: 100, height: 100 }}\n *        source={{ uri: data.image }}\n *      />\n *    </Graph.HoverContainer>\n * )}\n * />\n * ```\n */\n","import React from 'react'\nimport { Position } from 'colay/type'\nimport { GraphEditorRef } from '@type'\nimport {\n  Menu,\n  MenuItem,\n  Portal,\n} from '@mui/material'\n\nexport type ContextMenuProps = {\n  onSelect?: (value: string) => void;\n  children?: React.ReactNode;\n  items?: {\n    label: string; value: string;\n  }[]\n  open?: boolean;\n  position?: Position;\n  graphEditorRef: React.MutableRefObject<GraphEditorRef>\n}\n\nconst DEFAULT_FONT_SIZE = 20\nconst WIDTH = 540\nexport const ContextMenu = (props: ContextMenuProps) => {\n  const {\n    children,\n    onSelect,\n    items = [],\n    open,\n    position = { x: 0, y: 0 },\n    graphEditorRef,\n  } = props\n  return (\n    <Portal container={document.body}>\n      <Menu\n        open={open}\n        onClose={() => onSelect?.()}\n        anchorReference=\"anchorPosition\"\n        anchorPosition={{\n          left: position.x,\n          top: position.y,\n        }}\n      >\n        {\n          items.map(({ value, label }) => (\n            <MenuItem\n              key={value}\n              onClick={() => {\n                onSelect?.(value)\n              }}\n            >\n              {label}\n            </MenuItem>\n          ))\n        }\n      </Menu>\n    </Portal>\n\n  )\n}\n","// @ts-nocheck\ntype Callback = (...params: any[]) => void\n\ntype Checker = () => boolean\n\ninterface KeyId {\n  [key: string]: any\n}\n\ninterface OriginalMs {\n  [key: string]: number\n}\n\nclass MetadataRecord {\n  public executedTime: number\n\n  public paused = false\n\n  public startTime = new Date().getTime()\n\n  public timeSpentWaiting = 0\n\n  constructor(\n    public callback: Callback,\n    public key: string,\n    public ms: number,\n    public params: any[],\n  ) {\n  }\n}\n\ninterface Metadata {\n  [key: string]: MetadataRecord\n}\n\nexport interface TimeoutInstance {\n  clear: (erase?: boolean) => void;\n  executed: () => boolean;\n  exists: () => boolean;\n  lastExecuted: () => Date;\n  pause: () => number | boolean;\n  paused: () => boolean;\n  pending: () => boolean;\n  remaining: () => number;\n  restart: () => boolean | Checker;\n  resume: () => boolean | Checker;\n  set: (newCallback: Callback, newMs?: number, ...newParams: any[]) => Checker;\n}\n\nexport class Timeout {\n  private static keyId: KeyId = {}\n\n  private static originalMs: OriginalMs = {}\n\n  private static metadata: Metadata = {}\n\n  /**\n   * clear timeout and optionally erase all knowledge of its existence\n   * @param key\n   * @param erase\n   */\n  static clear(key: string, erase = true) {\n    clearTimeout(Timeout.keyId[key])\n    delete Timeout.keyId[key]\n\n    if (erase) {\n      delete Timeout.metadata[key]\n      delete Timeout.originalMs[key]\n    }\n  }\n\n  /**\n   * returns a function allowing you to test if it has executed\n   * @param key\n   * @param callback\n   * @param ms\n   * @param params\n   */\n  static set(key: string, callback: Callback, ms: number, ...params: any[]): Checker\n  /**\n   * returns a function allowing you to test if it has executed\n   * @param callback\n   * @param ms\n   * @param params\n   */\n  static set(callback: Callback, ms: number, ...params: any[]): Checker\n  static set(...args: any[]): Checker\n  static set(...args: any[]): Checker {\n    let key: string\n    let ms: number\n    let params: any[]\n    let callback: Callback\n\n    if (args.length === 0) {\n      throw Error('Timeout.set() requires at least one argument')\n    }\n\n    if (typeof args[1] === 'function') {\n      [key, callback, ms, ...params] = args\n    } else {\n      [callback, ms, ...params] = args\n      key = callback.toString()\n    }\n\n    if (!callback) {\n      throw Error('Timeout.set() requires a callback parameter')\n    }\n\n    Timeout.clear(key)\n\n    const invoke = () => {\n      Timeout.metadata[key].executedTime = new Date().getTime()\n      callback(...params)\n    }\n\n    Timeout.keyId[key] = setTimeout(invoke, ms || 0)\n    Timeout.originalMs[key] = Timeout.originalMs[key] || ms\n\n    Timeout.metadata[key] = new MetadataRecord(\n      callback,\n      key,\n      ms,\n      params,\n    )\n\n    return () => Timeout.executed(key)\n  }\n\n  /**\n   * same as set() except returns false if timeout already exists\n   * @param key\n   * @param callback\n   * @param ms\n   * @param params\n   */\n  static create(key: string, callback: Callback, ms: number, ...params: any[]): boolean | Checker\n  /**\n   * same as set() except returns false if timeout already exists\n   * @param callback\n   * @param ms\n   * @param params\n   */\n  static create(callback: Callback, ms: number, ...params: any[]): boolean | Checker\n  static create(...args: any[]): boolean | Checker {\n    if (args.length === 0) {\n      throw Error('Timeout.create() requires at least one argument')\n    }\n\n    let key: string\n\n    if (typeof args[1] === 'function') {\n      [key] = args\n    } else {\n      const [callback] = args\n      key = callback.toString()\n    }\n\n    return Timeout.exists(key) ? false : Timeout.set(...args)\n  }\n\n  /**\n   * timeout has been created\n   * @param key\n   */\n  static exists(key: string): boolean {\n    return key in Timeout.keyId || (Timeout.metadata)[key] !== undefined\n  }\n\n  /**\n   * test if a timeout has run\n   * @param key\n   */\n  static executed(key: string): boolean {\n    return Timeout.exists(key) && !!Timeout.metadata[key].executedTime\n  }\n\n  /**\n   * when timeout was last executed\n   * @param key\n   */\n  static lastExecuted(key: string): Date {\n    return !Timeout.executed(key)\n      ? null\n      : new Date(Timeout.metadata[key].executedTime)\n  }\n\n  /**\n   * timeout does exist, but has not yet run\n   * @param key\n   */\n  static pending(key: string): boolean {\n    return Timeout.exists(key) && !Timeout.executed(key)\n  }\n\n  /**\n   * timeout does exist, but will not execute because it is paused\n   * @param key\n   */\n  static paused(key: string): boolean {\n    return Timeout.exists(key)\n      && !Timeout.executed(key)\n      && Timeout.metadata[key].paused\n  }\n\n  /**\n   * remaining time until timeout will occur\n   * @param key\n   */\n  static remaining(key: string): number {\n    if (!Timeout.metadata[key]) return 0\n\n    const metaDataRecord = Timeout.metadata[key]\n\n    return Timeout.paused(key)\n      ? metaDataRecord.ms - metaDataRecord.timeSpentWaiting\n      : Math.max(0, metaDataRecord.startTime + metaDataRecord.ms - new Date().getTime())\n  }\n\n  /**\n   * restart timeout with original time\n   * @param key\n   */\n  static restart(key: string): boolean | Checker {\n    if (!Timeout.metadata[key] || Timeout.executed(key)) return false\n\n    const metaDataRecord = Timeout.metadata[key]\n\n    Timeout.clear(key, false)\n\n    if (metaDataRecord.paused) {\n      metaDataRecord.paused = false\n    }\n\n    return Timeout.set(key, metaDataRecord.callback, Timeout.originalMs[key], ...metaDataRecord.params)\n  }\n\n  /**\n   * pause our execution countdown until we're ready for it to resume\n   * @param key\n   */\n  static pause(key: string): boolean | number {\n    if (!Timeout.metadata[key] || Timeout.paused(key) || Timeout.executed(key)) return false\n\n    Timeout.clear(key, false)\n\n    const metaDataRecord = Timeout.metadata[key]\n\n    metaDataRecord.paused = true\n    metaDataRecord.timeSpentWaiting = new Date().getTime() - metaDataRecord.startTime\n\n    return metaDataRecord.timeSpentWaiting\n  }\n\n  /**\n   * resume paused Timeout with the remaining time\n   * @param key\n   */\n  static resume(key: string): boolean | Checker {\n    if (!Timeout.metadata[key] || Timeout.executed(key)) return false\n\n    const metaDataRecord = Timeout.metadata[key]\n\n    if (!metaDataRecord.paused) return false\n\n    const originalMs = Timeout.originalMs[key]\n    const remainingTime = metaDataRecord.ms - metaDataRecord.timeSpentWaiting\n\n    const result = Timeout.set(key, metaDataRecord.callback, remainingTime, ...metaDataRecord.params)\n\n    Timeout.originalMs[key] = originalMs\n\n    return result\n  }\n\n  /**\n   * instantiate timeout to handle as object\n   * @param callback\n   * @param ms\n   * @param params\n   */\n  static instantiate(callback: Callback, ms = 0, ...params: any[]): TimeoutInstance {\n    if (!callback) {\n      throw Error('Timeout.instantiate() requires a function parameter')\n    }\n\n    const key = `${Math.random()}${callback}`.replace(/\\s/g, '')\n\n    Timeout.set(key, callback, ms, ...params)\n\n    return {\n      clear: (erase = true) => Timeout.clear(key, erase),\n      executed: () => Timeout.executed(key),\n      exists: () => Timeout.exists(key),\n      lastExecuted: () => Timeout.lastExecuted(key),\n      pause: () => Timeout.pause(key),\n      paused: () => Timeout.paused(key),\n      pending: () => Timeout.pending(key),\n      remaining: () => Timeout.remaining(key),\n      restart: () => Timeout.restart(key),\n      resume: () => Timeout.resume(key),\n      set: (newCallback: Callback, newMs = 0, ...newParams: any[]) => Timeout.set(key, newCallback, newMs, ...newParams),\n    }\n  }\n}\n","import { Timeout, TimeoutInstance } from './smart-timer'\n\nexport type {\n  TimeoutInstance,\n} from './smart-timer'\nexport type Timer<T> = {\n  after: number;\n} & T\n\nexport {\n  Timeout,\n} from './smart-timer'\n\nexport type Options = {\n  onFinish?: () => void;\n  onPlayChanged?: () => void;\n  autostart?: boolean\n}\nexport const createTimeoutManager = <T extends Timer<Record<string, any>>>(\n  timers: T[] = [],\n  callback: (timer: T, index: number, timeout: TimeoutInstance) => void,\n  options: Options = {},\n) => {\n  const {\n    onFinish: onFinishCallback,\n    autostart = true,\n    onPlayChanged: onPlayChangedCallback,\n  } = options\n  const isEmpty = timers.length === 0\n  const timeoutInstances: TimeoutInstance[] = []\n  let afterTotal = 0\n  const onFinish = () => {\n    controller.finished = true\n    controller.duration = 0\n    onFinishCallback?.()\n  }\n  const onPlayChanged = (started: boolean) => {\n    if (started) {\n      controller.durationCounter = createDurationCounter()\n    } else {\n      // @ts-ignore\n      controller.durationCounter && clearInterval(controller.durationCounter)\n    }\n    controller.paused = !started\n    onPlayChangedCallback?.()\n  }\n  let totalDuration = 0\n  timers.forEach(({ after }: T) => {\n    totalDuration += after\n  })\n  const createDurationCounter = () => setInterval(() => {\n    controller.duration += 100\n  }, 100)\n  const controller = {\n    currentIndex: 0,\n    totalDuration,\n    duration: 0,\n    durationCounter: null as null | Timeout,\n    timers,\n    timeoutInstances,\n    finished: isEmpty,\n    paused: !autostart,\n    pause: () => {\n      timeoutInstances.forEach((timeoutInstance, index) => {\n        if (index >= controller.currentIndex) {\n          timeoutInstance.pause()\n        }\n      })\n      onPlayChanged(false)\n    },\n    start: () => {\n      timeoutInstances.forEach((timeoutInstance, index) => {\n        if (index >= controller.currentIndex) {\n          timeoutInstance.resume()\n        }\n      })\n      onPlayChanged(true)\n    },\n    clear: () => {\n      timeoutInstances.forEach((timeoutInstance) => {\n        timeoutInstance.clear()\n      })\n      // @ts-ignore\n      controller.durationCounter && clearInterval(controller.durationCounter)\n      onFinish()\n    },\n  }\n  timers.forEach((timer, index) => {\n    afterTotal += timer.after\n    const timeoutInstance = Timeout.instantiate(() => {\n      controller.currentIndex = index + 1\n      callback(timer, index, timeoutInstance)\n      if (index === timers.length - 1) {\n        controller.clear()\n      }\n    }, afterTotal)\n    if (!autostart) {\n      timeoutInstance.pause()\n    }\n    timeoutInstances.push(\n      timeoutInstance,\n    )\n  })\n  if (autostart) {\n    controller.durationCounter = createDurationCounter()\n  }\n  return controller\n}\n\nexport type TimeoutManager = ReturnType<typeof createTimeoutManager>\n","import React from 'react'\nimport {\n  AddCircle,\n  Adjust,\n  DeleteRounded,\n  RecordVoiceOverRounded,\n  Edit,\n  ExpandMore,\n  BuildCircle,\n  RepeatOne,\n  SortByAlpha,\n  Close,\n  InfoOutlined,\n  Filter,\n  ArrowDropDownRounded,\n  ArrowDropUpRounded,\n  Bookmark,\n  Bookmarks,\n  BookmarkBorder,\n  Minimize,\n  Videocam,\n  FiberManualRecord,\n  Settings,\n  BuildCircleOutlined,\n  MoreVert,\n  Redo,\n  ChevronLeft,\n  ChevronRight,\n  KeyboardArrowUp,\n  KeyboardArrowDown,\n  PlaylistAdd,\n  PlaylistPlay,\n  PlayArrow,\n  NavigateNext,\n  NavigateBefore,\n  Assessment,\n  Beenhere,\n  UnfoldLess,\n  UnfoldMore,\n  MyLocation,\n  DragHandle,\n  CancelRounded,\n} from '@mui/icons-material'\nimport { IconProps as MUIIconProps } from '@mui/material'\n\nconst ICONS = {\n  assessment: Assessment,\n  add_circle: AddCircle,\n  addjust: Adjust,\n  cancel_rounded: CancelRounded,\n  delete_rounded: DeleteRounded,\n  record_voice_over_rounded: RecordVoiceOverRounded,\n  build_circle_outlined: BuildCircleOutlined,\n  more_vert: MoreVert,\n  edit: Edit,\n  build_circle: BuildCircle,\n  repeat_one: RepeatOne,\n  sort_by_alpha: SortByAlpha,\n  close: Close,\n  info_outlined: InfoOutlined,\n  filter: Filter,\n  arrow_drop_down_rounded: ArrowDropDownRounded,\n  arrow_drop_up_rounded: ArrowDropUpRounded,\n  bookmarks: Bookmarks,\n  bookmark: Bookmark,\n  bookmark_border: BookmarkBorder,\n  minimize: Minimize,\n  videocam: Videocam,\n  fiber_manual_record: FiberManualRecord,\n  settings: Settings,\n  redo: Redo,\n  chevron_left: ChevronLeft,\n  chevron_right: ChevronRight,\n  keyboard_arrow_up: KeyboardArrowUp,\n  keyboard_arrow_down: KeyboardArrowDown,\n  playlist_add: PlaylistAdd,\n  playlist_play: PlaylistPlay,\n  expand_more: ExpandMore,\n  play_arrow: PlayArrow,\n  navigate_before: NavigateBefore,\n  navigate_next: NavigateNext,\n  beenhere: Beenhere,\n  unfold_less: UnfoldLess,\n  unfold_more: UnfoldMore,\n  my_location: MyLocation,\n  drag_handle: DragHandle,\n} as const\n\ntype IconName = keyof typeof ICONS\n\nexport type IconProps = Omit<MUIIconProps, 'name'> & {\n  name: IconName;\n}\n\nexport const Icon = (props: IconProps) => {\n  const {\n    name,\n    ...rest\n  } = props\n  const IconSelected = ICONS[name]\n  return (\n    // @ts-ignore\n    <IconSelected {...rest} />\n  )\n}\n","import * as R from 'colay/ramda'\n\nimport { DocumentResult, DocumentPickerOptions } from './types'\n\nconst uuidv4 = R.uuid\n\nexport default {\n  get name(): string {\n    return 'ExpoDocumentPicker'\n  },\n\n  async getDocumentAsync({\n    type = '*/*',\n    multiple = false,\n  }: DocumentPickerOptions): Promise<DocumentResult> {\n    const input = document.createElement('input')\n    input.style.display = 'none'\n    input.setAttribute('type', 'file')\n    input.setAttribute('accept', type)\n    input.setAttribute('id', uuidv4())\n    if (multiple) {\n      input.setAttribute('multiple', 'multiple')\n    }\n\n    document.body.appendChild(input)\n\n    return new Promise((resolve, reject) => {\n      input.addEventListener('change', () => {\n        if (input.files) {\n          const targetFile = input.files[0]\n          const reader = new FileReader()\n          reader.onerror = () => {\n            reject(new Error('Failed to read the selected media because the operation failed.'))\n          }\n          reader.onload = ({ target }) => {\n            const uri = (target as any).result\n            resolve({\n              type: 'success',\n              uri,\n              name: targetFile.name,\n              file: targetFile,\n              lastModified: targetFile.lastModified,\n              size: targetFile.size,\n              output: input.files,\n            })\n          }\n          // Read in the image file as a binary string.\n          reader.readAsDataURL(targetFile)\n        } else {\n          resolve({ type: 'cancel' })\n        }\n\n        document.body.removeChild(input)\n      })\n\n      const event = new MouseEvent('click')\n      input.dispatchEvent(event)\n    })\n  },\n}\n","import { LAYOUT_NAMES } from '@constants'\nimport {\n  Card,\n  CardActionArea, CardContent, CardMedia, MenuItem,\n  Popper,\n  TextField,\n  Typography\n} from '@mui/material'\nimport { utils, WidgetProps } from '@rjsf/core'\nimport { useDisclosure, View } from 'colay-ui'\nimport React from 'react'\nimport { LAYOUT_INFO } from './layoutInfo'\n\nconst { asNumber, guessType } = utils\n\nconst nums = new Set(['number', 'integer'])\n\nexport const WIDTH = 300\nexport const HEIGHT = 300\n\n/**\n * This is a silly limitation in the DOM where option change event values are\n * always retrieved as strings.\n */\nconst processValue = (schema: any, value: any) => {\n  // \"enum\" is a reserved word, so only \"type\" and \"items\" can be destructured\n  const { type, items } = schema\n  if (value === '') {\n    return undefined\n  } if (type === 'array' && items && nums.has(items.type)) {\n    return value.map(asNumber)\n  } if (type === 'boolean') {\n    return value === 'true'\n  } if (type === 'number') {\n    return asNumber(value)\n  }\n\n  // If type is undefined, but an enum is present, try and infer the type from\n  // the enum values\n  if (schema.enum) {\n    if (schema.enum.every((x: any) => guessType(x) === 'number')) {\n      return asNumber(value)\n    } if (schema.enum.every((x: any) => guessType(x) === 'boolean')) {\n      return value === 'true'\n    }\n  }\n\n  return value\n}\n\nconst LayoutNameSelect = (props: WidgetProps) => {\n  const {\n    schema,\n    id,\n    label,\n    required,\n    disabled,\n    readonly,\n    options,\n    value,\n    multiple,\n    autofocus,\n    onChange,\n    onBlur,\n    onFocus,\n    rawErrors = [],\n  } = props\n  const { enumOptions, enumDisabled } = options\n\n  const emptyValue = multiple ? [] : ''\n\n  const _onChange = ({\n    target: { value },\n  }: React.ChangeEvent<{ name?: string; value: unknown }>) => onChange(processValue(schema, value))\n  const _onBlur = ({ target: { value } }: React.FocusEvent<HTMLInputElement>) => onBlur(id, processValue(schema, value))\n  const _onFocus = ({\n    target: { value },\n  }: React.FocusEvent<HTMLInputElement>) => onFocus(id, processValue(schema, value))\n  const {\n    anchorEl,\n    // isOpen,\n    onClose,\n    onOpen,\n  } = useDisclosure({})\n  const hoveredIndexRef = React.useRef(-1)\n  return (\n    <TextField\n      id={id}\n      label={label || schema.title}\n      select\n      value={typeof value === 'undefined' ? emptyValue : value}\n      required={required}\n      disabled={disabled || readonly}\n      autoFocus={autofocus}\n      error={rawErrors.length > 0}\n      onChange={_onChange}\n      onBlur={_onBlur}\n      onFocus={_onFocus}\n      InputLabelProps={{\n        shrink: true,\n      }}\n      SelectProps={{\n        multiple: typeof multiple === 'undefined' ? false : multiple,\n      }}\n    >\n      {(enumOptions as any).map(({ value, label }: any, i: number) => {\n        const disabled: any = enumDisabled && (enumDisabled as any).indexOf(value) != -1\n        return (\n          <MenuItem\n            key={i}\n            value={value}\n            disabled={disabled}\n            onMouseEnter={(e) => {\n              hoveredIndexRef.current = i\n              onOpen(e)\n            }}\n            onMouseLeave={onClose}\n          >\n            <LayoutNameItem\n              openInfo={{\n                anchorEl,\n                isOpen: hoveredIndexRef.current === i,\n              }}\n              value={value}\n              label={label}\n              disabled={disabled}\n            />\n          </MenuItem>\n\n        // <MenuItem\n        //   key={i}\n        //   value={value}\n        //   disabled={disabled}\n        // >\n\n        //   <View\n        //   style={{\n        //     flexDirection: 'row',\n        //     justifyContent: 'space-between',\n        //     width: '100%',\n        //   }}\n        // >\n        //   <Typography>\n        //     {label}\n        //   </Typography>\n        //   <img\n        //     src={`https://raw.githubusercontent.com/sabaturgay/assets/main/gifs/${value}Layout.gif`}\n        //     width={32}\n        //     height={32}\n        //     alt={label}\n        //   />\n        // </View>\n        // </MenuItem>\n        )\n      })}\n    </TextField>\n  )\n}\n\ntype LayoutNameItemProps = {\n  value: string;\n  label: string;\n  disabled?: boolean;\n  openInfo: {\n    anchorEl?: any;\n    isOpen?: boolean\n  };\n}\nconst LayoutNameItem = (props: LayoutNameItemProps) => {\n  const {\n    label,\n    value,\n    openInfo = {},\n  } = props\n  const {\n    isOpen,\n    anchorEl,\n  } = openInfo\n  const info = LAYOUT_INFO[value as keyof typeof LAYOUT_INFO]\n  return (\n    <>\n      <View\n        style={{\n          flexDirection: 'row',\n          justifyContent: 'space-between',\n          width: '100%',\n        }}\n      >\n        <Typography>\n          {label}\n        </Typography>\n        <img\n          src={`https://raw.githubusercontent.com/sabaturgay/assets/main/gifs/${value}Layout.gif`}\n          width={32}\n          height={32}\n          alt={label}\n        />\n      </View>\n      {/* <Popper\n        // id={id}\n        open={isOpen}\n        anchorEl={anchorEl}\n        transition\n        // disablePortal\n        placement=\"right-start\"\n        style={{\n          zIndex: 2000,\n        }}\n      >\n        <LayoutCard\n          {...info}\n        />\n\n      </Popper> */}\n    </>\n  )\n}\n\ntype LayoutCardProps = typeof LAYOUT_INFO['breadthfirst']\nconst LayoutCard = (props: LayoutCardProps) => {\n  const {\n    content,\n    image,\n    title,\n  } = props\n  return (\n    <>\n      <Card\n        sx={{\n          width: WIDTH,\n          zIndex: (theme) => theme.zIndex.modal,\n        }}\n      >\n        <CardActionArea>\n          <CardMedia\n            component=\"img\"\n            height={`${HEIGHT}`}\n            width={`${WIDTH}`}\n            image={image}\n            title={title}\n          />\n          <CardContent>\n            <Typography\n              gutterBottom\n              variant=\"h5\"\n              component=\"h2\"\n            >\n              {title}\n            </Typography>\n            <Typography\n              variant=\"body2\"\n              color=\"textSecondary\"\n              component=\"p\"\n            >\n              {content}\n            </Typography>\n          </CardContent>\n        </CardActionArea>\n        {/*\n      <CardActions>\n        <Button size=\"small\" color=\"primary\">\n          Share\n        </Button>\n        <Button size=\"small\" color=\"primary\">\n          Learn More\n        </Button>\n      </CardActions> */}\n      </Card>\n    </>\n  //   <Paper\n  //   sx={{\n  //     width: { sx: '8vw', md: '50vw' },\n  //     display: 'flex',\n  //     padding: 10,\n  //     flexDirection: 'column',\n  //   }}\n  // >\n  //   <Typography variant=\"h1\">\n  //     {info.title}\n  //   </Typography>\n  //   <img\n  //     src={info.image}\n  //     width={250}\n  //     height={250}\n  //     alt={label}\n  //   />\n  //   <Typography\n  //     variant=\"body1\"\n  //   >\n  //     {info.content}\n  //   </Typography>\n  // </Paper>\n  )\n}\nexport const getFormProps = () => ({\n  schema: {\n    title: 'Layout',\n    properties: {\n      name: {\n        type: 'string',\n        enum: LAYOUT_NAMES,\n      },\n      animationDuration: {\n        type: 'number',\n        minimum: 0,\n        maximum: 10000,\n      },\n      refresh: {\n        type: 'number',\n        minimum: 0,\n        maximum: 100,\n      },\n      maxIterations: {\n        type: 'number',\n        minimum: 0,\n        maximum: 1000,\n      },\n      maxSimulationTime: {\n        type: 'number',\n        minimum: 0,\n        maximum: 1000,\n      },\n    },\n  },\n  uiSchema: {\n    name: {\n      'ui:field': (props: any) => {\n        const {\n          schema,\n          formData,\n        } = props\n        return (\n          <LayoutNameSelect\n            {...props}\n            value={formData}\n            options={{\n              enumOptions: schema.enum.map(\n                (value: string) => ({\n                  label: value,\n                  value,\n                }),\n              ),\n            }}\n          />\n        )\n      },\n    },\n  },\n}) as const\n","import {\n  Box, Button, Popover,\n  Backdrop,\n  Portal,\n} from '@mui/material'\nimport Form from '@rjsf/material-ui'\nimport { EVENT } from '@constants'\nimport { OnEventLite } from '@type'\nimport { useDisclosure } from 'colay-ui'\nimport React from 'react'\nimport {\n  getFormProps,\n  WIDTH,\n} from './getFormProps'\n\ntype LayoutOptionsValue = {\n  name?: string;\n  animationDuration?: number;\n  refresh? : number;\n  maxIterations? : number;\n  maxSimulationTime? : number;\n}\nexport type LayoutOptionsProps = {\n  layout?: LayoutOptionsValue;\n  schema?: any;\n  onEvent: OnEventLite;\n}\n\nexport const LayoutOptions = (props: LayoutOptionsProps) => {\n  const {\n    layout = {},\n    onEvent,\n    schema,\n  } = props\n  const {\n    anchorEl,\n    isOpen,\n    onClose,\n    onOpen,\n  } = useDisclosure({})\n  const onSubmitCallback = React.useCallback((e) => {\n    onEvent({\n      type: EVENT.LAYOUT_CHANGED,\n      payload: {\n        form: e,\n        value: e.formData,\n      },\n    })\n    onClose()\n  }, [onEvent])\n  return (\n    <Box>\n      <Button\n        // @ts-ignore\n        onClick={onOpen}\n        sx={{\n          color: (theme) => theme.palette.text.secondary,\n        }}\n      >\n        {layout.name ?? 'Select Layout'}\n      </Button>\n      {/* <Popover\n        open={isOpen}\n        anchorEl={anchorEl}\n        PaperProps={{\n          style: {\n            width: '100%',\n            height: '100%',\n            top: 0,\n            left: 0,\n            position: 'absolute',\n            backgroundColor: 'rgba(0,0,0,0.4)',\n            zIndex: 100,\n          },\n        }}\n      /> */}\n      <Popover\n        // id={id}\n        open={isOpen}\n        anchorEl={anchorEl}\n        onClose={onClose}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'center',\n        }}\n      >\n        <Portal>\n          <Backdrop\n            open\n            sx={{\n              position: 'absolute',\n              top: 0,\n              left: 0,\n              zIndex: (theme) => theme.zIndex.drawer,\n              width: '100vw',\n              height: '100vw',\n            }}\n          />\n        </Portal>\n        <Box\n          sx={{\n            width: WIDTH,\n            padding: 2,\n          }}\n        >\n          <Form\n            {...getFormProps()}\n            {...(schema ? { schema } : {})}\n            // extraData={[layout]}\n            formData={{\n              name: layout.name,\n              animationDuration: layout.animationDuration,\n              refresh: layout.refresh,\n              maxIterations: layout.maxIterations,\n              maxSimulationTime: layout.maxSimulationTime,\n            }}\n            onSubmit={onSubmitCallback}\n          />\n        </Box>\n      </Popover>\n\n    </Box>\n  )\n}\n","import {\n  Icon,\n} from '@components/Icon'\nimport { EDITOR_MODE, EVENT } from '@constants'\nimport { useGraphEditor } from '@hooks'\nimport {\n  Box, Button, FormControl, IconButton, InputLabel, Menu,\n  MenuItem, Select, useTheme, SelectProps,\n} from '@mui/material'\nimport {\n  EditorMode, OnEventLite,\n} from '@type'\nimport { readTextFile } from '@utils'\nimport DocumentPicker from '@utils/DocumentPicker'\nimport { useAnimation, useDisclosure, wrapComponent } from 'colay-ui'\nimport { Recorder } from 'colay-ui/components/Recorder'\n// import Form from 'unitx-ui/components/Form'\nimport * as R from 'colay/ramda'\nimport React from 'react'\nimport { LayoutOptions } from './LayoutOptions'\n// export const ACTION = {\n//   EXPORT_DATA: 'EXPORT_DATA',\n// }\ntype ActionOption = {\n  visible?: boolean;\n}\n\nexport type ActionBarProps = {\n  renderMoreAction?: () => React.ReactElement;\n  left?: React.FC;\n  right?: React.FC;\n  isOpen?: boolean;\n  autoOpen?: boolean;\n  mode?: EditorMode;\n  layoutName?: string;\n  theming?: {\n    options?: {\n      name: string;\n      value: string;\n    }[];\n    value?: string;\n  }\n  recording?: boolean;\n  eventRecording?: boolean;\n  actions?: {\n    add: ActionOption;\n    recordEvents: ActionOption;\n    delete: ActionOption;\n    // record: { visible: boolean; };\n    options: {\n      actions: { import: ActionOption };\n    };\n    layout: ActionOption;\n  };\n  onAction: (action: { type: string; value?: any }) => void;\n}\n\nconst DEFAULT_ACTIONS = {\n  add: { visible: true },\n  delete: { visible: true },\n  recordEvents: { visible: true },\n  options: {\n    actions: { import: { visible: true } },\n  },\n  layout: { visible: true },\n}\nconst RECORDING_STATUS_MAP = {\n  START: 'START',\n  STOP: 'STOP',\n  RECORDING: 'RECORDING',\n  IDLE: 'IDLE',\n}\n\nconst HEIGHT = 40\n// const AnimatedSurface = animated(Box)\n\nconst ActionBarElement = (props: ActionBarProps) => {\n  const {\n    renderMoreAction,\n    isOpen = false,\n    autoOpen = false,\n    recording = false,\n    eventRecording = false,\n    // recordingActions = false,\n    onAction,\n    left: LeftComponent,\n    right: RightComponent,\n    theming = {\n      options: [\n        { name: 'Default', value: 'Default' },\n        { name: 'Dark', value: 'Dark' },\n      ],\n      value: 'Default',\n    },\n  } = props\n  const [\n    {\n      onEvent,\n      graphEditorRef,\n      mode,\n      graphConfig,\n    },\n  ] = useGraphEditor(\n    (editor) => ({\n      onEvent: editor.onEvent,\n      graphEditorRef: editor.graphEditorRef,\n      mode: editor.mode,\n      graphConfig: editor.graphConfig,\n    }),\n  )\n  const {\n    style: animationStyle,\n    ref: animationRef,\n  } = useAnimation({\n    from: {\n      bottom: -HEIGHT,\n    },\n    to: {\n      bottom: 0,\n    },\n    autoPlay: false,\n  })\n  // const initialized = React.useRef(false)\n  React.useEffect(() => {\n    animationRef.current.play(isOpen)\n  }, [animationRef.current, isOpen])\n  const theme = useTheme()\n  const recordingRef = React.useRef(\n    RECORDING_STATUS_MAP.IDLE,\n  )\n  React.useMemo(() => {\n    switch (recordingRef.current) {\n      case RECORDING_STATUS_MAP.IDLE:\n        recordingRef.current = recording ? RECORDING_STATUS_MAP.START : RECORDING_STATUS_MAP.IDLE\n        break\n      case RECORDING_STATUS_MAP.START:\n        recordingRef.current = recording\n          ? RECORDING_STATUS_MAP.RECORDING\n          : RECORDING_STATUS_MAP.STOP\n        break\n      case RECORDING_STATUS_MAP.RECORDING:\n        recordingRef.current = recording\n          ? RECORDING_STATUS_MAP.RECORDING\n          : RECORDING_STATUS_MAP.STOP\n        break\n      case RECORDING_STATUS_MAP.STOP:\n        recordingRef.current = recording ? RECORDING_STATUS_MAP.START : RECORDING_STATUS_MAP.IDLE\n        break\n\n      default:\n        break\n    }\n  }, [recording])\n  // React.useEffect(() => {\n  //   animationRef?.current?.start()\n  // }, [])\n  const actions = R.mergeDeepRight(DEFAULT_ACTIONS, props.actions ?? {})\n  return (\n    <Box\n      style={{\n        position: 'absolute',\n        width: '100%',\n        height: HEIGHT,\n        left: 0,\n        flexDirection: 'row',\n        display: 'flex',\n        justifyContent: 'space-between',\n        // @ts-ignore\n        backgroundColor: theme.palette.background.paper,\n        ...animationStyle,\n      }}\n    >\n      {LeftComponent && <LeftComponent />}\n      <Box\n        style={{\n          flexDirection: 'row',\n          alignItems: 'center',\n          display: 'flex',\n          height: HEIGHT,\n          // width: '100%',\n        }}\n      >\n        {\n          actions.add.visible && (\n          <Button\n            style={styles.button}\n            startIcon={(\n              <Icon name=\"add_circle\" />\n)}\n            onClick={() => onEvent({\n              type: EVENT.MODE_CHANGED,\n              payload: {\n                value: [\n                  EDITOR_MODE.ADD,\n                  EDITOR_MODE.CONTINUES_ADD,\n                  // @ts-ignore\n                ].includes(mode)\n                  ? EDITOR_MODE.DEFAULT\n                  : EDITOR_MODE.ADD,\n              },\n            })}\n            variant={EDITOR_MODE.CONTINUES_ADD === mode ? 'contained' : 'outlined'}\n            color={[\n              EDITOR_MODE.ADD,\n              EDITOR_MODE.CONTINUES_ADD,\n              // @ts-ignore\n            ].includes(mode) ? 'secondary' : 'primary'}\n            onDoubleClick={() => onEvent({\n              type: EVENT.MODE_CHANGED,\n              payload: { value: EDITOR_MODE.CONTINUES_ADD },\n            })}\n          >\n            Add\n          </Button>\n          )\n        }\n        {\n          actions.delete.visible && (\n          <Button\n            style={styles.button}\n            startIcon={(\n              <Icon name=\"delete_rounded\" />\n            )}\n            color={[\n              EDITOR_MODE.DELETE,\n              EDITOR_MODE.CONTINUES_DELETE,\n              // @ts-ignore\n            ].includes(mode)\n              ? 'primary'\n              : 'secondary'}\n            variant={EDITOR_MODE.CONTINUES_DELETE === mode ? 'contained' : 'outlined'}\n            onClick={() => onEvent({\n              type: EVENT.MODE_CHANGED,\n              payload: {\n                value: [\n                  EDITOR_MODE.DELETE,\n                  EDITOR_MODE.CONTINUES_DELETE,\n                // @ts-ignore\n                ].includes(mode)\n                  ? EDITOR_MODE.DEFAULT\n                  : EDITOR_MODE.DELETE,\n              },\n            })}\n            onDoubleClick={() => onEvent({\n              type: EVENT.MODE_CHANGED,\n              payload: { value: EDITOR_MODE.CONTINUES_DELETE },\n            })}\n          >\n            Delete\n          </Button>\n          )\n        }\n        {\n          actions.layout.visible && (\n          <LayoutOptions\n            layout={graphConfig?.layout}\n            onEvent={onEvent}\n            {...actions.layout}\n          />\n          )\n        }\n        {\n          actions.recordEvents.visible && (\n          <IconButton\n            onClick={() => onEvent({ type: EVENT.TOGGLE_RECORD_EVENTS })}\n          >\n            <Icon\n              name=\"addjust\"\n              color={!eventRecording ? 'inherit' : 'error'}\n            />\n          </IconButton>\n          )\n        }\n        <Recorder\n          // @ts-ignore\n          getStream={() => graphEditorRef.current.app.renderer.view.captureStream(25)}\n          render={({\n            startRecording,\n            stopRecording,\n            status,\n          }) => {\n            if (recordingRef.current === RECORDING_STATUS_MAP.START) {\n              recordingRef.current = RECORDING_STATUS_MAP.RECORDING\n              startRecording()\n            }\n            if (recordingRef.current === RECORDING_STATUS_MAP.STOP) {\n              recordingRef.current = RECORDING_STATUS_MAP.IDLE\n              stopRecording()\n            }\n            return (\n              <IconButton\n                onClick={() => onEvent({ type: EVENT.TOGGLE_RECORD })}\n              >\n                <Icon\n                  name=\"videocam\"\n                  color={status !== 'recording' ? 'inherit' : 'error'}\n                />\n              </IconButton>\n            )\n          }}\n          onStop={(_, blob) => {\n            onEvent({\n              type: EVENT.RECORD_FINISHED,\n              payload: { value: blob },\n            })\n          }}\n        />\n        <MoreOptions\n          renderMoreAction={renderMoreAction}\n          theming={theming}\n          onEvent={onEvent}\n          onAction={onAction}\n        />\n      </Box>\n      {RightComponent && <RightComponent />}\n      {\n        !autoOpen && (\n          <IconButton\n            style={styles.icon}\n            onClick={() => {\n              onEvent({\n                type: EVENT.TOGGLE_ACTION_BAR,\n                avoidHistoryRecording: true,\n              })\n            }}\n          >\n            <Icon\n              name=\"build_circle_outlined\"\n            />\n          </IconButton>\n        )\n      }\n\n    </Box>\n  )\n}\ntype MoreOptionsProps = {\n  onEvent: OnEventLite;\n} & Pick<ActionBarProps, 'renderMoreAction' | 'onAction' | 'theming'>\n\nconst OPTIONS = {\n  Import: 'Import',\n  Export: 'Export',\n  ImportEvents: 'Import Events',\n} as const\nconst MoreOptions = (props: MoreOptionsProps) => {\n  const {\n    renderMoreAction = () => <Box />,\n    onEvent,\n    onAction,\n    theming,\n  } = props\n  const {\n    anchorEl,\n    isOpen,\n    onClose,\n    onOpen,\n  } = useDisclosure({})\n  const handleMenuItemClick = async (event: React.MouseEvent<HTMLLIElement>, index: number) => {\n    onClose()\n    const action = Object.values(OPTIONS)[index]\n    switch (action) {\n      case OPTIONS.Import: {\n        const result = await DocumentPicker.getDocumentAsync({ type: 'application/json' })\n        if (result.type === 'success') {\n          const fileText = await readTextFile(result.file!)\n          onEvent({\n            type: EVENT.IMPORT_DATA,\n            payload: { value: JSON.parse(fileText) },\n          })\n        }\n        break\n      }\n      case OPTIONS.ImportEvents: {\n        const result = await DocumentPicker.getDocumentAsync({ type: 'application/json' })\n        if (result.type === 'success') {\n          const fileText = await readTextFile(result.file!)\n          onEvent({\n            type: EVENT.IMPORT_EVENTS,\n            payload: { value: JSON.parse(fileText) },\n          })\n        }\n        break\n      }\n      case OPTIONS.Export:\n        onAction({ type: EVENT.EXPORT_DATA })\n        break\n\n      default:\n        break\n    }\n  }\n\n  const handleThemeChange: SelectProps['onChange'] = (e) => {\n    onAction({ type: EVENT.CHANGE_THEME, value: e.target.value })\n    onClose()\n  }\n\n  return (\n    <>\n      <IconButton\n        onClick={onOpen}\n      >\n        <Icon name=\"more_vert\" />\n      </IconButton>\n      <Menu\n        anchorEl={anchorEl}\n        open={isOpen}\n        onClose={onClose}\n        style={{ width: 400 }}\n      >\n        {Object.values(OPTIONS).map((option, index) => (\n          <MenuItem\n            key={option}\n            // selected={index === selectedIndex}\n            onClick={(event) => handleMenuItemClick(event, index)}\n          >\n            {option}\n          </MenuItem>\n        ))}\n        <FormControl fullWidth>\n          <InputLabel id=\"theme-select-label\">Theme</InputLabel>\n          <Select\n            labelId=\"theme-select-label\"\n            onChange={handleThemeChange}\n            value={theming?.value}\n          >\n            {theming?.options?.map((themeOption) => (\n              <MenuItem\n                key={themeOption.value}\n                value={themeOption.value}\n              >\n                {themeOption.name}\n              </MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n        {renderMoreAction()}\n      </Menu>\n    </>\n  )\n}\n\nexport const ActionBar = wrapComponent<ActionBarProps>(ActionBarElement, {})\n\nconst styles = {\n  icon: {\n    width: 24,\n    height: 24,\n    position: 'absolute',\n    left: 2,\n    top: -26,\n    fontSize: 24,\n  },\n  button: {\n    marginRight: 10,\n  },\n} as const\n","import React from 'react'\nimport {\n  pauseEvent,\n} from '@utils'\n\nexport const useDrag = (options) => {\n  const {\n    ref,\n    onDrag,\n  } = options\n\n  const resizer = React.useCallback((event) => {\n    const e = event.nativeEvent\n    const prevX = e.x\n    const prevY = e.y\n    const panelRect = ref.current.getBoundingClientRect()\n    function mousemove(e) {\n      pauseEvent(e)\n      const newX = prevX - e.x\n      const newY = prevY - e.y\n      onDrag({ x: newX, y: newY }, panelRect)\n    }\n\n    function mouseup() {\n      window.removeEventListener('mousemove', mousemove)\n      window.removeEventListener('mouseup', mouseup)\n    }\n    window.addEventListener('mousemove', mousemove)\n    window.addEventListener('mouseup', mouseup)\n  }, [])\n\n  return resizer\n}\n","import React from 'react'\nimport { ReactHTMLElementProps } from 'colay-ui/type'\n\nexport type ResizeDividerProps = ReactHTMLElementProps<HTMLDivElement>\nexport const ResizeDivider = (props: ResizeDividerProps) => {\n  const [state, setState] = React.useState({\n    onHover: false,\n  })\n  return (\n    <div\n      style={{\n        width: state.onHover ? 4 : 2,\n        height: '100%',\n        backgroundColor: 'black',\n        cursor: 'col-resize',\n        ...(props?.style ?? {}),\n      }}\n      onMouseEnter={() => setState({ ...state, onHover: true })}\n      onMouseLeave={() => setState({ ...state, onHover: false })}\n      {...props}\n    />\n  )\n}\n","import React from 'react'\nimport { JsonEditor as Editor } from 'jsoneditor-react'\nimport 'jsoneditor-react/es/editor.min.css'\nimport ace from 'brace'\nimport 'brace/mode/json'\nimport 'brace/theme/github'\nimport { useGraphEditor } from '@hooks'\nimport { EVENT } from '@constants'\n\nexport type JSONEditorProps = {\n}\n\nexport const JSONEditor = (props: JSONEditorProps) => {\n  const [\n    {\n      item,\n      onEvent,\n    },\n  ] = useGraphEditor(\n    (editor) => ({\n      item: editor.selectedItem,\n      onEvent: editor.onEvent,\n    }),\n  )\n  return (\n    <>\n      <Editor\n        value={item?.data}\n        onChange={(newData: any) => {\n          onEvent({\n            type: EVENT.UPDATE_DATA,\n            payload: {\n              value: newData,\n            },\n          })\n        }}\n        ace={ace}\n        theme=\"ace/theme/github\"\n      />\n    </>\n  )\n}\n","import { Icon } from '@components/Icon'\nimport {\n  IconButton,\n  Typography,\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n} from '@mui/material'\nimport { EVENT } from '@constants'\nimport {\n  JSONViewer,\n} from 'colay-ui'\nimport { View } from 'colay-ui/components/View'\nimport React from 'react'\nimport { OnEventLite } from '@type'\nimport * as R from 'colay/ramda'\n\nexport type GlobalNetworkStatisticsProps = {\n  data?: any;\n  onEvent: OnEventLite;\n}\n\nexport const GlobalNetworkStatistics = (props: GlobalNetworkStatisticsProps) => {\n  const {\n    data,\n    onEvent,\n  } = props\n  return (\n    <Accordion\n      defaultExpanded\n    >\n      <AccordionSummary\n        aria-controls=\"panel1a-content\"\n      >\n        <View\n          style={{\n            flexDirection: 'row',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            width: '100%',\n          }}\n        >\n          <View\n            style={{\n              flexDirection: 'row',\n              alignItems: 'center',\n            }}\n          >\n            <Typography\n              variant=\"h6\"\n            >\n              Global Network Statistics\n            </Typography>\n          </View>\n          <View\n            style={{\n              // alignItems: 'space-between',\n              flexDirection: 'row',\n            }}\n          >\n            <IconButton\n              onClick={(e) => {\n                e.stopPropagation()\n                onEvent({\n                  type: EVENT.CALCULATE_GLOBAL_NETWORK_STATISTICS,\n                })\n              }}\n            >\n              <Icon\n                name=\"assessment\"\n              />\n            </IconButton>\n          </View>\n        </View>\n      </AccordionSummary>\n      <AccordionDetails>\n        <JSONViewer\n          data={data}\n          sort={-1}\n          left={({ collapsed, onCollapse, noChild }) => (\n            <IconButton\n              size=\"small\"\n              sx={{ height: 24 }}\n              disabled={noChild}\n              onClick={() => onCollapse(!collapsed)}\n            >\n              <Icon\n                style={{\n                  fontSize: noChild ? 12 : 24,\n                }}\n                name={\n                        noChild\n                          ? 'fiber_manual_record'\n                          : collapsed\n                            ? 'arrow_drop_down_rounded'\n                            : 'arrow_drop_up_rounded'\n  }\n              />\n            </IconButton>\n          )}\n          renderItem={({ item: { key, value } }) => (\n            <View\n              style={{\n                flexDirection: 'row',\n                justifyContent: 'space-between',\n              }}\n            >\n              <Typography\n                variant=\"subtitle1\"\n                style={{ alignContent: 'center' }}\n              >\n                {`${key}${value ? ': ' : ''}`}\n              </Typography>\n              {!R.isNil(value)\n                ? (\n                  <Typography\n                    variant=\"subtitle1\"\n                    style={{ alignContent: 'center' }}\n                  >\n                    {value}\n                  </Typography>\n                )\n                : null}\n            </View>\n          )}\n        />\n      </AccordionDetails>\n    </Accordion>\n  )\n}\n","import { Icon } from '@components/Icon'\nimport {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary, IconButton,\n  Typography,\n} from '@mui/material'\nimport { OnEventLite } from '@type'\nimport {\n  JSONViewer,\n} from 'colay-ui'\nimport { View } from 'colay-ui/components/View'\nimport React from 'react'\nimport * as R from 'colay/ramda'\n\nexport type LocalNetworkStatisticsProps = {\n  data?: any;\n  onEvent: OnEventLite;\n}\n\nexport const LocalNetworkStatistics = (props: LocalNetworkStatisticsProps) => {\n  const {\n    data,\n  } = props\n  return (\n    <Accordion\n      defaultExpanded\n    >\n      <AccordionSummary\n        aria-controls=\"panel1a-content\"\n      >\n        <View\n          style={{\n            flexDirection: 'row',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            width: '100%',\n          }}\n        >\n          <View\n            style={{\n              flexDirection: 'row',\n              alignItems: 'center',\n            }}\n          >\n            <Typography\n              variant=\"h6\"\n            >\n              Local Network Statistics\n            </Typography>\n          </View>\n          <View\n            style={{\n              // alignItems: 'space-between',\n              flexDirection: 'row',\n            }}\n          >\n            {/* <IconButton\n              onClick={(e) => {\n                e.stopPropagation()\n                onEvent({\n                  type: EVENT.CALCULATE_LOCAL_NETWORK_STATISTICS,\n                })\n              }}\n            >\n              <Icon\n                name=\"assessment\"\n              />\n            </IconButton> */}\n          </View>\n        </View>\n      </AccordionSummary>\n      <AccordionDetails>\n        <JSONViewer\n          data={data}\n          sort={-1}\n          left={({ collapsed, onCollapse, noChild }) => (\n            <IconButton\n              size=\"small\"\n              sx={{ height: 24 }}\n              disabled={noChild}\n              onClick={() => onCollapse(!collapsed)}\n            >\n              <Icon\n                style={{\n                  fontSize: noChild ? 12 : 24,\n                }}\n                name={\n                        noChild\n                          ? 'fiber_manual_record'\n                          : collapsed\n                            ? 'arrow_drop_down_rounded'\n                            : 'arrow_drop_up_rounded'\n  }\n              />\n            </IconButton>\n          )}\n          renderItem={({ item: { key, value } }) => (\n            <View\n              style={{\n                flexDirection: 'row',\n                justifyContent: 'space-between',\n              }}\n            >\n              <Typography\n                variant=\"subtitle1\"\n                style={{ alignContent: 'center' }}\n              >\n                {`${key}${value ? ': ' : ''}`}\n              </Typography>\n              {!R.isNil(value)\n                ? (\n                  <Typography\n                    variant=\"subtitle1\"\n                    style={{ alignContent: 'center' }}\n                  >\n                    {value}\n                  </Typography>\n                )\n                : null}\n            </View>\n          )}\n        />\n      </AccordionDetails>\n    </Accordion>\n  )\n}\n","import React from 'react'\nimport {\n  Typography,\n  AccordionDetails,\n  Accordion,\n  AccordionSummary,\n  ListItem,\n  List,\n  ListItemText,\n  ListItemIcon,\n} from '@mui/material'\nimport {\n  Icon,\n} from '@components/Icon'\nimport {\n  useGraphEditor,\n} from '@hooks'\nimport {\n  EVENT,\n} from '@constants'\nimport {\n  getItemFromElement,\n} from '@utils'\n\nexport type ConnectedElementsProps = {\n\n}\n\nexport const ConnectedElements = () => {\n  const [\n    {\n      // item,\n      selectedElement,\n      onEvent,\n    },\n  ] = useGraphEditor(\n    (editor) => {\n      const {\n        selectedElement,\n        selectedItem,\n        onEvent,\n      } = editor\n      return {\n        item: editor.selectedItem,\n        selectedElement,\n        onEvent,\n      }\n    },\n  )\n  if (!selectedElement) {\n    return null\n  }\n  const isNode = selectedElement.isNode()\n  let itemList\n  if (isNode) {\n    itemList = selectedElement.connectedEdges().toArray().map(\n      getItemFromElement,\n    )\n  } else {\n    itemList = [selectedElement.source(), selectedElement.target()].map(\n      getItemFromElement,\n    )\n  }\n  return (\n    <Accordion\n      defaultExpanded\n    >\n      <AccordionSummary>\n        <Typography\n          variant=\"h6\"\n        >\n          {`Connected ${isNode ? 'Edges' : 'Nodes'}`}\n        </Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n        <List\n          dense\n        >\n          {\n        itemList.map((item) => (\n          <ListItem\n            key={item.id}\n            button\n            onClick={() => onEvent({\n              type: EVENT.ELEMENT_SELECTED_WITH_ZOOM,\n              payload: {\n                itemIds: [item.id],\n              },\n              avoidHistoryRecording: true,\n            })}\n          >\n            <ListItemIcon>\n              <Icon name=\"chevron_right\" />\n            </ListItemIcon>\n            <ListItemText primary={item.id} />\n          </ListItem>\n        ))\n      }\n        </List>\n      </AccordionDetails>\n    </Accordion>\n\n  )\n}\n","import { Icon } from '@components/Icon'\nimport { useGraphEditor } from '@hooks'\nimport {\n  Accordion, AccordionDetails,\n  AccordionSummary, Divider, IconButton, Paper, Typography,\n  Button,\n} from '@mui/material'\nimport { EVENT, SIDE_PANEL_DEFAULT_WIDTH } from '@constants'\nimport { EdgeElement } from '@type'\nimport {\n  JSONViewer,\n  useAnimation,\n} from 'colay-ui'\nimport { View } from 'colay-ui/components/View'\nimport * as R from 'colay/ramda'\nimport React from 'react'\n// import {\n//   DataEditor,\n// } from '../DataEditor'\nimport { useDrag } from '@hooks/useDrag'\nimport { ResizeDivider } from '@components/ResizeDivider'\nimport { JSONEditor } from './JSONEditor'\nimport { GlobalNetworkStatistics } from './GlobalNetworkStatistics'\nimport { LocalNetworkStatistics } from './LocalNetworkStatistics'\nimport { ConnectedElements } from './ConnectedElements'\n\nexport type DataBarProps = {\n  editable?: boolean;\n  isOpen?: boolean;\n  header?: React.FC;\n  footer?: React.FC;\n  sort?: any;\n} // & Omit<DataEditorProps, 'data'>\n\nconst ICON_SIZE = 16\n\nexport const DataBar = (props: DataBarProps) => {\n  const {\n    editable = true,\n    isOpen = false,\n    sort = -1,\n    header: HeaderComponent,\n    footer: FooterComponent,\n    ...rest\n  } = props\n\n  const [\n    {\n      item,\n      onEvent,\n      networkStatistics,\n      globalLabel,\n      localLabel,\n      isGlobalLabelFirst,\n      selectedElement,\n    },\n  ] = useGraphEditor(\n    (editor) => {\n      const {\n        selectedElement,\n        selectedItem,\n        label,\n        localDataRef,\n        networkStatistics,\n      } = editor\n      const targetPath = selectedElement?.isNode() ? 'nodes' : 'edges'\n      return {\n        graphEditorConfig: editor.config,\n        item: editor.selectedItem,\n        localLabel: selectedElement && (label?.[targetPath][selectedItem?.id!]),\n        globalLabel: label?.global?.[targetPath],\n        isGlobalLabelFirst: label?.isGlobalFirst?.[targetPath],\n        onEvent: editor.onEvent,\n        networkStatistics: {\n          local: localDataRef.current!.networkStatistics!.local?.[selectedItem?.id!],\n          global: networkStatistics?.global?.[selectedItem?.id!],\n        },\n        selectedElement,\n      }\n    },\n  )\n  const localDataRef = React.useRef({\n    width: SIDE_PANEL_DEFAULT_WIDTH,\n  })\n  const {\n    style: animationStyle,\n    ref: animationRef,\n  } = useAnimation({\n    from: {\n      width: 0,\n    },\n    to: {\n      width: localDataRef.current.width,\n    },\n    autoPlay: false,\n  }, [localDataRef.current.width])\n  const containerRef = React.useRef()\n  React.useEffect(() => {\n    animationRef.current?.play?.(isOpen)\n  }, [animationRef, isOpen])\n  const hasStatistics = Object.values(networkStatistics).find((val) => val)\n  const [state, setState] = React.useState({\n    isEditing: false,\n  })\n  const onMouseDown = useDrag({\n    ref: containerRef,\n    onDrag: ({ x, y }, rect) => {\n      localDataRef.current.width = rect.width + x\n      const target = containerRef.current\n      target.style.width = `${localDataRef.current.width}px`\n    },\n  })\n  return (\n    <Paper\n      ref={containerRef}\n      style={{\n        position: 'absolute',\n        height: '100%',\n        top: 0,\n        display: 'flex',\n        flexDirection: 'row',\n        right: 0,\n        // width: animationStyle.right,\n        ...animationStyle,\n      }}\n    >\n      <ResizeDivider\n        onMouseDown={onMouseDown}\n      />\n      <View\n        style={{\n          height: '100%',\n          flex: 1,\n          // @ts-ignore\n          overflowY: 'auto',\n          overflowX: 'hidden',\n        }}\n      >\n        {HeaderComponent && <HeaderComponent />}\n        {item && (\n        <Accordion\n          defaultExpanded\n        >\n          <AccordionSummary>\n            <Typography\n              variant=\"h6\"\n              style={{\n                wordBreak: 'break-word',\n                padding: 2,\n              }}\n            >\n              {` id: ${item?.id}`}\n            </Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <View style={{\n              width: '100%',\n              height: hasStatistics ? '70%' : '100%',\n              // wordWrap: 'break-word',\n              // flexWrap: 'wrap',\n            }}\n            >\n              {/* {\n                isEdge && <EdgeElementSummary element={selectedElement} />\n              } */}\n              {\n        editable && item?.data\n          && (\n            // <DataEditor\n            //   data={item.data}\n            //   onEvent={onEvent}\n            //   {...rest}\n            // />\n            <View\n              style={{\n                flexDirection: 'row',\n                justifyContent: 'flex-end',\n              }}\n            >\n              <Button\n                onClick={() => setState({ ...state, isEditing: !state.isEditing })}\n              >\n                {state.isEditing ? 'Done' : 'Edit'}\n\n              </Button>\n            </View>\n          )\n      }\n              {\n        state.isEditing\n          ? (\n            <JSONEditor />\n          )\n          : (\n            <JSONViewer\n              extraData={[localLabel, globalLabel]}\n              data={item?.data}\n              sort={sort}\n              left={(props) => {\n                const {\n                  item: { path },\n                  collapsed, onCollapse, noChild,\n                } = props\n                const isLocalLabel = R.equals(path, localLabel)\n                const isGlobalLabel = R.equals(path, globalLabel)\n                return (\n                  <View\n                    style={{\n                      flexDirection: 'row',\n                      alignItems: 'center',\n                      height: 32,\n                    }}\n                  >\n\n                    <IconButton\n                      size=\"small\"\n                      sx={{ height: ICON_SIZE }}\n                      onClick={() => onEvent(\n                        isLocalLabel\n                          ? {\n                            type: EVENT.CLEAR_NODE_LOCAL_LABEL,\n                          }\n                          : {\n                            type: EVENT.SET_NODE_LOCAL_LABEL,\n                            payload: {\n                              value: path,\n                            },\n                          },\n                      )}\n                    >\n                      <Icon\n                        style={{\n                          fontSize: ICON_SIZE,\n                          textDecoration: !isGlobalLabelFirst ? 'underline' : '',\n                        }}\n                        name={\n                          isLocalLabel ? 'bookmark' : 'bookmark_border'\n                        }\n                      />\n                    </IconButton>\n                    <IconButton\n                      size=\"small\"\n                      sx={{ height: ICON_SIZE }}\n                      onClick={() => onEvent(\n                        isGlobalLabel\n                          ? {\n                            type: EVENT.CLEAR_NODE_GLOBAL_LABEL,\n                          }\n                          : {\n                            type: EVENT.SET_NODE_GLOBAL_LABEL,\n                            payload: {\n                              value: path,\n                            },\n                          },\n                      )}\n                    >\n                      <Icon\n                        style={{\n                          fontSize: ICON_SIZE,\n                          textDecoration: isGlobalLabelFirst ? 'underline' : '',\n                        }}\n                        name={\n                          isGlobalLabel ? 'bookmarks' : 'bookmark_border'\n  }\n                      />\n                    </IconButton>\n                    <IconButton\n                      size=\"small\"\n                      sx={{ height: ICON_SIZE }}\n                      disabled={noChild}\n                      onClick={() => onCollapse(!collapsed)}\n                    >\n                      <Icon\n                        style={{\n                          fontSize: ICON_SIZE, // noChild ? 12 : ICON_SIZE,\n                        }}\n                        name={\n                      noChild\n                        ? 'fiber_manual_record'\n                        : collapsed\n                          ? 'arrow_drop_down_rounded'\n                          : 'arrow_drop_up_rounded'\n}\n                      />\n                    </IconButton>\n                  </View>\n                )\n              }}\n              renderItem={({ item: { key, value } }) => (\n                <View\n                  style={{\n                    flexDirection: 'row',\n                    justifyContent: 'space-between',\n                    width: '100%',\n                    alignItems: 'center',\n                  }}\n                >\n                  <Typography\n                    variant=\"subtitle1\"\n                    style={{\n                      alignContent: 'center',\n                      flexDirection: 'row',\n                      width: '100%',\n                      wordWrap: 'break-word',\n                    }}\n                  >\n                    {`${key}${value ? ': ' : ''}`}\n                    {value\n                      ? (\n                        <Typography\n                          variant=\"subtitle1\"\n                          component={isValidURL(value) ? 'a' : 'span'}\n                          align=\"center\"\n                          href={value}\n                          target=\"_blank\"\n                          style={{ wordWrap: 'break-word' }}\n                        >\n                          {value}\n                        </Typography>\n                      )\n                      : null}\n                  </Typography>\n\n                </View>\n              )}\n            />\n          )\n      }\n\n            </View>\n          </AccordionDetails>\n        </Accordion>\n\n        )}\n        <Divider />\n        <ConnectedElements />\n        {\n        hasStatistics && (\n          <View\n            style={{\n              height: '30%',\n              width: '100%',\n            }}\n          >\n            {\n          networkStatistics.global && (\n            <GlobalNetworkStatistics\n              data={networkStatistics.global}\n              onEvent={onEvent}\n            />\n          )\n        }\n            <Divider />\n            {\n          networkStatistics.local && (\n            <LocalNetworkStatistics\n              data={networkStatistics.local}\n              onEvent={onEvent}\n            />\n          )\n        }\n          </View>\n        )\n      }\n        {FooterComponent && <FooterComponent />}\n      </View>\n\n      <IconButton\n        style={{\n          position: 'absolute',\n          left: -34,\n          top: 0,\n          fontSize: 24,\n        }}\n        onClick={() => {\n          onEvent({\n            type: EVENT.TOGGLE_DATA_BAR,\n            avoidHistoryRecording: true,\n          })\n        }}\n      >\n        <Icon\n          name=\"info_outlined\"\n        />\n      </IconButton>\n    </Paper>\n  )\n}\n\ntype EdgeElementSummaryProps = {\n  element: EdgeElement;\n}\nconst EdgeElementSummary = (props: EdgeElementSummaryProps) => {\n  const {\n    element,\n  } = props\n  const sourceId = element.source().id()\n  const targetId = element.target().id()\n  return (\n    <View>\n      <View style={{ flexDirection: 'row' }}>\n        <Typography variant=\"subtitle1\">source:</Typography>\n        <Typography>{` ${sourceId}`}</Typography>\n      </View>\n      <View style={{ flexDirection: 'row' }}>\n        <Typography variant=\"subtitle1\">target:</Typography>\n        <Typography>{` ${targetId}`}</Typography>\n      </View>\n    </View>\n  )\n}\n\nexport const isValidURL = (value: string) => {\n  let url\n  try {\n    url = new URL(value)\n  } catch (_) {\n    return false\n  }\n  return url.protocol === 'http:' || url.protocol === 'https:'\n}\n","import React from 'react'\nimport {\n  Modal,\n  Button,\n  Paper,\n} from '@mui/material'\nimport { FormProps } from '@rjsf/core'\nimport Form from '@rjsf/material-ui'\nimport * as R from 'colay/ramda'\nimport {\n  useGraphEditor,\n} from '@hooks'\nimport {\n  EVENT,\n} from '@constants'\n// import {\n//   View,\n// } from 'colay-ui'\n\nexport type ModalComponentProps = {\n  isOpen?: boolean;\n  render?: () => React.ReactElement;\n  form?: FormProps<any>\n  onClose?: () => void\n}\n\nexport const ModalComponent = (props: ModalComponentProps) => {\n  const {\n    isOpen = false,\n    render,\n    form,\n    onClose,\n    name,\n  } = props\n  const Component = render\n  const [\n    {\n      onEvent,\n    },\n  ] = useGraphEditor(\n    (editor) => ({\n      onEvent: editor.onEvent,\n    }),\n  )\n  const onCloseCallback = React.useCallback(() => {\n    onClose?.()\n    onEvent({\n      type: EVENT.CLOSE_MODAL,\n      payload: {\n        name,\n      },\n    })\n  }, [onClose])\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onCloseCallback}\n      onBackdropClick={onCloseCallback}\n      style={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}\n    >\n      {\n      form\n        ? (\n          <Paper\n            style={{\n              maxWidth: '80%',\n              maxHeight: '90%',\n              overflow: 'scroll',\n              padding: 2,\n            }}\n          >\n            <Form\n              {...form}\n              schema={R.omit(['title'])(form.schema)}\n            >\n              {\n              form.children ?? (\n              <Button\n                type=\"submit\"\n                fullWidth\n                variant=\"contained\"\n              >\n                Apply\n              </Button>\n              )\n}\n            </Form>\n          </Paper>\n        )\n        : (\n          <>\n            {render?.({})}\n          </>\n        )\n      }\n\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { getEventClientPosition } from '@utils'\n// import { Icon } from '@mui/material'\n\nexport type MouseIconProps = {\n  name?: string|null;\n  cursor?: boolean;\n}\n\nexport const MouseIcon = (props: MouseIconProps) => {\n  const {\n    name,\n    cursor = false,\n  } = props\n  const [, setState] = React.useState({\n    x: 0,\n    y: 0,\n  })\n  React.useEffect(() => {\n    const onMouseMove = (event: MouseEvent) => {\n      if (cursor) {\n        return\n      }\n      const position = getEventClientPosition(event)\n      setState({\n        x: position.x + 30,\n        y: position.y + 30,\n      })\n    }\n    document.addEventListener('mousemove', onMouseMove)\n    return () => {\n      document.removeEventListener('mousemove', onMouseMove)\n    }\n  }, [cursor])\n  React.useEffect(() => {\n    if (cursor) {\n      document.body.style.cursor = `url(${name}), auto`\n    }\n  }, [cursor, name])\n  return (\n    name && !cursor\n      ? (\n        <span>{name}</span>\n        // <Icon\n        //   style={{\n        //     position: 'absolute',\n        //     left: `${state.x}px`,\n        //     top: `${state.y}px`,\n        //   }}\n        // >\n        //   {name}\n        // </Icon>\n      )\n      : null\n  )\n}\n","import React from 'react'\nimport {\n  Modal,\n  Paper,\n  Typography,\n  Divider,\n  Slide,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Link,\n  Breadcrumbs,\n  Collapse,\n} from '@mui/material'\nimport { Icon } from '@components/Icon'\nimport { useGraphEditor } from '@hooks'\nimport { EVENT } from '@constants'\nimport { View, DataRender } from 'colay-ui'\nimport Form from '@rjsf/material-ui'\nimport ExpandLess from '@mui/icons-material/ExpandLess'\nimport ExpandMore from '@mui/icons-material/ExpandMore'\nimport * as R from 'colay/ramda'\n\ntype SidebarItemData = {\n  label: string;\n  items?: SidebarItemData[];\n  icon?: string;\n} | string\n\nexport type PreferencesModalProps = {\n  isOpen?: boolean;\n  sidebar?: SidebarItemData[];\n  components?: Record<string, React.ReactNode>;\n}\n\nexport const PreferencesModal = (props: PreferencesModalProps) => {\n  const {\n    isOpen = false,\n    sidebar = MOCK_SIDEBAR_DATA,\n    components = {},\n  } = props\n  const [\n    {\n      onEvent,\n    },\n  ] = useGraphEditor(\n    (editor) => ({\n      onEvent: editor.onEvent,\n    }),\n  )\n  // @ts-ignore\n  const drawer = React.useMemo(() => createDrawer(sidebar), [sidebar, components])\n  return (\n    <Modal\n      open={isOpen}\n      onClose={() => onEvent({\n        type: EVENT.TOGGLE_PREFERENCES_MODAL,\n      })}\n      style={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}\n    >\n      <Paper\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          width: '80vw',\n          height: '80vh',\n        }}\n      >\n        <View>\n          <Typography variant=\"h6\">Preferences</Typography>\n        </View>\n        <View\n          style={{\n            flexDirection: 'row',\n          }}\n        >\n          <View\n            style={{\n              // width: '30%',\n              marginRight: 4,\n              flexDirection: 'row',\n            }}\n          >\n            <Slide\n              in\n            >\n              {drawer}\n            </Slide>\n            <Divider\n              orientation=\"vertical\"\n              flexItem\n            />\n          </View>\n          <View>\n            <Breadcrumbs aria-label=\"breadcrumb\">\n              <Link\n                color=\"inherit\"\n                href=\"/\"\n              >\n                General\n              </Link>\n              <Typography color=\"text.primary\">UI</Typography>\n            </Breadcrumbs>\n            <Form\n              schema={{\n                type: 'object',\n                required: [\n                  'historyTabVisible',\n                  'playlistTabVisible',\n                ],\n                properties: {\n                  labelTextSize: {\n                    type: 'number',\n                    title: 'Label Text Size',\n                  },\n                  historyTabVisible: {\n                    type: 'boolean',\n                    title: 'History Tab Visible',\n                  },\n                  playlistTabVisible: {\n                    type: 'boolean',\n                    title: 'Playlist Tab Visible',\n                  },\n                },\n              }}\n              uiSchema={{\n                'ui:options': {\n                  label: false,\n                },\n              }}\n              // onSubmit={onSubmitCallback}\n            />\n          </View>\n        </View>\n      </Paper>\n    </Modal>\n  )\n}\n\nconst createDrawer = (sidebar: SidebarItemData[]) => (\n  <div>\n    {/* <Toolbar /> */}\n    <Divider />\n    <List>\n      <DataRender\n      // @ts-ignore\n        data={sidebar}\n        accessor={['items']}\n        renderItem={(params) => {\n          const {\n            children,\n          } = params\n          const item = params.item as unknown as SidebarItemData\n          return (\n            <SidebarItem\n              item={item}\n            >\n              {children}\n            </SidebarItem>\n          )\n        }}\n      />\n    </List>\n  </div>\n)\n\ntype SidebarItemProps = {\n  item: SidebarItemData;\n  children: React.ReactNode;\n}\nconst SidebarItem = (props: SidebarItemProps) => {\n  const {\n    children,\n    item: propItem,\n  } = props\n  const [open, setOpen] = React.useState(false)\n  const handleClick = () => {\n    setOpen(!open)\n  }\n  const item = (R.is(String)(propItem) ? {\n    label: propItem,\n  } : propItem) as Exclude<SidebarItemData, string>\n  const hasChildren = !!item.items\n  return (\n    <>\n      <ListItem\n        button\n        onClick={handleClick}\n        selected={!hasChildren && open}\n      >\n        <ListItemIcon>\n          {item.icon}\n        </ListItemIcon>\n        <ListItemText primary={item.label} />\n        {hasChildren ? (open ? <ExpandLess /> : <ExpandMore />) : null}\n      </ListItem>\n      <Collapse\n        in={open}\n        timeout=\"auto\"\n        unmountOnExit\n      >\n        <List\n          component=\"div\"\n          disablePadding\n          sx={{ ml: 2 }}\n        >\n          {children}\n        </List>\n      </Collapse>\n    </>\n  )\n}\n\nconst MOCK_SIDEBAR_DATA = [\n  {\n    icon: <Icon name=\"settings\" />,\n    label: 'General',\n    items: [\n      'UI',\n    ],\n  },\n  {\n    icon: <Icon name=\"bookmark\" />,\n    label: 'Bookmarks',\n    items: [\n      {\n        icon: <Icon name=\"filter\" />,\n        label: 'Filter',\n        items: [\n          'History',\n        ],\n      },\n      'Text',\n    ],\n  },\n]\n","import {\n  Button,\n  CircularProgress, Modal,\n  Paper, Typography, CircularProgressProps,\n} from '@mui/material'\nimport { TimeoutManager } from '@utils/TimeoutManager'\nimport { View } from 'colay-ui'\nimport React from 'react'\n\ntype EventsModalProps = {\n  timeoutManager: TimeoutManager\n  onClose: () => void\n}\nexport const RecordedEventsModal = (props: EventsModalProps) => {\n  const {\n    timeoutManager,\n    onClose,\n  } = props\n  const isOpen = !timeoutManager.finished\n  const [state, setState] = React.useState({\n    alert: {\n      visible: false,\n    },\n  })\n  const currentTimer = timeoutManager.timers?.[timeoutManager.currentIndex]\n  const {\n    duration,\n    totalDuration,\n    currentIndex,\n    paused,\n    timeoutInstances,\n  } = timeoutManager\n  return (\n    <Modal\n      open={isOpen}\n    // onClose={onClose}\n      style={{\n        display: 'flex',\n        flexDirection: 'column-reverse',\n      }}\n      BackdropProps={{\n        style: {\n          backgroundColor: 'rgba(0, 0, 0, 0)',\n        },\n        onClick: () => {\n          setState({\n            ...state,\n            alert: {\n              ...state.alert,\n              visible: true,\n            },\n          })\n          setTimeout(() => {\n            setState({\n              ...state,\n              alert: {\n                ...state.alert,\n                visible: false,\n              },\n            })\n          }, 1500)\n        },\n      }}\n    >\n      <Paper style={{\n        display: 'flex',\n        flexDirection: 'column',\n      }}\n      >\n        <View style={{\n          flexDirection: 'row',\n          justifyContent: 'space-between',\n        }}\n        >\n          <Typography variant=\"h6\">Play Events</Typography>\n          {state.alert.visible && (\n          <Typography\n            variant=\"h6\"\n            color=\"error\"\n          >\n            You cannot take action while the events are playing\n          </Typography>\n          )}\n        </View>\n\n        <View\n          style={{\n            display: 'flex',\n            flexDirection: 'row',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n          }}\n        >\n          <View style={{ flexDirection: 'row' }}>\n            <Button\n              color={paused ? 'primary' : 'secondary'}\n              onClick={() => {\n                paused\n                  ? timeoutManager.start()\n                  : timeoutManager.pause()\n              }}\n            >\n              {paused ? 'Play' : 'Pause'}\n            </Button>\n            <Button\n              color=\"secondary\"\n              onClick={() => {\n                onClose()\n              }}\n            >\n              Close\n            </Button>\n          </View>\n          <Typography variant=\"subtitle1\">\n            {`Current Event: ${currentTimer?.type}`}\n          </Typography>\n          <View\n            style={{\n              flexDirection: 'row',\n              height: '100%',\n              alignItems: 'center',\n            }}\n          >\n            <Typography variant=\"subtitle2\">{`Events: ${currentIndex} / ${timeoutInstances.length}`}</Typography>\n            <CircularProgressWithLabel\n              value={\n            (duration / totalDuration) * 100\n          }\n            />\n          </View>\n\n        </View>\n      </Paper>\n    </Modal>\n  )\n}\n\nfunction CircularProgressWithLabel(props: CircularProgressProps) {\n  return (\n    <View>\n      <CircularProgress\n        variant=\"determinate\"\n        {...props}\n      />\n      <View\n        style={{\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          bottom: 0,\n          right: 0,\n          alignItems: 'center',\n          justifyContent: 'center',\n        }}\n      >\n        <Typography\n          variant=\"caption\"\n          component=\"div\"\n          color=\"textSecondary\"\n        >\n          {`${Math.round(\n            props.value!,\n          )}%`}\n\n        </Typography>\n      </View>\n    </View>\n  )\n}\n\n// <View\n//   style={{\n//     width: 200,\n//   }}\n// >\n//   <Typography\n//     style={{\n//       left: '-100%',\n//       width: '200%',\n//       whiteSpace: 'nowrap',\n//       position: 'relative',\n//       overflow: 'hidden', /* Required to make ellipsis work */\n//       textOverflow: 'ellipsis',\n//       '-webkit-transition': 'left 3s, width 3s',\n//       '-moz-transition': 'left 3s, width 3s',\n//       transition: 'left 3s, width 3s',\n//     }}\n//   >\n//     {JSON.stringify(currentTimer?.data)}\n//   </Typography>\n// </View>\n","import React from 'react'\nimport * as R from 'colay/ramda'\nimport {\n  DragDropContext,\n  Droppable, Draggable,\n  DropResult,\n  DraggableProvided,\n  DraggableStateSnapshot,\n  DraggableRubric,\n  DroppableProvided,\n  DroppableStateSnapshot,\n} from 'react-beautiful-dnd'\n\n// const grid = 8\n\n// const getItemStyle = (isDragging: boolean, draggableStyle: any) => ({\n//   // some basic styles to make the items look a bit nicer\n//   userSelect: 'none',\n//   padding: grid * 2,\n//   margin: `0 0 ${grid}px 0`,\n\n//   // change background colour if dragging\n//   background: isDragging ? 'lightgreen' : 'grey',\n\n//   // styles we need to apply on draggables\n//   ...draggableStyle,\n// })\n\n// const getListStyle = (isDraggingOver: boolean) => ({\n//   background: isDraggingOver ? 'lightblue' : 'lightgrey',\n//   padding: grid,\n//   width: 250,\n// })\n\nexport type SortableListProps<T> = {\n  onReorder?: (result: DropResult) => void\n  onDragEnd?: (result: DropResult) => void\n  data: T[]\n  renderItem: (props: {\n    item: T;\n    index: number;\n    provided: DraggableProvided;\n    snapshot: DraggableStateSnapshot;\n    rubric: DraggableRubric;\n    droppableProvided: DroppableProvided;\n    droppableSnapshot: DroppableStateSnapshot\n  }) => React.ReactNode;\n  // renderContainer: (props: {})\n}\n\nexport const SortableList = <T extends { id: string }>(props: SortableListProps<T>) => {\n  const {\n    onReorder,\n    onDragEnd,\n    data = [],\n    renderItem,\n  } = props\n  const droppableId = React.useMemo(() => R.uuid(), [])\n  return (\n    <DragDropContext onDragEnd={(result) => {\n      onDragEnd?.(result)\n      if (!result.destination && (result.destination!.index === result.source.index)) {\n        return\n      }\n      onReorder?.(result)\n    }}\n    >\n      <Droppable droppableId={droppableId}>\n        {(droppableProvided, droppableSnapshot) => (\n          <div\n            {...droppableProvided.droppableProps}\n            ref={droppableProvided.innerRef}\n          >\n            {\n              data.map((item, index) => (\n                <Draggable\n                  key={item.id}\n                  draggableId={item.id}\n                  index={index}\n                >\n                  {\n                  // @ts-ignore\n                  (provided, snapshot, rubric) => renderItem({\n                    item,\n                    index,\n                    provided,\n                    snapshot,\n                    rubric,\n                    droppableProvided,\n                    droppableSnapshot,\n                  })\n}\n                  {/* {(provided, snapshot) => (\n                    <div\n                      ref={provided.innerRef}\n                      {...provided.draggableProps}\n                      {...provided.dragHandleProps}\n                    >\n                      {child}\n                    </div>\n                  )} */}\n                </Draggable>\n              ))\n            }\n            {droppableProvided.placeholder}\n          </div>\n        )}\n      </Droppable>\n    </DragDropContext>\n  )\n}\n","import React from 'react'\nimport { Icon, IconProps } from '@components/Icon'\nimport { SpeedDial, SpeedDialAction } from '@mui/material'\nimport {\n  View,\n} from 'colay-ui'\n\nconst ICON_SIZE = 24\n\ntype Action = {\n  name: string;\n  icon: Omit<IconProps, 'name'> & { name: string };\n  onClick: (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => void\n}\nexport type SpeedDialCreatorProps = {\n  actions: Action[];\n}\n\nexport const SpeedDialCreator = (props: SpeedDialCreatorProps) => {\n  const {\n    actions,\n  } = props\n\n  return (\n    <View\n      style={{\n        width: ICON_SIZE,\n        height: ICON_SIZE,\n      }}\n    >\n      <SpeedDial\n        ariaLabel=\"SpeedDial basic example\"\n        icon={(\n          <Icon\n            name=\"settings\"\n            style={{ fontSize: ICON_SIZE - 4 }}\n          />\n)}\n        FabProps={{\n          style: {\n            width: ICON_SIZE,\n            height: ICON_SIZE,\n            minWidth: ICON_SIZE,\n            minHeight: ICON_SIZE,\n\n          },\n          color: 'inherit',\n        }}\n        style={{\n          width: ICON_SIZE,\n          height: ICON_SIZE,\n        }}\n        direction=\"left\"\n      >\n        {\n         actions.map((action) => {\n           const {\n             icon,\n             name,\n             onClick,\n           } = action\n           return (\n             // @ts-ignore\n             <SpeedDialAction\n               key={name}\n               tooltipTitle={name}\n               tooltipPlacement=\"bottom\"\n               onClick={(e) => {\n                 e.stopPropagation()\n                 onClick?.(e)\n               }}\n               {...icon}\n               icon={(\n                 // @ts-ignore\n                 <Icon {...icon} />\n                )}\n             />\n           )\n         })\n                              }\n      </SpeedDial>\n    </View>\n  )\n}\n","import React from 'react'\nimport { Box } from '@mui/material'\n\nexport type TabPanelProps = {\n  children: React.ReactNode;\n  value: number;\n  index: number;\n}\nexport const  TabPanel = (props: TabPanelProps) => {\n  const { children, value, index, ...rest } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...rest}\n    >\n      {value === index && (\n        <Box>\n          {children}\n        </Box>\n      )}\n    </div>\n  );\n}\n","import { EVENT } from '@constants'\nimport { Clusters } from '@core/clusters'\nimport { useGraphEditor } from '@hooks'\nimport {\n  InputLabel, MenuItem, Select\n} from '@mui/material'\nimport Form from '@rjsf/material-ui'\nimport {\n  View\n} from 'colay-ui'\nimport { useImmer } from 'colay-ui/hooks/useImmer'\nimport React from 'react'\n\nexport type CreateClusterByAlgorithmProps = {\n  onSubmit: () => void\n}\nconst CLUSTER_ALGORITHM_NAMES = Object.keys(Clusters)\n\nexport const CreateClusterByAlgorithm = (props: CreateClusterByAlgorithmProps) => {\n  const {\n    onSubmit,\n  } = props\n  const [\n    {\n      onEvent,\n    },\n  ] = useGraphEditor(\n    (editor) => ({\n      onEvent: editor.onEvent,\n    }),\n  )\n  const [state, updateState] = useImmer({\n    selectedClusterName: CLUSTER_ALGORITHM_NAMES[0],\n  })\n  return (\n    <View\n      style={{\n        width: '100%',\n        height: '100%',\n      }}\n    >\n      <InputLabel id=\"create-cluster-by-algorithm-label\">Age</InputLabel>\n      <Select\n        labelId=\"create-cluster-by-algorithm-label\"\n        value={state.selectedClusterName}\n        onChange={(e) => updateState((draft) => {\n          draft.selectedClusterName = e.target.value\n        })}\n      >\n        {CLUSTER_ALGORITHM_NAMES.map((clusterName) => (\n          <MenuItem\n            key={clusterName}\n            value={clusterName}\n          >\n            {clusterName}\n          </MenuItem>\n        ))}\n      </Select>\n      <Form\n        onSubmit={(event) => {\n          // updateState((draft) => {\n          //   draft.formData = event.formData\n          //   draft.createClusterDialog.visible = true\n          // })\n          // onEvent({\n          //   type: EVENT.CREATE_CLUSTER_BY_ALGORITHM,\n          //   payload: {\n          //     config: event.formData,\n          //     name: state.selectedClusterName,\n          //   },\n          // })\n          onEvent({\n            type: EVENT.CREATE_CLUSTER_BY_ALGORITHM_FORM_SUBMIT,\n            payload: {\n              config: event.formData,\n              name: state.selectedClusterName,\n            },\n          })\n          onSubmit()\n        }}\n        schema={Clusters[state.selectedClusterName].configSchema}\n      />\n    </View>\n  )\n}\n","import { Icon } from '@components/Icon'\nimport { SortableList } from '@components/SortableList'\nimport { SpeedDialCreator } from '@components/SpeedDialCreator'\nimport { TabPanel } from '@components/TabPanel'\nimport { EDITOR_MODE, EVENT } from '@constants'\nimport { useGraphEditor } from '@hooks'\nimport { GraphEditorContext } from '@hooks/useGraphEditor'\nimport { Cluster } from '@type'\nimport {\n  Button,\n  Card, Checkbox,\n  Dialog, DialogTitle, IconButton, List,\n  ListItem, ListItemAvatar, ListItemSecondaryAction,\n  ListItemText, Menu,\n  MenuItem, TextField, Typography,\n} from '@mui/material'\nimport Accordion from '@mui/material/Accordion'\nimport AccordionDetails from '@mui/material/AccordionDetails'\nimport AccordionSummary from '@mui/material/AccordionSummary'\nimport { FormProps } from '@rjsf/core'\nimport Form from '@rjsf/material-ui'\nimport {\n  useDisclosure, View,\n} from 'colay-ui'\nimport { useImmer } from 'colay-ui/hooks/useImmer'\nimport * as R from 'colay/ramda'\nimport React from 'react'\nimport { CreateClusterByAlgorithm } from './CreateClusterByAlgorithm'\n\nexport type ClusterTableProps = {\n  // onSelectAllClusters: (checked: boolean) => void\n  // onSelectCluster: (cluster: Cluster, checked: boolean) => void\n  createClusterForm?: FormProps<any>;\n}\n\nexport const ClusterTable = (props: ClusterTableProps) => {\n  const {\n    // onSelectAllClusters,\n    // onSelectCluster,\n    createClusterForm = { schema: { } },\n  } = props\n  const [\n    {\n      onEvent,\n      clusters = [],\n      editorMode,\n      graphEditorLocalDataRef,\n    },\n  ] = useGraphEditor(\n    (editor) => ({\n      clusters: editor.graphConfig?.clusters,\n      onEvent: editor.onEvent,\n      graphEditorLocalDataRef: editor.localDataRef,\n      editorMode: editor.mode,\n    }),\n  )\n  const [state, updateState] = useImmer({\n    expanded: true,\n    selectedClusterIds: [] as string[],\n    currentTab: 0,\n    formData: {},\n    createClusterDialog: {\n      name: '',\n      visible: false,\n    },\n  })\n  const hasSelected = state.selectedClusterIds.length > 0\n  const {\n    anchorEl,\n    isOpen,\n    onClose,\n    onOpen,\n  } = useDisclosure({})\n  return (\n    <>\n      <Accordion\n        expanded={state.expanded}\n        onChange={(e, expanded) => updateState((draft) => {\n          draft.expanded = expanded\n        })}\n      >\n        <AccordionSummary\n          aria-controls=\"panel1a-content\"\n        >\n          <View\n            style={{\n              width: '100%',\n            }}\n          >\n            <View\n              style={{\n                flexDirection: 'row',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                width: '100%',\n              }}\n            >\n              <View\n                style={{\n                  flexDirection: 'row',\n                  alignItems: 'center',\n                }}\n              >\n                <Typography\n                  variant=\"h6\"\n                >\n                  Clusters\n                </Typography>\n              </View>\n              <IconButton\n                onClick={(e) => {\n                  e.stopPropagation()\n                  // @ts-ignore\n                  onOpen(e)\n                }}\n              >\n                <Icon\n                  color={state.currentTab === 0 ? 'inherit' : 'secondary'}\n                  name={state.currentTab === 0 ? 'add_circle' : 'close'}\n                />\n              </IconButton>\n              <Menu\n                anchorEl={anchorEl}\n                open={isOpen}\n                onClose={onClose}\n                // style={{ width: 400 }}\n              >\n                {\n                  state.currentTab !== 0 && (\n                    <MenuItem\n                      // key=\"Close\"\n                    // selected={index === selectedIndex}\n                      onClick={(event) => {\n                        event.stopPropagation()\n                        updateState((draft) => {\n                          draft.currentTab = 0\n                        })\n                        onClose()\n                      }}\n                    >\n                      Close\n                    </MenuItem>\n                  )\n                }\n                <MenuItem\n                  // key=\"By Filter\"\n                  selected={state.currentTab === 1}\n                  onClick={(event) => {\n                    event.stopPropagation()\n                    updateState((draft) => {\n                      draft.currentTab = 1\n                      draft.expanded = true\n                    })\n                    onClose()\n                  }}\n                >\n                  By Filter\n                </MenuItem>\n                <MenuItem\n                  // key=\"By Algorithm\"\n                  selected={state.currentTab === 2}\n                  onClick={(event) => {\n                    event.stopPropagation()\n                    updateState((draft) => {\n                      draft.currentTab = 2\n                      draft.expanded = true\n                    })\n                    onClose()\n                  }}\n                >\n                  By Algorithm\n                </MenuItem>\n              </Menu>\n            </View>\n            {\n            state.expanded && hasSelected && (\n              <Card\n                style={{\n                  display: 'flex',\n                  flexDirection: 'row',\n                  height: 32,\n                  width: '100%',\n                }}\n              >\n                <ListItem>\n                  <Checkbox\n                    onClick={(e) => e.stopPropagation()}\n                    checked={!R.isEmpty(state.selectedClusterIds)\n               && state.selectedClusterIds.length === clusters.length}\n                    onChange={(event) => {\n                      const {\n                        checked,\n                      } = event.target\n                      updateState((draft) => {\n                        if (checked) {\n                          draft.selectedClusterIds = clusters.map((cluster) => cluster.id)\n                        } else {\n                          draft.selectedClusterIds = []\n                        }\n                      })\n                    }}\n                    inputProps={{ 'aria-label': 'primary checkbox' }}\n                  />\n                  <IconButton\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      onEvent({\n                        type: EVENT.DELETE_CLUSTER,\n                        payload: {\n                          itemIds: state.selectedClusterIds,\n                        },\n                      })\n                      updateState((draft) => {\n                        draft.selectedClusterIds = []\n                      })\n                    }}\n                  >\n                    <Icon\n                      name=\"delete_rounded\"\n                    />\n                  </IconButton>\n                </ListItem>\n              </Card>\n            )\n          }\n          </View>\n\n        </AccordionSummary>\n        <AccordionDetails>\n          <TabPanel\n            value={state.currentTab}\n            index={0}\n          >\n            {\n          clusters.length === 0 && (\n            <Typography>\n              Let's create a Cluster.\n            </Typography>\n          )\n        }\n            <List dense>\n              <SortableList\n                onReorder={(result) => {\n                  onEvent({\n                    type: EVENT.REORDER_CLUSTER,\n                    payload: {\n                      fromIndex: result.source.index,\n                      toIndex: result.destination!.index,\n                    },\n                  })\n                }}\n                data={clusters}\n                renderItem={({\n                  provided,\n                  item: cluster,\n                  // index,\n                }) => {\n                  const { ids: elementIds, id, name } = cluster\n                  return (\n                    <Accordion\n                      key={id}\n                      ref={provided.innerRef}\n                      {...provided.draggableProps}\n                    >\n                      <AccordionSummary\n                        aria-controls=\"panel1a-content\"\n                      >\n                        <View\n                          style={{\n                            flexDirection: 'row',\n                            justifyContent: 'space-between',\n                            alignItems: 'center',\n                            width: '100%',\n                          }}\n                        >\n                          <View\n                            style={{\n                              flexDirection: 'row',\n                              alignItems: 'center',\n                            }}\n                          >\n                            <Checkbox\n                              onClick={(e) => e.stopPropagation()}\n                              checked={state.selectedClusterIds.includes(cluster.id)}\n                              onChange={(e) => {\n                                const { checked } = e.target\n                                updateState((draft) => {\n                                  if (checked) {\n                                    draft.selectedClusterIds.push(cluster.id)\n                                  } else {\n                                    draft.selectedClusterIds = draft.selectedClusterIds.filter(\n                                      (id) => id !== cluster.id,\n                                    )\n                                  }\n                                })\n                              }}\n                              inputProps={{ 'aria-label': 'primary checkbox' }}\n                            />\n                            <Typography\n                              variant=\"h6\"\n                            >\n                              {name}\n                            </Typography>\n                          </View>\n\n                          <View\n                            style={{\n                              flexDirection: 'row',\n                              alignItems: 'center',\n                            }}\n                          >\n                            <SpeedDialActionsView\n                              graphEditorLocalDataRef={graphEditorLocalDataRef}\n                              editorMode={editorMode}\n                              onEvent={onEvent}\n                              item={cluster}\n                            />\n                            <IconButton\n                              edge=\"end\"\n                              disableFocusRipple\n                              disableRipple\n                              disableTouchRipple\n                              {...provided.dragHandleProps}\n                            >\n                              <Icon name=\"drag_handle\" />\n                            </IconButton>\n                          </View>\n                        </View>\n                      </AccordionSummary>\n                      <AccordionDetails>\n                        {\n                        elementIds.map((elementId) => (\n                          <ListItem\n                            key={elementId}\n                          >\n                            <ListItemAvatar>\n                              <Checkbox\n                                // checked={selectedClustersIds.includes(id)}\n                                // onChange={(_, checked) => {\n                                //   onSelectCluster(cluster, checked)\n                                // }}\n                                inputProps={{ 'aria-label': 'primary checkbox' }}\n                                onClick={(e) => e.stopPropagation()}\n                              />\n                            </ListItemAvatar>\n                            <ListItemText\n                              primary={R.take(10)(elementId)}\n                            />\n                            <ListItemSecondaryAction>\n                              <IconButton\n                                edge=\"end\"\n                                aria-label=\"select\"\n                                onClick={(e) => {\n                                  e.stopPropagation()\n                                  onEvent({\n                                    type: EVENT.ELEMENT_SELECTED,\n                                    payload: {\n                                      itemIds: [elementId]\n                                    },\n                                    avoidHistoryRecording: true,\n                                  })\n                                }}\n                              >\n                                <Icon name=\"my_location\" />\n                              </IconButton>\n                              <IconButton\n                                edge=\"end\"\n                                aria-label=\"delete\"\n                                onClick={(e) => {\n                                  e.stopPropagation()\n                                  onEvent({\n                                    type: EVENT.DELETE_CLUSTER_ELEMENT,\n                                    payload: {\n                                      itemIds: [elementId],\n                                      clusterId: cluster.id,\n                                    },\n                                  })\n                                }}\n                              >\n                                <Icon name=\"delete_rounded\" />\n                              </IconButton>\n                            </ListItemSecondaryAction>\n                          </ListItem>\n                        ))\n                      }\n                      </AccordionDetails>\n                    </Accordion>\n                  )\n                }}\n              />\n            </List>\n          </TabPanel>\n          <TabPanel\n            value={state.currentTab}\n            index={1}\n          >\n            <Form\n              onSubmit={(event) => {\n                updateState((draft) => {\n                  draft.formData = event.formData\n                  draft.createClusterDialog.visible = true\n                })\n              }}\n              {...createClusterForm}\n            />\n          </TabPanel>\n          <TabPanel\n            value={state.currentTab}\n            index={2}\n          >\n            <CreateClusterByAlgorithm\n              onSubmit={() => {\n                updateState((draft) => {\n                  draft.currentTab = 0\n                })\n              }}\n            />\n          </TabPanel>\n        </AccordionDetails>\n      </Accordion>\n      <Dialog\n        onClose={() => updateState((draft) => {\n          draft.createClusterDialog.visible = false\n        })}\n        aria-labelledby=\"create-playlist-dialog-title\"\n        open={state.createClusterDialog.visible}\n      >\n        <DialogTitle id=\"create-playlist-dialog-title\">Create Cluster</DialogTitle>\n        <View\n          style={{\n            width: '50%',\n            padding: 10,\n            justifyContent: 'center',\n          }}\n        >\n          <TextField\n            style={{\n              marginBottom: 10,\n              width: '50vw',\n            }}\n            fullWidth\n            label=\"name\"\n            value={state.createClusterDialog.name}\n            onChange={({ target: { value } }) => updateState((draft) => {\n              draft.createClusterDialog.name = value\n            })}\n          />\n          <Button\n            fullWidth\n            onClick={() => {\n              updateState((draft) => {\n                draft.currentTab = 0\n                draft.createClusterDialog.name = ''\n                draft.createClusterDialog.visible = false\n              })\n              onEvent({\n                type: EVENT.CREATE_CLUSTER_FORM_SUBMIT,\n                payload: {\n                  formData: state.formData,\n                  name: state.createClusterDialog.name,\n                },\n              })\n            }}\n          >\n            Create\n          </Button>\n        </View>\n      </Dialog>\n    </>\n  )\n}\n\ntype SpeedDialActionsViewProps = {\n  graphEditorLocalDataRef: GraphEditorContext['localDataRef'];\n  editorMode: GraphEditorContext['mode'];\n  onEvent: GraphEditorContext['onEvent'];\n  item: Cluster;\n}\n\nconst SpeedDialActionsView = (props: SpeedDialActionsViewProps) => {\n  const {\n    item: cluster,\n    editorMode,\n    onEvent,\n    graphEditorLocalDataRef,\n  } = props\n\n  return (\n    <SpeedDialCreator\n      actions={[\n        {\n          name: 'Delete',\n          icon: {\n            name: 'delete_rounded',\n          },\n          onClick: (e) => {\n            e.stopPropagation()\n            onEvent({\n              type: EVENT.DELETE_CLUSTER,\n              payload: {\n                itemIds: [cluster.id],\n              },\n            })\n          },\n        },\n        {\n          name: cluster.visible === false ? 'Visible' : 'Invisible',\n          icon: {\n            name: cluster.visible === false ? 'unfold_more' : 'unfold_less',\n          },\n          onClick: (e) => {\n            e.stopPropagation()\n            onEvent({\n              type: EVENT.CHANGE_CLUSTER_VISIBILITY,\n              payload: {\n                clusterId: cluster.id,\n                value: cluster.visible === false,\n              },\n            })\n          },\n        },\n        {\n          name: 'Select',\n          icon: {\n            name: 'beenhere',\n          },\n          onClick: (e) => {\n            e.stopPropagation()\n            onEvent({\n              type: EVENT.SELECT_CLUSTER,\n              payload: {\n                itemIds: [cluster.id],\n              },\n            })\n          },\n        },\n        {\n          name: 'Add',\n          icon: {\n            name: 'add_circle',\n            color: editorMode === EDITOR_MODE.ADD_CLUSTER_ELEMENT\n        && graphEditorLocalDataRef.current?.issuedClusterId === cluster.id\n              ? 'primary' : 'inherit',\n          },\n          onClick: (e) => {\n            e.stopPropagation()\n            onEvent({\n              type: EVENT.PRESS_ADD_CLUSTER_ELEMENT,\n              payload: {\n                clusterId: cluster.id,\n              },\n            })\n          },\n        },\n      ]}\n    />\n  )\n}\n","import { Icon } from '@components/Icon'\nimport { SortableList } from '@components/SortableList'\nimport { SpeedDialCreator } from '@components/SpeedDialCreator'\nimport { EVENT } from '@constants'\nimport { useGraphEditor } from '@hooks'\nimport {\n  Card, Checkbox, IconButton, List,\n  ListItem, ListItemAvatar, ListItemText, Typography,\n} from '@mui/material'\nimport Accordion from '@mui/material/Accordion'\nimport AccordionDetails from '@mui/material/AccordionDetails'\nimport AccordionSummary from '@mui/material/AccordionSummary'\nimport {\n  View,\n  wrapComponent,\n} from 'colay-ui'\nimport { useImmer } from 'colay-ui/hooks/useImmer'\nimport * as R from 'colay/ramda'\nimport React from 'react'\n\nexport type EventHistoryTableProps = {\n  onCreatePlaylistClick: (selectedEventIds: string[]) => void;\n}\n\nconst EventHistoryTableElement = (props: EventHistoryTableProps) => {\n  const {\n    onCreatePlaylistClick,\n  } = props\n  const [state, updateState] = useImmer({\n    expanded: false,\n    selectedEventIds: [] as string[],\n  })\n  const hasSelected = state.selectedEventIds.length > 0\n  const [\n    {\n      onEvent,\n      eventHistory,\n    },\n  ] = useGraphEditor(\n    (editor) => ({\n      onEvent: editor.onEvent,\n      eventHistory: editor.eventHistory,\n    }),\n  )\n  return (\n    <View\n      style={{\n        // @ts-ignore\n        overflowY: 'auto',\n        overflowX: 'hidden',\n        // paddingRight: 10,\n        // paddingLeft: 10,\n        height: '100%',\n        width: '100%',\n      }}\n    >\n      <Accordion\n        expanded={state.expanded}\n        onChange={(e, expanded) => updateState((draft) => {\n          draft.expanded = expanded\n        })}\n      >\n        <AccordionSummary\n          aria-controls=\"panel1a-content\"\n        >\n          <View\n            style={{\n              width: '100%',\n            }}\n          >\n            <View\n              style={{\n                flexDirection: 'row',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                width: '100%',\n              }}\n            >\n              <View\n                style={{\n                  flexDirection: 'row',\n                  alignItems: 'center',\n                }}\n              >\n                <Typography\n                  variant=\"h6\"\n                >\n                  History\n                </Typography>\n              </View>\n              <View\n                style={{\n                // alignItems: 'space-between',\n                  flexDirection: 'row',\n                }}\n              >\n                <IconButton\n                  onClick={(e) => {\n                    e.stopPropagation()\n                    onEvent({\n                      type: EVENT.UNDO_EVENT,\n                      avoidEventRecording: true,\n                      avoidHistoryRecording: true,\n                    })\n                  }}\n                >\n                  <Icon\n                    name=\"keyboard_arrow_down\"\n                  />\n                </IconButton>\n                <IconButton\n                  onClick={(e) => {\n                    e.stopPropagation()\n                    onEvent({\n                      type: EVENT.REDO_EVENT,\n                      avoidEventRecording: true,\n                      avoidHistoryRecording: true,\n                    })\n                  }}\n                >\n                  <Icon\n                    name=\"keyboard_arrow_up\"\n                  />\n                </IconButton>\n              </View>\n            </View>\n            {\n              state.expanded && hasSelected && (\n                <Card\n                  style={{\n                    display: 'flex',\n                    flexDirection: 'row',\n                    height: 32,\n                    width: '100%',\n                  }}\n                >\n                  <ListItem>\n                    <Checkbox\n                      checked={!R.isEmpty(state.selectedEventIds)\n             && state.selectedEventIds.length === eventHistory!.events.length}\n                      onChange={(e) => {\n                        const { checked } = e.target\n                        updateState((draft) => {\n                          if (checked) {\n                            draft.selectedEventIds = eventHistory!.events.map((event) => event.id)\n                          } else {\n                            draft.selectedEventIds = []\n                          }\n                        })\n                      }}\n                      onClick={(e) => e.stopPropagation()}\n                      inputProps={{ 'aria-label': 'primary checkbox' }}\n                    />\n                    <IconButton\n                      onClick={(e) => {\n                        e.stopPropagation()\n                        onCreatePlaylistClick(state.selectedEventIds)\n                        updateState((draft) => {\n                          draft.selectedEventIds = []\n                        })\n                      }}\n                    >\n                      <Icon\n                        name=\"playlist_add\"\n                      />\n                    </IconButton>\n                    <IconButton\n                      onClick={(e) => {\n                        e.stopPropagation()\n                        onEvent({\n                          type: EVENT.DELETE_HISTORY_ITEM,\n                          payload: {\n                            itemIds: state.selectedEventIds,\n                          },\n                        })\n                        updateState((draft) => {\n                          draft.selectedEventIds = []\n                        })\n                      }}\n                    >\n                      <Icon\n                        name=\"delete_rounded\"\n                      />\n                    </IconButton>\n                  </ListItem>\n                </Card>\n              )\n            }\n          </View>\n        </AccordionSummary>\n        <AccordionDetails>\n          {\n          eventHistory!.events.length === 0 && (\n            <Typography>\n              Let's do a few things.\n            </Typography>\n          )\n        }\n          <List dense>\n            <SortableList\n              onReorder={(result) => {\n                const { length } = eventHistory!.events\n                onEvent({\n                  type: EVENT.REORDER_HISTORY_ITEM,\n                  payload: {\n                    fromIndex: length - result.source.index - 1,\n                    toIndex: length - result.destination!.index! - 1,\n                  },\n                })\n              }}\n              data={R.reverse(eventHistory!.events)}\n              renderItem={({\n                provided,\n                item: event,\n                index,\n              }) => {\n                const { length } = eventHistory!.events\n                return (\n                  <ListItem\n                    key={event.id}\n                    selected={eventHistory!.currentIndex === (length - 1) - index}\n                    ref={provided.innerRef}\n                    {...provided.draggableProps}\n                  >\n                    <ListItemAvatar>\n                      <Checkbox\n                        checked={state.selectedEventIds.includes(event.id)}\n                        onChange={(e) => {\n                          const { checked } = e.target\n                          updateState((draft) => {\n                            if (checked) {\n                              draft.selectedEventIds.push(event.id)\n                            } else {\n                              draft.selectedEventIds = draft.selectedEventIds.filter((id) => id !== event.id)\n                            }\n                          })\n                        }}\n                        inputProps={{ 'aria-label': 'primary checkbox' }}\n                      />\n                    </ListItemAvatar>\n                    <ListItemText\n                      primary={event.type}\n                    />\n                    <View\n                      style={{\n                        display: 'flex',\n                        flexDirection: 'row',\n                        alignItems: 'center',\n\n                      }}\n                    >\n                      <SpeedDialCreator\n                        actions={[\n                          {\n                            name: 'Redo',\n                            icon: {\n                              name: 'navigate_next',\n                            },\n                            onClick: (e) => onEvent({\n                              type: EVENT.APPLY_EVENTS,\n                              payload: {\n                                events: [{\n                                  ...event,\n                                  avoidEventRecording: true,\n                                  avoidHistoryRecording: true,\n                                }],\n                              },\n                            }),\n                          },\n                          {\n                            name: 'Undo',\n                            icon: {\n                              name: 'navigate_before',\n                            },\n                            onClick: () => onEvent({\n                              type: EVENT.APPLY_EVENTS,\n                              payload: {\n                                events: [{\n                                  ...eventHistory!.undoEvents[index],\n                                  avoidEventRecording: true,\n                                  avoidHistoryRecording: true,\n                                }],\n                              },\n                            }),\n                          },\n                          {\n                            name: 'Delete',\n                            icon: {\n                              name: 'delete_rounded',\n                            },\n                            onClick: () => onEvent({\n                              type: EVENT.DELETE_HISTORY_ITEM,\n                              payload: {\n                                itemIds: [event.id],\n                              },\n                              avoidEventRecording: true,\n                              avoidHistoryRecording: true,\n                            }),\n                          },\n                        ]}\n                      />\n                      <IconButton\n                        edge=\"end\"\n                        disableFocusRipple\n                        disableRipple\n                        disableTouchRipple\n                        {...provided.dragHandleProps}\n                      >\n                        <Icon name=\"drag_handle\" />\n                      </IconButton>\n                    </View>\n                  </ListItem>\n                )\n              }}\n            />\n          </List>\n        </AccordionDetails>\n      </Accordion>\n    </View>\n  )\n}\n\nexport const EventHistoryTable = wrapComponent<EventHistoryTableProps>(EventHistoryTableElement, {})\n","import { Icon } from '@components/Icon'\nimport { SortableList } from '@components/SortableList'\nimport { SpeedDialCreator } from '@components/SpeedDialCreator'\nimport {\n  EVENT,\n} from '@constants'\nimport {\n  useGraphEditor,\n} from '@hooks'\nimport {\n  Button,\n  Card, Checkbox,\n  Dialog,\n  DialogTitle, IconButton, List,\n  ListItem, ListItemAvatar, ListItemSecondaryAction, ListItemText, TextField, Typography,\n} from '@mui/material'\nimport Accordion from '@mui/material/Accordion'\nimport AccordionDetails from '@mui/material/AccordionDetails'\nimport AccordionSummary from '@mui/material/AccordionSummary'\nimport {\n  View,\n} from 'colay-ui'\nimport { useImmer } from 'colay-ui/hooks/useImmer'\nimport * as R from 'colay/ramda'\nimport React from 'react'\n\nexport type EventHistoryTableProps = {\n  isOpen?: boolean;\n  // onPlay: (playlist: Playlist) => void\n  createPlaylistDialog: {\n    visible: boolean;\n    onClose: () => void;\n  }\n  onCreatePlaylist: (param: {\n    id: string;\n    name: string;\n  }) => void\n}\n\n// onSelectPlaylist={(playlist, checked) => {\n//   updateState((draft) => {\n//     if (checked) {\n//       draft.selectedPlaylistIds.push(playlist.id)\n//     } else {\n//       draft.selectedPlaylistIds = draft.selectedPlaylistIds.filter(\n//         (id) => id !== playlist.id,\n//       )\n//     }\n//   })\n// }}\n// selectedPlaylistIds={state.selectedPlaylistIds}\n\nexport const PlaylistTable = (props: EventHistoryTableProps) => {\n  const {\n    createPlaylistDialog,\n    onCreatePlaylist,\n  } = props\n  const [\n    {\n      onEvent,\n      playlists = [],\n    },\n  ] = useGraphEditor(\n    (editor) => ({\n      onEvent: editor.onEvent,\n      playlists: editor.playlists,\n    }),\n  )\n  const [state, updateState] = useImmer({\n    expanded: false,\n    createPlaylistDialog: {\n      name: '',\n    },\n    selectedPlaylistIds: [] as string[],\n  })\n  const hasSelected = state.selectedPlaylistIds.length > 0\n  return (\n    <>\n      <Accordion\n        expanded={state.expanded}\n        onChange={(e, expanded) => updateState((draft) => {\n          draft.expanded = expanded\n        })}\n      >\n        <AccordionSummary\n          aria-controls=\"panel1a-content\"\n        >\n          <View\n            style={{\n              width: '100%',\n            }}\n          >\n            <View\n              style={{\n                flexDirection: 'row',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                width: '100%',\n              }}\n            >\n              <View\n                style={{\n                  flexDirection: 'row',\n                  alignItems: 'center',\n                }}\n              >\n                <Typography\n                  variant=\"h6\"\n                >\n                  Playlists\n                </Typography>\n              </View>\n            </View>\n            {\n            state.expanded && hasSelected && (\n              <Card\n                style={{\n                  display: 'flex',\n                  flexDirection: 'row',\n                  height: 32,\n                  width: '100%',\n                }}\n              >\n                <ListItem>\n                  <Checkbox\n                    onClick={(e) => e.stopPropagation()}\n                    checked={!R.isEmpty(state.selectedPlaylistIds)\n               && state.selectedPlaylistIds.length === playlists.length}\n                    onChange={(e) => {\n                      const { checked } = e.target\n                      updateState((draft) => {\n                        if (checked) {\n                          draft.selectedPlaylistIds = playlists.map((playlist) => playlist.id)\n                        } else {\n                          draft.selectedPlaylistIds = []\n                        }\n                      })\n                    }}\n                    inputProps={{ 'aria-label': 'primary checkbox' }}\n                  />\n                  <IconButton\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      updateState((draft) => {\n                        draft.selectedPlaylistIds = []\n                      })\n                      onEvent({\n                        type: EVENT.DELETE_PLAYLIST,\n                        payload: {\n                          itemIds: state.selectedPlaylistIds,\n                        },\n                      })\n                    }}\n                  >\n                    <Icon\n                      name=\"delete_rounded\"\n                    />\n                  </IconButton>\n                </ListItem>\n              </Card>\n            )\n              }\n          </View>\n\n        </AccordionSummary>\n        <AccordionDetails>\n          {\n          playlists.length === 0 && (\n            <Typography>\n              Let's create a playlist.\n            </Typography>\n          )\n        }\n          <List dense>\n            <SortableList\n              onReorder={(result) => onEvent({\n                type: EVENT.REORDER_PLAYLIST,\n                payload: {\n                  fromIndex: result.source.index,\n                  toIndex: result.destination!.index,\n                },\n              })}\n              data={playlists}\n              renderItem={({\n                provided,\n                item: playlist,\n              }) => {\n                const { events, id, name } = playlist\n                return (\n                  <Accordion\n                    key={id}\n                    ref={provided.innerRef}\n                    {...provided.draggableProps}\n                  >\n                    <AccordionSummary\n                      aria-controls=\"panel1a-content\"\n                    >\n                      <View\n                        style={{\n                          flexDirection: 'row',\n                          justifyContent: 'space-between',\n                          alignItems: 'center',\n                          width: '100%',\n                        }}\n                      >\n                        <View\n                          style={{\n                            flexDirection: 'row',\n                            alignItems: 'center',\n                          }}\n                        >\n                          <Checkbox\n                            onClick={(e) => e.stopPropagation()}\n                            checked={hasSelected\n                          && state.selectedPlaylistIds.includes(playlist.id)}\n                            onChange={(e) => {\n                              const { checked } = e.target\n                              updateState((draft) => {\n                                if (checked) {\n                                  draft.selectedPlaylistIds.push(playlist.id)\n                                } else {\n                                  draft.selectedPlaylistIds = draft.selectedPlaylistIds.filter(\n                                    (id) => id !== playlist.id,\n                                  )\n                                }\n                              })\n                            }}\n                            inputProps={{ 'aria-label': 'primary checkbox' }}\n                          />\n                          <Typography\n                            variant=\"h6\"\n                          >\n                            {name}\n                          </Typography>\n                        </View>\n                        <View\n                          style={{\n                            flexDirection: 'row',\n                            alignItems: 'center',\n                          }}\n                        >\n                          <SpeedDialCreator\n                            actions={[\n                              {\n                                name: 'Delete',\n                                icon: {\n                                  name: 'delete_rounded',\n                                },\n                                onClick: (e) => {\n                                  e.stopPropagation()\n                                  updateState((draft) => {\n                                    draft.selectedPlaylistIds = []\n                                  })\n                                  onEvent({\n                                    type: EVENT.DELETE_PLAYLIST,\n                                    payload: {\n                                      itemIds: [playlist.id],\n                                    },\n                                  })\n                                },\n                              },\n                              {\n                                name: 'Play',\n                                icon: {\n                                  name: 'play_arrow',\n                                },\n                                onClick: (e) => {\n                                  e.stopPropagation()\n                                  onEvent({\n                                    type: EVENT.PLAY_EVENTS,\n                                    payload: {\n                                      events: playlist.events,\n                                    },\n                                  })\n                                },\n                              },\n                            ]}\n                          />\n                          <IconButton\n                            edge=\"end\"\n                            disableFocusRipple\n                            disableRipple\n                            disableTouchRipple\n                            {...provided.dragHandleProps}\n                          >\n                            <Icon name=\"drag_handle\" />\n                          </IconButton>\n                        </View>\n                      </View>\n                    </AccordionSummary>\n                    <AccordionDetails>\n                      {\n                        events.map((event) => (\n                          <ListItem\n                            key={event.id}\n                          >\n                            <ListItemAvatar>\n                              <Checkbox\n                                // checked={state.selectedPlaylistIds.includes(id)}\n                                // onChange={(_, checked) => {\n                                //   updateState((draft) => {\n                                //     if (checked) {\n                                //       draft.selectedPlaylistIds.push(playlist.id)\n                                //     } else {\n                                //       draft.selectedPlaylistIds = draft.selectedPlaylistIds.filter(\n                                //         (id) => id !== playlist.id,\n                                //       )\n                                //     }\n                                //   })\n                                // }}\n                                inputProps={{ 'aria-label': 'primary checkbox' }}\n                                onClick={(e) => e.stopPropagation()}\n                              />\n                            </ListItemAvatar>\n                            <ListItemText\n                              primary={event.type}\n                            />\n                            <ListItemSecondaryAction>\n                              <IconButton\n                                edge=\"end\"\n                                aria-label=\"delete\"\n                                onClick={(e) => {\n                                  e.stopPropagation()\n                                }}\n                              >\n                                <Icon name=\"delete_rounded\" />\n                              </IconButton>\n                            </ListItemSecondaryAction>\n                          </ListItem>\n                        ))\n                      }\n                    </AccordionDetails>\n                  </Accordion>\n                )\n              }}\n            />\n          </List>\n        </AccordionDetails>\n      </Accordion>\n      <Dialog\n        onClose={createPlaylistDialog.onClose}\n        aria-labelledby=\"create-playlist-dialog-title\"\n        open={createPlaylistDialog.visible}\n      >\n        <DialogTitle id=\"create-playlist-dialog-title\">Create Playlist</DialogTitle>\n        <View\n          style={{\n            width: '50%',\n            padding: 10,\n            justifyContent: 'center',\n          }}\n        >\n          <TextField\n            style={{\n              marginBottom: 10,\n              width: '50vw',\n            }}\n            fullWidth\n            label=\"name\"\n            value={state.createPlaylistDialog.name}\n            onChange={({ target: { value } }) => updateState((draft) => {\n              draft.createPlaylistDialog.name = value\n            })}\n          />\n          <Button\n            fullWidth\n            onClick={() => {\n              onCreatePlaylist({\n                id: R.uuid(),\n                name: state.createPlaylistDialog.name,\n              })\n              updateState((draft) => {\n                draft.createPlaylistDialog.name = ''\n              })\n            }}\n          >\n            Create\n          </Button>\n        </View>\n      </Dialog>\n    </>\n  )\n}\n","import { Icon } from '@components/Icon'\nimport { EVENT, SIDE_PANEL_DEFAULT_WIDTH } from '@constants'\nimport { useGraphEditor } from '@hooks'\nimport {\n  Accordion, AccordionDetails, AccordionSummary, Button, Divider,\n  IconButton, Paper, Typography,\n} from '@mui/material'\nimport { FormProps } from '@rjsf/core'\nimport Form from '@rjsf/material-ui'\nimport {\n  useAnimation,\n  View, wrapComponent,\n} from 'colay-ui'\nimport { useImmer } from 'colay-ui/hooks/useImmer'\nimport React from 'react'\nimport * as R from 'colay/ramda'\nimport { useDrag } from '@hooks/useDrag'\nimport { ResizeDivider } from '@components/ResizeDivider'\nimport { ClusterTable } from './ClusterTable'\nimport { EventHistoryTable } from './EventHistoryTable'\nimport { PlaylistTable } from './PlaylistTable'\n\ntype SettingsForm = {\n  schema: FormProps<any>['schema'];\n} & Partial<\nPick<\nFormProps<any>,\n'onChange'|'onSubmit'|'formData'| 'uiSchema' | 'children'\n>\n>\nexport type SettingsBarProps = {\n  isOpen?: boolean;\n  forms?: SettingsForm[];\n  createClusterForm?: FormProps<any>;\n}\n\nconst SettingsBarElement = (props: SettingsBarProps) => {\n  const {\n    isOpen = false,\n    // schema = {},\n    forms = [],\n    createClusterForm,\n    // children,\n    // ...formProps\n  } = props\n  const [\n    {\n      onEvent,\n      eventHistory,\n      clusters,\n      playlists,\n    },\n  ] = useGraphEditor(\n    (editor) => ({\n      onEvent: editor.onEvent,\n      eventHistory: editor.eventHistory,\n      playlists: editor.playlists,\n      clusters: editor.graphConfig?.clusters,\n      // editorMode: editor.mode,\n      // graphEditorLocalDataRef: editor.localDataRef,\n    }),\n  )\n  const localDataRef = React.useRef({\n    width: SIDE_PANEL_DEFAULT_WIDTH,\n  })\n  const {\n    style: animationStyle,\n    ref: animationRef,\n  } = useAnimation({\n    from: {\n      width: 0,\n    },\n    to: {\n      width: localDataRef.current.width,\n    },\n    autoPlay: false,\n  }, [localDataRef.current.width])\n  React.useEffect(() => {\n    animationRef.current.play(isOpen)\n  }, [animationRef, isOpen])\n  const [state, updateState] = useImmer({\n    createPlaylistDialog: {\n      visible: false,\n    },\n    selectedEventIds: [] as string[],\n  })\n  const containerRef = React.useRef()\n  const onMouseDown = useDrag({\n    ref: containerRef,\n    onDrag: ({ x, y }, rect) => {\n      localDataRef.current.width = rect.width - x\n      const target = containerRef.current\n      target.style.width = `${localDataRef.current.width}px`\n    },\n  })\n  return (\n    <Paper\n      ref={containerRef}\n      style={{\n        position: 'absolute',\n        height: '100%',\n        top: 0,\n        left: 0,\n        display: 'flex',\n        flexDirection: 'row',\n        ...animationStyle,\n      }}\n    >\n      <View\n        style={{\n          // @ts-ignore\n          overflowY: 'auto',\n          overflowX: 'hidden',\n          height: '100%',\n          flex: 1,\n        }}\n      >\n        {\n        forms.map((form, index) => {\n          const title = form.schema?.title ?? `Form-${index}`\n          return (\n            <React.Fragment key={title}>\n              <Accordion>\n                <AccordionSummary>\n                  <Typography\n                    variant=\"h6\"\n                  >\n                    {title}\n                  </Typography>\n                </AccordionSummary>\n                <AccordionDetails>\n                  <Form\n              // schema={schema}\n              // {...formProps}\n                    {...form}\n                    schema={R.omit(['title'])(form.schema)}\n                    onSubmit={(\n                      e,\n                    ) => onEvent({\n                      type: EVENT.SETTINGS_FORM_CHANGED,\n                      payload: { form, value: e.formData, index },\n                    })}\n                  >\n                    {\n                      form.children ?? (\n                      <Button\n                        type=\"submit\"\n                        fullWidth\n                        variant=\"contained\"\n                      >\n                        Apply\n                      </Button>\n                      )\n}\n                  </Form>\n                </AccordionDetails>\n              </Accordion>\n              <View style={{ marginTop: 5, marginBottom: 5 }} />\n            </React.Fragment>\n          )\n        })\n      }\n        <Divider />\n        {\n        eventHistory && (\n        <>\n          <View\n            style={{\n              // height: '50%',\n              width: '100%',\n            }}\n          >\n            <EventHistoryTable\n              onCreatePlaylistClick={(selectedEventIds) => updateState((draft) => {\n                draft.createPlaylistDialog.visible = true\n                draft.selectedEventIds = selectedEventIds\n              })}\n            />\n          </View>\n          <Divider style={{ marginTop: 5, marginBottom: 5 }} />\n        </>\n        )\n      }\n        <Divider />\n        {\n          playlists && (\n          <PlaylistTable\n            createPlaylistDialog={{\n              ...state.createPlaylistDialog,\n              onClose: () => updateState((draft) => {\n                draft.createPlaylistDialog.visible = false\n              }),\n            }}\n            onCreatePlaylist={(playlistWithoutEvents) => {\n              const playlistEvents = state.selectedEventIds.map(\n                (eventId) => eventHistory!.events.find((event) => event.id === eventId)!,\n              ).sort((item, other) => (item.date > other.date ? 1 : -1))\n              updateState((draft) => {\n                draft.createPlaylistDialog.visible = false\n              })\n              onEvent({\n                type: EVENT.CREATE_PLAYLIST,\n                payload: {\n                  items: [\n                    {\n                      ...playlistWithoutEvents,\n                      events: playlistEvents,\n                    },\n                  ],\n                },\n              })\n            }}\n          />\n\n          )\n        }\n        <Divider />\n        {\n        clusters && (\n        <>\n          <View\n            style={{\n              // height: '50%',\n              width: '100%',\n            }}\n          >\n            <ClusterTable\n              createClusterForm={createClusterForm}\n            />\n          </View>\n          <Divider style={{ marginTop: 5, marginBottom: 5 }} />\n        </>\n        )\n      }\n      </View>\n      <ResizeDivider\n        onMouseDown={onMouseDown}\n      />\n      <IconButton\n        style={styles.icon}\n        onClick={() => {\n          onEvent({\n            type: EVENT.TOGGLE_FILTER_BAR,\n            avoidHistoryRecording: true,\n          })\n        }}\n      >\n        <Icon\n          name=\"settings\"\n        />\n      </IconButton>\n    </Paper>\n  )\n}\n\nexport const SettingsBar = wrapComponent<SettingsBarProps>(SettingsBarElement, {})\n\nconst styles = {\n  icon: {\n    position: 'absolute',\n    right: -36,\n    top: 2,\n    fontSize: 24,\n  },\n} as const\n","import {\n  DefaultRenderEdge,\n  DefaultRenderNode, Graph, GraphProps,\n} from '@components'\nimport { ContextMenu } from '@components/ContextMenu'\nimport { EDITOR_MODE, EVENT } from '@constants'\nimport { Clusters } from '@core/clusters'\nimport { GraphEditorProvider } from '@hooks/useGraphEditor'\nimport {\n  Backdrop, Box, CircularProgress,\n  IconButton,\n} from '@mui/material'\nimport {\n  EditorMode, EventHistory, EventInfo, EventType,\n  GraphConfig, GraphEditorConfig, GraphEditorRef, GraphEditorRenderEdge,\n  GraphEditorRenderNode, GraphLabelData, NetworkStatistics,\n  NodeElement, OnEvent, OnEventLite, Playlist, RecordedEvent,\n} from '@type'\nimport {\n  getEventClientPosition, getLabel, getSelectedItemByElement,\n  throttle,\n} from '@utils'\nimport { calculateStatistics } from '@utils/networkStatistics'\nimport { useTimeoutManager } from '@utils/useTimeoutManager'\nimport { useForwardRef, wrapComponent } from 'colay-ui'\nimport { useImmer } from 'colay-ui/hooks/useImmer'\nimport { PropsWithRef } from 'colay-ui/type'\nimport * as R from 'colay/ramda'\nimport React from 'react'\nimport { ActionBar, ActionBarProps } from './ActionBar'\nimport { DataBar, DataBarProps } from './DataBar'\nimport { ModalComponent, ModalComponentProps } from './ModalComponent'\nimport { MouseIcon } from './MouseIcon'\nimport { PreferencesModal, PreferencesModalProps } from './PreferencesModal'\nimport { RecordedEventsModal } from './RecordedEventsModal'\nimport { SettingsBar, SettingsBarProps } from './SettingsBar'\nimport { Icon } from  '@components/Icon'\ntype RenderElementAdditionalInfo = {\n  // label: string;\n}\n\nexport type GraphEditorProps = {\n  onEvent?: OnEvent;\n  graphConfig?: GraphConfig;\n  config?: GraphEditorConfig;\n  renderMoreAction?: () => React.ReactElement;\n  label?: GraphLabelData;\n  settingsBar?: SettingsBarProps;\n  dataBar?: Pick<DataBarProps, 'editable' | 'isOpen'>;\n  actionBar?: Pick<ActionBarProps, 'renderMoreAction' | 'isOpen' | 'recording' | 'eventRecording' | 'autoOpen' | 'theming'>;\n  preferencesModal?: PreferencesModalProps;\n  selectedElementIds?: string[] | null;\n  mode?: EditorMode;\n  renderEdge?: GraphEditorRenderEdge<RenderElementAdditionalInfo>;\n  renderNode?: GraphEditorRenderNode<RenderElementAdditionalInfo>;\n  events?: RecordedEvent[]\n  eventHistory?: EventHistory;\n  playlists?: Playlist[];\n  networkStatistics?: NetworkStatistics;\n  isLoading?: boolean;\n  isFocusMode?: boolean;\n  modals?: {\n    ElementSettings?: ModalComponentProps\n  };\n} & Omit<\nGraphProps,\n'config' | 'onPress' | 'renderNode' | 'renderEdge'\n>\n\nconst MODE_ICON_SCALE = 0.8\nconst MODE_ICON_MAP_BY_URL = {\n  [EDITOR_MODE.ADD]: `https://img.icons8.com/material/${MODE_ICON_SCALE}x/plus-math.png`,\n  [EDITOR_MODE.DELETE]: `https://img.icons8.com/material/${MODE_ICON_SCALE}x/minus--v2.png`,\n  [EDITOR_MODE.CONTINUES_ADD]: `https://img.icons8.com/material/${MODE_ICON_SCALE}x/plus.png`,\n  [EDITOR_MODE.CONTINUES_DELETE]: `https://img.icons8.com/material/${MODE_ICON_SCALE}x/minus-sign.png`,\n  [EDITOR_MODE.ADD_CLUSTER_ELEMENT]: `https://img.icons8.com/material/${MODE_ICON_SCALE}x/doctors-folder.png`,\n  [EDITOR_MODE.DEFAULT]: null,\n}\n\nconst DEFAULT_HANDLER = R.identity as (info: EventInfo) => void\n\nexport type GraphEditorType = React.FC<GraphEditorProps>\n\nconst DEFAULT_GRAPH_EDITOR_CONFIG: GraphEditorConfig = {\n  enableNetworkStatistics: true,\n}\nconst GraphEditorElement = (\n  props: GraphEditorProps,\n  ref: React.MutableRefObject<GraphEditorRef>,\n) => {\n  const {\n    onEvent: onEventCallback = DEFAULT_HANDLER,\n    renderEdge,\n    renderNode,\n    graphConfig,\n    style,\n    settingsBar,\n    actionBar,\n    dataBar = {},\n    preferencesModal = {},\n    nodes,\n    edges,\n    selectedElementIds = [],\n    label,\n    mode = EDITOR_MODE.DEFAULT,\n    events,\n    eventHistory,\n    config = DEFAULT_GRAPH_EDITOR_CONFIG,\n    playlists,\n    networkStatistics,\n    isLoading = false,\n    modals,\n    isFocusMode = false,\n    ...rest\n  } = props\n\n  const localDataRef = React.useRef({\n    initialized: false,\n    targetNode: null as NodeElement | null,\n    props,\n    issuedClusterId: null as string | null,\n    newClusterBoxSelection: {\n      elementIds: [] as string[],\n    },\n    networkStatistics: {\n      local: null,\n    },\n    contextMenu: {\n      itemIds: [],\n    },\n  })\n  const [state, updateState] = useImmer({\n    eventsModal: {\n      visible: false,\n    },\n    contextMenu: {\n      visible: false,\n      position: {\n        x: 0,\n        y: 0,\n      },\n    },\n    isLoading: false,\n  })\n  localDataRef.current.props = props\n  React.useEffect(() => {\n    localDataRef.current.initialized = true\n    // setTimeout(() => updateState((draft) => {\n    //   draft.isLoading = false\n    // }), 2200)\n  }, [])\n  const graphId = React.useMemo<string>(\n    () => graphConfig?.graphId ?? R.uuid(),\n    [graphConfig?.graphId],\n  )\n  const graphEditorRef = useForwardRef(ref)\n  // @TODO: DANGER\n  React.useEffect(() => {\n    setTimeout(() => {\n      ref.current = graphEditorRef.current\n    }, 1000)\n  }, [graphEditorRef.current])\n  // @TODO: DANGER\n  const selectedElement = React.useMemo(\n    () => {\n      const collection = graphEditorRef.current?.cy?.$id(R.last(selectedElementIds)!)\n      return collection?.length === 0\n        ? null\n        : collection\n    },\n    // if (!localDataRef.current.initialized) {\n    //   const callback = () => {\n    //     setTimeout(() => {\n    //       if (graphEditorRef.current.cy) {\n\n    //       } else {\n    //         callback()\n    //       }\n    //     }, 1000)\n    //   }\n    // } else if (selectedElementIds?.length > 0) {\n    //   return graphEditorRef.current.cy && graphEditorRef.current.cy.$id(R.last(selectedElementIds))\n    // }\n\n    [nodes, edges, selectedElementIds],\n  )\n  const selectedItem = selectedElement && getSelectedItemByElement(\n    selectedElement, { nodes, edges },\n  ).item\n  // const selectedElementIsNode = selectedElement && selectedElement.isNode()\n  // const targetPath = selectedElementIsNode ? 'nodes' : 'edges'\n  const onEvent: OnEventLite = React.useCallback((eventInfo) => {\n    const {\n      props: {\n        nodes,\n        edges,\n      },\n    } = localDataRef.current\n    switch (eventInfo.type) {\n      case EVENT.PRESS_ADD_CLUSTER_ELEMENT:\n        localDataRef.current.issuedClusterId = eventInfo.payload.clusterId\n        break\n      case EVENT.CREATE_CLUSTER_BY_ALGORITHM_FORM_SUBMIT: {\n        const {\n          config = {},\n          name,\n        } = eventInfo.payload\n        const clusterCollections: cytoscape.Collection[] = Clusters[name as keyof typeof Clusters]\n          .getByItem({\n            cy: graphEditorRef.current?.cy,\n            nodes,\n            edges,\n            ...config,\n          })\n        let clusterLength = (graphConfig?.clusters?.length ?? 0) - 1\n        const clusters = clusterCollections.map((collection) => {\n          const elementIds = collection.map((el) => el.id())\n          clusterLength += 1\n          return {\n            id: R.uuid(),\n            name: `Cluster-${clusterLength}`,\n            ids: elementIds,\n            childClusterIds: [],\n          }\n        }).filter((val) => !!val)\n        if (clusters.length === 0) {\n          alert('There is no clusters with this configuration!')\n        } else {\n          onEventCallback({\n            id: R.uuid(),\n            date: new Date().toString(),\n            type: EVENT.CREATE_CLUSTER,\n            payload: {\n              items: clusters,\n            },\n          })\n        }\n\n        return\n      }\n\n      default:\n        break\n    }\n    onEventCallback({\n      ...(selectedElement ? { elementId: selectedElement.id() } : {}),\n      ...eventInfo,\n      id: R.uuid(),\n      date: new Date().toString(),\n      ...(\n        eventInfo.event\n          ? {\n            event: R.pickPaths([\n              ['data', 'originalEvent', 'metaKey'],\n            ])(eventInfo.event),\n          }\n          : {}\n      ),\n    })\n  }, [onEventCallback, selectedItem?.id])\n  const eventTimeoutsManager = useTimeoutManager(\n    (events ?? []).map((event, index) => ({\n      ...event,\n      after: events?.[index - 1]\n        ? new Date(\n          event.date,\n        ).getMilliseconds() - new Date(events[index - 1].date).getMilliseconds()\n        : 0,\n    })),\n    (event) => {\n      onEventCallback(event)\n    },\n    {\n      deps: [events],\n      renderOnFinished: true,\n      renderOnPlayChanged: true,\n      autostart: false,\n    },\n  )\n  React.useMemo(() => {\n    localDataRef.current.networkStatistics.local = networkStatistics?.local\n  }, [networkStatistics?.local])\n  // React.useEffect(() => {\n  //   if (!config.enableNetworkStatistics) {\n  //     localDataRef.current.networkStatistics.local = networkStatistics?.local\n  //   } else {\n  //     localDataRef.current.networkStatistics.local = R.mergeDeepRight(\n  //       calculateStatistics({ nodes, edges }),\n  //       (networkStatistics?.local ?? {}),\n  //     )\n  //   }\n  // }, [])\n  // React.useMemo(() => {\n  //   if (localDataRef.current.initialized) {\n  //     localDataRef.current.networkStatistics.local = R.mergeDeepRight(\n  //       calculateStatistics({ nodes, edges }),\n  //       (networkStatistics?.local ?? {}),\n  //     )\n  //   }\n  // }, [nodes, edges, networkStatistics?.local, config.enableNetworkStatistics])\n  React.useEffect(() => {\n    localDataRef.current.targetNode = null\n  }, [mode])\n  const graphEditorValue = React.useMemo(() => ({\n    config,\n    eventHistory,\n    events,\n    graphConfig,\n    label,\n    mode,\n    onEvent,\n    playlists,\n    selectedElementIds,\n    localDataRef,\n    selectedItem,\n    selectedElement,\n    networkStatistics,\n    graphEditorRef,\n    nodes,\n    edges,\n  }),\n  [\n    config,\n    eventHistory,\n    events,\n    graphConfig,\n    label,\n    mode,\n    onEvent,\n    playlists,\n    selectedElementIds,\n    selectedItem,\n    selectedElement,\n    networkStatistics,\n    graphEditorRef,\n    nodes,\n    edges,\n  ])\n  if (graphEditorRef.current) {\n    graphEditorRef.current.context = graphEditorValue\n  }\n  return (\n    <GraphEditorProvider\n      value={graphEditorValue}\n    >\n      <Box\n      // @ts-ignore\n        style={{\n          ...style,\n          overflow: 'hidden',\n          position: 'relative',\n        }}\n        onMouseMove={(e: React.MouseEvent<HTMLDivElement>) => {\n          throttle(\n            () => {\n              const {\n                pageY,\n              } = e.nativeEvent\n              const {\n                offsetHeight,\n                offsetTop,\n              } = e.currentTarget\n              if (props.actionBar && props.actionBar.autoOpen) {\n                if (pageY + 25 >= offsetTop + offsetHeight\n                && !props.actionBar?.isOpen) {\n                  return onEvent({\n                    type: EVENT.TOGGLE_ACTION_BAR,\n                    avoidHistoryRecording: true,\n                  })\n                }\n                if (pageY + 50 <= offsetTop + offsetHeight && props.actionBar?.isOpen) {\n                  return onEvent({\n                    type: EVENT.TOGGLE_ACTION_BAR,\n                    avoidHistoryRecording: true,\n                  })\n                }\n              }\n            },\n            1000,\n            'GraphEditorOnMouseMove',\n          )\n        }}\n      >\n        <Graph\n        // @ts-ignore\n          ref={graphEditorRef}\n          style={{\n            width: style?.width,\n            height: style?.height,\n          }}\n          nodes={nodes}\n          edges={edges}\n          {...rest}\n          extraData={{\n            label,\n            extraData: rest.extraData,\n          }}\n          config={{\n            ...graphConfig,\n            graphId,\n          }}\n          selectedElementIds={selectedElementIds}\n          onPress={({ position }) => {\n            if (state.contextMenu.visible) {\n              updateState((draft) => {\n                draft.contextMenu.visible = false\n              })\n            }\n            const { mode } = localDataRef.current.props\n            if (\n            // @ts-ignore\n              [EDITOR_MODE.ADD, EDITOR_MODE.CONTINUES_ADD].includes(mode)\n            ) {\n              onEvent({\n                type: EVENT.ADD_NODE,\n                payload: {\n                  items: [{\n                    id: R.uuid(),\n                    position,\n                    data: {},\n                  }],\n                },\n              })\n              return\n            }\n            onEvent({\n              type: EVENT.PRESS_BACKGROUND,\n              payload: { position },\n              avoidHistoryRecording: true,\n            })\n          }}\n          onBoxSelection={(event) => {\n            const { mode } = localDataRef.current.props\n            const {\n              elementIds,\n            } = event\n            if (EDITOR_MODE.ADD_CLUSTER_ELEMENT === mode) {\n              onEvent({\n                type: EVENT.ADD_CLUSTER_ELEMENT,\n                payload: {\n                  clusterId: localDataRef.current.issuedClusterId,\n                  itemIds,\n                },\n              })\n              return\n            }\n            // TODO: DANGER**\n            localDataRef.current.newClusterBoxSelection.elementIds = elementIds\n            if (elementIds.length > 0) {\n              localDataRef.current.contextMenu.itemIds = elementIds\n              updateState((draft) => {\n                const e = event.event.data.originalEvent\n                draft.contextMenu.visible = true\n                draft.contextMenu.position = getEventClientPosition(e)\n                // getPointerPositionOnViewport(\n                //   graphEditorRef.current.viewport,\n                //   // @ts-ignore\n                //   event.event.data.originalEvent,\n                // )\n              })\n              // TODO: **DANGER\n              onEvent({\n                type: EVENT.BOX_SELECTION,\n                payload: {\n                  elementIds,\n                },\n              })\n            }\n          }}\n          renderNode={({ item, element, ...rest }) => {\n            return (\n              <Graph.View\n                interactive\n                // rightdown={(event) => {\n                //   event.stopPropagation()\n                // }}\n                rightclick={(event) => {\n                  localDataRef.current.contextMenu.itemIds = [element.id()]\n                  updateState((draft) => {\n                    draft.contextMenu.visible = true\n                    draft.contextMenu.position = getEventClientPosition(event.data.originalEvent)\n                  })\n                  event.stopPropagation()\n                }}\n                pointertap={(event) => {\n                  const { mode } = localDataRef.current.props\n                  const elementId = element.id()\n                  if (\n                    [\n                      EDITOR_MODE.DELETE,\n                      // @ts-ignore\n                      EDITOR_MODE.CONTINUES_DELETE].includes(mode)\n                  ) {\n                    onEvent({\n                      type: EVENT.DELETE_NODE,\n                      payload: {\n                        itemIds: [item.id],\n                      },\n                      event,\n                    })\n                    return\n                  }\n                  if (\n                    // @ts-ignore\n                    [EDITOR_MODE.ADD, EDITOR_MODE.CONTINUES_ADD].includes(mode)\n                  ) {\n                    if (localDataRef.current.targetNode) {\n                      onEvent({\n                        type: EVENT.ADD_EDGE,\n                        payload: {\n                          items: [{\n                            id: R.uuid(),\n                            source: localDataRef.current.targetNode.id(),\n                            target: elementId,\n                          }],\n                        },\n                        event,\n                      })\n                      localDataRef.current.targetNode = null\n                    } else {\n                      localDataRef.current.targetNode = element\n                    }\n                    return\n                  }\n                  if (EDITOR_MODE.ADD_CLUSTER_ELEMENT === mode) {\n                    onEvent({\n                      type: EVENT.ADD_CLUSTER_ELEMENT,\n                      payload: {\n                        clusterId: localDataRef.current.issuedClusterId,\n                        itemIds: [elementId],\n                      },\n                    })\n                    return\n                  }\n                  // cyUnselectAll(graphEditorRef.current.cy)\n                  // element.select()\n                  onEvent({\n                    type: EVENT.ELEMENT_SELECTED,\n                    payload: {\n                      itemIds: [element.id()],\n                    },\n                    event,\n                    avoidHistoryRecording: true,\n                  })\n                }}\n              >\n                {(renderNode ?? DefaultRenderNode)({\n                  item,\n                  element,\n                  // @ts-ignore\n                  label: getLabel(\n                    label?.isGlobalFirst\n                      ? (label?.global.nodes ?? label?.nodes?.[item.id])\n                      : (label?.nodes?.[item.id] ?? label?.global.nodes),\n                    item,\n                  ),\n                  labelPath: (label?.isGlobalFirst\n                    ? (label?.global.nodes ?? label?.nodes?.[item.id])\n                    : (label?.nodes?.[item.id] ?? label?.global.nodes)) ?? [],\n                  ...rest,\n                })}\n              </Graph.View>\n            )\n          }}\n          renderEdge={({ item, element, ...rest }) => (\n            <Graph.View\n              interactive\n              rightclick={(event) => {\n                onEvent({\n                  type: EVENT.ELEMENT_SELECTED,\n                  payload: {\n                    itemIds: [element.id()],\n                  },\n                  event,\n                  avoidHistoryRecording: true,\n                })\n                updateState((draft) => {\n                  draft.contextMenu.visible = true\n                })\n                event.stopPropagation()\n              }}\n              pointertap={(event) => {\n                const { mode } = localDataRef.current.props\n                if (\n                  [\n                    EDITOR_MODE.DELETE,\n                    // @ts-ignore\n                    EDITOR_MODE.CONTINUES_DELETE].includes(mode)\n                ) {\n                  onEvent({\n                    type: EVENT.DELETE_EDGE,\n                    payload: {\n                      itemIds: [item.id],\n                    },\n                    event,\n                  })\n                  return\n                }\n                // cyUnselectAll(graphEditorRef.current.cy)\n                // element.select()\n                onEvent({\n                  type: EVENT.ELEMENT_SELECTED,\n                  payload: {\n                    itemIds: [element.id()],\n                  },\n                  avoidHistoryRecording: true,\n                })\n              }}\n            >\n              {\n               // @ts-ignore\n            (renderEdge ?? DefaultRenderEdge)({\n              item,\n              // @ts-ignore\n              label: getLabel(\n                label?.isGlobalFirst\n                  ? (label?.global.edges ?? label?.edges?.[item.id])\n                  : (label?.edges?.[item.id] ?? label?.global.edges),\n                item,\n              ),\n              labelPath: (label?.isGlobalFirst\n                ? (label?.global.edges ?? label?.edges?.[item.id])\n                : (label?.edges?.[item.id] ?? label?.global.edges)) ?? [],\n              element,\n              ...rest,\n            })\n}\n            </Graph.View>\n          )}\n        />\n        {\n        settingsBar && (\n          <SettingsBar\n            {...settingsBar}\n          />\n        )\n      }\n        <DataBar\n          {...dataBar}\n        />\n\n        {\n        actionBar && (\n        <ActionBar\n          onAction={({ type, value }) => {\n            switch (type) {\n              case EVENT.EXPORT_DATA:\n                onEvent({\n                  type: EVENT.EXPORT_DATA,\n                  payload: {\n                    value: extractGraphEditorData(props),\n                  },\n                })\n                break\n              case EVENT.CHANGE_THEME:\n                onEvent({\n                  type: EVENT.CHANGE_THEME,\n                  payload: {\n                    value,\n                  },\n                })\n                break\n\n              default:\n                onEvent({\n                  type: type as EventType,\n                  payload: value,\n                })\n                break\n            }\n          }}\n          {...actionBar}\n        />\n        )\n}\n        <MouseIcon\n        // name={MODE_ICON_MAP[mode]}\n          name={MODE_ICON_MAP_BY_URL[mode]}\n          cursor\n        />\n        <RecordedEventsModal\n          timeoutManager={eventTimeoutsManager}\n          onClose={() => {\n            updateState(() => {})\n            eventTimeoutsManager.clear()\n          }}\n        />\n        <ContextMenu\n          graphEditorRef={graphEditorRef}\n          items={[\n            { value: 'CreateCluster', label: 'Create Cluster' },\n            { value: 'Delete', label: 'Delete' },\n            { value: 'Focus', label: 'Focus' },\n            { value: 'Settings', label: 'Settings' },\n          ]}\n          onSelect={(value) => {\n            const {\n              current: {\n                contextMenu: {\n                  itemIds,\n                },\n              },\n            } = localDataRef\n            switch (value) {\n              case 'CreateCluster':\n                onEvent({\n                  type: EVENT.CREATE_CLUSTER,\n                  payload: {\n                    items: [{\n                      id: R.uuid(),\n                      name: `Cluster-${graphConfig?.clusters?.length ?? 0}`,\n                      ids: itemIds,\n                      childClusterIds: [],\n                    }],\n                  },\n                })\n                break\n              case 'Delete':\n                onEvent({\n                  type: EVENT.DELETE_NODE,\n                  payload: {\n                    itemIds,\n                  },\n                })\n                break\n              case 'Settings':\n                onEvent({\n                  type: EVENT.ELEMENT_SETTINGS,\n                  payload: {\n                    itemIds,\n                  },\n                })\n                break\n              case 'Focus':\n                onEvent({\n                  type: EVENT.FOCUS,\n                  payload: {\n                    itemIds,\n                  },\n                })\n                break\n              default:\n                break\n            }\n            localDataRef.current.newClusterBoxSelection.elementIds = []\n            localDataRef.current.contextMenu.itemIds = []\n            updateState((draft) => {\n              draft.contextMenu.visible = false\n            })\n          }}\n          position={state.contextMenu.position}\n          open={state.contextMenu.visible}\n        />\n      </Box>\n      <PreferencesModal\n        {...preferencesModal}\n      />\n      {\n        Object.keys(modals).map((modalName) => (\n          <ModalComponent\n            key={modalName}\n            {...(modals[modalName] ?? {})}\n            name={modalName}\n          />\n        ))\n      }\n      <Backdrop\n        sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\n        open={isLoading || state.isLoading}\n      >\n        <CircularProgress color=\"inherit\" />\n      </Backdrop>\n      <IconButton\n        onClick={()=> onEvent({\n          type: EVENT.DEFOCUS,\n        })}\n        style={{\n          position: 'absolute',\n          left: '49%',\n          visibility: isFocusMode ? 'visible' : 'hidden',\n        }}\n      >\n<Icon \n        name=\"cancel_rounded\"\n        \n      />\n      </IconButton>\n      \n    </GraphEditorProvider>\n\n  )\n}\n\nconst convert = (object: any) => {\n  const cache: any[] = []\n  return JSON.stringify(object, (key, value) => {\n    if (typeof value === 'object' && value !== null) {\n      // Duplicate reference found, discard key\n      if (cache.includes(value)) return null\n\n      // Store value in our collection\n      cache.push(value)\n    }\n    return value\n  })\n}\nconst extractGraphEditorData = (props: GraphEditorProps) => convert({\n  graphConfig: props.graphConfig,\n  label: props.label,\n  // settingsBar: R.omit(['header', 'footer'], props.settingsBar),\n  dataBar: R.omit(['header', 'footer'], props.dataBar),\n  actionBar: R.omit(['right', 'left'], props.actionBar),\n  eventHistory: props.eventHistory,\n  mode: props.mode,\n  nodes: props.nodes,\n  edges: props.edges,\n})\n\nexport const GraphEditor = wrapComponent<\nPropsWithRef<GraphEditorRef, GraphEditorProps>\n>(\n  GraphEditorElement,\n  {\n    isEqual: (item, otherItem) => {\n      if (R.is(Function, item)) {\n        return true\n      }\n      return item === otherItem\n    }, // R.equalsExclude(R.is(Function)),\n    isForwardRef: true,\n  },\n)\n","import React from 'react'\nimport {\n  createTimeoutManager,\n  Timer,\n  TimeoutInstance,\n} from './TimeoutManager'\n\ntype Options = {\n  deps?: any[];\n  renderOnTimeout?: boolean;\n  renderOnFinished?: boolean;\n  renderOnPlayChanged?: boolean;\n  onFinish?: () => void\n  autostart?: boolean;\n}\n\nexport const useTimeoutManager = <T extends Timer<Record<string, any>>>(\n  timers: T[],\n  callback: (timer: T, index: number, timeout: TimeoutInstance) => void,\n  options: Options = {},\n) => {\n  const {\n    deps = [],\n    renderOnTimeout = false,\n    renderOnFinished = false,\n    renderOnPlayChanged = false,\n    onFinish,\n    autostart = true,\n  } = options\n  const [, setState] = React.useState({})\n  const eventTimeoutsManager = React.useMemo(() => createTimeoutManager(\n    timers,\n    (timer, index, timeout) => {\n      callback(timer, index, timeout)\n      if (renderOnTimeout) {\n        setState({})\n      }\n    },\n    {\n      onFinish: () => {\n        onFinish?.()\n        if (renderOnFinished) {\n          setState({})\n        }\n      },\n      onPlayChanged: () => {\n        if (renderOnPlayChanged) {\n          setState({})\n        }\n      },\n      autostart,\n    },\n  ), deps)\n  React.useEffect(\n    () => () => {\n      eventTimeoutsManager.clear()\n    },\n    deps,\n  )\n  return eventTimeoutsManager\n}\n","import React from 'react'\nimport { Button, Slider, Typography } from '@mui/material'\n\nconst SliderUIField = ({ formData, schema, onChange, name }) => {\n\n  return (\n    <>\n      <Typography id={`${schema.title}-continuous-slider`} gutterBottom>\n        {schema.title ?? name}\n      </Typography>\n      <Slider\n        value={formData ?? [schema.minimum, schema.maximum]}\n        onChange={(e) => {\n          onChange(e.target.value)\n        }}\n        valueLabelDisplay=\"auto\"\n        aria-labelledby={`${schema.title}-continuous-slider`}\n        min={schema.minimum}\n        max={schema.maximum}\n      />\n    </>\n  )\n}\nexport const getFilterSchema = (props: {} = {}) => {\n  const {\n  } = props\n  return {\n    schema: {\n      title: 'Filter',\n      type: 'object',\n      required: [\n        // 'title',\n        // 'year',\n        // 'rechtsgebied',\n        // 'adjustLayout',\n      ],\n      additionalProperties: false,\n      properties: {\n        // label: {\n        //   type: 'string',\n        // },\n        year: {\n          type: 'array',\n          items: {\n            type: 'number',\n          },\n          minimum: 1969,\n          maximum: 2015,\n        },\n        degree: {\n          type: 'array',\n          items: {\n            type: 'number',\n          },\n          minimum: 0,\n          maximum: 100,\n        },\n        indegree: {\n          type: 'array',\n          items: {\n            type: 'number',\n          },\n          minimum: 0,\n          maximum: 100,\n        },\n        outdegree: {\n          type: 'array',\n          items: {\n            type: 'number',\n          },\n          minimum: 0,\n          maximum: 100,\n        },\n      },\n    },\n    uiSchema: {\n      'year': {\n        'ui:field': SliderUIField,\n      },\n      'degree': {\n        'ui:field': SliderUIField,\n      },\n      'indegree': {\n        'ui:field': SliderUIField,\n      },\n      'outdegree': {\n        'ui:field': SliderUIField,\n      },\n    }\n  }\n}\n\nexport const getQueryBuilderSchema = () => {\n  return {\n    // children: <div></div>,\n    schema: {\n      title: 'Fetch Data',\n      type: 'object',\n      required: [\n        // 'title',\n        // 'year',\n        // 'rechtsgebied',\n        // 'adjustLayout',\n      ],\n      additionalProperties: false,\n      properties: {\n        DataSources: {\n          type: 'array',\n          title: 'Data sources',\n          uniqueItems: true,\n          items: {\n            enum: [\n              'RS',\n              'ECHR',\n              'Eurlex'\n            ],\n            enumNames: [\n              'Rechtspraak',\n              'European Court of Human Rights',\n              'Eurlex'\n            ],\n            type: 'string'\n          },\n        },\n        Eclis: {\n          type: 'string',\n          title: 'ECLIs'\n        },\n        Keywords: {\n          type: 'string',\n          title: 'Keywords'\n        },\n        Articles: {\n          type: 'string',\n          title: 'Articles'\n        },\n        Date: {\n          type: 'array',\n          title: 'Date',\n          items: {\n            type: 'number',\n          },\n          minimum: 1969,\n          maximum: 2015,\n        },\n        DegreesSources: {\n          type: 'integer',\n          title: 'Degrees Sources',\n          minimum: 1,\n          maximum: 5,\n        },\n        DegreesTargets: {\n          type: 'integer',\n          title: 'Degrees Targets',\n          minimum: 1,\n          maximum: 5,\n        },\n        Instances: {\n          type: 'array',\n          title: 'Instances',\n          uniqueItems: true,\n          items: {\n            enum: [\n              '',\n              'Hoge Raad',\n              'Raad van State',\n              'Centrale Raad van Beroep',\n              'College van Beroep voor het bedrijfsleven',\n              'Gerechtshof Arnhem-Leeuwarden'\n            ],\n            type: 'string'\n          },\n        },\n        Domains: {\n          type: 'array',\n          title: 'Domains',\n          uniqueItems: true,\n          items: {\n            enum: [\n              '',\n              'Not',\n              'Sure',\n              'What'\n            ],\n            type: 'string'\n          },\n        },\n        Doctypes: {\n          type: 'array',\n          title: 'Document types',\n          uniqueItems: true,\n          items: {\n            enum: [\n              '',\n              'DEC',\n              'OPI'\n            ],\n            type: 'string'\n          },\n        },\n        LiPermission: {\n          type: 'boolean',\n          title: 'LI Permission',\n        },\n      },\n    },\n    uiSchema: {\n      'Date': {\n        'ui:field': SliderUIField,\n      },\n      // 'degreesSources': {\n      //   'ui:field': SliderUIField,\n      // },\n      // 'degreesTargets': {\n      //   'ui:field': SliderUIField,\n      // },\n      // 'source':{\n      //   'ui:widget': 'checkboxes'\n      // },\n      // 'liPermission':{\n      //   'ui:widget': 'select'\n      // },\n    }\n  }\n}\n\nexport const getFetchSchema = (props: { onPopupPress: () => void }) => {\n  const {\n    onPopupPress\n  } = props\n  return {\n    children: <div></div>,\n    schema: {\n      title: 'Fetch Data',\n      type: 'object',\n      additionalProperties: false,\n      properties: {\n        popup: {\n          title: 'Build Query',\n          type: 'boolean',\n        },\n      },\n    },\n    uiSchema: {\n      'Date': {\n        'ui:field': SliderUIField,\n      },\n      // 'degreesSources': {\n      //   'ui:field': SliderUIField,\n      // },\n      // 'degreesTargets': {\n      //   'ui:field': SliderUIField,\n      // },\n      // 'source':{\n      //   'ui:widget': 'checkboxes'\n      // },\n      // 'liPermission':{\n      //   'ui:widget': 'select'\n      // },\n      'popup': {\n        'ui:field': ({ formData, schema, onChange }) => {\n          return (\n            <Button onClick={onPopupPress}>Open Query Builder</Button>\n          )\n        },\n      },\n    }\n  }\n}\nexport const VIEW_CONFIG_SCHEMA = {\n  schema: {\n    title: 'Visualisation',\n    type: 'object',\n    required: [],\n    additionalProperties: false,\n    properties: {\n      nodeSize: {\n        \"type\": \"string\",\n        \"title\": \"Node Size\",\n        \"enum\": [\n          \"degree\",\n          \"out_degree\",\n          \"in_degree\",\n          \"year\",\n        ]\n      },\n      nodeColor: {\n        \"type\": \"string\",\n        \"title\": \"Node Color\",\n        \"enum\": [\n          \"community\",\n          \"degree\",\n          \"out_degree\",\n          \"in_degree\",\n          \"year\",\n        ]\n      },\n    },\n  },\n}\n\nexport const RECORDED_EVENTS = [\n  {\n    \"type\": \"@\",\n    \"data\": {\n      \"type\": \"PRESS_BACKGROUND\",\n      \"payload\": {\n        \"x\": 1552.63671875,\n        \"y\": 2627.20703125\n      },\n      \"event\": {}\n    },\n    \"date\": \"2021-02-26T07:59:37.065Z\",\n  },\n  {\n    \"type\": \"@\",\n    \"data\": {\n      \"type\": \"ELEMENT_SELECTED\",\n      \"elementId\": \"http://deeplink.rechtspraak.nl/uitspraak?id=ECLI:NL:HR:2009:BF8875\",\n      \"event\": {\n        \"data\": {\n          \"originalEvent\": {\n            \"metaKey\": false\n          }\n        }\n      }\n    },\n    \"date\": \"2021-02-26T07:59:37.992Z\",\n  },\n  {\n    \"type\": \"@\",\n    \"data\": {\n      \"type\": \"ELEMENT_SELECTED\",\n      \"elementId\": \"http://deeplink.rechtspraak.nl/uitspraak?id=ECLI:NL:HR:2009:BJ7832\",\n      \"event\": {\n        \"data\": {\n          \"originalEvent\": {\n            \"metaKey\": false\n          }\n        }\n      }\n    },\n    \"date\": \"2021-02-26T07:59:39.640Z\",\n  },\n  {\n    \"type\": \"@\",\n    \"data\": {\n      \"type\": \"ELEMENT_SELECTED\",\n      \"elementId\": \"http://deeplink.rechtspraak.nl/uitspraak?id=ECLI:NL:HR:2011:BR5223\",\n      \"event\": {\n        \"data\": {\n          \"originalEvent\": {\n            \"metaKey\": false\n          }\n        }\n      }\n    },\n    \"date\": \"2021-02-26T07:59:41.945Z\",\n  },\n  {\n    \"type\": \"@\",\n    \"data\": {\n      \"type\": \"ELEMENT_SELECTED\",\n      \"elementId\": \"http://deeplink.rechtspraak.nl/uitspraak?id=ECLI:NL:HR:2012:BV1295\",\n      \"event\": {\n        \"data\": {\n          \"originalEvent\": {\n            \"metaKey\": false\n          }\n        }\n      }\n    },\n    \"date\": \"2021-02-26T07:59:44.725Z\",\n  }\n]","import * as R from 'colay/ramda'\n\ntype DoActions = any[]\ntype UndoActions = any[]\n\ntype HistoryItem = {\n  id: string;\n  do: DoActions;\n  undo: UndoActions;\n}\ntype HistoryItemOptionalId = Omit<HistoryItem, 'id'> & { id?: string; }\n\ntype HistoryRecord = {\n  items: HistoryItem[]\n  currentIndex: number;\n}\n\nconst DEFAULT_INDEX = 0\nconst DEFAULT_HISTORY_DATA_ITEM: HistoryRecord = {\n  items: [],\n  currentIndex: DEFAULT_INDEX,\n}\n\nconst EVENT_TYPE = {\n  REDO: 'REDO',\n  UNDO: 'UNDO',\n  UNDO_ALL: 'UNDO_ALL',\n  REDO_ALL: 'REDO_ALL',\n} as const\n\n// export type History = {\n//   record: HistoryRecord;\n//   add: (item: HistoryItem) => void;\n//   clear: () => void;\n//   new: () => void;\n//   set: (historyRecord: HistoryRecord) => void;\n//   redo: () => void;\n//   redoAll: () => void;\n//   undo: () => void;\n//   undoAll: () => void;\n//   createRoot: () => void;\n//   clearRoot: () => void;\n//   getRoot: () => HistoryRecord;\n//   setRoot: (historyRecord: HistoryRecord) => void;\n//   EVENT_TYPE: typeof EVENT_TYPE\n// }\nexport type History = ReturnType<typeof createHistory>\n\ntype Event = {\n  type: keyof typeof EVENT_TYPE;\n  item: HistoryItem;\n  actions: (DoActions|UndoActions);\n  items?: HistoryItem[];\n}\n\ntype CreateHistoryOptions = {\n  onEvent: (\n    event: Event\n  ) => boolean|void;\n}\n\nexport const createHistory = (options: CreateHistoryOptions) => {\n  const {\n    onEvent = () => {},\n  } = options\n  const ref = {\n    current: null as unknown as History,\n  }\n  const record: HistoryRecord = R.clone(DEFAULT_HISTORY_DATA_ITEM)\n\n  const history = {\n    record,\n    add: (item: HistoryItemOptionalId) => {\n      const { currentIndex, items } = record\n      record.items = R.slice(\n        0,\n        currentIndex,\n      )(items)\n      record.items.push({\n        id: R.uuid(),\n        ...item,\n      })\n      record.currentIndex = record.items.length\n    },\n    clear: () => {\n      const {\n        current: history,\n      } = ref\n      history.set(R.clone(DEFAULT_HISTORY_DATA_ITEM))\n    },\n    set: (newHistoryRecord: HistoryRecord) => {\n      Object.keys(newHistoryRecord).forEach((key) => {\n        // @ts-ignore\n        record[key] = newHistoryRecord[key]\n      })\n    },\n    undo: () => {\n      const item = record?.items?.[record.currentIndex - 1]\n      if (item) {\n        const passed = onEvent({\n          item,\n          type: EVENT_TYPE.UNDO,\n          actions: item.undo,\n        }) ?? true\n        if (passed) {\n          record.currentIndex -= 1\n        }\n      }\n    },\n    redo: () => {\n      const { currentIndex } = record\n      const item = record?.items?.[currentIndex]\n      if (item) {\n        const passed = onEvent({\n          item,\n          type: EVENT_TYPE.REDO,\n          actions: item.do,\n        }) ?? true\n        if (passed) {\n          record.currentIndex = currentIndex + 1\n        }\n      }\n    },\n    undoAll: () => R.when(\n      R.allPass([\n        R.isNotNil,\n        () => record.items.length > record.currentIndex,\n      ]),\n      () => {\n        const {\n          items,\n        } = record\n        const relatedItems = R.slice(0, record.currentIndex + 1)(items)\n        const undoList = R.unnest(\n          R.map(\n            (item) => item.undo,\n            relatedItems,\n          ),\n        ) as UndoActions[]\n        const doList = R.unnest(\n          R.map(\n            (item) => item.do,\n            relatedItems,\n          ),\n        ) as DoActions[]\n        onEvent({\n          item: {\n            id: R.uuid,\n            do: doList,\n            undo: undoList,\n          },\n          actions: undoList,\n          items: relatedItems,\n          type: EVENT_TYPE.UNDO_ALL,\n        })\n        record.currentIndex = DEFAULT_INDEX\n      },\n    )(record),\n    redoAll: () => R.when(\n      R.allPass([\n        R.isNotNil,\n        () => record.items.length > record.currentIndex,\n      ]),\n      () => {\n        const {\n          items,\n        } = record\n        const relatedItems = R.slice(0, record.currentIndex + 1)(items)\n        const undoList = R.unnest(\n          R.map(\n            (item) => item.undo,\n            relatedItems,\n          ),\n        ) as UndoActions[]\n        const doList = R.unnest(\n          R.map(\n            (item) => item.do,\n            relatedItems,\n          ),\n        ) as DoActions[]\n        onEvent({\n          item: {\n            id: R.uuid,\n            do: doList,\n            undo: undoList,\n          },\n          actions: doList,\n          items: relatedItems,\n          type: EVENT_TYPE.REDO_ALL,\n        })\n        record.currentIndex = DEFAULT_INDEX\n      },\n    )(record),\n    delete: (ids: string[]) => {\n      record.items = record.items.filter((item, index) => {\n        const deleted = ids.includes(item.id)\n        if (deleted && index < record.currentIndex) {\n          record.currentIndex -= 1\n        }\n        return !deleted\n      })\n    },\n    getEventIdsByDoItemIds: (ids: string[]) => {\n      const events = record.items.filter((item) => {\n        const doItems = item.do.map((doItem) => doItem.id)\n        const intersection = R.intersection(doItems, ids)\n        return intersection.length > 0\n      })\n      return events.map((event) => event.id)\n    },\n    reorder: (fromIndex: number, toIndex: number) => {\n      record.items = R.reorder(fromIndex, toIndex)(record.items)\n    },\n  }\n  ref.current = history\n  return history\n}\n","import React from 'react'\nimport {\n  Modal,\n  Paper,\n  Typography,\n  Divider,\n  Slide,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Link,\n  Breadcrumbs,\n  Button,\n  Collapse,\n} from '@mui/material'\nimport { Icon } from '@components/Icon'\nimport { useGraphEditor } from '@hooks'\nimport { EVENT } from '@constants'\nimport {\n  View, DataRender, dataRenderPath, isReact,\n} from 'colay-ui'\nimport Form from '@rjsf/material-ui'\nimport ExpandLess from '@mui/icons-material/ExpandLess'\nimport ExpandMore from '@mui/icons-material/ExpandMore'\nimport * as R from 'colay/ramda'\nimport { useImmer } from 'colay-ui/hooks/useImmer'\n\ntype SidebarItemData = {\n  label: string;\n  children?: SidebarItemData[];\n  icon?: string;\n  id: string\n} | string\n\nexport type PreferencesModalProps = {\n  isOpen?: boolean;\n  sidebar?: SidebarItemData[];\n  components?: Record<string, React.ReactNode>;\n}\n\nconst getId = (sidebarItem: SidebarItemData) => sidebarItem?.id ?? sidebarItem\n\nexport const ElementSettingsModal = (props: PreferencesModalProps) => {\n  const {\n    sidebar: sidebar_ = MOCK_SIDEBAR_DATA,\n    components = MOCK_COMPONENTS,\n  } = props\n\n  const [\n    {\n      onEvent,\n      graphEditorLocalDataRef,\n    },\n  ] = useGraphEditor(\n    (editor) => ({\n      onEvent: editor.onEvent,\n      graphEditorLocalDataRef: editor.localDataRef,\n    }),\n  )\n  const sidebar = React.useMemo(() => {\n    const normalize = (sidebar: SidebarItemData) => {\n      if (typeof sidebar === 'string') {\n        return {\n          id: sidebar,\n          label: sidebar,\n        }\n      }\n      return {\n        label: sidebar.id,\n        ...sidebar,\n        children: sidebar.children?.map((item) => normalize(item)) ?? [],\n      }\n    }\n    return sidebar_?.map((item) => normalize(item)) ?? []\n  }, [sidebar_])\n  const [state, update] = useImmer({\n    componentId: getId(sidebar[0]),\n    selectedPath: [getId(sidebar[0])],\n  })\n\n  const onSelect = React.useCallback((path) => {\n    const item = dataRenderPath(['children'], path, sidebar)\n    update((draft) => {\n      draft.selectedPath = path\n      draft.componentId = getId(item)\n    })\n  }, [])\n\n  // @ts-ignore\n  const drawer = React.useMemo(() => createDrawer({\n    sidebar,\n    onSelect,\n    selectedPath: state.selectedPath,\n  }), [sidebar, components, state.selectedPath])\n  const Component = components[state.componentId] ?? React.Fragment\n  const form = components[state.componentId]\n  return (\n    <Paper\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        width: '80vw',\n        height: '80vh',\n      }}\n    >\n      <View>\n        <Typography variant=\"h6\">Preferences</Typography>\n      </View>\n      <View\n        style={{\n          flexDirection: 'row',\n        }}\n      >\n        <View\n          style={{\n            // width: '30%',\n            marginRight: 4,\n            flexDirection: 'row',\n          }}\n        >\n          <Slide\n            in\n          >\n            {drawer}\n          </Slide>\n          <Divider\n            orientation=\"vertical\"\n            flexItem\n          />\n        </View>\n        <View>\n          {/* <Breadcrumbs aria-label=\"breadcrumb\">\n            {\n              R.dropLast(1, state.selectedPath).map((pathName) => (\n                <Link\n                  color=\"inherit\"\n                  href=\"/\"\n                >\n                  {pathName}\n                </Link>\n              ))\n            }\n            <Typography color=\"text.primary\">{R.last(state.selectedPath)}</Typography>\n          </Breadcrumbs> */}\n          {\n      !isReact.compatible(Component)\n        ? (\n          <Paper\n            style={{\n              maxWidth: '80%',\n              maxHeight: '90%',\n              overflow: 'scroll',\n              padding: 2,\n            }}\n          >\n            <Form\n              {...form}\n              style={{\n                width: '100%',\n                height: '100%',\n              }}\n              schema={R.omit(['title'])(form.schema)}\n              onSubmit={({ formData }) => {\n                onEvent({\n                  type: EVENT.ELEMENT_SETTINGS_FORM_SUBMIT,\n                  payload: {\n                    name: state.componentId,\n                    value: formData,\n                    itemIds: graphEditorLocalDataRef.current.contextMenu.itemIds,\n                  },\n                })\n                graphEditorLocalDataRef.current.contextMenu.itemIds = []\n              }}\n            >\n              {\n              form.children ?? (\n              <Button\n                type=\"submit\"\n                fullWidth\n                variant=\"contained\"\n              >\n                Save\n              </Button>\n              )\n}\n            </Form>\n          </Paper>\n        )\n        : <Component />\n      }\n          {/* <Form\n              schema={{\n                type: 'object',\n                required: [\n                  'historyTabVisible',\n                  'playlistTabVisible',\n                ],\n                properties: {\n                  labelTextSize: {\n                    type: 'number',\n                    title: 'Label Text Size',\n                  },\n                  historyTabVisible: {\n                    type: 'boolean',\n                    title: 'History Tab Visible',\n                  },\n                  playlistTabVisible: {\n                    type: 'boolean',\n                    title: 'Playlist Tab Visible',\n                  },\n                },\n              }}\n              uiSchema={{\n                'ui:options': {\n                  label: false,\n                },\n              }}\n              // onSubmit={onSubmitCallback}\n            /> */}\n        </View>\n      </View>\n    </Paper>\n  )\n}\n\ntype CreateDrawerParams = {\n  sidebar: SidebarItemData[];\n  onSelect: (name: string) => void\n  selectedPath: string[]\n}\nconst createDrawer = (params: CreateDrawerParams) => {\n  const {\n    sidebar,\n    onSelect,\n    selectedPath,\n  } = params\n  return (\n    <View>\n      {/* <Toolbar /> */}\n      <Divider />\n      <List>\n        <DataRender\n      // @ts-ignore\n          data={sidebar}\n          extraData={[selectedPath, onSelect]}\n          accessor={['children']}\n          renderItem={(params) => {\n            const {\n              children,\n            } = params\n            const item = params.item as unknown as SidebarItemData\n            return (\n              <SidebarItem\n                item={item}\n                onSelect={onSelect}\n                path={params.path}\n                selectedPath={selectedPath}\n              >\n                {children}\n              </SidebarItem>\n            )\n          }}\n        />\n      </List>\n    </View>\n  )\n}\n\ntype SidebarItemProps = {\n  item: SidebarItemData;\n  children: React.ReactNode;\n  onSelect: (name: string)=>void\n}\nconst SidebarItem = (props: SidebarItemProps) => {\n  const {\n    children,\n    item: propItem,\n    onSelect,\n    path,\n    selectedPath,\n  } = props\n  const [open, setOpen] = React.useState(false)\n  const item = (R.is(String)(propItem) ? {\n    label: propItem,\n    id: propItem,\n  } : propItem) as Exclude<SidebarItemData, string>\n  const handleClick = () => {\n    onSelect(path)\n    setOpen(!open)\n  }\n  const hasChildren = !!item.children\n  const selected = selectedPath.join('').includes(path.join(''))\n  return (\n    <>\n      <ListItem\n        button\n        onClick={handleClick}\n        selected={selected}\n      >\n        <ListItemIcon>\n          {item.icon}\n        </ListItemIcon>\n        <ListItemText primary={item.label} />\n        {hasChildren ? (open ? <ExpandLess /> : <ExpandMore />) : null}\n      </ListItem>\n      <Collapse\n        in={open}\n        timeout=\"auto\"\n        unmountOnExit\n      >\n        <List\n          component=\"div\"\n          disablePadding\n          sx={{ ml: 2 }}\n        >\n          {children}\n        </List>\n      </Collapse>\n    </>\n  )\n}\n\nconst MOCK_COMPONENTS = {\n  General: () => <div>General</div>,\n  Visualization: {\n    schema: {\n      type: 'object',\n      properties: {\n        size: {\n          title: 'Size',\n          type: 'integer',\n          minimum: 10,\n          maximum: 50,\n        },\n        fontSize: {\n          title: 'Font Size',\n          type: 'integer',\n          minimum: 10,\n          maximum: 50,\n        },\n        backgroundColor: {\n          type: 'string',\n          title: 'color picker',\n          default: '#151ce6',\n        },\n        textColor: {\n          type: 'string',\n          title: 'color picker',\n          default: '#151ce6',\n        },\n      },\n    },\n    uiSchema: {\n      size: {\n        'ui:widget': 'range',\n      },\n      fontSize: {\n        'ui:widget': 'range',\n      },\n      backgroundColor: {\n        'ui:widget': 'color',\n      },\n      textColor: {\n        'ui:widget': 'color',\n      },\n    },\n  },\n  // Visualization: () => <div>Visualization</div>,\n  Filter: () => <div>Filter</div>,\n  History: () => <div>History</div>,\n  Settings: () => <div>Settings</div>,\n}\n\nconst MOCK_SIDEBAR_DATA = [\n  {\n    icon: <Icon name=\"settings\" />,\n    id: 'General',\n    children: [\n      'Visualization',\n    ],\n  },\n  // {\n  //   icon: <Icon name=\"bookmark\" />,\n  //   id: 'Visualization',\n  //   children: [\n  //     {\n  //       icon: <Icon name=\"filter\" />,\n  //       id: 'Filter',\n  //       children: [\n  //         'History',\n  //       ],\n  //     },\n  //     'Settings',\n  //   ],\n  // },\n]\n","import { Graph } from '@components'\nimport { GraphEditorProps } from '@components/GraphEditor'\nimport GraphLayouts from '@core/layouts'\nimport {\n  ControllerState, DataItem, EditorMode, EventInfo,\n  GraphEditorRef, GraphLabelData, RDFType, RecordedEvent,\n} from '@type'\nimport {\n  getSelectedItemByElement,\n  getUndoEvents,\n  getSelectedElementInfo,\n} from '@utils'\nimport {\n  EDITOR_MODE, EVENT,\n} from '@constants'\nimport { createHistory } from '@utils/createHistory'\nimport { useImmer } from 'colay-ui/hooks/useImmer'\nimport { Position } from 'colay-ui/type'\nimport { download } from 'colay-ui/utils'\nimport * as R from 'colay/ramda'\nimport * as PIXI from 'pixi.js'\nimport React from 'react'\nimport * as V from 'colay/vector'\nimport {\n  ElementSettingsModal,\n} from '@components/GraphEditor/modals/ElementSettingsModal'\n\n// type ControllerOptions = {\n//   // onEvent?: (info: EventInfo, draft: ControllerState) => boolean;\n// }\n\ntype UseControllerData = Pick<\nGraphEditorProps,\n'nodes' | 'edges' | 'mode'\n| 'actionBar' | 'dataBar' | 'settingsBar'\n| 'graphConfig' | 'events' | 'label' | 'playlists' | 'selectedElementIds'\n| 'modals' | 'isFocusMode'\n> & {\n  onEvent?: (info: EventInfo & {\n    graphEditor: GraphEditorRef;\n  }, draft: ControllerState) => boolean;\n}\n\n// export type UseControllerResult = [\n//   UseControllerData,\n//   {},\n// ]\n\nconst closeAllBars = (draft:UseControllerData) => {\n  draft.actionBar!.isOpen = false\n  draft.dataBar!.isOpen = false\n  draft.settingsBar!.isOpen = false\n}\n\nexport const useController = (\n  useControllerData: Partial<UseControllerData>,\n  _graphEditorRef?: React.MutableRefObject<GraphEditorRef>,\n  // options: ControllerOptions = {},\n) => {\n  const controllerConfig: UseControllerData = React.useMemo<UseControllerData>(\n    () => R.mergeDeepAll([\n      DEFAULT_CONTROLLER_CONFIG,\n      useControllerData,\n    ]) as UseControllerData, [], // useControllerData\n  )\n  const eventHistory = React.useMemo(() => createHistory({\n    onEvent: (event) => {\n      const {\n        actions,\n      } = event\n      actions.map(onEvent)\n    },\n  }), [])\n  const localGraphEditorRef = React.useRef(null)\n  const graphEditorRef = _graphEditorRef ?? localGraphEditorRef\n  const localDataRef = React.useRef({\n    recordedEvents: [] as RecordedEvent[],\n    // targetNode: null,\n  })\n  const [state, updateState] = useImmer(controllerConfig)\n  type UpdateFunction = (draft: UseControllerData, config: {\n    graphEditorRef: React.MutableRefObject<GraphEditorRef>\n  }) => void\n  const update = React.useCallback( (updater: UpdateFunction) => {\n    updateState( (draft) => {\n      // @ts-ignore\n      updater(draft, { graphEditorRef })\n    })\n  }, [updateState, graphEditorRef])\n  const onEvent = React.useCallback((eventInfo: EventInfo) => {\n    const {\n      type,\n      payload = {},\n      index = 0,\n      dataItem = {} as DataItem,\n      event,\n      elementId,\n      avoidEventRecording,\n      avoidHistoryRecording,\n    } = eventInfo\n    const graphEditor = graphEditorRef.current!\n    const element = elementId\n      ? graphEditor.cy.$id(`${elementId}`)\n      : null\n    // const isNode = element?.isNode()\n    // const targetPath = isNode ? 'nodes' : 'edges'\n    update( (draft) => {\n      try {\n        if (!avoidHistoryRecording) {\n          const {\n            addHistory,\n            events: undoEvents,\n            // @ts-ignore\n          } = getUndoEvents(\n            [eventInfo], { graphEditor, controllerState: state },\n          )\n          if (addHistory) {\n            eventHistory.add({\n              do: [\n                {\n                  ...eventInfo,\n                  event,\n                  avoidEventRecording: true,\n                  avoidHistoryRecording: true,\n                },\n              ],\n              undo: undoEvents.map((e) => ({\n                ...e,\n                avoidEventRecording: true,\n                avoidHistoryRecording: true,\n              })),\n            })\n          }\n        }\n        if (\n          draft.actionBar?.eventRecording\n          && type !== EVENT.TOGGLE_RECORD_EVENTS\n          && !avoidEventRecording\n        ) {\n          localDataRef.current.recordedEvents.push({\n            ...eventInfo,\n            event,\n          })\n        }\n        const isAllowedToProcess =  controllerConfig.onEvent?.({\n          ...eventInfo,\n          graphEditor,\n          // @ts-ignore\n          update,\n          state,\n        }, draft)\n        if (isAllowedToProcess === false) {\n          return\n        }\n        const {\n          item: eventRelatedItem,\n        } = (element && getSelectedItemByElement(element, draft)) ?? {}\n        const targetDataList = eventRelatedItem?.data!// getSelectedItemByElement(element, draft).data\n        switch (type) {\n          case EVENT.REDO_EVENT:\n            eventHistory.redo()\n            break\n          case EVENT.UNDO_EVENT:\n            eventHistory.undo()\n            break\n          case EVENT.UPDATE_DATA: {\n            const {\n              selectedItem,\n            } = getSelectedElementInfo(draft, graphEditor)\n            selectedItem!.data = payload.value\n            break\n          }\n          case EVENT.ADD_DATA:\n            targetDataList.push({\n              ...payload,\n              value: [payload.value],\n            })\n            break\n          case EVENT.ADD_NODE: {\n            const {\n              items,\n              edgeItems,\n            } = payload\n            draft.nodes = draft.nodes.concat(items)\n            draft.edges = draft.edges.concat(edgeItems ?? [])\n            // const { position } = payload\n            // draft.nodes.push({\n            //   id: `${draft.nodes.length + 1}`, // R.uuid(),\n            //   position,\n            //   data: [],\n            // })\n            if (draft.mode === EDITOR_MODE.ADD) {\n              draft.mode = EDITOR_MODE.DEFAULT\n            }\n            break\n          }\n          case EVENT.DELETE_NODE: {\n            const {\n              itemIds = [],\n            } = payload as {\n              itemIds: { id: string } []\n            }\n            // const itemIds = items.map((item) => item.id)\n            // const itemIndex = draft.nodes.findIndex((node) => node.id === item.id)\n            // draft.nodes.splice(itemIndex, 1)\n            draft.nodes = draft.nodes.filter((nodeItem) => !itemIds.includes(nodeItem.id))\n            draft.edges = draft.edges.filter(\n              (edgeItem) => !itemIds.includes(edgeItem.source)\n              && !itemIds.includes(edgeItem.target),\n            )\n            if (draft.mode === EDITOR_MODE.DELETE) {\n              draft.mode = EDITOR_MODE.DEFAULT\n            }\n            break\n          }\n          case EVENT.ADD_EDGE: {\n            draft.edges = draft.edges.concat(payload.items)\n            // const {\n            //   id,\n            //   source,\n            //   target,\n            // } = payload\n            // draft.edges.push({\n            //   id,\n            //   source,\n            //   target,\n            //   data: {},\n            // })\n            if (draft.mode === EDITOR_MODE.ADD) {\n              draft.mode = EDITOR_MODE.DEFAULT\n            }\n            break\n          }\n          case EVENT.DELETE_EDGE: {\n            const {\n              itemIds = [],\n            } = payload as {\n              itemIds: { id: string } []\n            }\n            // const itemIds = items.map((item) => item.id)\n            draft.edges = draft.edges.filter((edgeItem) => !itemIds.includes(edgeItem.id))\n            if (draft.mode === EDITOR_MODE.DELETE) {\n              draft.mode = EDITOR_MODE.DEFAULT\n            }\n            break\n          }\n          case EVENT.PRESS_BACKGROUND: {\n            draft.selectedElementIds = []\n            break\n          }\n          case EVENT.ELEMENT_SELECTED_WITH_ZOOM: {\n            const {\n              itemIds,\n            } = payload\n            draft.selectedElementIds = itemIds\n            const {\n              selectedElement,\n            } = getSelectedElementInfo({\n              ...state,\n              selectedElementIds: itemIds,\n            }, graphEditor)\n            if (selectedElement) {\n              const {\n                viewport,\n              } = graphEditor\n              const TARGET_SIZE = 2000 // viewport.hitArea.width / 2// 800\n              // const MARGIN_SIZE = 180\n\n              // element.neighborhood().layout({\n              //   ...Graph.Layouts.circle,\n              //   boundingBox: {\n              //     x1: center.x - TARGET_SIZE / 2,\n              //     y1: center.y - TARGET_SIZE / 3,\n              //     w: TARGET_SIZE / 2,\n              //     h: TARGET_SIZE / 2,\n              //   },\n              // }).start()\n              // if (viewport.hitArea.width === TARGET_SIZE) {\n              //   TARGET_SIZE += 500\n              // }\n              let position\n              if (selectedElement.isNode()) {\n                position = selectedElement.position()\n              } else {\n                position = V.midpoint(\n                  selectedElement.source().position(),\n                )(selectedElement.target().position())\n              }\n              const center = {\n                x: position.x + TARGET_SIZE / 4,\n                y: position.y,\n              }\n              const centerPoint = new PIXI.Point(center.x, center.y)\n              viewport.center = centerPoint\n              // viewport.snapZoom({\n              //   center: centerPoint,\n              //   width: TARGET_SIZE,\n              //   forceStart: true,\n              //   time: Graph.Layouts.grid.animationDuration + 500,\n              //   removeOnComplete: true,\n              //   removeOnInterrupt: true,\n              //   noMove: false,\n              // })\n            }\n\n            break\n          }\n          case EVENT.ELEMENT_SELECTED: {\n            const {\n              itemIds,\n            } = payload\n            draft.selectedElementIds = itemIds\n            const {\n              selectedElement,\n            } = getSelectedElementInfo({\n              ...state,\n              selectedElementIds: itemIds,\n            }, graphEditor)\n            if (event && event.data!.originalEvent.metaKey && selectedElement?.isNode()) {\n              draft.dataBar!.isOpen = true\n              const {\n                viewport,\n              } = graphEditor\n              const TARGET_SIZE = 2000 // viewport.hitArea.width / 2// 800\n              // const MARGIN_SIZE = 180\n              const position = selectedElement.position()\n              const center = {\n                x: position.x + TARGET_SIZE / 4,\n                y: position.y,\n              }\n              selectedElement.neighborhood().layout({\n                ...Graph.Layouts.circle,\n                boundingBox: {\n                  x1: center.x - TARGET_SIZE / 2,\n                  y1: center.y - TARGET_SIZE / 3,\n                  w: TARGET_SIZE / 2,\n                  h: TARGET_SIZE / 2,\n                },\n              }).start()\n              viewport.snapZoom({\n                center: new PIXI.Point(center.x, center.y),\n                width: TARGET_SIZE,\n                forceStart: true,\n                time: Graph.Layouts.grid.animationDuration + 500,\n                removeOnComplete: true,\n                removeOnInterrupt: true,\n              })\n            }\n\n            break\n          }\n          case EVENT.FOCUS: {\n            const {\n              itemIds = [],\n            } = payload\n            if (!draft.previousDataList) {\n              draft.previousDataList = []\n            }\n            draft.previousDataList.push({\n              nodes: draft.nodes.map((node) => ({ ...node, position: {\n                x: graphEditor?.cy.$id(node.id).position().x,\n                y: graphEditor?.cy.$id(node.id).position().y,\n              }, \n              })),\n              edges: draft.edges,\n            })\n            draft.nodes = draft.nodes.filter((nodeItem) => itemIds.includes(nodeItem.id))\n            draft.edges = draft.edges.filter(\n              (edgeItem) => itemIds.includes(edgeItem.source)\n              && itemIds.includes(edgeItem.target),\n            )\n            draft.isFocusMode = true\n            break\n          }\n          case EVENT.DEFOCUS: {\n            if (draft.previousDataList) {\n              const previousData =  draft.previousDataList.pop()\n              draft.nodes = previousData.nodes\n              draft.edges = previousData.edges\n              if (draft.previousDataList.length === 0) {\n                draft.isFocusMode = false\n              }\n            }\n            break\n          }\n          case EVENT.MODE_CHANGED: {\n            draft.mode = payload.value\n            // localDataRef.current.targetNode.current = null\n            break\n          }\n          case EVENT.CHANGE_DATA_NAME:\n            targetDataList[index].name = payload.value\n            break\n          case EVENT.CHANGE_DATA_VALUE:\n            targetDataList[index].value[payload.valueIndex] = getValueByType(\n              dataItem.type!,\n              payload.value,\n            )\n            break\n          case EVENT.ADD_DATA_VALUE:\n            targetDataList[index].value.push(payload.value)\n            break\n          case EVENT.DELETE_DATA_VALUE:\n            targetDataList[index].value.splice(payload.valueIndex, 1)\n            break\n          case EVENT.DATA_VALUE_UP: {\n            const { value } = targetDataList[index]\n            const { length } = value\n            const temporary = value[payload.valueIndex]\n            const changeIndex = (payload.valueIndex === 0\n              ? (length - 1)\n              : (payload.valueIndex - 1)) % length\n            value[payload.valueIndex] = value[changeIndex]\n            value[changeIndex] = temporary\n            break\n          }\n          case EVENT.DATA_VALUE_DOWN: {\n            const { value } = targetDataList[index]\n            const { length } = value\n            const temporary = value[payload.valueIndex]\n            const changeIndex = (payload.valueIndex + 1) % length\n            value[payload.valueIndex] = value[changeIndex]\n            value[changeIndex] = temporary\n            break\n          }\n          case EVENT.DELETE_DATA:\n            targetDataList.splice(index, 1)\n            break\n\n          case EVENT.CHANGE_DATA_NAME_ADDITIONAL: {\n            const additionalItem = targetDataList[index]!.additional![payload.index]!\n            additionalItem.name = payload.value\n            break\n          }\n          case EVENT.CHANGE_DATA_VALUE_ADDITIONAL: {\n            const additionalItem = targetDataList[index]!.additional![payload.index]\n            targetDataList[index]!.additional![\n              payload.index\n            ].value[payload.valueIndex] = getValueByType(\n              additionalItem.type, payload.value,\n            )\n            break\n          }\n          case EVENT.ADD_DATA_ADDITIONAL:\n            targetDataList[index]!.additional!.push(payload)\n            break\n          case EVENT.ADD_DATA_VALUE_ADDITIONAL: {\n            targetDataList[index]!.additional![payload.index].value.push(payload.value)\n            break\n          }\n          case EVENT.DELETE_DATA_VALUE_ADDITIONAL:\n            targetDataList[index]!.additional![payload.index].value.splice(payload.valueIndex, 1)\n            break\n          case EVENT.DELETE_DATA_ADDITIONAL:\n            targetDataList[index]!.additional!.splice(payload.index, 1)\n            break\n          case EVENT.TOGGLE_FILTER_BAR:\n            draft.settingsBar!.isOpen = !draft.settingsBar?.isOpen\n            break\n          case EVENT.TOGGLE_DATA_BAR:\n            draft.dataBar!.isOpen = !draft.dataBar?.isOpen\n            break\n          case EVENT.TOGGLE_ACTION_BAR:\n            draft.actionBar!.isOpen = !draft.actionBar?.isOpen\n            break\n          case EVENT.IMPORT_DATA:\n\n            R.mapObjIndexed((value, key) => {\n              // @ts-ignore\n              draft[key] = value\n            })(payload.value)\n            const {\n              eventHistory: eventHistoryData,\n            } = payload.value ?? {}\n            eventHistory.set({\n              currentIndex: eventHistoryData.events.length,\n              items: eventHistoryData.events.map((event, i) => ({\n                id: R.uuid(),\n                do: [event],\n                undo: [eventHistoryData.undoEvents[i]],\n              })),\n            })\n            break\n          case EVENT.IMPORT_EVENTS:\n            closeAllBars(draft)\n            draft.events = [...(payload.value ?? [])]\n            break\n          case EVENT.PLAY_EVENTS:\n            closeAllBars(draft)\n            draft.events = [...(payload.events ?? [])]\n            break\n          case EVENT.APPLY_EVENTS:\n            payload.events.map((event: EventInfo) => onEvent(event))\n            break\n          case EVENT.EXPORT_DATA:\n            download(payload.value, 'perfect-graph.json')\n            break\n          case EVENT.TOGGLE_RECORD:\n            draft.actionBar!.recording = !draft.actionBar?.recording\n            break\n          case EVENT.TOGGLE_RECORD_EVENTS:\n            if (draft.actionBar?.eventRecording) {\n              download(JSON.stringify(localDataRef.current.recordedEvents), 'recorded-events.json')\n              localDataRef.current.recordedEvents = []\n            }\n            draft.actionBar!.eventRecording = !draft.actionBar?.eventRecording\n            break\n          case EVENT.RECORD_FINISHED:\n            download(eventInfo.payload.value, 'perfect-graph.mp4')\n            break\n          case EVENT.LAYOUT_CHANGED: {\n            let layout: any\n            if (payload.value.name) {\n              layout = R.pickBy((val) => R.isNotNil(val))({\n                // @ts-ignore\n                ...GraphLayouts[payload.value.name],\n                ...payload.value,\n              })\n            }\n            draft.graphConfig!.layout = layout\n            break\n          }\n          case EVENT.SET_POSITIONS_IMPERATIVELY: {\n            const {\n              positions,\n              oldLayout,\n            } = payload\n            type PositionItem = {\n              elementId: string;\n              position: Position;\n            }\n            positions.forEach((positionItem: PositionItem) => {\n              graphEditor?.cy.$id(positionItem.elementId).position(positionItem.position)\n            })\n            draft.graphConfig!.layout = oldLayout\n            break\n          }\n\n          case EVENT.SET_NODE_LOCAL_LABEL: {\n            const {\n              value,\n            } = payload\n            draft.label!.nodes[eventRelatedItem!.id] = value\n            break\n          }\n          case EVENT.CLEAR_NODE_LOCAL_LABEL: {\n            delete draft.label!.nodes[eventRelatedItem!.id]\n            break\n          }\n          case EVENT.TOGGLE_NODE_GLOBAL_LABEL_FIRST: {\n            draft.label!.isGlobalFirst!.nodes = !draft.label?.isGlobalFirst!.nodes\n            break\n          }\n          case EVENT.SET_NODE_GLOBAL_LABEL: {\n            const {\n              value,\n            } = payload\n            draft.label!.global.nodes = value\n            break\n          }\n          case EVENT.CLEAR_NODE_GLOBAL_LABEL: {\n            draft.label!.global!.nodes! = []\n            break\n          }\n          case EVENT.SELECT_CLUSTER: {\n            const {\n              itemIds = [],\n            } = payload\n            const selectedClusters = draft.graphConfig?.clusters?.filter(\n              (cluster) => itemIds.includes(cluster.id),\n            )\n            draft.selectedElementIds = R.concatAll(\n              selectedClusters!.map((cluster) => cluster.ids),\n            )\n            break\n          }\n          case EVENT.DELETE_CLUSTER: {\n            const {\n              itemIds = [],\n            } = payload\n            draft.graphConfig!.clusters = draft.graphConfig?.clusters?.filter(\n              (cluster) => !itemIds.includes(cluster.id),\n            )\n            break\n          }\n          case EVENT.DELETE_CLUSTER_ELEMENT: {\n            const {\n              clusterId,\n              itemIds = [],\n            } = payload\n            const selectedCluster = draft.graphConfig?.clusters?.find(\n              (cluster) => cluster.id === clusterId,\n            )\n            selectedCluster!.ids = selectedCluster!.ids.filter(\n              (id) => !itemIds.includes(id),\n            )\n            break\n          }\n          case EVENT.CREATE_CLUSTER: {\n            const {\n              items = [],\n            } = payload\n            draft.graphConfig!.clusters = draft.graphConfig?.clusters?.concat(items)\n            break\n          }\n          case EVENT.PRESS_ADD_CLUSTER_ELEMENT: {\n            if (draft.mode === EDITOR_MODE.ADD_CLUSTER_ELEMENT) {\n              draft.mode = EDITOR_MODE.DEFAULT\n              return\n            }\n            draft.mode = EDITOR_MODE.ADD_CLUSTER_ELEMENT\n            break\n          }\n          case EVENT.ADD_CLUSTER_ELEMENT: {\n            const {\n              clusterId,\n              itemIds,\n            } = payload\n            const selectedCluster = draft.graphConfig?.clusters?.find(\n              (cluster) => cluster.id === clusterId,\n            )\n            selectedCluster!.ids = R.union((selectedCluster?.ids ?? []), itemIds)\n            break\n          }\n          case EVENT.CHANGE_CLUSTER_VISIBILITY: {\n            const {\n              clusterId,\n              value,\n            } = payload\n            const selectedCluster = draft.graphConfig?.clusters?.find(\n              (cluster) => cluster.id === clusterId,\n            )\n            selectedCluster!.visible = value\n            break\n          }\n          case EVENT.DELETE_HISTORY_ITEM: {\n            const {\n              itemIds = [],\n            } = payload\n            eventHistory.delete(eventHistory.getEventIdsByDoItemIds(itemIds))\n            break\n          }\n          case EVENT.REORDER_HISTORY_ITEM: {\n            const {\n              fromIndex,\n              toIndex,\n            } = payload\n            eventHistory.reorder(\n              fromIndex,\n              toIndex,\n            )\n            break\n          }\n          // case EVENT.CREATE_CLUSTER_BY_ALGORITHM: {\n          // const {\n          //   config = {},\n          //   name,\n          // } = payload\n          // const clusterResult = Clusters[name].getByItem({\n          //   cy: graphEditor?.cy,\n          //   nodes: draft.nodes,\n          //   edges: draft.edges,\n          //   ...config,\n          // })\n          //   // draft.graphConfig.layout = oldLayout\n          //   break\n          // }\n          case EVENT.REORDER_CLUSTER: {\n            const {\n              fromIndex,\n              toIndex,\n            } = payload\n            draft.graphConfig!.clusters = R.reorder(\n              fromIndex,\n              toIndex,\n              draft.graphConfig!.clusters!,\n            )\n            break\n          }\n          case EVENT.CREATE_PLAYLIST: {\n            const {\n              items = [],\n            } = payload\n            draft.playlists = draft.playlists!.concat(items)\n            break\n          }\n          case EVENT.REORDER_PLAYLIST: {\n            const {\n              fromIndex,\n              toIndex,\n            } = payload\n            draft.playlists = R.reorder(\n              fromIndex,\n              toIndex,\n              draft.playlists!,\n            )\n            break\n          }\n          case EVENT.DELETE_PLAYLIST: {\n            const {\n              itemIds = [],\n            } = payload\n            draft.playlists = draft.playlists!.filter((playlist) => !itemIds.includes(playlist.id))\n            break\n          }\n          case EVENT.ELEMENT_SETTINGS: {\n            if (draft.modals?.ElementSettings) {\n              draft.modals.ElementSettings.isOpen = true\n            }\n            break\n          }\n          case EVENT.ELEMENT_SETTINGS_FORM_SUBMIT: {\n            const {\n              name,\n              value,\n            } = payload\n            // draft.modals.ElementSettings.isOpen = true\n            switch (name) { \n              case 'Visualization':\n\n                break\n            \n              default:\n                break\n            }\n            break\n          }\n          case EVENT.CLOSE_MODAL: {\n            const {\n              name,\n            } = payload\n            draft.modals[name].isOpen = false\n            break\n          }\n          default:\n            break\n        }\n      } catch (error) {\n        console.log('error', error)\n      }\n    })\n  }, [state])\n\n  return [\n    // @ts-ignore\n    {\n      ...state,\n      ...(\n        !_graphEditorRef\n          ? { ref: localGraphEditorRef }\n          : {}\n      ),\n      eventHistory: {\n        currentIndex: eventHistory.record.currentIndex - 1,\n        events: R.unnest(\n          R.map((item) => item.do, eventHistory.record.items),\n        ),\n        undoEvents: R.unnest(\n          R.map((item) => item.undo, eventHistory.record.items),\n        ),\n      },\n      onEvent,\n    } as Pick<GraphEditorProps, 'nodes' | 'edges' | 'onEvent' | 'graphConfig' | 'eventHistory'>,\n    {\n      update,\n      onEvent,\n    },\n  ]\n}\n\nconst getValueByType = (type: RDFType, value: string) => value\n\nconst DEFAULT_CONTROLLER_CONFIG: UseControllerData = {\n  nodes: [],\n  edges: [],\n  isLoading: false,\n  label: {\n    global: { nodes: ['id'], edges: ['id'] },\n    nodes: {},\n    edges: {},\n    isGlobalFirst: {\n      edges: false,\n      nodes: false,\n    },\n  } as GraphLabelData,\n  actionBar: {\n    isOpen: false,\n  },\n  dataBar: {\n    isOpen: false,\n  },\n  settingsBar: {\n    isOpen: false,\n  },\n  mode: EDITOR_MODE.DEFAULT as EditorMode,\n  selectedElementIds: [] as string[] | undefined,\n  graphConfig: {\n    clusters: [],\n  },\n  playlists: [\n    // {\n    //   id: R.uuid(),\n    //   name: 'My playlist',\n    //   events: MOCK_DATA.events,\n    // },\n    // {\n    //   id: R.uuid(),\n    //   name: 'My playlist2',\n    //   events: MOCK_DATA.events,\n    // },\n  ],\n  modals: {\n    ElementSettings: {\n      isOpen: false,\n      render: ElementSettingsModal,\n    },\n  },\n}\n","import Amplify, { API } from \"aws-amplify\";\n// import awsExports from \"./aws-exports\";\n\nconst API_AUTH_MODE = {\n  API_KEY: 'API_KEY'\n} as const\n\nconst convertJSONStringFields = (item) => {\n  return {\n    ...item,\n    ...(item.position ? { position: JSON.parse(item.position) } : {}),\n    data: JSON.parse(item.data)\n  }\n}\n\nconst LIST_CASES = `query QueryNetworkByUserInput(\n  $DataSources: [String]\n  $Keywords: String\n  $Articles: String\n  $Eclis: String\n  $DegreesSources: Int\n  $DegreesTargets: Int\n  $DateStart: AWSDate\n  $DateEnd: AWSDate\n  $Instances: [String]\n  $Domains: [String]\n  $Doctypes: [String]\n) {\n  queryNetworkByUserInput(\n    DataSources: $DataSources\n    Keywords: $Keywords\n    Articles: $Articles\n    Eclis: $Eclis\n    DegreesSources: $DegreesSources\n    DegreesTargets: $DegreesTargets\n    DateStart: $DateStart\n    DateEnd: $DateEnd\n    Instances: $Instances\n    Domains: $Domains\n    Doctypes: $Doctypes\n  ) {\n    nodes {\n      id\n      data\n    }\n    edges {\n      id\n      source\n      target\n      data\n    }\n    statistics\n    message\n  }\n}`\n\nconst GET_ELEMENT_DATA = `query GetElementData($id: String) {\n  fetchNodeData(Ecli: $id) {\n    data\n    id\n  }\n}`\n\nconst TEST_AUTH = `query TestAuth($id: String) {\n  testAuth(Ecli: $id) {\n    data\n    id\n  }\n}`\n\ntype listCasesVariables = {\n  DataSources: string[];\n}\n\nexport async function listCases(variables: listCasesVariables) {\n  try {\n    console.log(variables)\n    const listCasesResult = await API.graphql({\n      query: LIST_CASES,\n      // authMode: API_AUTH_MODE.API_KEY,\n      variables\n    })\n\n    const caseResults = listCasesResult.data.queryNetworkByUserInput\n    console.log(caseResults)\n\n    return {\n      nodes: caseResults.nodes.map(convertJSONStringFields),\n      edges: caseResults.edges.map(convertJSONStringFields),\n      networkStatistics: JSON.parse(caseResults.statistics),\n      message: caseResults.message,\n      // edges: project.edges.items.map(convertJSONStringFields),\n    }\n\n    // return caseResults.map(project => ({\n    //   // ...project,\n    //   nodes: project.nodes.items.map(convertJSONStringFields),\n    //   // edges: project.edges.items.map(convertJSONStringFields),\n    // }))\n  } catch (err) {\n    console.log('error creating node:', err)\n  }\n}\n\nconst COMPLEX_QUERY = `query ListCases($query) {\n  complexQuery(query: $query) {\n    items {\n      abstract\n      country\n      court\n      date\n      doctype\n      id\n      subject\n    }\n  }\n}`\n\nexport async function complexQuery(query: any) {\n  try {\n    const listCasesResult = await API.graphql({\n      query: COMPLEX_QUERY,\n      // authMode: API_AUTH_MODE.API_KEY,\n      variables: query\n    })\n    const caseResults = listCasesResult.data.listCaselaws.items\n    return caseResults\n    // return caseResults.map(project => ({\n    //   // ...project,\n    //   nodes: project.nodes.items.map(convertJSONStringFields),\n    //   // edges: project.edges.items.map(convertJSONStringFields),\n    // }))\n  } catch (err) {\n    console.log('error creating node:', err)\n  }\n}\n\ntype GetElementDataVariables = {\n  id: string;\n}\n\nexport async function getElementData(variables: GetElementDataVariables) {\n  try {\n    const elementDataResult = await API.graphql({\n      query: GET_ELEMENT_DATA,\n      // authMode: API_AUTH_MODE.API_KEY,\n      variables\n    })\n    const result = elementDataResult.data.fetchNodeData.data\n    return result ? JSON.parse(result) : {}\n    // return caseResults.map(project => ({\n    //   // ...project,\n    //   nodes: project.nodes.items.map(convertJSONStringFields),\n    //   // edges: project.edges.items.map(convertJSONStringFields),\n    // }))\n  } catch (err) {\n    console.log('error getElementData node:', err)\n  }\n}\n\n\nexport async function testAuth(variables: GetElementDataVariables) {\n  try {\n    const elementDataResult = await API.graphql({\n      query: TEST_AUTH,\n      // authMode: API_AUTH_MODE.API_KEY,\n      variables\n    })\n    const result = elementDataResult.data.testAuth.data\n    return result ? JSON.parse(result) : {}\n  } catch (err) {\n    console.log('error testAuth:', err)\n  }\n}","import React from 'react'\nimport { Button, Slider, Typography } from '@mui/material'\n\nconst SliderUIField = ({ formData, schema, onChange, name }) => {\n\n  return (\n    <>\n      <Typography id={`${schema.title}-continuous-slider`} gutterBottom>\n        {schema.title ?? name}\n      </Typography>\n      <Slider\n        value={formData ?? [schema.minimum, schema.maximum]}\n        onChange={(e) => {\n          onChange(e.target.value)\n        }}\n        valueLabelDisplay=\"auto\"\n        aria-labelledby={`${schema.title}-continuous-slider`}\n        min={schema.minimum}\n        max={schema.maximum}\n      />\n    </>\n  )\n}\nexport const getQueryBuilderSchema = () => {\n  return {\n    // children: <div></div>,\n    schema: {\n      title: 'Fetch Data',\n      type: 'object',\n      required: [\n        // 'title',\n        // 'year',\n        // 'rechtsgebied',\n        // 'adjustLayout',\n      ],\n      additionalProperties: false,\n      properties: {\n        DataSources: {\n          type: 'array',\n          title: 'Data sources',\n          uniqueItems: true,\n          items: {\n            enum: [\n              'RS',\n              'ECHR',\n              'Eurlex'\n            ],\n            enumNames: [\n              'Rechtspraak',\n              'European Court of Human Rights',\n              'Eurlex'\n            ],\n            type: 'string'\n          },\n        },\n        Eclis: {\n          type: 'string',\n          title: 'ECLIs'\n        },\n        Keywords: {\n          type: 'string',\n          title: 'Keywords'\n        },\n        Articles: {\n          type: 'string',\n          title: 'Articles'\n        },\n        Date: {\n          type: 'array',\n          title: 'Date',\n          items: {\n            type: 'number',\n          },\n          minimum: 1969,\n          maximum: 2015,\n        },\n        Instances: {\n          type: 'array',\n          title: 'Instances',\n          uniqueItems: true,\n          items: {\n            enum: [\n              '',\n              'Hoge Raad',\n              'Raad van State',\n              'Centrale Raad van Beroep',\n              'College van Beroep voor het bedrijfsleven',\n              'Gerechtshof Arnhem-Leeuwarden',\n              'Gerechtshof Amsterdam'\n            ],\n            type: 'string'\n          },\n        },\n        Domains: {\n          type: 'array',\n          title: 'Domains',\n          uniqueItems: true,\n          items: {\n            enum: [\n              '',\n              'Not',\n              'Sure',\n              'What'\n            ],\n            type: 'string'\n          },\n        },\n        Doctypes: {\n          type: 'array',\n          title: 'Document types',\n          uniqueItems: true,\n          items: {\n            enum: [\n              '',\n              'DEC',\n              'OPI'\n            ],\n            enumNames: [\n              '',\n              'Decision',\n              'Opinion'\n            ],\n            type: 'string'\n          },\n        },\n        DegreesSources: {\n          type: 'integer',\n          title: 'Degrees Sources',\n          minimum: 1,\n          maximum: 5,\n        },\n        DegreesTargets: {\n          type: 'integer',\n          title: 'Degrees Targets',\n          minimum: 1,\n          maximum: 5,\n        },\n      },\n    },\n    uiSchema: {\n      'Date': {\n        'ui:field': SliderUIField,\n      },\n      // 'degreesSources': {\n      //   'ui:field': SliderUIField,\n      // },\n      // 'degreesTargets': {\n      //   'ui:field': SliderUIField,\n      // },\n      // 'source':{\n      //   'ui:widget': 'checkboxes'\n      // },\n      // 'liPermission':{\n      //   'ui:widget': 'select'\n      // },\n    }\n  }\n}","// @ts-nocheck\nimport React from 'react'\nimport Form from '@rjsf/material-ui'\nimport * as API from '../API'\nimport { Modal, Button, Box, Typography, TextField, Paper,IconButton } from '@mui/material'\nimport CloseIcon from '@mui/icons-material/Close'\nimport { getQueryBuilderSchema } from './constants'\n\nexport type QueryBuilderProps = {\n  query: any;\n  onStart: () => void;\n  onError: (e: Error) => void;\n  onFinish: (data: any) => void;\n  onClose: () => void;\n  isOpen: boolean;\n}\n\nconst transformData = (data) => {\n  const date = data.Date;\n  console.log(date)\n  return {\n    \"DateStart\": `${date[0]}-01-01`,\n    \"DateEnd\": `${date[1]}-12-31`,\n    ...data\n  }\n}\n\nexport const QueryBuilder = (props: QueryBuilderProps) => {\n  const {\n    isOpen,\n    onStart,\n    onError,\n    onFinish,\n    query,\n    onClose\n  } = props\n\n  const [state, setState] = React.useState(query)\n  return (\n    <Modal\n      open={isOpen}\n      // onClose={onClose}\n      style={{\n        display: 'flex',\n        // flexDirection: 'column-reverse',\n        justifyContent: 'center',\n        alignItems: 'center',\n      }}\n      BackdropProps={{\n        // style: {\n        //   backgroundColor: 'rgba(0, 0, 0, 0)',\n        // },\n        // onClick: () => {\n        // },\n      }}\n    >\n      <Paper style={{\n        display: 'flex',\n        flexDirection: 'column',\n        width: '80%',\n        height: '80%',\n        padding: 10,\n        overflow: 'scroll'\n      }}\n      >\n        \n        <Box\n          style={{\n            display: 'flex',\n            flexDirection: 'row',\n            justifyContent: 'space-between',\n            marginBottom: 10\n          }}\n        >\n          <Typography variant=\"h6\">Query Builder</Typography>\n          <IconButton \n            aria-label=\"Example\"\n            onClick={onClose}\n            // style={{\n            //   position: 'absolute',\n            //   right: 24,\n            //   top: 24\n            // }}\n          >\n            <CloseIcon  />\n          </IconButton>\n        </Box>\n        <Box\n          style={{\n            display: 'flex',\n            flexDirection: 'column'\n          }}\n        >\n          <Form\n            schema={getQueryBuilderSchema().schema}\n            uiSchema={getQueryBuilderSchema().uiSchema}\n            onChange={e => setState(e.formData)}\n            formData={state}\n            onSubmit={async e => {\n              onStart()\n              \n              try {\n                let casesData = await API.listCases(transformData(e.formData))\n                // let casesData = prepareData(cases)\n                // console.log('logCasesData',casesData)\n                if (casesData.nodes.length == 0) {\n                  throw new Error(\"No cases returned\")\n                }\n                else {\n                  onFinish({\n                    nodes: casesData.nodes,\n                    edges: casesData.edges,\n                    networkStatistics: casesData.networkStatistics,\n                    message: casesData.message,\n                  })\n                }\n              } catch (e) {\n                console.log(e)\n                onError(e)\n              }\n            }}\n          />\n        </Box>\n      </Paper>\n    </Modal>\n\n  )\n\n}\n\n\n","import {\n  Modal\n} from '@mui/material';\nimport React from 'react';\n\n\ntype HelpModalProps = {\n  isOpen: boolean\n  videoId: string\n  onClose: () => void\n}\n\nexport const HelpModal = (props: HelpModalProps) => {\n  const {\n    isOpen,\n    videoId,\n    onClose\n  } = props\n  return (\n    <Modal\n      open={isOpen}\n      onClose={onClose}\n      style={{\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n      }}\n    >\n      <iframe\n        width=\"853\"\n        height=\"480\"\n        src={`https://www.youtube.com/embed/${videoId}`}\n        frameBorder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        allowFullScreen\n        title=\"Embedded youtube\"\n      />\n    </Modal>\n  )\n}","/* eslint-disable */\n// @ts-nocheck\nimport React from 'react'\nimport * as R from 'colay/ramda'\nimport {\n  useTheme as useMuiTheme,\n  ThemeProvider as MuiThemeProvider,\n  createTheme as createMuiTheme,\n  Button,\n  Typography,\n  Backdrop,\n  CircularProgress,\n  Modal,\n  Slide,\n  Snackbar,\n  Alert,\n  AlertTitle,\n} from '@mui/material'\nimport { View, useForwardRef, useMeasure } from 'colay-ui'\nimport { useImmer } from 'colay-ui/hooks/useImmer'\nimport {\n  DarkTheme,\n  DefaultTheme,\n  ThemeProvider,\n  useTheme\n} from '../../src/core/theme'\nimport { GraphRef } from '../../src/type'\nimport { GraphEditorProps, GraphEditor } from '../../src/components/GraphEditor'\nimport { Graph } from '../../src/components'\nimport { UseEffect } from '../../src/components/UseEffect'\nimport { drawLine } from '../../src/components/Graphics'\nimport defaultData from './data'\nimport * as C from 'colay/color'\nimport { getFilterSchema, getFetchSchema, VIEW_CONFIG_SCHEMA, RECORDED_EVENTS } from './constants'\nimport { EVENT } from '../../src/constants'\nimport { useController } from '../../src/plugins/controller'\nimport { createSchema } from '../../src/plugins/createSchema'\nimport { getSelectedItemByElement, getSelectedElementInfo } from '../../src/utils'\nimport { calculateStatistics } from './utils/networkStatistics'\nimport { RenderNode } from './RenderNode'\nimport { RenderEdge } from './RenderEdge'\nimport * as API from './API'\nimport { QueryBuilder } from './QueryBuilder'\nimport { HelpModal } from './HelpModal'\nimport { TermsOfService } from './TermsOfService'\n// import { Data } from '../../components/Graph/Default'\n// import { Auth } from 'aws-amplify'\nimport { useUser } from './useUser'\nimport GraphLayouts from '../../src/core/layouts'\n\nexport const ACTIONS = {\n  TEST_API: 'TEST_API',\n}\n\nconst HELP_VIDEO_ID = \"OrzMIhLpVps\"\n\nconst MUIDarkTheme = createMuiTheme({\n  palette: {\n    mode: 'dark',\n  },\n});\nconst MUILightTheme = createMuiTheme({\n  palette: {\n    mode: 'light',\n  },\n});\nconst filterEdges = (nodes: { id: string }[]) => (edges: { source: string; target: string }[]) => {\n  const nodeMap = R.groupBy(R.prop('id'))(nodes)\n  return R.filter(\n    (edge) => nodeMap[edge.source] && nodeMap[edge.target]\n  )(edges)\n}\nconst CHUNK_COUNT = 3\nconst prepareData = (data) => {\n  const {\n    nodes,\n    edges\n  } = data\n  const preNodes = R.splitEvery(Math.ceil(nodes.length / CHUNK_COUNT))(nodes)[0]\n  const preEdges = filterEdges(preNodes)(edges)\n  return {\n    nodes: preNodes,\n    edges: preEdges\n  }\n}\n\nconst populate = (times, data) => ({\n  nodes: R.concatAll(R.times(()=>R.clone(data.nodes), times)).map(\n    (n, i) => i<data.nodes.length ? n : ({\n    ...n,\n    id: i, \n  })\n  ),\n  edges: R.concatAll(R.times(()=>R.clone(data.edges), times)).map(\n    (n, i) => i<data.edges.length ? n : ({\n    ...n,\n    id: i,\n  })\n  )\n})\n\nexport const createMockData = (nodeSize: number, edgeSize: number) => {\n  const nodes = R.range(0, nodeSize).map((index) => ({ id: `node-${index}` }) )\n  const edges = R.range(0, edgeSize).map((index) => ({ \n    id: `edge-${index}`,\n    source: `node-${Math.floor(Math.random() * nodeSize)}`,\n    target: `node-${Math.floor(Math.random() * nodeSize)}`,\n  }))\n  return {\n    nodes,\n    edges\n  }\n}\nconst COUNT = 1000\nconst data = createMockData(COUNT, COUNT)\n\n// const data = prepareData(defaultData)\n// const data = populate(4,prepareData(defaultData))\n\nconsole.log('NODES:', data.nodes.length, )\nconsole.log('EDGES:', data.edges.length, )\ntype Props = Partial<GraphEditorProps>\n\nconst NODE_SIZE = {\n  width: 80,\n  height: 80,\n}\n\nconst NODE_SIZE_RANGE_MAP = {\n  size: [60, 250],\n  community: [0, 10],\n  in_degree: [0, 10],\n  out_degree: [0, 10],\n  degree: [0, 20],\n  year: [\n    1969,\n    2015\n  ],\n}\nconst calculateNodeSize = (data: object, fieldName?: keyof typeof NODE_SIZE_RANGE_MAP) => {\n  if (!fieldName) {\n    return NODE_SIZE_RANGE_MAP.size[0]\n  }\n  const fieldRange = NODE_SIZE_RANGE_MAP[fieldName]\n  const sizeRangeGap = NODE_SIZE_RANGE_MAP.size[1] - NODE_SIZE_RANGE_MAP.size[0]\n  const fieldRangeGap = fieldRange[1] - fieldRange[0]\n  const fieldRangeValue = (data[fieldName] ?? fieldRange[0]) - fieldRange[0]\n  return ((fieldRangeValue / fieldRangeGap) * sizeRangeGap) + NODE_SIZE_RANGE_MAP.size[0]\n}\nconst calculateColor = (data: object, fieldName?: keyof typeof NODE_SIZE_RANGE_MAP) => {\n  if (!fieldName) {\n    return perc2color(0)\n  }\n  const fieldRange = NODE_SIZE_RANGE_MAP[fieldName]\n  const sizeRangeGap = NODE_SIZE_RANGE_MAP.size[1] - NODE_SIZE_RANGE_MAP.size[0]\n  const fieldRangeGap = fieldRange[1] - fieldRange[0]\n  const fieldRangeValue = (data[fieldName] ?? fieldRange[0]) - fieldRange[0]\n  return perc2color((fieldRangeValue / fieldRangeGap) * 100)\n}\nconst perc2color = (\n  perc: number,\n  min = 20,\n  max = 80\n) => {\n  var base = (max - min);\n\n  if (base === 0) { perc = 100; }\n  else {\n    perc = (perc - min) / base * 100;\n  }\n  var r, g, b = 0;\n  if (perc < 50) {\n    r = 255;\n    g = Math.round(5.1 * perc);\n  }\n  else {\n    g = 255;\n    r = Math.round(510 - 5.10 * perc);\n  }\n  var h = r * 0x10000 + g * 0x100 + b * 0x1;\n  return '#' + ('000000' + h.toString(16)).slice(-6);\n}\n\nconst AUTO_CREATED_SCHEMA = {\n  schema: createSchema(data.nodes)\n}\n\n\n\nconst DataBarHeader = () => {\n  // const [user] = useUser()\n  return (\n    <View\n      style={{ flexDirection: 'row', justifyContent: 'space-between' }}\n    >\n      {/* <Typography>{user?.attributes?.email}</Typography> */}\n      <Button\n        color=\"secondary\"\n        // onClick={() => Auth.signOut()}\n      >\n        Signout\n      </Button>\n    </View>\n  )\n}\n\nconst AppContainer = ({\n  changeMUITheme,\n  dispatch,\n  width,\n  height,\n  ...rest\n}) => {\n  const alertRef= React.useRef(null)\n  const configRef = React.useRef({\n    visualization: {\n      nodeSize: null,\n      nodeColor: null\n    },\n    fetching: {\n      source: [\n        \"Rechtspraak\"\n      ],\n      year: [\n        1969,\n        2015\n      ],\n      instances: [\n        \"Hoge Raad\",\n        \"Raad van State\",\n        \"Centrale Raad van Beroep\",\n        \"College van Beroep voor het bedrijfsleven\",\n        \"Gerechtshof Arnhem-Leeuwarden\"\n      ],\n      domains: [\n        \"Not\"\n      ],\n      doctypes: [\n        \"DEC\",\n        \"OPI\"\n      ],\n      degreesSources: 3,\n      popup: false,\n      liPermission: false,\n      keywords: \"test\",\n      degreesTargets: 3,\n      eclis: \"\",\n      articles: \"\"\n    },\n    filtering: {\n      year: [1960, 2021],\n      degree: [0, 100],\n      indegree: [0, 100],\n      outdegree: [0, 100]\n    }\n  })\n\n  const FILTER_SCHEMA = React.useMemo(() => getFilterSchema(), [])\n  const FETCH_SCHEMA = React.useMemo(() => getFetchSchema({\n    onPopupPress: async () => {\n      updateState((draft) => {\n        draft.queryBuilder.visible = true\n      })\n    }\n  }), [])\n  const THEMES = {\n    Dark: DarkTheme,\n    Default: DefaultTheme\n  }\n  const NODE_ID = 'http://deeplink.rechtspraak.nl/uitspraak?id=ECLI:NL:HR:2014:3519'\n  const filteredDataRef = React.useRef({})\n  const [state, updateState] = useImmer({\n    queryBuilder: {\n      visible: false,\n      query: {\n        DataSources: [\n          \"RS\"\n        ],\n        Date: [\n          1969,\n          2015\n        ],\n        Instances: [\n          \"Hoge Raad\", \"Raad van State\",\n        ],\n        Domains: [\n          \"\"\n        ],\n        Doctypes: [\n          \"DEC\",\n          \"OPI\"\n        ],\n        DegreesSources: 1,\n        Keywords: \"\",\n        DegreesTargets: 1,\n        Eclis: \"ECLI:NL:GHSGR:1972:AB4988\",\n        Articles: \"\"\n      },\n    },\n    helpModal: {\n      isOpen: false,\n    }\n  })\n  const ActionBarRight = React.useMemo(() => () => (\n    <View\n      style={{ flexDirection: 'row' }}\n    >\n      <Button\n        onClick={() => updateState((draft) => {\n          draft.helpModal.isOpen = true\n        })}\n      >\n        Help\n      </Button>\n      <Button\n        onClick={() => dispatch({\n          type: ACTIONS.TEST_API\n        })}\n      >\n        Test the API\n      </Button>\n    </View>\n  ), [dispatch])\n  const [controllerProps, controller] = useController({\n    ...data,\n    // nodes: [],\n    // edges: [],\n    // events: RECORDED_EVENTS,\n    graphConfig: {\n      layout: Graph.Layouts.circle,\n      zoom: 0.2,\n      nodes: {},\n      clusters: [\n        // {\n        //   id: '123',\n        //   name: 'SimpleCluster',\n        //   ids: [\n        //      'http://deeplink.rechtspraak.nl/uitspraak?id=ECLI:NL:XX:2010:BL0510'\n        //     // 'http://deeplink.rechtspraak.nl/uitspraak?id=ECLI:NL:HR:2015:3019',\n        //     // 'http://deeplink.rechtspraak.nl/uitspraak?id=ECLI:NL:HR:2015:644',\n        //     // 'http://deeplink.rechtspraak.nl/uitspraak?id=ECLI:NL:HR:2014:3519'\n        //   ],\n        //   childClusterIds: []\n        // },\n        // {\n        //   id: '1234',\n        //   name: 'SimpleCluster2',\n        //   ids: [\n        //     'http://deeplink.rechtspraak.nl/uitspraak?id=ECLI:NL:HR:2015:3019',\n        //     'http://deeplink.rechtspraak.nl/uitspraak?id=ECLI:NL:HR:2015:644',\n        //     'http://deeplink.rechtspraak.nl/uitspraak?id=ECLI:NL:HR:2014:3519'\n        //   ],\n        //   childClusterIds: []\n        // }\n      ]\n    },\n    // modals: {\n    //   ElementSettings: {\n    //     form: {\n    //       schema: FILTER_SCHEMA.schema,\n    //     },\n    //     isOpen: false\n    //   }\n    // },\n    preferencesModal: {\n      // isOpen: true,\n    },\n    settingsBar: {\n      opened: true,\n      // forms: [AUTO_CREATED_SCHEMA,FETCH_SCHEMA, VIEW_CONFIG_SCHEMA, {...FILTER_SCHEMA, formData: configRef.current.filtering}, ],\n      forms: [{ ...FETCH_SCHEMA, formData: configRef.current.fetching }, VIEW_CONFIG_SCHEMA, { ...FILTER_SCHEMA, formData: configRef.current.filtering },],\n      createClusterForm: {\n        ...FILTER_SCHEMA,\n        schema: { ...FILTER_SCHEMA.schema, title: 'Create Cluster', },\n        formData: configRef.current.filtering\n      },\n    },\n    dataBar: {\n      // isOpen: true,\n      editable: true,\n      header: DataBarHeader,\n    },\n    actionBar: {\n      // isOpen: true,\n      right: ActionBarRight,\n      // autoOpen: true,\n      eventRecording: false,\n      actions: {\n        // add: { visible: false },\n        // delete: { visible: false },\n      },\n      theming: {\n        options: [\n          {\n            name: 'Dark',\n            value: 'Dark',\n          },\n          {\n            name: 'Default',\n            value: 'Default',\n          }\n        ],\n        value: 'Default'\n      },\n    },\n    onEvent: async ({\n      type,\n      payload,\n      elementId,\n      graphRef,\n      graphEditor,\n      update,\n      state,\n    }, draft) => {\n      const {\n        cy,\n      } = graphEditor\n      const element = cy.$id(elementId)\n      // const {\n      //   item: eventRelatedItem,\n      // } = (element && getSelectedItemByElement(element, draft)) ?? {}\n      switch (type) {\n        case EVENT.ELEMENT_SELECTED: {\n          // draft.isLoading = true\n          const {\n            itemIds,\n          } = payload\n          draft.selectedElementIds = itemIds\n          const {\n            selectedItem\n          } = getSelectedElementInfo(draft, graphEditor)\n          let elementData = null\n          // try {\n          //   elementData = await API.getElementData({ id: selectedItem.data.ecli });\n          // } catch (error) {\n          //   alertRef.current.alert({\n          //     text: JSON.stringify(error),\n          //     type: 'error'\n          //   })\n          //   console.error(error)\n          // }\n          if (elementData && !R.isEmpty(elementData)) {\n            selectedItem.data = elementData\n          } else {\n            // alertRef.current.alert({\n            //   type: 'warning',\n            //   text: 'Data is not available!'\n            // })\n          }\n          break\n        }\n        case EVENT.CREATE_CLUSTER_FORM_SUBMIT: {\n          const {\n            name,\n            formData,\n          } = payload\n          const {\n            year,\n            degree,\n            indegree,\n            outdegree\n          } = formData\n          const clusterItemIds = draft.nodes.filter((item) => {\n            const element = cy.$id(item.id)\n            return (\n              R.inBetween(year[0], year[1])(item.data.year)\n              && R.inBetween(degree[0], degree[1])(element.degree())\n              && R.inBetween(indegree[0], indegree[1])(element.indegree())\n              && R.inBetween(outdegree[0], outdegree[1])(element.outdegree())\n\n            )\n          }).map((item) => item.id)\n          draft.graphConfig.clusters.push({\n            id: R.uuid(),\n            name,\n            ids: clusterItemIds,\n            childClusterIds: []\n          })\n          return false\n        }\n        case EVENT.SETTINGS_FORM_CHANGED: {\n          draft.settingsBar.forms[payload.index].formData = payload.value\n          if (payload.form.schema.title === FILTER_SCHEMA.schema.title) {\n            configRef.current = {\n              ...configRef.current,\n              filtering: payload.value\n            }\n            draft.graphConfig.nodes.filter = {\n              test: ({ element, item }) => {\n                const {\n                  year,\n                  degree,\n                  indegree,\n                  outdegree\n                } = payload.value\n                return (\n                  R.inBetween(year[0], year[1])(item.data.year)\n                  && R.inBetween(degree[0], degree[1])(element.degree())\n                  && R.inBetween(indegree[0], indegree[1])(element.indegree())\n                  && R.inBetween(outdegree[0], outdegree[1])(element.outdegree())\n\n                )\n              },\n              settings: {\n                opacity: 0.2\n              }\n            }\n\n          } else {\n            configRef.current = {\n              ...configRef.current,\n              visualization: payload.value\n            }\n          }\n          return false\n          break\n        }\n\n        case EVENT.CHANGE_THEME: {\n          const {\n            value\n          } = payload\n          draft.graphConfig.theme = THEMES[value]\n          changeMUITheme(value)\n          draft.actionBar.theming.value = value\n          return false\n          break\n        }\n        // case EVENT.LAYOUT_CHANGED: {\n        //   const {\n        //     value\n        //   } = payload\n        //   let layout: any\n        //     if (value.name) {\n        //       layout = R.pickBy((val) => R.isNotNil(val))({\n        //         // @ts-ignore\n        //         ...GraphLayouts[value.name],\n        //         ...value,\n        //       })\n        //     }\n        //     const { hitArea } = graphEditorRef.current.viewport\n        //     console.log(graphEditorRef.current.viewport)\n        //   const boundingBox = {\n        //     x1: hitArea.x + 300,\n        //     y1: hitArea.y + 300,\n        //     w: hitArea.width,\n        //     h: hitArea.height,\n        //   }\n        //     draft.graphConfig!.layout = {\n        //       ...layout,\n        //       boundingBox\n        //     }\n          \n        //   return false\n        //   break\n        // }\n        // case EVENT.ELEMENT_SELECTED: {\n        //   if (element.isNode()) {\n        //     // const TARGET_SIZE = 700\n        //     // const {\n        //     //   viewport\n        //     // } = graphRef.current\n        //     // const currentBoundingBox = {\n        //     //   x1: viewport.hitArea.x,\n        //     //   y1: viewport.hitArea.y,\n        //     //   w: viewport.hitArea.width,\n        //     //   h: viewport.hitArea.height,\n        //     // }\n        //     // const zoom = (currentBoundingBox.w / TARGET_SIZE ) * graphRef.current.viewport.scale.x\n        //     // const position = element.position()\n        //     // graphRef.current.viewport.snapZoom({\n        //     //   center: position, \n        //     //   width: TARGET_SIZE,\n        //     //   height: TARGET_SIZE,\n        //     //   time: Graph.Layouts.grid.animationDuration\n        //     // })\n        //     // element.connectedEdges().connectedNodes().layout({\n        //     //   ...Graph.Layouts.random,\n        //     //   boundingBox: {\n        //     //     ...currentBoundingBox,\n        //     //     h: TARGET_SIZE,\n        //     //     w: TARGET_SIZE,\n        //     //     // x1: element.position().x,\n        //     //     // y1: element.position().y,\n        //     //   }\n        //     // }).start()\n        //   }\n        //   // return false\n        //   break\n        // }\n\n        default:\n          break;\n      }\n      return null\n    }\n  })\n  // React.useEffect(() => {\n  //    if (user){\n  //     Auth.updateUserAttributes(user, {\n  //       'custom:isOldUser': 'no'\n  //     })\n  //    }\n  // }, [user])\n  // React.useEffect(() => {\n  //   const call = async () =>{\n  //     const results = await listCases()\n  //     const nodes = results.map(({id, ...data}) => ({\n  //       id: `${data.doctype}:${id}`,\n  //       data\n  //     }))\n  //     controller.update((draft) => {\n  //       draft.nodes = nodes\n  //       draft.edges = []\n  //     })\n  //   }\n  //   call()\n  // }, [])\n  \n  // React.useEffect(() => {\n  //   setTimeout(() => {\n  //     controller.update((draft) => {\n  //       draft.graphConfig.clusters[0].visible = true\n  //     })\n  //   }, 9000)\n  // }, [])\n  React.useEffect(() => {\n    // setTimeout(() => {\n    //   controller.update((draft, { graphEditorRef }) => {\n    //     try {\n    //       const { hitArea } = graphEditorRef.current.viewport\n    //       const margin = 500\n    //       const boundingBox = {\n    //         x1: hitArea.x + margin,\n    //         y1: hitArea.y + margin,\n    //         w: hitArea.width - 2*margin,\n    //         h: hitArea.height - 2*margin,\n    //       }\n    //       const layout = Graph.Layouts.cose\n    //       draft.graphConfig!.layout = {\n    //         ...layout,\n    //         animationDuration: 0,\n    //         boundingBox,\n    //       } \n    //     } catch (error) {\n    //       console.log('error',error)\n    //     }\n    //   })\n    // }, 1000)\n}, [])\n\n  return (\n    <View\n      style={{ display: 'flex', flexDirection: 'column', width: '100%', height: '100%' }}\n    >\n      <GraphEditor\n        {...controllerProps}\n        // {...R.omit(['eventHistory', ])(controllerProps)}\n        payload={[configRef.current]}\n        style={{ width, height }}\n        // renderNode={(props) => (\n        //   <RenderNode\n        //     {...props}\n        //     {...configRef.current}\n        //   />\n        // )}\n        // renderEdge={RenderEdge}\n        {...rest}\n      />\n      <QueryBuilder\n        isOpen={state.queryBuilder.visible}\n        query={state.queryBuilder.query}\n        onClose={() => updateState((draft) => {\n          draft.queryBuilder.visible = false\n        })}\n        onStart={() => {\n          controller.update((draft) => {\n            draft.isLoading = true\n          })\n          updateState((draft) => {\n            draft.queryBuilder.visible = false\n          })\n        }}\n        onError={(error) => {\n          controller.update((draft) => {\n            draft.isLoading = false\n          })\n          updateState((draft) => {\n            draft.queryBuilder.visible = true\n          })\n          alertRef.current.alert({\n            type: 'warning',\n            text: error.message\n          })\n        }}\n        onFinish={({\n          nodes = [],\n          edges= [],\n          networkStatistics,\n          message\n        } = {}) => {\n          controller.update((draft) => {\n            draft.nodes = nodes\n            draft.edges = edges\n            draft.networkStatistics = {\n              local: networkStatistics\n            }\n            draft.isLoading = false\n            draft.graphConfig!.layout = Graph.Layouts.circle\n          })\n          if (message) {\n            alertRef.current.alert({\n              type: 'warning',\n              text: message\n            })\n          }\n        }}\n      />\n      <HelpModal \n        isOpen={state.helpModal.isOpen}\n        onClose={() => updateState((draft) => {\n          draft.helpModal.isOpen = false\n        })}\n        videoId={HELP_VIDEO_ID}\n      />\n      {/* <TermsOfService\n          user={user}\n          onAgree={async () => {\n            updateState((draft) => {\n              draft.helpModal.isOpen = true\n            })\n            await Auth.updateUserAttributes(user, {\n              'custom:isOldUser': 'yes'\n            })\n          }}\n          // onDisagree={() => {\n          //   alert('To proceed on signin, you need to accept the Terms of Usage!')\n          // }}\n        /> */}\n        <AlertContent \n          ref={alertRef}\n        />\n      <Backdrop\n        sx={{ color: '#fff', zIndex: (theme) => theme.zIndex.drawer + 1 }}\n        open={controllerProps.isLoading}\n      >\n        <CircularProgress color=\"inherit\" />\n      </Backdrop>\n    </View>\n  )\n}\n\nconst AlertContent = React.forwardRef((props,forwardedRef) => {\n    const [open, setOpen] = React.useState(false);\n    const [messageInfo, setMessageInfo] = React.useState(undefined);\n    const ref = useForwardRef(\n      forwardedRef,\n      {},\n      ()=> ({\n        alert: (message) => {\n          setMessageInfo({\n            key: R.uuid(),\n            ...message,\n          })\n          setOpen(true)\n        }\n      })\n    )\n    const handleClose = (event, reason) => {\n      // if (reason === 'clickaway') {\n      //   return;\n      // }\n      setOpen(false);\n    }\n    const TransitionUp = React.useCallback((props) =>(\n      <Slide \n        {...props}\n        direction=\"down\"\n          handleExited={() => {\n          setMessageInfo(undefined);\n        }}\n      />\n    ), [])\n    return (\n      <Snackbar\n        key={messageInfo?.key}\n        anchorOrigin={{\n          vertical: 'top',\n          horizontal: 'right',\n        }}\n        open={open}\n        autoHideDuration={4000}\n        TransitionComponent={TransitionUp}\n        onClose={handleClose}\n      >\n        <Alert \n          onClose={handleClose}\n          severity={messageInfo?.type ?? 'error'}\n        >\n          <AlertTitle>{messageInfo ? R.upperFirst(messageInfo.type): ''}</AlertTitle>\n          {\n            messageInfo?.text\n          }\n        </Alert>\n      </Snackbar>\n    )\n})\n\nconst MUI_THEMES = {\n  Dark: MUIDarkTheme,\n  Light: MUILightTheme,\n}\n\nexport default (props: Props) => {\n  const [theme, setTheme] = React.useState(MUI_THEMES.Light)\n  return (\n    <MuiThemeProvider theme={theme}>\n      <AppContainer\n        changeMUITheme={(name) => setTheme(MUI_THEMES[name])}\n        {...props}\n      />\n    </MuiThemeProvider>\n  )\n}\n\n// type Node = {\n//   id: string;\n//   data: {\n//     year: string;\n//     ...\n//   },\n// }\n\n// type Edge = {\n//   id: string;\n//   source: string;\n//   target: string;\n//   data: {\n//     year: string;\n//     ...\n//   },\n// }","import * as R from 'colay/ramda'\n// import mergeAllOf from 'json-schema-merge-allof'\n// @ts-ignore\nimport toJSONSchema from 'to-json-schema'\n\nexport const createSchema = (itemList: any[]) => {\n  const options = {\n    objects: { additionalProperties: false },\n    arrays: { mode: 'tuple' },\n  }\n  return {\n    ...toJSONSchema(R.mergeAll(itemList), options),\n    title: 'Filter',\n  }\n  // const allOf = itemList.map((item) => {\n  //   let baseSchema\n  //   try {\n  //     baseSchema = toJSONSchema(item, options)\n  //   } catch (error) {\n  //     baseSchema = null\n  //   }\n  //   return baseSchema\n  // }).filter((item) => item !== null)\n  // const schema = {\n  //   type: ['object'],\n  //   // additionalProperties: {\n  //   //   type: 'string',\n  //   //   minLength: 5\n  //   // },\n  //   title: 'Filter',\n  //   allOf,\n  // }\n  // return mergeAllOf(schema)\n}\n// export const createSchema = (itemList: object[]) => {\n//   let required: string[] = []\n//   let baseSchema = { properties: { } }\n//   itemList.map((item: object) => {\n//     const keys = Object.keys(item)\n//     if (R.isEmpty(required)) {\n//       required = keys\n//       // @ts-ignore\n//       baseSchema = toJSONSchema(item)\n//       return\n//     }\n//     const schema = toJSONSchema(item)\n//     baseSchema.properties = {\n//       ...baseSchema.properties,\n//       ...schema.properties,\n//     }\n//     required = R.intersection(required, keys)\n//   })\n//   return {\n//     ...baseSchema,\n//     required,\n//   }\n// }\n","import React from 'react'\nimport App from './_examples/CaseLawExplorerExample'\nimport ProfilesApp from './_examples/Profiles'\nimport { ThemeProvider, createTheme } from '@mui/material'\nimport { useMeasure,View } from 'colay-ui'\n\nconst theme = createTheme()\n\nimport cytoscape from 'cytoscape'\n// @ts-ignore\nimport euler from 'cytoscape-euler'\n// @ts-ignore\nimport cise from 'cytoscape-cise'\n// @ts-ignore\nimport d3Force from 'cytoscape-d3-force'\n// @ts-ignore\nimport cola from 'cytoscape-cola'\n// @ts-ignore\nimport avsdf from 'cytoscape-avsdf'\n// @ts-ignore\nimport dagre from 'cytoscape-dagre'\n// @ts-ignore\nimport spread from 'cytoscape-spread'\n// @ts-ignore\nimport klay from 'cytoscape-klay'\n\ncytoscape.use(klay)\nspread(cytoscape)\ncytoscape.use(dagre)\ncytoscape.use(avsdf)\ncytoscape.use(euler)\ncytoscape.use(cise)\ncytoscape.use(cola)\ncytoscape.use(d3Force)\n\nexport default () => {\n  const [containerRef, { width, height, initialized }] = useMeasure()\n  return (\n    <ThemeProvider theme={theme}>\n          <View \n      ref={containerRef}\n      style={{\n        width: '100%', height: '100%'\n      }}\n    >\n      {\n        initialized && (\n          <App\n            dispatch={() => {}}\n            {...{width, height}}\n          />\n        )\n      }\n    </View>\n    </ThemeProvider>\n    \n  )\n}\n"],"sourceRoot":""}