(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{471:function(e,t,n){"use strict";var r=n(0),a=n.n(r),i=n(5),o=n(472),l=n(1166),s=n(1165),c=n(1194),d=n(1154),u=n(1164),m=n(1159),p=n(1195),f=n(1196),g=n(13),y=n(38);const h={palette:{common:{black:0,white:16777215},primary:{light:7964363,main:4149685,dark:3162015,contrastText:16777215},secondary:{light:16728193,main:16056407,dark:12915042,contrastText:16777215},error:{light:15037299,main:16007990,dark:13840175,contrastText:16777215},warning:{light:16758605,main:16750592,dark:16088064,contrastText:0},info:{light:6600182,main:2201331,dark:1668818,contrastText:16777215},success:{light:8505220,main:5025616,dark:3706428,contrastText:0},grey:{50:16448250,100:16119285,200:15658734,300:14737632,400:12434877,500:10395294,600:7697781,700:6381921,800:4342338,900:2171169,A100:14013909,A200:11184810,A400:3158064,A700:6381921},text:{primary:723723,secondary:723723,disabled:723723},divider:723723,background:{paper:10066329,default:16448250},action:{active:0,hover:0,selected:0,disabled:0,disabledBackground:0,focus:0}}},v={palette:{common:{black:0,white:16777215},primary:{light:7964363,main:4149685,dark:3162015,contrastText:16777215},secondary:{light:16728193,main:16056407,dark:12915042,contrastText:16777215},error:{light:15037299,main:16007990,dark:13840175,contrastText:16777215},warning:{light:16758605,main:16750592,dark:16088064,contrastText:0},info:{light:6600182,main:2201331,dark:1668818,contrastText:16777215},success:{light:8505220,main:5025616,dark:3706428,contrastText:0},grey:{50:16448250,100:16119285,200:15658734,300:14737632,400:12434877,500:10395294,600:7697781,700:6381921,800:4342338,900:2171169,A100:14013909,A200:11184810,A400:3158064,A700:6381921},text:{primary:16777215,secondary:16777215,disabled:16777215,icon:16777215},divider:16777215,background:{paper:8421504,default:3158064},action:{active:16777215,hover:16777215,selected:16777215,disabled:16777215,disabledBackground:16777215,focus:16777215}}},{Context:b,Provider:E,useProvider:O}=Object(g.d)({value:h}),w=E,x=()=>{const[e]=O();return e};var D=n(53);const I=D.Text;var C=n(20);const j={animate:"end",animationEasing:"linear",animationDuration:1e3,animateFilter:()=>!0,animationThreshold:250};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T={cose:k({name:"cose",ready(){},stop(){},refresh:20,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:e=>2048,nodeOverlap:4,idealEdgeLength:e=>32,edgeElasticity:e=>32,nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1},j),breadthfirst:k({name:"breadthfirst",fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,ready:void 0,stop:void 0,transform:(e,t)=>t},j),concentric:k({name:"concentric",fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:e=>e.degree(),levelWidth:e=>e.maxDegree()/4,ready:void 0,stop:void 0,transform:(e,t)=>t},j),circle:k({name:"circle",fit:!0,padding:30,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,ready:void 0,stop:void 0,transform:(e,t)=>t},j),grid:k({name:"grid",fit:!0,padding:30,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:e=>{},sort:void 0,ready:void 0,stop:void 0,transform:(e,t)=>t},j),random:k({name:"random",fit:!0,padding:30,ready:void 0,stop:void 0,transform:(e,t)=>t},j),euler:k({name:"euler",springLength:e=>400,springCoeff:e=>8e-4,mass:e=>40,gravity:-1.2,pull:.001,theta:.666,dragCoeff:.02,movementThreshold:1,timeStep:20,refresh:10,maxIterations:1e3,ungrabifyWhileSimulating:!1,padding:30,avoidOverlap:!0,ready(){},stop(){},randomize:!1},j),cise:k({name:"cise",animate:!1,refresh:10,animationDuration:void 0,animationEasing:void 0,fit:!0,padding:30,nodeSeparation:12.5,idealInterClusterEdgeLengthCoefficient:1.4,allowNodesInsideCircle:!1,maxRatioOfNodesInsideCircle:.1,springCoeff:.45,nodeRepulsion:4500,gravity:.25,gravityRange:3.8,ready(){},stop(){}},j),cola:k({name:"cola",animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,ready(){},stop(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,convergenceThreshold:.01,nodeSpacing:e=>10,flow:void 0,alignment:void 0,gapInequalities:void 0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0},j),avsdf:k({name:"avsdf",ready(){},stop(){},refresh:30,fit:!0,padding:10,ungrabifyWhileSimulating:!1,animate:"end",animationDuration:500,nodeSeparation:60},j),dagre:k({name:"dagre",nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,ranker:void 0,minLen:e=>1,edgeWeight:e=>1,fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:(e,t)=>!0,animationDuration:500,animationEasing:void 0,transform:(e,t)=>t,ready(){},stop(){}},j),spread:k({name:"spread",animate:!0,ready:void 0,stop:void 0,fit:!0,minDist:20,padding:20,expandingFactor:-1,prelayout:{name:"cose"},maxExpandIterations:4,randomize:!1},j),klay:{}};const L="ADD_CLUSTER_ELEMENT",_="ADD_DATA_ADDITIONAL",R="ADD_DATA_VALUE_ADDITIONAL",A="ADD_DATA_VALUE",N="ADD_DATA",M="ADD_EDGE",F="ADD_NODE",B="APPLY_EVENTS",V="BOX_SELECTION",U="CALCULATE_GLOBAL_NETWORK_STATISTICS",H="CHANGE_CLUSTER_VISIBILITY",q="CHANGE_DATA_NAME_ADDITIONAL",G="CHANGE_DATA_NAME",z="CHANGE_DATA_VALUE_ADDITIONAL",W="CHANGE_DATA_VALUE",$="CHANGE_THEME",Y="CLEAR_NODE_GLOBAL_LABEL",X="CLEAR_NODE_LOCAL_LABEL",K="CLOSE_MODAL",J="CREATE_CLUSTER_BY_ALGORITHM_FORM_CLEAR",Q="CREATE_CLUSTER_BY_ALGORITHM_FORM_SUBMIT",Z="CREATE_CLUSTER_FORM_SUBMIT",ee="CREATE_CLUSTER",te="CREATE_PLAYLIST",ne="DEFOCUS",re="DATA_VALUE_DOWN",ae="DATA_VALUE_UP",ie="DELETE_CLUSTER_ELEMENT",oe="DELETE_CLUSTER",le="DELETE_DATA_ADDITIONAL",se="DELETE_DATA_VALUE_ADDITIONAL",ce="DELETE_DATA_VALUE",de="DELETE_DATA",ue="DELETE_EDGE",me="DELETE_HISTORY_ITEM",pe="DELETE_NODE",fe="DELETE_PLAYLIST",ge="ELEMENT_SELECTED_WITH_ZOOM",ye="ELEMENT_SELECTED",he="ELEMENT_SETTINGS",ve="ELEMENT_SETTINGS_FORM_SUBMIT",be="ELEMENT_SETTINGS_FORM_CLEAR",Ee="EXPORT_DATA",Oe="FOCUS",we="IMPORT_DATA",xe="IMPORT_EVENTS",De="LAYOUT_CHANGED",Ie="MODE_CHANGED",Ce="PLAY_EVENTS",je="PREFERENCES_FORM_CLEAR",Pe="PREFERENCES_FORM_SUBMIT",ke="PRESS_ADD_CLUSTER_ELEMENT",Se="PRESS_BACKGROUND",Te="RECORD_FINISHED",Le="REDO_EVENT",_e="REORDER_CLUSTER",Re="REORDER_HISTORY_ITEM",Ae="REORDER_PLAYLIST",Ne="SELECT_CLUSTER",Me="SET_NODE_GLOBAL_LABEL",Fe="SET_NODE_LOCAL_LABEL",Be="SET_POSITIONS_IMPERATIVELY",Ve="SETTINGS_FORM_CHANGED",Ue="SETTINGS_FORM_CLEAR",He="TOGGLE_ACTION_BAR",qe="TOGGLE_DATA_BAR",Ge="TOGGLE_FILTER_BAR",ze="TOGGLE_NODE_GLOBAL_LABEL_FIRST",We="TOGGLE_PREFERENCES_MODAL",$e="TOGGLE_RECORD_EVENTS",Ye="TOGGLE_RECORD",Xe="UNDO_EVENT",Ke="UPDATE_DATA",Je="data",Qe="__context",Ze={ADD:"ADD",DELETE:"DELETE",CONTINUES_ADD:"CONTINUES_ADD",CONTINUES_DELETE:"CONTINUES_DELETE",DEFAULT:"DEFAULT",ADD_CLUSTER_ELEMENT:"ADD_CLUSTER_ELEMENT"},et=Object.keys(T),tt="select",nt="unselect",rt="position",at="selectEdge",it="unselectEdge",ot="selectNode",lt="unselectNode",st="data",ct="mouseover",dt="mouseout",ut=2,mt=1,pt=0,ft={view:{width:50,height:50,radius:50,fill:{default:h.palette.background.paper,hovered:h.palette.secondary.main,selected:h.palette.primary.main,edgeSelected:h.palette.secondary.main},labelVisible:!0},filter:{settings:{opacity:.2}},renderEvents:[tt,nt,at,it,ct,dt]},gt={view:{lineType:"line",width:2,alpha:1,fill:{default:h.palette.background.paper,hovered:h.palette.secondary.main,selected:h.palette.primary.main,nodeSelected:h.palette.secondary.main},labelVisible:!0},filter:{settings:{opacity:.2}},renderEvents:[tt,nt,ot,lt,ct,dt]};var yt=n(39),ht=n.n(yt);function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Et=e=>{const{from:t,to:n,distance:r,count:a,normVector:o}=e,l=o.clone().multiplyScalar(r),s=l.clone().multiplyScalar(-1),c=n.clone().subtract(t).divideScalar(a),d=c.clone().divideScalar(2);return i.I(0,a).map((e,n)=>{const r=n%2===0,a=c.clone().multiplyScalar(n).add(t),i=c.clone().add(a),o=a.clone().add(r?l:s).add(d);return{start:a,mid:o,end:i,upperVector:l,midVec:d.clone().add(a)}})},Ot=e=>{const{from:t,to:n,directed:r,type:a,graphics:i,arrowHead:o={radius:2},distance:l,margin:s={x:0,y:0},unitVector:c,undirectedUnitVector:d,undirectedNormVector:u,width:m,fill:p,alpha:f}=e,g=ht.a.fromObject({x:u.x*s.x,y:u.y*s.y}),y=Math.hypot(t.width,t.height)/2,h=Math.hypot(n.width,n.height)/2,v=ht.a.fromObject(t).add(new ht.a(t.width/2,t.height/2)),b=ht.a.fromObject(n).add(new ht.a(n.width/2,n.height/2)),E=v.clone().add(c.clone().multiplyScalar(y)).add(g),O=b.clone().subtract(c.clone().multiplyScalar(h)).add(g);switch(i.clear(),i.lineStyle(m,p,f),r&&(({graphics:e,to:t,radius:n=10,unitVector:r,fill:a})=>{const i=ht.a.fromObject(t),o=ht.a.fromObject(r).multiplyScalar(n),l=o.clone().rotate(-Math.PI/2),s=l.clone().multiplyScalar(-1).add(i),c=l.clone().add(i),d=i.clone().add(o);e.beginFill(a),e.drawPolygon(new C.l(s.x,s.y),new C.l(c.x,c.y),new C.l(d.x,d.y)),e.endFill()})(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){bt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({graphics:i,unitVector:c,to:O,fill:p},o)),a){case"bezier":Et({from:E,to:O,count:2,distance:100,unitVector:d,normVector:u}).map(({start:e,end:t,mid:n})=>{i.moveTo(e.x,e.y),i.bezierCurveTo(e.x,e.y,n.x,n.y,t.x,t.y)});break;case"segments":Et({from:E,to:O,count:4,distance:100,unitVector:d,normVector:u}).map(({start:e,mid:t,end:n})=>{i.moveTo(e.x,e.y),i.lineTo(t.x,t.y),i.moveTo(t.x,t.y),i.lineTo(n.x,n.y)});break;default:if(l){Et({from:E,to:O,count:1,distance:l,unitVector:d,normVector:u}).map(({mid:e,start:t,end:n})=>{i.moveTo(t.x,t.y),i.bezierCurveTo(t.x,t.y,e.x,e.y,n.x,n.y)})}else i.moveTo(E.x,E.y),i.lineTo(O.x,O.y)}i.endFill(),i.zIndex=-100},wt=(e,t)=>{const{width:n=0,height:r=0,fill:a,radius:i=0,lineWidth:o=0,lineFill:l,alpha:s=1}=t;if(a||l){e.clear(),e.beginFill(a,s),e.lineStyle(o,l);const t=n/2;n===r&&i>=t?e.drawCircle(t,t,t):e.drawRoundedRect(0,0,n,r,i),e.endFill()}},xt=D.Graphics;n(408);function Dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(n),!0).forEach((function(t){Ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const jt=(e,t)=>e,Pt=!1,kt=(e,t,n={},r={isFlex:Pt,rescaleToYoga:!1})=>{e=e;const{isFlex:a=Pt,rescaleToYoga:o=!1}=r;if(a){var l;const{style:t={}}=n;e.flex=!0,e.yoga.flexDirection=null!==(l=null===t||void 0===t?void 0:t.flexDirection)&&void 0!==l?l:"column",e.yoga.keepAspectRatio=i.e(n.resizeMode,"contain"),e.yoga.rescaleToYoga=o,e.yoga.fromConfig(t)}return e._visible=n.visible,Object(D.applyDefaultProps)(e,jt(t),jt(n))},St=(e,t)=>{const n=e.id(),r=e.isNode()?"nodes":"edges",a=t[r].findIndex(e=>e.id===n);return{item:t[r][a],index:a}},Tt=(e,t)=>{const n=e.selectedElementIds,r=i.v(null!==n&&void 0!==n?n:[]),a=r?t.cy.$id(""+r):null;if(!a)return{};const o=a.isNode()?"nodes":"edges",l=e[o].findIndex(e=>e.id===r);return{selectedItem:e[o][l],selectedElement:a,index:l,type:o}},Lt=(e=[],t)=>{var n;return i.q(e)?t.id:null!==(n=i.D([Je,...e],t))&&void 0!==n?n:t.id},_t=async(e,t)=>new Promise((n,r)=>{const a=new FileReader;a.addEventListener("load",()=>{const{result:e}=a;n(e)}),a.addEventListener("error",e=>{r(e)}),a.readAsText(e,t)}),Rt=e=>{const t={x:e.x*e.scale.x,y:e.y*e.scale.y};if(0===e.children.length)return It(It({},t),{},{width:0,height:0});const n=e.getChildAt(0),r=n.removeChildren();if(0===n.width)return r.forEach(e=>{n.addChild(e)}),It(It({},Rt(n)),t);const a=It(It({},t),{},{width:n.width*n.scale.x,height:n.height*n.scale.y});return r.forEach(e=>{n.addChild(e)}),a},At=(e,t=[])=>{let n=!0;return t.forEach(t=>{var r;t.ids.includes(e)&&(n=n&&!(null===(r=t.visible)||void 0===r||r))}),n},Nt=e=>{const t=Ht.get(e);return Object.values(t.settings.visibility).reduce((e,t)=>e&&t,!0)},Mt={},Ft=(e,t,n=!1)=>{const r=t.x-e.x,a=t.y-e.y;return It(It({},e),{},{width:n?Math.abs(r):r,height:n?Math.abs(a):a})},Bt=e=>{e.elements(":selected").unselect()},Vt=(e,t)=>{const n=Ut(t);return e.options.interaction&&e.options.interaction.mapPositionToPoint(n,n.x,n.y),n.x/=e.scale.x,n.y/=e.scale.y,n.x+=e.left,n.y+=e.top,n},Ut=e=>{var t,n,r,a;const i=null!==(t=null!==(n=null===(r=e.touches)||void 0===r?void 0:r[0])&&void 0!==n?n:null===(a=e.changedTouches)||void 0===a?void 0:a[0])&&void 0!==t?t:e;return{x:i.clientX,y:i.clientY}},Ht={update:(e,t)=>{e.data({[Qe]:t})},get:e=>e.data(Qe),getNodeContext:e=>e.data(Qe),getEdgeContext:e=>e.data(Qe)},qt=e=>e.data(Je),Gt=e=>({id:e.id(),data:qt(e)}),zt=(e,t)=>t.clone().subtract(e).divideScalar(2).add(e),Wt=e=>{const{hitArea:t}=e.viewport;return{x:t.x+t.width/2,y:t.y+t.height/2}},$t=e=>Ht.get(e).settings.filtered,Yt=e=>{let t;try{t=new URL(e)}catch(n){return!1}return"http:"===t.protocol||"https:"===t.protocol};function Xt(){return(Xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Kt=Object(D.PixiComponent)("View",{create:()=>new C.g,applyProps:(e,t,n)=>{const r=n;wt(e,r);const a=["fill","width","height"];kt(e,i.C(a,t),i.C(a,r))}}),Jt=Object(g.m)((e,t)=>{const n=x();return a.a.createElement(Kt,Xt({ref:t,theme:n},e))},{isForwardRef:!0}),Qt=Object(g.m)((e,t)=>{const{name:n,story:r,link:i,onClick:o}=e;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Jt,{width:300,height:150,radius:30},a.a.createElement(Jt,{width:200},a.a.createElement(Jt,{x:10,interactive:!0,buttonMode:!0,pointertap:()=>{i&&window.open(i,"_blank"),null===o||void 0===o||o()}},a.a.createElement(I,{style:Zt.title},n)),a.a.createElement(I,{style:Zt.paragraph},r))))},{isForwardRef:!0}),Zt={paragraph:{fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:10,width:150,wordWrap:!0,wordWrapWidth:150,color:"white",left:30},title:{fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fontSize:16,width:150,wordWrap:!0,wordWrapWidth:150,color:"white"}},en=["cy","attributes"],tn=["cy","nodes","edges","attributes"],nn=["cy","attributes"],rn=["cy","nodes","edges","attributes"],an=["cy","attributes"],on=["cy","nodes","edges","attributes"],ln=["cy","attributes"],sn=["cy","nodes","edges","attributes"],cn=["cy","attributes"],dn=["cy","nodes","edges","attributes"],un=["cy","attributes"],mn=["cy","nodes","edges","attributes"];function pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(n),!0).forEach((function(t){gn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const hn=e=>t=>{const{pathText:n,nodes:r=[],edges:a=[]}=e,o=t.id(),l=(t.isNode()?r:a).find(e=>e.id===o);return i.D(n.split("."),l)},vn={markov:{get:e=>{let{cy:t,attributes:n}=e,r=yn(e,en);return t.elements().markovClustering(fn(fn({},r),{},{attributes:[e=>e.data(n)]}))},getByItem:e=>{let{cy:t,nodes:n,edges:r,attributes:a}=e,i=yn(e,tn);return t.elements().markovClustering(fn(fn({},i),{},{attributes:[hn({edges:r,nodes:n,pathText:a})]}))},configSchema:{required:["attributes"],properties:{attributes:{type:"string",default:"label",info:"each of which returns a numeric attribute value for the specified edge. Attributes are used to cluster the nodes; i.e. the attributes of an edge indicate similarity between its nodes."},expandFactor:{type:"number",default:2,info:"A number that affects time of computation and cluster granularity to some extent: M * M (defaultValue 2)"},inflateFactor:{type:"number",default:1,info:"A number that affects cluster granularity (the greater the value, the more clusters): M(i,j) / E(j)"},multFactor:{type:"number",default:1,info:"Optional number of self loops for each node. Use a neutral value to improve cluster computations"},maxIterations:{type:"number",default:20,info:"Maximum number of iterations of the MCL algorithm in a single run"}}},configForm:{attributes:{type:"string",defaultValue:"label",info:"each of which returns a numeric attribute value for the specified edge. Attributes are used to cluster the nodes; i.e. the attributes of an edge indicate similarity between its nodes.",required:!0},expandFactor:{type:"number",defaultValue:2,info:"A number that affects time of computation and cluster granularity to some extent: M * M (defaultValue 2)"},inflateFactor:{type:"number",defaultValue:1,info:"A number that affects cluster granularity (the greater the value, the more clusters): M(i,j) / E(j)"},multFactor:{type:"number",defaultValue:1,info:"Optional number of self loops for each node. Use a neutral value to improve cluster computations"},maxIterations:{type:"number",defaultValue:20,info:"Maximum number of iterations of the MCL algorithm in a single run"}}},kMeans:{get:e=>{let{cy:t,attributes:n}=e,r=yn(e,nn);return t.nodes().kMeans(fn(fn({},r),{},{attributes:[e=>e.data(n)]}))},getByItem:e=>{let{cy:t,nodes:n,edges:r,attributes:a}=e,i=yn(e,rn);return t.elements().kMeans(fn(fn({},i),{},{attributes:[hn({edges:r,nodes:n,pathText:a})]}))},configSchema:{required:["attributes","k","distance"],properties:{attributes:{type:"string",default:"label",info:"each of which returns a numeric attribute value for the specified node. Attributes are used to cluster the nodes; i.e. two nodes with similar attributes tend to be in the same cluster. Each attribute may have to be normalised in order for the chosen distance metric to make sense. Attributes must be specified unless a custom distance: function( nodeP, nodeQ ) is specified."},k:{type:"number",default:2,info:"The number of clusters to return."},distance:{type:"string",default:"euclidean",enum:["euclidean","squaredEuclidean","manhattan","max"],info:"The distance classifier used to compare attribute vectors. It is optional if attributes are specified."},maxIterations:{type:"number",default:10,info:"The maximum number of iterations of the algorithm to run "},sensitivityThreshold:{type:"number",default:.001,info:"The coefficients difference threshold used to determine whether the algorithm has converged"}}},configForm:{attributes:{type:"string",defaultValue:"label",info:"each of which returns a numeric attribute value for the specified node. Attributes are used to cluster the nodes; i.e. two nodes with similar attributes tend to be in the same cluster. Each attribute may have to be normalised in order for the chosen distance metric to make sense. Attributes must be specified unless a custom distance: function( nodeP, nodeQ ) is specified.",required:!0},k:{type:"number",defaultValue:2,info:"The number of clusters to return.",required:!0},distance:{type:"choice",defaultValue:"euclidean",choices:["euclidean","squaredEuclidean","manhattan","max"],info:"The distance classifier used to compare attribute vectors. It is optional if attributes are specified.",required:!0},maxIterations:{type:"number",defaultValue:10,info:"The maximum number of iterations of the algorithm to run "},sensitivityThreshold:{type:"number",defaultValue:.001,info:"The coefficients difference threshold used to determine whether the algorithm has converged"}}},kMedoids:{get:e=>{let{cy:t,attributes:n}=e,r=yn(e,an);return t.nodes().kMedoids(fn(fn({},r),{},{attributes:[e=>e.data(n)]}))},getByItem:e=>{let{cy:t,nodes:n,edges:r,attributes:a}=e,i=yn(e,on);return t.elements().kMedoids(fn(fn({},i),{},{attributes:[hn({edges:r,nodes:n,pathText:a})]}))},configSchema:{required:["attributes","k","distance"],properties:{attributes:{type:"string",default:"label",info:"each of which returns a numeric attribute value for the specified node. Attributes are used to cluster the nodes; i.e. two nodes with similar attributes tend to be in the same cluster. Each attribute may have to be normalised in order for the chosen distance metric to make sense"},k:{type:"number",default:2,info:"The number of clusters to return."},distance:{type:"string",default:"euclidean",enum:["euclidean","squaredEuclidean","manhattan","max"],info:"The distance classifier used to compare attribute vectors. It is optional if attributes are specified."},maxIterations:{type:"number",default:10,info:"The maximum number of iterations of the algorithm to run "}}},configForm:{attributes:{type:"string",defaultValue:"label",info:"each of which returns a numeric attribute value for the specified node. Attributes are used to cluster the nodes; i.e. two nodes with similar attributes tend to be in the same cluster. Each attribute may have to be normalised in order for the chosen distance metric to make sense",required:!0},k:{type:"number",defaultValue:2,info:"The number of clusters to return.",required:!0},distance:{type:"choice",defaultValue:"euclidean",choices:["euclidean","squaredEuclidean","manhattan","max"],info:"The distance classifier used to compare attribute vectors. It is optional if attributes are specified.",required:!0},maxIterations:{type:"number",defaultValue:10,info:"The maximum number of iterations of the algorithm to run "}}},fuzzyCMeans:{get:e=>{let{cy:t,attributes:n}=e,r=yn(e,ln);return t.nodes().fuzzyCMeans(fn(fn({},r),{},{attributes:[e=>e.data(n)]}))},getByItem:e=>{let{cy:t,nodes:n,edges:r,attributes:a}=e,i=yn(e,sn);return t.elements().fuzzyCMeans(fn(fn({},i),{},{attributes:[hn({edges:r,nodes:n,pathText:a})]}))},configSchema:{required:["attributes","k","distance"],properties:{attributes:{type:"string",default:"label",info:"each of which returns a numeric attribute value for the specified node. Attributes are used to cluster the nodes; i.e. two nodes with similar attributes tend to be in the same cluster. Each attribute may have to be normalised in order for the chosen distance metric to make sense"},k:{type:"number",default:2,info:"The number of clusters to return."},distance:{type:"string",default:"euclidean",enum:["euclidean","squaredEuclidean","manhattan","max"],info:"The distance classifier used to compare attribute vectors. It is optional if attributes are specified."},maxIterations:{type:"number",default:10,info:"The maximum number of iterations of the algorithm to run "},sensitivityThreshold:{type:"number",default:.001,info:"The coefficients difference threshold used to determine whether the algorithm has converged"}}},configForm:{attributes:{type:"string",defaultValue:"label",info:"each of which returns a numeric attribute value for the specified node. Attributes are used to cluster the nodes; i.e. two nodes with similar attributes tend to be in the same cluster. Each attribute may have to be normalised in order for the chosen distance metric to make sense",required:!0},k:{type:"number",defaultValue:2,info:"The number of clusters to return.",required:!0},distance:{type:"choice",defaultValue:"euclidean",choices:["euclidean","squaredEuclidean","manhattan","max"],info:"The distance classifier used to compare attribute vectors. It is optional if attributes are specified.",required:!0},maxIterations:{type:"number",defaultValue:10,info:"The maximum number of iterations of the algorithm to run "},sensitivityThreshold:{type:"number",defaultValue:.001,info:"The coefficients difference threshold used to determine whether the algorithm has converged"}}},hierarchical:{get:e=>{let{cy:t,attributes:n}=e,r=yn(e,cn);return t.nodes().hierarchicalClustering(fn(fn({},r),{},{attributes:[e=>e.data(n)]}))},getByItem:e=>{let{cy:t,nodes:n,edges:r,attributes:a}=e,i=yn(e,dn);return t.elements().hierarchicalClustering(fn(fn({},i),{},{attributes:[hn({edges:r,nodes:n,pathText:a})]}))},configSchema:{required:["attributes","distance","mode"],properties:{attributes:{type:"string",default:"label",info:"each of which returns a numeric attribute value for the specified node. Attributes are used to cluster the nodes; i.e. two nodes with similar attributes tend to be in the same cluster. Each attribute may have to be normalised in order for the chosen distance metric to make sense"},distance:{type:"string",default:"euclidean",enum:["euclidean","squaredEuclidean","manhattan","max"],info:"The distance classifier used to compare attribute vectors. It is optional if attributes are specified.",required:!0},linkage:{type:"string",default:"single",enum:["mean","min","complete","max"],info:"The linkage criterion for measuring the distance between two clusters;"},mode:{type:"string",default:"threshold",enum:["threshold","dendogram"],info:" The mode of the algorithm. For 'threshold' (defaultValue), clusters are merged until they are at least the specified distance apart. For 'dendrogram', the clusters are recursively merged using the branches in a dendrogram (tree) structure beyond a specified depth."},threshold:{type:"number",default:null,info:"In mode: 'threshold', distance threshold for stopping the algorithm. All pairs of the returned clusters are at least threshold distance apart. Without specifying this value for mode: 'threshold', all clusters will eventually be merged into a single cluster."},dendrogramDepth:{type:"number",default:null,info:"In mode: 'dendrogram', the depth beyond which branches are merged in the tree. For example, a value of 0 (defaultValue) results in all branches being merged into a single cluster."},addDendrogram:{type:"number",default:null,info:"In mode: 'dendrogram', whether to add nodes and edges to the graph for the dendrogram (defaultValue false). This is not necessary to run the algorithm, but it is useful for visualising the results."}}},configForm:{attributes:{type:"string",defaultValue:"label",info:"each of which returns a numeric attribute value for the specified node. Attributes are used to cluster the nodes; i.e. two nodes with similar attributes tend to be in the same cluster. Each attribute may have to be normalised in order for the chosen distance metric to make sense",required:!0},distance:{type:"choice",defaultValue:"euclidean",choices:["euclidean","squaredEuclidean","manhattan","max"],info:"The distance classifier used to compare attribute vectors. It is optional if attributes are specified.",required:!0},linkage:{type:"choice",defaultValue:"single",choices:["mean","min","complete","max"],info:"The linkage criterion for measuring the distance between two clusters;"},mode:{type:"choice",defaultValue:"threshold",choices:["threshold","dendogram"],info:" The mode of the algorithm. For 'threshold' (defaultValue), clusters are merged until they are at least the specified distance apart. For 'dendrogram', the clusters are recursively merged using the branches in a dendrogram (tree) structure beyond a specified depth.",required:!0},threshold:{type:"number",defaultValue:null,info:"In mode: 'threshold', distance threshold for stopping the algorithm. All pairs of the returned clusters are at least threshold distance apart. Without specifying this value for mode: 'threshold', all clusters will eventually be merged into a single cluster."},dendrogramDepth:{type:"number",defaultValue:null,info:"In mode: 'dendrogram', the depth beyond which branches are merged in the tree. For example, a value of 0 (defaultValue) results in all branches being merged into a single cluster."},addDendrogram:{type:"number",defaultValue:null,info:"In mode: 'dendrogram', whether to add nodes and edges to the graph for the dendrogram (defaultValue false). This is not necessary to run the algorithm, but it is useful for visualising the results."}}},affinityPropagation:{get:e=>{let{cy:t,attributes:n}=e,r=yn(e,un);return t.nodes().affinityPropagation(fn(fn({},r),{},{attributes:[e=>e.data(n)]}))},getByItem:e=>{let{cy:t,nodes:n,edges:r,attributes:a}=e,i=yn(e,mn);return t.elements().affinityPropagation(fn(fn({},i),{},{attributes:[hn({edges:r,nodes:n,pathText:a})]}))},configSchema:{required:["attributes","distance"],properties:{attributes:{type:"string",default:"label",info:"each of which returns a numeric attribute value for the specified node. Attributes are used to cluster the nodes; i.e. two nodes with similar attributes tend to be in the same cluster. Each attribute may have to be normalised in order for the chosen distance metric to make sense"},distance:{type:"string",default:"euclidean",enum:["euclidean","squaredEuclidean","manhattan","max"],info:"The distance classifier used to compare attribute vectors. It is optional if attributes are specified."},preference:{type:"string",default:"median",enum:["mean","min","complete","max"],info:"The metric used to determine the suitability of a data point (i.e. node attribute vector) to serve as an exemplar. It may take on one of several special values, which are determined from the similarity matrix (i.e. the negative distance matrix). Or a manual, numeric value may be used (generally of the opposite sign of your distance values)"},damping:{type:"number",default:.8,maximum:1,minimum:.5,includeMin:!0,info:"A damping factor on [0.5, 1)"},minIterations:{type:"number",default:100,info:"The minimum number of iteraions the algorithm will run before stopping"},maxIterations:{type:"number",default:1e3,info:"The maximum number of iteraions the algorithm will run before stopping"}}},configForm:{attributes:{type:"string",defaultValue:"label",info:"each of which returns a numeric attribute value for the specified node. Attributes are used to cluster the nodes; i.e. two nodes with similar attributes tend to be in the same cluster. Each attribute may have to be normalised in order for the chosen distance metric to make sense",required:!0},distance:{type:"choice",defaultValue:"euclidean",choices:["euclidean","squaredEuclidean","manhattan","max"],info:"The distance classifier used to compare attribute vectors. It is optional if attributes are specified.",required:!0},preference:{type:"choice",defaultValue:"median",choices:["mean","min","complete","max"],info:"The metric used to determine the suitability of a data point (i.e. node attribute vector) to serve as an exemplar. It may take on one of several special values, which are determined from the similarity matrix (i.e. the negative distance matrix). Or a manual, numeric value may be used (generally of the opposite sign of your distance values)"},damping:{type:"number",defaultValue:.8,max:1,min:.5,includeMin:!0,info:"A damping factor on [0.5, 1)"},minIterations:{type:"number",defaultValue:100,info:"The minimum number of iteraions the algorithm will run before stopping"},maxIterations:{type:"number",defaultValue:1e3,info:"The maximum number of iteraions the algorithm will run before stopping"}}}};C.v.ROUND_PIXELS=!1,C.v.PRECISION_FRAGMENT=C.j.LOW,C.v.RESOLUTION=1,C.v.SCALE_MODE=C.m.NEAREST;var bn=n(69),En=n.n(bn);const On={};var wn=n(124);const xn=[],Dn=e=>{const{element:t,contextRef:n,config:r,item:i}=e,{renderEvents:o=xn}=r,l=Object(wn.a)();return a.a.useEffect(()=>{l.current&&t.data({[Je]:null===i||void 0===i?void 0:i.data})},[null===i||void 0===i?void 0:i.data]),a.a.useEffect(()=>{o.forEach(e=>{t.on(e,()=>{var e,t;null===(e=n.current)||void 0===e||null===(t=e.render)||void 0===t||t.call(e)})});const e=t.isNode();return t.on(tt,()=>{if(e)t.connectedEdges().forEach(e=>{e.emit(ot)});else{const e=t;e.source().emit(at),e.target().emit(at)}}),t.on(nt,()=>{if(e)t.connectedEdges().forEach(e=>{e.emit(lt)});else{const e=t;e.source().emit(it),e.target().emit(it)}}),()=>{o.forEach(e=>{t.removeListener(e)}),t.removeListener(tt),t.removeListener(nt)}},[t,o]),a.a.useEffect(()=>{var e,a,o;const l=n.current.settings.filtered,s=null===(e=null===(a=r.filter)||void 0===a||null===(o=a.test)||void 0===o?void 0:o.call(a,{element:t,item:i}))||void 0===e||e;var c;(n.current.settings.filtered=s,l!==s)&&(Ht.update(t,n.current),Nt(t)&&(null===(c=n.current)||void 0===c||c.render()))},[r.filter]),a.a.useMemo(()=>{t.hovered=()=>{var e;return!(null===(e=n.current)||void 0===e||!e.settings.hovered)},t.filtered=()=>{var e;return!(null===(e=n.current)||void 0===e||!e.settings.filtered)}},[t]),{}};function In(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?In(Object(n),!0).forEach((function(t){jn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Pn={x:0,y:0,width:0,height:0},kn=e=>{const{position:t,onPositionChange:n,graphID:r,config:i={},item:o,isCluster:l=!1}=e,{id:s}=o,c=Object(wn.a)(),{cy:d,clustersByNodeId:u,clustersByChildClusterId:m}=On[r],p=l?m[s]:u[s],[,f]=Object(g.l)({},()=>{}),y=a.a.useRef({render:e=>f({},e),onPositionChange:()=>{null===n||void 0===n||n({element:h,context:y.current}),h.connectedEdges().forEach(e=>{Ht.get(e).onPositionChange()})},boundingBox:Pn,settings:{filtered:!0,visibility:{cluster:At(s,p)},hovered:!1}}),h=a.a.useMemo(()=>{let e=d.$id(s)[0];return e||(e=d.add({data:{id:s,[Qe]:y.current,[Je]:null===o||void 0===o?void 0:o.data},position:Cn({},t),group:"nodes"})),e},[d,s]);return a.a.useEffect(()=>{const{current:{onPositionChange:e}}=y;return h.on(rt,e),h.on(ct,()=>{y.current.settings.hovered=!0,Ht.update(h,y.current)}),h.on(dt,()=>{y.current.settings.hovered=!1,Ht.update(h,y.current)}),()=>{h.removeListener(rt),h.removeListener(ct),h.removeListener(dt),d.remove(h)}},[d,s]),a.a.useMemo(()=>{c.current&&h.position(t)},[t.x,t.y]),a.a.useMemo(()=>{const e=At(h.id(),p);if(e!==y.current.settings.visibility.cluster){const t=Nt(h);y.current.settings.visibility.cluster=e,Ht.update(h,y.current),t!==Nt(h)&&y.current.render()}},[h,p]),Dn({contextRef:y,cy:d,element:h,config:i,item:o}),{element:h,context:y.current,clusters:p,cy:d}},{Context:Sn,useSelector:Tn,Provider:Ln}=Object(g.e)({},{immer:!1}),_n=Ln,Rn=Tn;const An=Object(D.PixiComponent)("PIXIContainer",{create:e=>{const{onDrag:t,draggable:n=!1,interactive:r=!1}=e,a=new C.d;if(a.interactive=r||n,n){const{onDown:e,onMove:n}=function(e){const t={position:null};return document.addEventListener("pointerup",()=>{t.position=null}),{onDown:e=>{t.position=e},onMove:n=>{if(t.position){var r;const a=null!==(r=e(ht.a.fromObject(n).subtract(ht.a.fromObject(t.position))))&&void 0!==r?r:{};return t.position=n,!1===(null===a||void 0===a?void 0:a.keepDragging)&&(t.position=null),Object.keys(a).includes("position")&&(t.position=a.position),a}}}}(e=>{const{parent:{scale:n}}=a;a.x+=e.x/n.x,a.y+=e.y/n.y,t&&t({x:a.x,y:a.y})});a.on("pointerdown",t=>{const{originalEvent:n}=t.data,{x:r,y:a}=Ut(n);e({x:r,y:a})}).on("pointermove",e=>{const{originalEvent:t}=e.data,{x:r,y:a}=Ut(t);n({x:r,y:a})})}return a},applyProps:(e,t,n)=>{kt(e,t,n,{isFlex:!1})}}),Nn={x:0,y:0},Mn=Object(g.m)((e,t)=>{var n,r,i,o,l,s;const{item:c,graphID:d,children:u,config:m={},graphRef:p}=e,f=a.a.useRef(null),{element:g,context:y,cy:h}=kn({graphID:d,config:m,position:null!==(n=null!==(r=m.position)&&void 0!==r?r:c.position)&&void 0!==n?n:Nn,onPositionChange:({element:e})=>{const t=f.current,{x:n,y:r}=e.position();t.x=n,t.y=r,y.boundingBox.x=n,y.boundingBox.y=r},item:c}),{x:v,y:b}=g.position(),E=a.a.useCallback(e=>{g.position(e)},[g]);a.a.useEffect(()=>{const e=f.current;y.boundingBox=Rt(e)});const O=x(),w=Nt(g)&&(null===(i=c.visible)||void 0===i||i),D=y.settings.filtered?1:null!==(o=null===(l=m.filter)||void 0===l||null===(s=l.settings)||void 0===s?void 0:s.opacity)&&void 0!==o?o:.2;return a.a.createElement(An,{ref:f,x:v,y:b,alpha:D,visible:w,draggable:!0,onDrag:E,mouseover:()=>{g.emit(ct)},mouseout:()=>{g.emit(dt)}},u({item:c,element:g,cy:h,theme:O,graphRef:p,context:y,config:m}))},{isForwardRef:!0});function Fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fn(Object(n),!0).forEach((function(t){Vn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Un=e=>{const t=e.id(),n=e.target(),r=e.source(),a=n.edgesWith(r),o=a.length,l=Math.floor(o/2);let s=0;a.some((e,n)=>{if(e.id()===t)return s=n,!0});let c=0;return o>1&&(c=i.I(-l,l+1)[s],o%2===0&&c>=0&&(c+=1)),{sortedIndex:c,index:s,count:o}},Hn=(e,t)=>{const n=ht.a.fromObject(e.position()),r=ht.a.fromObject(t.position()),a=r.clone().subtract(n),i=a.clone().normalize(),o=i.clone().rotate(Math.PI/2),l=zt(n,r),s=e.id()>t.id()?1:-1;return{fromPosition:n,toPosition:r,distanceVector:a,unitVector:i,normVector:o,midpointPosition:l,undirectedUnitVector:i.clone().multiplyScalar(s),undirectedNormVector:o.clone().multiplyScalar(s)}},qn=Object(g.m)((e,t)=>{var n,r,i;const{item:o,graphID:l,children:s,drawLine:c=Ot,config:d,graphRef:u}=e,m=x(),p=a.a.useRef(null),f=a.a.useRef(null),y=a.a.useCallback(({element:e,cy:t,vectorInfo:n,edgeGroupInfo:r})=>{const a=e.target(),i=e.source(),{distanceVector:l,normVector:s,unitVector:f,undirectedUnitVector:g,undirectedNormVector:y}=n,h=Ht.getNodeContext(i),v=Ht.getNodeContext(a),{view:{lineType:b,fill:E,width:O,alpha:w}}=d;return c(Bn(Bn({item:o,element:e,type:b,graphRef:u,theme:m,sourceElement:i,targetElement:a,fill:e.selected()?E.selected:e.source().selected()||e.target().selected()?E.nodeSelected:E.default,alpha:w,width:O,graphics:p.current,to:v.boundingBox,from:h.boundingBox,directed:!0,distance:36*r.sortedIndex,margin:{x:10*r.sortedIndex,y:10*r.sortedIndex},distanceVector:l,unitVector:f,normVector:s,undirectedUnitVector:g,undirectedNormVector:y},r),{},{cy:t}))},[f,p,d]),h=a.a.useCallback(({element:e})=>{const t=Un(e),n=Hn(e.source(),e.target());f.current.x=n.midpointPosition.x+t.sortedIndex*n.undirectedNormVector.x*36,f.current.y=n.midpointPosition.y+t.sortedIndex*n.undirectedNormVector.y*36,y({cy:b,element:e,edgeGroupInfo:t,vectorInfo:n})},[y]),{element:v,cy:b,context:E}=(e=>{const{onPositionChange:t,graphID:n,config:r={},item:i}=e,{id:o,source:l,target:s}=i,{cy:c}=On[n],[,d]=Object(g.l)({},()=>{}),u=a.a.useRef({render:e=>{d({},e)},onPositionChange:()=>{null===t||void 0===t||t({element:u.current.element,context:u.current,cy:c})},element:null,settings:{filtered:!0,nodeFiltered:!0,visibility:{nodeVisible:!0}}});u.current.element=a.a.useMemo(()=>{const{current:{element:e}}=u;return e&&c.remove(e),c.add({data:{id:o,source:l,target:s,[Qe]:u.current,[Je]:null===i||void 0===i?void 0:i.data},group:"edges"})},[c,o,l,s]);const{current:{element:m}}=u;return a.a.useEffect(()=>{u.current.onPositionChange=()=>{null===t||void 0===t||t({cy:c,element:m,context:u.current})},Ht.update(m,u.current)},[t]),a.a.useEffect(()=>()=>{c.remove(m)},[c,o,l,s]),a.a.useEffect(()=>{const e=()=>{const e=Nt(m),t=Ht.get(m.source()),n=Ht.get(m.target()),r=Nt(m.source()),a=Nt(m.target()),i=r&&a;let o=!1;i!==u.current.settings.visibility.nodeVisible&&(u.current.settings.visibility.nodeVisible=i,Ht.update(m,u.current),e!==Nt(m)&&(o=!1));const l=u.current.settings.nodeFiltered,s=t.settings.filtered&&n.settings.filtered;u.current.settings.nodeFiltered=s,s!==l&&(o=!0,Ht.update(m,u.current)),o&&u.current.render()};return m.source().on(st,e),m.target().on(st,e),()=>{m.source().removeListener(st),m.target().removeListener(st)}},[m]),Dn({contextRef:u,cy:c,element:m,item:i,config:r}),{element:m,context:u.current,cy:c}})({graphID:l,onPositionChange:h,config:d,item:o});a.a.useEffect(()=>{f.current.zIndex=-99},[]);const O=v.source(),w=v.target(),D=Un(v),I=Hn(O,w);a.a.useEffect(()=>{y({cy:b,element:v,edgeGroupInfo:D,vectorInfo:I})});const{midpointPosition:C,toPosition:j,fromPosition:P,undirectedNormVector:k}=I,S=Nt(v),T=E.settings.filtered&&E.settings.nodeFiltered?1:null!==(n=null===d||void 0===d||null===(r=d.filter)||void 0===r||null===(i=r.settings)||void 0===i?void 0:i.opacity)&&void 0!==n?n:.2;return a.a.createElement(a.a.Fragment,null,a.a.createElement(An,{ref:f,alpha:T,visible:S,x:C.x+D.sortedIndex*k.x*36,y:C.y+D.sortedIndex*k.y*36,zIndex:-99,interactive:!0,mouseover:()=>{v.emit(ct)},mouseout:()=>{v.emit(dt)}},s(Bn(Bn({item:o,element:v,to:j,from:P,cy:b,theme:m,graphRef:u},D),{},{targetElement:w,sourceElement:O,config:d,context:E}))),a.a.createElement(xt,{ref:p,visible:S,alpha:T}))},{isForwardRef:!0}),Gn={x:0,y:0},zn=Object(g.m)((e,t)=>{var n,r,i,o,l;const{item:s,graphID:c,children:d,config:u,graphRef:m}=e,p=a.a.useRef(null),{element:f,context:g,cy:y}=kn({graphID:c,config:u,position:null!==(n=null!==(r=u.position)&&void 0!==r?r:s.position)&&void 0!==n?n:Gn,onPositionChange:({element:e})=>{const{x:t,y:n}=e.position();p.current.x=t,p.current.y=n,g.boundingBox.x=t,g.boundingBox.y=n},item:s}),{x:h,y:v}=f.position(),b=a.a.useCallback(e=>{f.position(e)},[f]);a.a.useEffect(()=>{g.boundingBox=Rt(p.current)});const E=x(),O=Nt(f),w=$t(f)?1:null!==(i=null===(o=u.filter)||void 0===o||null===(l=o.settings)||void 0===l?void 0:l.opacity)&&void 0!==i?i:.2;return a.a.createElement(An,{ref:p,x:h,y:v,alpha:w,visible:O,draggable:!0,onDrag:b,mouseover:()=>{f.emit(ct)},mouseout:()=>{f.emit(dt)}},d({item:s,element:f,cy:y,theme:E,graphRef:m,context:g,config:u}))},{isForwardRef:!0});var Wn=n(409);const $n=["children"];function Yn(){return(Yn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const Kn=()=>{},Jn=Object(D.PixiComponent)("Viewport",{create:e=>{const{app:{renderer:t,ticker:n},theme:r,height:a,width:i,onCreate:o,onBoxSelectionStart:l=Kn,onBoxSelection:s=Kn,onBoxSelectionEnd:c=Kn}=e,d=new Wn.a({screenWidth:i,screenHeight:a,worldWidth:i,worldHeight:a,ticker:n,interaction:t.plugins.interaction,passiveWheel:!1,divWheel:t.view});null===o||void 0===o||o(d),d.sortableChildren=!0,d.drag({pressDrag:!1}).pinch().wheel({trackpadPinch:!0,wheelZoom:!1});const u={current:{boxSelection:{enabled:!1,startPosition:null,currentPosition:null,boxElement:null}}};return d.on("pointerdown",e=>{if(e.target===e.currentTarget&&!(e=>{var t;const n=null!==(t=e.touches)&&void 0!==t?t:e.changedTouches;return n&&n.length>0})(e)){const t=Vt(d,e.data.originalEvent);u.current.boxSelection.startPosition={x:t.x,y:t.y},d.plugins.pause("drag")}d.isClick=!0,setTimeout(()=>{d.isClick=!1},250)}),d.on("pointerup",e=>{if(d.plugins.resume("drag"),u.current.boxSelection.enabled){const{boxElement:t,currentPosition:n,startPosition:r}=u.current.boxSelection;c({event:e,startPosition:r,endPosition:n,boundingBox:Ft(r,n)}),d.removeChild(t),null===t||void 0===t||t.destroy()}u.current.boxSelection={}}),d.on("pointermove",e=>{if(u.current.boxSelection.startPosition&&!u.current.boxSelection.boxElement){const t=Vt(d,e.data.originalEvent);if(ht.a.fromObject(t).subtract(ht.a.fromObject(u.current.boxSelection.startPosition)).length()>20){const t=new C.g;d.addChild(t),u.current.boxSelection.boxElement=t,l({event:e,startPosition:u.current.boxSelection.startPosition}),u.current.boxSelection.enabled=!0}}if(u.current.boxSelection.enabled){const t=Vt(d,e.data.originalEvent);u.current.boxSelection.currentPosition={x:t.x,y:t.y};const{startPosition:n,currentPosition:a,boxElement:i}=u.current.boxSelection,o=i,l=Ft(n,a);s({event:e,endPosition:a,startPosition:n,boundingBox:l}),o.x=l.x,o.y=l.y,wt(o,{width:l.width,height:l.height,alpha:0,fill:r.palette.text.primary,lineFill:r.palette.text.primary,lineWidth:1/d.scale.x})}}),d.on("wheel",e=>{e.event.preventDefault()}),d},applyProps:(e,t,n)=>{const{transform:r,onPress:a,zoom:o,width:l,height:s}=n;e.resize(l,s),e.removeListener("pointertap",e.clickEvent),e.clickEvent=t=>i.l(i.e(t.target),()=>{const{x:n,y:r}=e.toWorld(t.data.global);return i.bb(i.e(!0),()=>null===a||void 0===a?void 0:a({nativeEvent:t,position:{x:n,y:r}}))(e.isClick)},i.k)(t.currentTarget),i.X(i.e(t.zoom),()=>e.setZoom(null!==o&&void 0!==o?o:1,!0))(o),i.X(i.e(t.transform),()=>e.setTransform(null===r||void 0===r?void 0:r.x,null===r||void 0===r?void 0:r.y,null===r||void 0===r?void 0:r.scaleX,null===r||void 0===r?void 0:r.scaleY,null===r||void 0===r?void 0:r.rotation,null===r||void 0===r?void 0:r.skewX,null===r||void 0===r?void 0:r.skewY,null===r||void 0===r?void 0:r.pivotX,null===r||void 0===r?void 0:r.pivotY))(r),e.on("pointertap",e.clickEvent)},didMount:()=>{},willUnmount:()=>{}});const Qn=Object(g.m)((function(e,t){const{children:n}=e,r=Xn(e,$n),i=Object(D.useApp)(),o=Object(g.j)(t,{}),l=x(),s=a.a.useRef({pressedKeys:{},intervalTimeout:null});return a.a.useEffect(()=>{const e=e=>{if(document.body===e.target&&(s.current.pressedKeys[e.key]=!0,!s.current.intervalTimeout)){const e=setInterval(()=>{const{current:{center:e}}=o,{current:{pressedKeys:t}}=s,n={x:0,y:0};Object.keys(t).map(e=>{switch(e){case"ArrowRight":n.x+=30;break;case"ArrowLeft":n.x-=30;break;case"ArrowUp":n.y-=30;break;case"ArrowDown":n.y+=30}});const r=new C.l(e.x+n.x,e.y+n.y);o.current.center=r},5);s.current.intervalTimeout=e}},t=()=>{clearInterval(s.current.intervalTimeout),s.current.intervalTimeout=null,s.current.pressedKeys={}};return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),a.a.createElement(Jn,Yn({ref:o,app:i,theme:l},r),n)}),{isForwardRef:!0}),Zn=({element:e,cy:t,config:n,item:r})=>{const i=e.connectedEdges(":selected").length>0,{view:{fill:o,labelVisible:l}}=n;return a.a.createElement(Jt,{width:220,height:220,fill:i?o.edgeSelected:e.selected()?o.selected:e.hovered()?o.hovered:o.default,radius:30,alpha:1,interactive:!0,pointertap:()=>{Bt(t),e.select()}},l&&a.a.createElement(I,{text:r.id}))},er=({cy:e,element:t,config:n,item:r})=>{const{view:{labelVisible:i}}=n;return a.a.createElement(Jt,{pointertap:()=>{Bt(e),t.select()}},i&&a.a.createElement(I,{text:r.id}))},tr=({item:e,element:t,cy:n,config:r})=>{const i=t.connectedEdges(":selected").length>0,{view:{width:o,height:l,radius:s,fill:c,labelVisible:d}}=r;return a.a.createElement(Jt,{width:o,height:l,fill:i?c.edgeSelected:t.selected()?c.selected:t.hovered()?c.hovered:c.default,radius:s,interactive:!0,alpha:1,pointertap:()=>{Bt(n),t.select()}},d&&a.a.createElement(I,{text:e.id}))},nr=["ids"],rr=["ids"];function ar(){return(ar=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ir(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?or(Object(n),!0).forEach((function(t){sr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const cr=({graphID:e,item:t,graphRef:n,globalNodeConfig:r,nodeConfigIds:o,renderNode:l})=>{const s=a.a.useMemo(()=>{var e;return i.z([r,null!==(e=null===o||void 0===o?void 0:o[t.id])&&void 0!==e?e:{}])},[r,null===o||void 0===o?void 0:o[t.id]]);return a.a.createElement(zn,{graphID:e,item:t,graphRef:n,config:s},l)},dr=({item:e,graphID:t,graphRef:n,drawLine:r,globalEdgeConfig:o,edgeConfigIds:l,renderEdge:s})=>{const c=a.a.useMemo(()=>{var t;return i.z([o,null!==(t=null===l||void 0===l?void 0:l[e.id])&&void 0!==t?t:{}])},[o,null===l||void 0===l?void 0:l[e.id]]);return a.a.createElement(qn,{graphID:t,item:e,graphRef:n,drawLine:r,config:c},s)},ur=({graphID:e,item:t,graphRef:n,globalNodeConfig:r,nodeConfigIds:o,renderClusterNode:l})=>{const s=a.a.useMemo(()=>{var e;return i.z([r,null!==(e=null===o||void 0===o?void 0:o[t.id])&&void 0!==e?e:{}])},[r,null===o||void 0===o?void 0:o[t.id]]);return a.a.createElement(Mn,{graphID:e,item:t,graphRef:n,config:s},l)},mr={theme:h},pr=Object(g.m)((e,t)=>{var n,r;const{style:o={},nodes:l=[],edges:s=[],onPress:c,renderNode:d=tr,renderEdge:u=er,drawLine:m,extraData:p,config:f={},onBoxSelection:y,selectedElementIds:h=[],children:v,renderClusterNode:b=Zn}=e,E=null===o||void 0===o?void 0:o.width,O=null===o||void 0===o?void 0:o.height,x=a.a.useMemo(()=>lr(lr({},mr),f),[f]),{theme:I}=x,j=null!==(n=x.backgroundColor)&&void 0!==n?n:I.palette.background.default,P=a.a.useMemo(()=>{var e;return null!==(e=x.graphId)&&void 0!==e?e:i.ab()},[x.graphId]),k=a.a.useRef(null),{cy:S}=(e=>{const{id:t,clusters:n=[]}=e,r=a.a.useRef(!1),i=a.a.useMemo(()=>{if(On[t])return r.current=!0,On[t];const e=En()({elements:[],headless:!0,styleEnabled:!0});return On[t]={cy:e,clustersByNodeId:{},clustersByChildClusterId:{}},On[t]},[t]),{cy:o}=i;return a.a.useMemo(()=>{const e={};n.forEach(t=>{t.ids.forEach(n=>{var r;const a=null!==(r=e[n])&&void 0!==r?r:[];a.push(t),e[n]=a})});const t={};n.forEach(e=>{e.childClusterIds.forEach(n=>{var r;const a=null!==(r=t[n])&&void 0!==r?r:[];a.push(e),t[n]=a})}),i.clustersByNodeId=e,i.clustersByChildClusterId=t},[i,n]),a.a.useEffect(()=>{if(!r.current)return()=>{r.current||(delete On[t],o.destroy())}},[o]),i})({id:P,clusters:x.clusters}),T=Object(g.j)(t,{cy:S}),L=a.a.useRef(null);a.a.useMemo(()=>{const e=l.length+s.length;T.current.viewport&&((e,t)=>{const n=e<150?ut:e<400?mt:pt;if(t.qualityLevel!==n)switch(t.oldQualityLevel=t.qualityLevel,t.qualityLevel=n,n){case ut:C.v.ROUND_PIXELS=!0,C.v.PRECISION_FRAGMENT=C.j.HIGH,C.v.RESOLUTION=32,C.v.SCALE_MODE=C.m.LINEAR;break;case mt:C.v.ROUND_PIXELS=!1,C.v.PRECISION_FRAGMENT=C.j.MEDIUM,C.v.RESOLUTION=12,C.v.SCALE_MODE=C.m.NEAREST;break;case pt:C.v.ROUND_PIXELS=!1,C.v.PRECISION_FRAGMENT=C.j.LOW,C.v.RESOLUTION=.8,C.v.SCALE_MODE=C.m.NEAREST}})(e,T.current.viewport)},[l,s]),a.a.useEffect(()=>{var e;T.current.app||x.layout||(T.current.viewport.dirty=!0),T.current.app=null===(e=k.current)||void 0===e?void 0:e.app,T.current.app&&T.current.app.view.addEventListener("contextmenu",e=>{e.preventDefault()})},[k.current]),a.a.useEffect(()=>{(null===h||void 0===h?void 0:h.length)>0&&(Bt(S),h.forEach(e=>{S.$id(e).select()}))},[h,S]),a.a.useEffect(()=>{if(k.current&&x.layout){const{expansion:e,runLayout:t}=x.layout;if(!1===t)return;e&&T.current.viewport.setZoom(e,!0),setTimeout(()=>{var e;const{hitArea:t}=T.current.viewport,n={x1:t.x,y1:t.y,w:t.width,h:t.height};null===(e=L.current)||void 0===e||e.stop(),L.current=S.createLayout(lr({boundingBox:n},x.layout)),L.current.on("layoutstop",()=>{L.current=null,S.edges().forEach(e=>{Ht.get(e).onPositionChange()}),T.current.viewport.dirty=!0}),L.current.start()},200)}},[x.layout]),a.a.useEffect(()=>{k.current.app.renderer.backgroundColor=j},[j]);const _=a.a.useMemo(()=>{var e;return i.z([ft,null!==(e=x.nodes)&&void 0!==e?e:{}])},[x.nodes]),{ids:R}=_,A=ir(_,nr),N=a.a.useMemo(()=>{var e;return i.z([gt,null!==(e=x.edges)&&void 0!==e?e:{}])},[x.edges]),{ids:M}=N,F=ir(N,rr),B=a.a.useCallback(e=>{Bt(S),null===c||void 0===c||c(e)},[S,c]);return a.a.createElement(g.c,{style:o},a.a.createElement(D.Stage,{ref:k,width:E,height:O,options:{width:E,height:O,resolution:window.devicePixelRatio||1,antialias:!0,autoDensity:!0,backgroundColor:j}},a.a.createElement(w,{value:I},a.a.createElement(Qn,{onCreate:e=>{T.current.viewport=e},onPress:B,zoom:x.zoom,transform:x.transform,width:E,height:O,onBoxSelectionEnd:({event:e,boundingBox:t})=>{const n=[],r=S.nodes().filter(e=>{const r=e.position(),a=Nt(e)&&$t(e)&&((e,t)=>{const{x:n,y:r}=e,a=t.x+t.width,i=t.y+t.height,o=t.x<a?t.x:a,l=t.y<i?t.y:i,s=t.x<a?a:t.x,c=t.y<i?i:t.y;return n>=o&&r>=l&&n<=s&&r<=c})(r,t);return a&&n.push(e.id()),a});null===y||void 0===y||y({boundingBox:t,elements:r,event:e,itemIds:n})}},a.a.createElement(g.a,{extraData:[p,x.nodes,x.clusters],data:l,accessor:["children"],keyExtractor:e=>e.id,renderItem:e=>a.a.createElement(cr,ar({},e,{graphID:P,graphRef:T,globalNodeConfig:A,nodeConfigIds:R,renderNode:d}))}),a.a.createElement(g.a,{extraData:[p,x.edges,x.clusters],data:s,accessor:["children"],keyExtractor:e=>e.id,renderItem:e=>a.a.createElement(dr,ar({},e,{graphID:P,graphRef:T,drawLine:m,globalEdgeConfig:F,edgeConfigIds:M,renderEdge:u}))}),a.a.createElement(g.a,{extraData:[p],data:null!==(r=x.clusters)&&void 0!==r?r:[],accessor:["children"],keyExtractor:e=>e.id,renderItem:e=>a.a.createElement(ur,ar({},e,{graphID:P,graphRef:T,globalNodeConfig:A,nodeConfigIds:R,renderClusterNode:b}))}),v))))},{isForwardRef:!0,isEqual:i.f(i.p(Function))});pr.View=Jt,pr.Text=I,pr.Graphics=xt,pr.ProfileTemplate=Qt,pr.Layouts=T,pr.Clusters=vn,pr.elementType={EDGE:"EDGE",NODE:"NODE"};var fr=n(1097),gr=n(473),yr=n(1172);const hr=e=>{const{onSelect:t,items:n=[],open:r,position:i={x:0,y:0}}=e;return a.a.createElement(fr.a,{container:document.body},a.a.createElement(gr.a,{open:!!r,onClose:()=>null===t||void 0===t?void 0:t(""),anchorReference:"anchorPosition",anchorPosition:{left:i.x,top:i.y}},n.map(({value:e,label:n})=>a.a.createElement(yr.a,{key:e,onClick:()=>{null===t||void 0===t||t(e)}},n))))};var vr=n(1173),br=n(1174);function Er(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Or{constructor(e,t,n,r){this.callback=e,this.key=t,this.ms=n,this.params=r,Er(this,"executedTime",void 0),Er(this,"paused",!1),Er(this,"startTime",(new Date).getTime()),Er(this,"timeSpentWaiting",0)}}class wr{static clear(e,t=!0){clearTimeout(wr.keyId[e]),delete wr.keyId[e],t&&(delete wr.metadata[e],delete wr.originalMs[e])}static set(...e){let t,n,r,a;if(0===e.length)throw Error("Timeout.set() requires at least one argument");if("function"===typeof e[1]?[t,a,n,...r]=e:([a,n,...r]=e,t=a.toString()),!a)throw Error("Timeout.set() requires a callback parameter");wr.clear(t);return wr.keyId[t]=setTimeout(()=>{wr.metadata[t].executedTime=(new Date).getTime(),a(...r)},n||0),wr.originalMs[t]=wr.originalMs[t]||n,wr.metadata[t]=new Or(a,t,n,r),()=>wr.executed(t)}static create(...e){if(0===e.length)throw Error("Timeout.create() requires at least one argument");let t;if("function"===typeof e[1])[t]=e;else{const[n]=e;t=n.toString()}return!wr.exists(t)&&wr.set(...e)}static exists(e){return e in wr.keyId||void 0!==wr.metadata[e]}static executed(e){return wr.exists(e)&&!!wr.metadata[e].executedTime}static lastExecuted(e){return wr.executed(e)?new Date(wr.metadata[e].executedTime):null}static pending(e){return wr.exists(e)&&!wr.executed(e)}static paused(e){return wr.exists(e)&&!wr.executed(e)&&wr.metadata[e].paused}static remaining(e){if(!wr.metadata[e])return 0;const t=wr.metadata[e];return wr.paused(e)?t.ms-t.timeSpentWaiting:Math.max(0,t.startTime+t.ms-(new Date).getTime())}static restart(e){if(!wr.metadata[e]||wr.executed(e))return!1;const t=wr.metadata[e];return wr.clear(e,!1),t.paused&&(t.paused=!1),wr.set(e,t.callback,wr.originalMs[e],...t.params)}static pause(e){if(!wr.metadata[e]||wr.paused(e)||wr.executed(e))return!1;wr.clear(e,!1);const t=wr.metadata[e];return t.paused=!0,t.timeSpentWaiting=(new Date).getTime()-t.startTime,t.timeSpentWaiting}static resume(e){if(!wr.metadata[e]||wr.executed(e))return!1;const t=wr.metadata[e];if(!t.paused)return!1;const n=wr.originalMs[e],r=t.ms-t.timeSpentWaiting,a=wr.set(e,t.callback,r,...t.params);return wr.originalMs[e]=n,a}static instantiate(e,t=0,...n){if(!e)throw Error("Timeout.instantiate() requires a function parameter");const r=`${Math.random()}${e}`.replace(/\s/g,"");return wr.set(r,e,t,...n),{clear:(e=!0)=>wr.clear(r,e),executed:()=>wr.executed(r),exists:()=>wr.exists(r),lastExecuted:()=>wr.lastExecuted(r),pause:()=>wr.pause(r),paused:()=>wr.paused(r),pending:()=>wr.pending(r),remaining:()=>wr.remaining(r),restart:()=>wr.restart(r),resume:()=>wr.resume(r),set:(e,t=0,...n)=>wr.set(r,e,t,...n)}}}Er(wr,"keyId",{}),Er(wr,"originalMs",{}),Er(wr,"metadata",{});const xr=(e=[],t,n={})=>{const{onFinish:r,autostart:a=!0,onPlayChanged:i}=n,o=0===e.length,l=[];let s=0;const c=e=>{e?m.durationCounter=u():m.durationCounter&&clearInterval(m.durationCounter),m.paused=!e,null===i||void 0===i||i()};let d=0;e.forEach(({after:e})=>{d+=e});const u=()=>setInterval(()=>{m.duration+=100},100),m={currentIndex:0,totalDuration:d,duration:0,durationCounter:null,timers:e,timeoutInstances:l,finished:o,paused:!a,pause:()=>{l.forEach((e,t)=>{t>=m.currentIndex&&e.pause()}),c(!1)},start:()=>{l.forEach((e,t)=>{t>=m.currentIndex&&e.resume()}),c(!0)},clear:()=>{l.forEach(e=>{e.clear()}),m.durationCounter&&clearInterval(m.durationCounter),m.finished=!0,m.duration=0,null===r||void 0===r||r()}};return e.forEach((n,r)=>{s+=n.after;const i=wr.instantiate(()=>{m.currentIndex=r+1,t(n,r,i),r===e.length-1&&m.clear()},s);a||i.pause(),l.push(i)}),a&&(m.durationCounter=u()),m};var Dr=n(414),Ir=n(1102),Cr=n(1103),jr=n(1104),Pr=n(1105),kr=n(1106),Sr=n(1107),Tr=n(1108),Lr=n(1109),_r=n(1110),Rr=n(1111),Ar=n(1112),Nr=n(1113),Mr=n(1114),Fr=n(1115),Br=n(1116),Vr=n(1117),Ur=n(1118),Hr=n(1119),qr=n(1120),Gr=n(1121),zr=n(1122),Wr=n(1123),$r=n(1124),Yr=n(1125),Xr=n(1126),Kr=n(1127),Jr=n(1128),Qr=n(1129),Zr=n(1130),ea=n(1131),ta=n(1132),na=n(1133),ra=n(1134),aa=n(1135),ia=n(1136),oa=n(1137),la=n(1138),sa=n(1139),ca=n(1140),da=n(1141),ua=n(1142),ma=n(1143),pa=n(1144),fa=n(1145),ga=n(1146),ya=n(1147);const ha=["name"];function va(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const ba={app_registration_outlined:Ir.a,assessment:Cr.a,add_circle:jr.a,addjust:Pr.a,cancel_rounded:kr.a,delete_rounded:Sr.a,record_voice_over_rounded:Tr.a,build_circle_outlined:Lr.a,more_vert:_r.a,edit:Rr.a,center_focus_strong:Ar.a,build_circle:Nr.a,repeat_one:Mr.a,sort_by_alpha:Fr.a,close:Br.a,info_outlined:Vr.a,filter:Ur.a,arrow_drop_down_rounded:Hr.a,arrow_drop_up_rounded:qr.a,article_outlined:Gr.a,bookmarks:zr.a,bookmark:Wr.a,bookmark_border:$r.a,minimize:Yr.a,videocam:Xr.a,fiber_manual_record:Kr.a,settings:Jr.a,redo:Qr.a,chevron_left:Zr.a,chevron_right:ea.a,keyboard_arrow_up:ta.a,keyboard_arrow_down:na.a,playlist_add:ra.a,playlist_play:aa.a,expand_more:ia.a,play_arrow:oa.a,navigate_before:la.a,navigate_next:sa.a,beenhere:ca.a,unfold_less:da.a,unfold_more:ua.a,my_location:ma.a,drag_handle:pa.a,toc_outlined:fa.a,tune_outlined:ga.a,settings_outlined:ya.a},Ea=e=>{const{name:t}=e,n=va(e,ha),r=ba[t];return a.a.createElement(r,n)};var Oa=n(42),wa=n(1149),xa=n(1175),Da=n(1176),Ia=n(1160);const Ca=i.ab;var ja={get name(){return"ExpoDocumentPicker"},async getDocumentAsync({type:e="*/*",multiple:t=!1}){const n=document.createElement("input");return n.style.display="none",n.setAttribute("type","file"),n.setAttribute("accept",e),n.setAttribute("id",Ca()),t&&n.setAttribute("multiple","multiple"),document.body.appendChild(n),new Promise((e,t)=>{n.addEventListener("change",()=>{if(n.files){const r=n.files[0],a=new FileReader;a.onerror=()=>{t(new Error("Failed to read the selected media because the operation failed."))},a.onload=({target:t})=>{const a=t.result;e({type:"success",uri:a,name:r.name,file:r,lastModified:r.lastModified,size:r.size,output:n.files})},a.readAsDataURL(r)}else e({type:"cancel"});document.body.removeChild(n)});const r=new MouseEvent("click");n.dispatchEvent(r)})}},Pa=n(415);function ka(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ka(Object(n),!0).forEach((function(t){Ta(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ka(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ta(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const La={add:{visible:!0},delete:{visible:!0},recordEvents:{visible:!0},options:{actions:{import:{visible:!0}}},layout:{visible:!0}},_a="START",Ra="STOP",Aa="RECORDING",Na="IDLE",Ma={Preferences:"Preferences",Import:"Import",Export:"Export",ImportEvents:"Import Events"},Fa=e=>{var t;const{renderMoreAction:n=(()=>a.a.createElement(vr.a,null)),onEvent:r,onAction:i,theming:o}=e,{anchorEl:l,isOpen:s,onClose:c,onOpen:d}=Object(g.i)({});return a.a.createElement(a.a.Fragment,null,a.a.createElement(br.a,{onClick:d},a.a.createElement(Ea,{name:"more_vert"})),a.a.createElement(gr.a,{anchorEl:l,open:s,onClose:c,style:{width:400}},Object.values(Ma).map((e,t)=>a.a.createElement(yr.a,{key:e,onClick:e=>(async(e,t)=>{c();switch(Object.values(Ma)[t]){case Ma.Preferences:r({type:We});break;case Ma.Import:{const e=await ja.getDocumentAsync({type:"application/json"});if("success"===e.type){const t=await _t(e.file);r({type:we,payload:{value:JSON.parse(t)}})}break}case Ma.ImportEvents:{const e=await ja.getDocumentAsync({type:"application/json"});if("success"===e.type){const t=await _t(e.file);r({type:xe,payload:{value:JSON.parse(t)}})}break}case Ma.Export:i({type:Ee})}})(0,t)},e)),a.a.createElement(wa.a,null),a.a.createElement(xa.a,{fullWidth:!0},a.a.createElement(Da.a,{id:"theme-select-label"},"Theme"),a.a.createElement(Ia.a,{labelId:"theme-select-label",onChange:e=>{i({type:$,value:e.target.value}),c()},value:null===o||void 0===o?void 0:o.value},null===o||void 0===o||null===(t=o.options)||void 0===t?void 0:t.map(e=>a.a.createElement(yr.a,{key:e.value,value:e.value},e.name)))),n()))},Ba=Object(g.m)(e=>{var t;const{renderMoreAction:n,isOpen:r=!1,recording:o=!1,eventRecording:s=!1,onAction:c,left:d,right:u,theming:m={options:[{name:"Light",value:"Default"},{name:"Dark",value:"Dark"}],value:"Default"}}=e,[{onEvent:p,graphEditorRef:f,mode:y}]=Rn(e=>({onEvent:e.onEvent,graphEditorRef:e.graphEditorRef,mode:e.mode,graphConfig:e.graphConfig})),{style:h,ref:v}=Object(g.g)({from:{bottom:-40},to:{bottom:0},autoPlay:!1});a.a.useEffect(()=>{v.current.play(r)},[v.current,r]);const b=Object(Oa.a)(),E=a.a.useRef(Na);a.a.useMemo(()=>{switch(E.current){case Na:E.current=o?_a:Na;break;case _a:case Aa:E.current=o?Aa:Ra;break;case Ra:E.current=o?_a:Na}},[o]);const O=i.A(La,null!==(t=e.actions)&&void 0!==t?t:{});return a.a.createElement(vr.a,{style:Sa({position:"absolute",width:"100%",height:40,left:0,flexDirection:"row",display:"flex",justifyContent:"space-between",backgroundColor:b.palette.background.paper},h)},d&&a.a.createElement(d,null),a.a.createElement(vr.a,{style:{flexDirection:"row",alignItems:"center",display:"flex",height:40}},O.add.visible&&a.a.createElement(l.a,{style:Va.button,startIcon:a.a.createElement(Ea,{name:"add_circle"}),onClick:()=>p({type:Ie,payload:{value:[Ze.ADD,Ze.CONTINUES_ADD].includes(y)?Ze.DEFAULT:Ze.ADD}}),variant:Ze.CONTINUES_ADD===y?"contained":"outlined",color:[Ze.ADD,Ze.CONTINUES_ADD].includes(y)?"secondary":"primary",onDoubleClick:()=>p({type:Ie,payload:{value:Ze.CONTINUES_ADD}})},"Add"),O.delete.visible&&a.a.createElement(l.a,{style:Va.button,startIcon:a.a.createElement(Ea,{name:"delete_rounded"}),color:[Ze.DELETE,Ze.CONTINUES_DELETE].includes(y)?"primary":"secondary",variant:Ze.CONTINUES_DELETE===y?"contained":"outlined",onClick:()=>p({type:Ie,payload:{value:[Ze.DELETE,Ze.CONTINUES_DELETE].includes(y)?Ze.DEFAULT:Ze.DELETE}}),onDoubleClick:()=>p({type:Ie,payload:{value:Ze.CONTINUES_DELETE}})},"Delete"),O.recordEvents.visible&&a.a.createElement(br.a,{onClick:()=>p({type:$e})},a.a.createElement(Ea,{name:"addjust",color:s?"error":"inherit"})),a.a.createElement(Pa.a,{getStream:()=>f.current.app.renderer.view.captureStream(25),render:({startRecording:e,stopRecording:t,status:n})=>(E.current===_a&&(E.current=Aa,e()),E.current===Ra&&(E.current=Na,t()),a.a.createElement(br.a,{onClick:()=>p({type:Ye})},a.a.createElement(Ea,{name:"videocam",color:"recording"!==n?"inherit":"error"}))),onStop:(e,t)=>{p({type:Te,payload:{value:t}})}}),a.a.createElement(Fa,{renderMoreAction:n,theming:m,onEvent:p,onAction:c})),u&&a.a.createElement(u,null))},{}),Va={icon:{width:24,height:24,position:"absolute",left:2,top:-26,fontSize:24},button:{marginRight:10}};var Ua=n(211);const Ha=["onClick","children","style"];function qa(){return(qa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ga(Object(n),!0).forEach((function(t){Wa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ga(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $a(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const Ya=e=>{const{children:t,isOpen:n,defaultIsOpen:r=!1}=e,[a,i]=Object(g.l)({isOpen:r}),[,o]=Object(g.h)(n,a.isOpen);return t({isOpen:o,onOpen:()=>i({isOpen:!0}),onClose:()=>i({isOpen:!1}),onToggle:()=>i({isOpen:!a.isOpen})})},Xa=e=>{const{onClick:t,children:n,style:r={}}=e,i=$a(e,Ha);return a.a.createElement(Ua.a,qa({variant:"h6",fontSize:16,onClick:t,style:za({userSelect:"none",cursor:"pointer"},r)},i),n)},Ka=e=>{const{children:t}=e;return a.a.createElement(g.c,{style:{paddingLeft:4,paddingRight:4}},t)},Ja=["isRight"];function Qa(){return(Qa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ei(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Za(Object(n),!0).forEach((function(t){ti(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Za(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ti(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ni(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const ri=e=>{var t;const{isRight:n=!0}=e,r=ni(e,Ja),[i,o]=a.a.useState({onHover:!1}),l=(i.onHover,4);return a.a.createElement("div",Qa({style:ei(ei(ei({width:l,height:l,cursor:n?"nwse-resize":"nesw-resize",position:"absolute",bottom:0},n?{right:0}:{left:0}),{},{borderColor:"black",borderStyle:"double",borderTopWidth:0},n?{borderRightWidth:l,borderLeftWidth:0}:{borderLeftWidth:l,borderRightWidth:0}),{},{borderBottomWidth:l},null!==(t=null===e||void 0===e?void 0:e.style)&&void 0!==t?t:{}),onMouseEnter:()=>o(ei(ei({},i),{},{onHover:!0})),onMouseLeave:()=>o(ei(ei({},i),{},{onHover:!1}))},r))},ai=e=>{const{ref:t,onDrag:n}=e;return a.a.useCallback(e=>{const r=e.nativeEvent,a=r.x,i=r.y,o=t.current.getBoundingClientRect();function l(e){(e=>{e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1})(e);const t=a-e.x,r=i-e.y;n({x:t,y:r},o)}window.addEventListener("mousemove",l),window.addEventListener("mouseup",(function e(){window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",e)}))},[])};var ii=n(1170),oi=n(28),li=n(1171);const si=()=>{const[{selectedElement:e,onEvent:t}]=Rn(e=>{const{selectedElement:t,onEvent:n}=e;return{item:e.selectedItem,selectedElement:t,onEvent:n}});if(!e)return null;const n=e.isNode();let r,i;return n?(r=e.connectedEdges().toArray().map(Gt),i=e.neighborhood().toArray().filter(e=>e.isNode()).map(Gt)):r=[e.source(),e.target()].map(Gt),a.a.createElement(a.a.Fragment,null,a.a.createElement(Ya,{defaultIsOpen:!0},({isOpen:e,onToggle:i})=>a.a.createElement(a.a.Fragment,null,a.a.createElement(Xa,{onClick:i},"Connected "+(n?"Edges":"Nodes")),e&&a.a.createElement(Ka,null,a.a.createElement(li.a,{dense:!0},r.map(e=>a.a.createElement(ci,{key:e.id,item:e,onClick:()=>t({type:ge,payload:{itemIds:[e.id]},avoidHistoryRecording:!0})})))))),n&&a.a.createElement(Ya,{defaultIsOpen:!0},({isOpen:e,onToggle:n})=>a.a.createElement(a.a.Fragment,null,a.a.createElement(Xa,{onClick:n},"Connected Nodes"),e&&a.a.createElement(Ka,null,a.a.createElement(li.a,{dense:!0},i.map(e=>a.a.createElement(ci,{key:e.id,item:e,onClick:()=>t({type:ge,payload:{itemIds:[e.id]},avoidHistoryRecording:!0})})))))))},ci=e=>{const{onClick:t,item:n}=e;return a.a.createElement(g.c,{style:{flexDirection:"row",alignItems:"center"}},a.a.createElement(Ea,{name:"chevron_right",sx:{fontSize:12}}),a.a.createElement(Ua.a,{variant:"subtitle2",component:"a",align:"center",href:n.id,style:{wordWrap:"break-word"},onClick:e=>{null===t||void 0===t||t(),e.preventDefault()}},n.id))},di=e=>{const{localLabel:t,globalLabel:n,data:r,isGlobalLabelFirst:o,onEvent:l=(()=>{}),sort:s}=e;return a.a.createElement(g.b,{extraData:[t,n],data:r,sort:s,left:e=>{const{item:{path:r},collapsed:s,onCollapse:c,noChild:d}=e,u=i.e(r,t),m=i.e(r,n);return a.a.createElement(oi.a,{style:{flexDirection:"row",alignItems:"center",height:32}},t&&a.a.createElement(br.a,{sx:{height:12,width:12},onClick:()=>l(u?{type:X}:{type:Fe,payload:{value:r}})},a.a.createElement(Ea,{style:{fontSize:12,textDecoration:o?"":"underline"},name:u?"bookmark":"bookmark_border"})),n&&a.a.createElement(br.a,{sx:{height:12,width:12},onClick:()=>l(m?{type:Y}:{type:Me,payload:{value:r}})},a.a.createElement(Ea,{style:{fontSize:12,textDecoration:o?"underline":""},name:m?"bookmarks":"bookmark_border"})),a.a.createElement(br.a,{sx:{height:12,width:12},disabled:d,onClick:()=>c(!s)},a.a.createElement(Ea,{style:{fontSize:d?10:14},name:d?"fiber_manual_record":s?"arrow_drop_down_rounded":"arrow_drop_up_rounded"})))},renderItem:({item:{key:e,value:t}})=>a.a.createElement(oi.a,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",minHeight:32}},a.a.createElement(Ua.a,{variant:"subtitle2",style:{alignContent:"center",flexDirection:"row",width:"100%",wordWrap:"break-word"}},`${e}${i.r(t)?"":": "}`,i.r(t)?null:a.a.createElement(Ua.a,{variant:"subtitle2",component:Yt(t)?"a":"span",align:"center",href:t,target:"_blank",style:{wordWrap:"break-word"}},t)))})},ui=e=>{const{data:t,onEvent:n,sort:r=-1}=e;return a.a.createElement(Ya,{defaultIsOpen:!0},({isOpen:e,onToggle:i})=>a.a.createElement(a.a.Fragment,null,a.a.createElement(oi.a,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"}},a.a.createElement(oi.a,{style:{flexDirection:"row",alignItems:"center"}},a.a.createElement(Xa,{onClick:i},"Global Network Statistics")),a.a.createElement(oi.a,{style:{flexDirection:"row"}},a.a.createElement(br.a,{onClick:e=>{e.stopPropagation(),n({type:U})}},a.a.createElement(Ea,{name:"assessment"})))),e&&a.a.createElement(Ka,null,a.a.createElement(di,{data:t,sort:r}))))};var mi=n(416),pi=(n(705),n(418)),fi=n.n(pi);n(707),n(709);const gi=e=>{const[{item:t,onEvent:n}]=Rn(e=>({item:e.selectedItem,onEvent:e.onEvent}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(mi.a,{value:null===t||void 0===t?void 0:t.data,onChange:e=>{n({type:Ke,payload:{value:e}})},ace:fi.a,theme:"ace/theme/github"}))},yi=e=>{const{data:t,sort:n=-1}=e;return a.a.createElement(Ya,{defaultIsOpen:!0},({isOpen:e,onToggle:r})=>a.a.createElement(a.a.Fragment,null,a.a.createElement(oi.a,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"}},a.a.createElement(oi.a,{style:{flexDirection:"row",alignItems:"center"}},a.a.createElement(Xa,{onClick:r},"Local Network Statistics")),a.a.createElement(oi.a,{style:{flexDirection:"row"}})),e&&a.a.createElement(Ka,null,a.a.createElement(di,{data:t,sort:n}))))};function hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hi(Object(n),!0).forEach((function(t){bi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ei=e=>{var t,n;const{editable:r=!0,isOpen:i=!1,sort:o=-1,header:s,footer:c}=e,[{item:d,onEvent:u,networkStatistics:m,globalLabel:p,localLabel:f,isGlobalLabelFirst:y}]=Rn(e=>{var t,n,r,a;const{selectedElement:i,selectedItem:o,label:l,localDataRef:s,networkStatistics:c}=e,d=null!==i&&void 0!==i&&i.isNode()?"nodes":"edges",u=null===o||void 0===o?void 0:o.id;return{graphEditorConfig:e.config,item:e.selectedItem,localLabel:i&&(null===l||void 0===l?void 0:l[d][u]),globalLabel:null===l||void 0===l||null===(t=l.global)||void 0===t?void 0:t[d],isGlobalLabelFirst:null===l||void 0===l||null===(n=l.isGlobalFirst)||void 0===n?void 0:n[d],onEvent:e.onEvent,networkStatistics:{local:null===(r=s.current.networkStatistics.local)||void 0===r?void 0:r[u],global:null===c||void 0===c||null===(a=c.global)||void 0===a?void 0:a[u],sort:null===c||void 0===c?void 0:c.sort},selectedElement:i}}),h=a.a.useRef({width:260,height:530}),{style:v,ref:b}=Object(g.g)({from:{width:0},to:{width:h.current.width},autoPlay:!1},[h.current.width]),E=a.a.useRef();a.a.useEffect(()=>{var e,t;null===(e=b.current)||void 0===e||null===(t=e.play)||void 0===t||t.call(e,i)},[b,i]);const O=Object.values(m).find(e=>e),[w,x]=a.a.useState({isEditing:!1}),D=ai({ref:E,onDrag:({x:e,y:t},n)=>{h.current.width=n.width+e,h.current.height=n.height-t;const r=E.current;r.style.width=h.current.width+"px",r.style.height=h.current.height+"px"}});return a.a.createElement(vr.a,{ref:E,style:vi({position:"absolute",height:"60%",top:2,right:2},v)},a.a.createElement(ii.a,{sx:{boxShadow:2,borderColor:"grey.500",borderWidth:2,overflow:"hidden",height:"100%",width:"100%",display:"flex",flexDirection:"row"}},a.a.createElement(oi.a,{style:{height:"100%",flex:1,overflowY:"auto",overflowX:"hidden"}},s&&a.a.createElement(s,null),d&&a.a.createElement(Ya,{defaultIsOpen:!0},({isOpen:e,onToggle:t})=>a.a.createElement(a.a.Fragment,null,a.a.createElement(Xa,{style:{wordBreak:"break-word",padding:2},onClick:t}," id: "+(null===d||void 0===d?void 0:d.id)),e&&a.a.createElement(Ka,null,a.a.createElement(oi.a,{style:{width:"100%",height:O?"70%":"100%"}},r&&(null===d||void 0===d?void 0:d.data)&&a.a.createElement(oi.a,{style:{flexDirection:"row",justifyContent:"flex-end"}},a.a.createElement(l.a,{onClick:()=>x(vi(vi({},w),{},{isEditing:!w.isEditing}))},w.isEditing?"Done":"Edit")),w.isEditing?a.a.createElement(gi,null):a.a.createElement(di,{sort:o,localLabel:f,globalLabel:p,isGlobalLabelFirst:y,data:null===d||void 0===d?void 0:d.data,onEvent:u}))))),a.a.createElement(wa.a,null),a.a.createElement(si,null),O&&a.a.createElement(oi.a,{style:{height:"30%",width:"100%"}},m.global&&a.a.createElement(ui,{data:m.global,sort:null===(t=m.sort)||void 0===t?void 0:t.global,onEvent:u}),a.a.createElement(wa.a,null),m.local&&a.a.createElement(yi,{data:m.local,sort:null===(n=m.sort)||void 0===n?void 0:n.local,onEvent:u})),c&&a.a.createElement(c,null)),a.a.createElement(ri,{onMouseDown:D,isRight:!1})))};var Oi=n(201);function wi(){return(wi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Di(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ii=e=>{var t;const{formData:n}=e,[r]=a.a.useState(n),[,i]=a.a.useState(0),o=a.a.useRef(n),s=a.a.useCallback(()=>{o.current=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xi(Object(n),!0).forEach((function(t){Di(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r),i(e=>e+1)},[r]),c=a.a.useRef(0);a.a.useMemo(()=>{o.current=n},[n]);const d=o.current;return a.a.useMemo(()=>{c.current+=1},[d]),a.a.createElement(Oi.a,wi({},e,{key:c.current,formData:d}),null!==(t=e.children)&&void 0!==t?t:a.a.createElement(g.c,{style:{flexDirection:"row"}},a.a.createElement(l.a,{onClick:s,color:"warning",fullWidth:!0,variant:"contained",style:{marginRight:2}},"Default"),a.a.createElement(l.a,{type:"submit",fullWidth:!0,variant:"contained"},"Apply")))};var Ci=n(208);function ji(){return(ji=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Pi=e=>{const{onReorder:t,onDragEnd:n,data:r=[],renderItem:o}=e,l=a.a.useMemo(()=>i.ab(),[]);return a.a.createElement(Ci.a,{onDragEnd:e=>{null===n||void 0===n||n(e),(e.destination||e.destination.index!==e.source.index)&&(null===t||void 0===t||t(e))}},a.a.createElement(Ci.c,{droppableId:l},(e,t)=>a.a.createElement("div",ji({},e.droppableProps,{ref:e.innerRef}),r.map((n,r)=>a.a.createElement(Ci.b,{key:n.id,draggableId:n.id,index:r},(a,i,l)=>o({item:n,index:r,provided:a,snapshot:i,rubric:l,droppableProvided:e,droppableSnapshot:t}))),e.placeholder)))};var ki=n(1169),Si=n(1157);function Ti(){return(Ti=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Li=e=>{const{actions:t}=e;return a.a.createElement(g.c,{style:{width:24,height:24}},a.a.createElement(ki.a,{ariaLabel:"SpeedDial basic example",icon:a.a.createElement(Ea,{name:"settings",style:{fontSize:20}}),FabProps:{style:{width:24,height:24,minWidth:24,minHeight:24},color:"inherit"},style:{width:24,height:24},direction:"left"},t.map(e=>{const{icon:t,name:n,onClick:r}=e;return a.a.createElement(Si.a,Ti({key:n,tooltipTitle:n,tooltipPlacement:"bottom",onClick:e=>{e.stopPropagation(),null===r||void 0===r||r(e)}},t,{icon:a.a.createElement(Ea,t)}))})))},_i=["children","value","index"];function Ri(){return(Ri=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ai(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const Ni=e=>{const{children:t,value:n,index:r}=e,i=Ai(e,_i);return a.a.createElement("div",Ri({role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-"+r,"aria-labelledby":"simple-tab-"+r},i),n===r&&a.a.createElement(vr.a,null,t))};var Mi=n(1183),Fi=n(1168),Bi=n(1162),Vi=n(1188),Ui=n(1153),Hi=n(1179),qi=n(1189),Gi=n(1190),zi=n(1181),Wi=n(1184),$i=n(1187),Yi=n(1186);const Xi=Object.keys(vn),Ki=e=>{const{onSubmit:t}=e,[{onEvent:n}]=Rn(e=>({onEvent:e.onEvent})),[r,i]=Object(y.a)({selectedClusterName:Xi[0]});return a.a.createElement(g.c,{style:{width:"100%",height:"100%"}},a.a.createElement(Da.a,{id:"create-cluster-by-algorithm-label"},"Age"),a.a.createElement(Ia.a,{labelId:"create-cluster-by-algorithm-label",value:r.selectedClusterName,onChange:e=>i(t=>{t.selectedClusterName=e.target.value})},Xi.map(e=>a.a.createElement(yr.a,{key:e,value:e},e))),a.a.createElement(Ii,{onSubmit:e=>{n({type:Q,payload:{config:e.formData,name:r.selectedClusterName}}),t()},onClear:e=>{n({type:J,payload:{config:e.formData,name:r.selectedClusterName}})},schema:vn[r.selectedClusterName].configSchema}))};function Ji(){return(Ji=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Qi=e=>{const{isOpen:t,onChange:n,createClusterForm:r={schema:{}}}=e,[{onEvent:o,clusters:s=[],editorMode:c,graphEditorLocalDataRef:d}]=Rn(e=>{var t;return{clusters:null===(t=e.graphConfig)||void 0===t?void 0:t.clusters,onEvent:e.onEvent,graphEditorLocalDataRef:e.localDataRef,editorMode:e.mode}}),[u,m]=Object(y.a)({selectedClusterIds:[],currentTab:0,formData:{},createClusterDialog:{name:"",visible:!1}}),p=u.selectedClusterIds.length>0,{anchorEl:f,isOpen:h,onClose:v,onOpen:b}=Object(g.i)({});return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ya,{isOpen:t},()=>a.a.createElement(a.a.Fragment,null,a.a.createElement(g.c,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"}},a.a.createElement(g.c,{style:{flexDirection:"row",alignItems:"center"}},a.a.createElement(Xa,{onClick:()=>n(!t)},"Clusters")),a.a.createElement(br.a,{onClick:e=>{e.stopPropagation(),b(e)}},a.a.createElement(Ea,{color:0===u.currentTab?"inherit":"secondary",name:0===u.currentTab?"add_circle":"close"})),a.a.createElement(gr.a,{anchorEl:f,open:h,onClose:v},0!==u.currentTab&&a.a.createElement(yr.a,{onClick:e=>{e.stopPropagation(),m(e=>{e.currentTab=0}),v()}},"Close"),a.a.createElement(yr.a,{selected:1===u.currentTab,onClick:e=>{e.stopPropagation(),m(e=>{e.currentTab=1}),n(!0),v()}},"By Filter"),a.a.createElement(yr.a,{selected:2===u.currentTab,onClick:e=>{e.stopPropagation(),m(e=>{e.currentTab=2}),n(!0),v()}},"By Algorithm"))),t&&p&&a.a.createElement(Mi.a,{style:{display:"flex",flexDirection:"row",height:32,width:"100%"}},a.a.createElement(Fi.a,null,a.a.createElement(Bi.a,{onClick:e=>e.stopPropagation(),checked:!i.q(u.selectedClusterIds)&&u.selectedClusterIds.length===s.length,onChange:e=>{const{checked:t}=e.target;m(e=>{e.selectedClusterIds=t?s.map(e=>e.id):[]})},inputProps:{"aria-label":"primary checkbox"}}),a.a.createElement(br.a,{onClick:e=>{e.stopPropagation(),o({type:oe,payload:{itemIds:u.selectedClusterIds}}),m(e=>{e.selectedClusterIds=[]})}},a.a.createElement(Ea,{name:"delete_rounded"})))),t&&a.a.createElement(Ka,null,a.a.createElement(Ni,{value:u.currentTab,index:0},0===s.length&&a.a.createElement(Ua.a,null,"Let's create a Cluster."),a.a.createElement(li.a,{dense:!0},a.a.createElement(Pi,{onReorder:e=>{o({type:_e,payload:{fromIndex:e.source.index,toIndex:e.destination.index}})},data:s,renderItem:({provided:e,item:t})=>{const{ids:n,id:r,name:l}=t;return a.a.createElement(Wi.a,Ji({key:r,ref:e.innerRef},e.draggableProps),a.a.createElement(Yi.a,{"aria-controls":"panel1a-content"},a.a.createElement(g.c,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"}},a.a.createElement(g.c,{style:{flexDirection:"row",alignItems:"center"}},a.a.createElement(Bi.a,{onClick:e=>e.stopPropagation(),checked:u.selectedClusterIds.includes(t.id),onChange:e=>{const{checked:n}=e.target;m(e=>{n?e.selectedClusterIds.push(t.id):e.selectedClusterIds=e.selectedClusterIds.filter(e=>e!==t.id)})},inputProps:{"aria-label":"primary checkbox"}}),a.a.createElement(Ua.a,{variant:"h6"},l)),a.a.createElement(g.c,{style:{flexDirection:"row",alignItems:"center"}},a.a.createElement(Zi,{graphEditorLocalDataRef:d,editorMode:c,onEvent:o,item:t}),a.a.createElement(br.a,Ji({edge:"end",disableFocusRipple:!0,disableRipple:!0,disableTouchRipple:!0},e.dragHandleProps),a.a.createElement(Ea,{name:"drag_handle"}))))),a.a.createElement($i.a,null,n.map(e=>a.a.createElement(Fi.a,{key:e},a.a.createElement(Vi.a,null,a.a.createElement(Bi.a,{inputProps:{"aria-label":"primary checkbox"},onClick:e=>e.stopPropagation()})),a.a.createElement(Ui.a,{primary:i.R(10)(e)}),a.a.createElement(Hi.a,null,a.a.createElement(br.a,{edge:"end","aria-label":"select",onClick:t=>{t.stopPropagation(),o({type:ye,payload:{itemIds:[e]},avoidHistoryRecording:!0})}},a.a.createElement(Ea,{name:"my_location"})),a.a.createElement(br.a,{edge:"end","aria-label":"delete",onClick:n=>{n.stopPropagation(),o({type:ie,payload:{itemIds:[e],clusterId:t.id}})}},a.a.createElement(Ea,{name:"delete_rounded"})))))))}}))),a.a.createElement(Ni,{value:u.currentTab,index:1},a.a.createElement(Ii,Ji({onSubmit:e=>{m(t=>{t.formData=e.formData,t.createClusterDialog.visible=!0})},onClear:e=>{m(t=>{t.formData=e.formData,t.createClusterDialog.visible=!1})}},r))),a.a.createElement(Ni,{value:u.currentTab,index:2},a.a.createElement(Ki,{onSubmit:()=>{m(e=>{e.currentTab=0})}}))))),a.a.createElement(qi.a,{onClose:()=>m(e=>{e.createClusterDialog.visible=!1}),"aria-labelledby":"create-playlist-dialog-title",open:u.createClusterDialog.visible},a.a.createElement(Gi.a,{id:"create-playlist-dialog-title"},"Create Cluster"),a.a.createElement(g.c,{style:{width:"50%",padding:10,justifyContent:"center"}},a.a.createElement(zi.a,{style:{marginBottom:10,width:"50vw"},fullWidth:!0,label:"name",value:u.createClusterDialog.name,onChange:({target:{value:e}})=>m(t=>{t.createClusterDialog.name=e})}),a.a.createElement(l.a,{fullWidth:!0,onClick:()=>{m(e=>{e.currentTab=0,e.createClusterDialog.name="",e.createClusterDialog.visible=!1}),o({type:Z,payload:{formData:u.formData,name:u.createClusterDialog.name}})}},"Create"))))},Zi=e=>{var t;const{item:n,editorMode:r,onEvent:i,graphEditorLocalDataRef:o}=e;return a.a.createElement(Li,{actions:[{name:"Delete",icon:{name:"delete_rounded"},onClick:e=>{e.stopPropagation(),i({type:oe,payload:{itemIds:[n.id]}})}},{name:"Focus",icon:{name:"center_focus_strong"},onClick:e=>{e.stopPropagation(),i({type:Oe,payload:{itemIds:n.ids}})}},{name:!1===n.visible?"Visible":"Invisible",icon:{name:!1===n.visible?"unfold_more":"unfold_less"},onClick:e=>{e.stopPropagation(),i({type:H,payload:{clusterId:n.id,value:!1===n.visible}})}},{name:"Select",icon:{name:"beenhere"},onClick:e=>{e.stopPropagation(),i({type:Ne,payload:{itemIds:[n.id]}})}},{name:"Add",icon:{name:"add_circle",color:r===Ze.ADD_CLUSTER_ELEMENT&&(null===(t=o.current)||void 0===t?void 0:t.issuedClusterId)===n.id?"primary":"inherit"},onClick:e=>{e.stopPropagation(),i({type:ke,payload:{clusterId:n.id}})}}]})};function eo(){return(eo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function to(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function no(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?to(Object(n),!0).forEach((function(t){ro(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):to(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ro(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ao=Object(g.m)(e=>{const{onCreatePlaylistClick:t,isOpen:n,onChange:r}=e,[o,l]=Object(y.a)({selectedEventIds:[]}),s=o.selectedEventIds.length>0,[{onEvent:c,eventHistory:d}]=Rn(e=>({onEvent:e.onEvent,eventHistory:e.eventHistory}));return a.a.createElement(g.c,{style:{overflowY:"auto",overflowX:"hidden",height:"100%",width:"100%"}},a.a.createElement(Ya,{isOpen:n},()=>a.a.createElement(a.a.Fragment,null,a.a.createElement(g.c,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"}},a.a.createElement(g.c,{style:{flexDirection:"row",alignItems:"center"}},a.a.createElement(Xa,{onClick:()=>r(!n)},"History")),a.a.createElement(g.c,{style:{flexDirection:"row"}},a.a.createElement(br.a,{onClick:e=>{e.stopPropagation(),c({type:Xe,avoidEventRecording:!0,avoidHistoryRecording:!0})}},a.a.createElement(Ea,{name:"keyboard_arrow_down"})),a.a.createElement(br.a,{onClick:e=>{e.stopPropagation(),c({type:Le,avoidEventRecording:!0,avoidHistoryRecording:!0})}},a.a.createElement(Ea,{name:"keyboard_arrow_up"})))),n&&s&&a.a.createElement(Mi.a,{style:{display:"flex",flexDirection:"row",height:32,width:"100%"}},a.a.createElement(Fi.a,null,a.a.createElement(Bi.a,{checked:!i.q(o.selectedEventIds)&&o.selectedEventIds.length===d.events.length,onChange:e=>{const{checked:t}=e.target;l(e=>{e.selectedEventIds=t?d.events.map(e=>e.id):[]})},onClick:e=>e.stopPropagation(),inputProps:{"aria-label":"primary checkbox"}}),a.a.createElement(br.a,{onClick:e=>{e.stopPropagation(),t(o.selectedEventIds),l(e=>{e.selectedEventIds=[]})}},a.a.createElement(Ea,{name:"playlist_add"})),a.a.createElement(br.a,{onClick:e=>{e.stopPropagation(),c({type:me,payload:{itemIds:o.selectedEventIds}}),l(e=>{e.selectedEventIds=[]})}},a.a.createElement(Ea,{name:"delete_rounded"})))),n&&a.a.createElement(Ka,null,0===d.events.length&&a.a.createElement(Ua.a,null,"Let's do a few things."),a.a.createElement(li.a,{dense:!0},a.a.createElement(Pi,{onReorder:e=>{const{length:t}=d.events;c({type:Re,payload:{fromIndex:t-e.source.index-1,toIndex:t-e.destination.index-1}})},data:i.N(d.events),renderItem:({provided:e,item:t,index:n})=>{const{length:r}=d.events;return a.a.createElement(Fi.a,eo({key:t.id,selected:d.currentIndex===r-1-n,ref:e.innerRef},e.draggableProps),a.a.createElement(Vi.a,null,a.a.createElement(Bi.a,{checked:o.selectedEventIds.includes(t.id),onChange:e=>{const{checked:n}=e.target;l(e=>{n?e.selectedEventIds.push(t.id):e.selectedEventIds=e.selectedEventIds.filter(e=>e!==t.id)})},inputProps:{"aria-label":"primary checkbox"}})),a.a.createElement(Ui.a,{primary:t.type}),a.a.createElement(g.c,{style:{display:"flex",flexDirection:"row",alignItems:"center"}},a.a.createElement(Li,{actions:[{name:"Redo",icon:{name:"navigate_next"},onClick:e=>c({type:B,payload:{events:[no(no({},t),{},{avoidEventRecording:!0,avoidHistoryRecording:!0})]}})},{name:"Undo",icon:{name:"navigate_before"},onClick:()=>c({type:B,payload:{events:[no(no({},d.undoEvents[n]),{},{avoidEventRecording:!0,avoidHistoryRecording:!0})]}})},{name:"Delete",icon:{name:"delete_rounded"},onClick:()=>c({type:me,payload:{itemIds:[t.id]},avoidEventRecording:!0,avoidHistoryRecording:!0})}]}),a.a.createElement(br.a,eo({edge:"end",disableFocusRipple:!0,disableRipple:!0,disableTouchRipple:!0},e.dragHandleProps),a.a.createElement(Ea,{name:"drag_handle"}))))}}))))))},{});n(1191),n(1192),n(1193);var io=n(52);function oo(){return(oo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const{asNumber:lo,guessType:so}=io.b,co=new Set(["number","integer"]),uo=(e,t)=>{const{type:n,items:r}=e;if(""!==t){if("array"===n&&r&&co.has(r.type))return t.map(lo);if("boolean"===n)return"true"===t;if("number"===n)return lo(t);if(e.enum){if(e.enum.every(e=>"number"===so(e)))return lo(t);if(e.enum.every(e=>"boolean"===so(e)))return"true"===t}return t}},mo=e=>{const{schema:t,id:n,label:r,required:i,disabled:o,readonly:l,options:s,value:c,multiple:d,autofocus:u,onChange:m,onBlur:p,onFocus:f,rawErrors:y=[]}=e,{enumOptions:h,enumDisabled:v}=s,b=d?[]:"",{anchorEl:E,onClose:O,onOpen:w}=Object(g.i)({}),x=a.a.useRef(-1);return a.a.createElement(zi.a,{id:n,label:r||t.title,select:!0,value:"undefined"===typeof c?b:c,required:i,disabled:o||l,autoFocus:u,error:y.length>0,onChange:({target:{value:e}})=>m(uo(t,e)),onBlur:({target:{value:e}})=>p(n,uo(t,e)),onFocus:({target:{value:e}})=>f(n,uo(t,e)),InputLabelProps:{shrink:!0},SelectProps:{multiple:"undefined"!==typeof d&&d}},h.map(({value:e,label:t},n)=>{const r=v&&-1!=v.indexOf(e);return a.a.createElement(yr.a,{key:n,value:e,disabled:r,onMouseEnter:e=>{x.current=n,w(e)},onMouseLeave:O},a.a.createElement(po,{openInfo:{anchorEl:E,isOpen:x.current===n},value:e,label:t,disabled:r}))}))},po=e=>{const{label:t,value:n}=e;return a.a.createElement(a.a.Fragment,null,a.a.createElement(g.c,{style:{flexDirection:"row",justifyContent:"space-between",width:"100%"}},a.a.createElement(Ua.a,null,t),a.a.createElement("img",{src:`https://raw.githubusercontent.com/sabaturgay/assets/main/gifs/${n}Layout.gif`,width:32,height:32,alt:t})))};function fo(){return(fo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const go=e=>{const{layout:t={},onEvent:n,schema:r,isOpen:o,onChange:l}=e,s=a.a.useCallback(e=>{n({type:De,payload:{form:e,value:e.formData}})},[n]);return a.a.createElement(Ya,{isOpen:o},()=>a.a.createElement(a.a.Fragment,null,a.a.createElement(Xa,{onClick:()=>l(!o)},"Layout"),o&&a.a.createElement(Ka,null,a.a.createElement(Ii,fo({},{schema:{properties:{name:{type:"string",enum:et},animationDuration:{type:"number",minimum:0,maximum:1e4},refresh:{type:"number",minimum:0,maximum:100},maxIterations:{type:"number",minimum:0,maximum:1e3},maxSimulationTime:{type:"number",minimum:0,maximum:1e3},expansion:{type:"number",minimum:0,maximum:1}}},uiSchema:{name:{"ui:field":e=>{const{schema:t,formData:n}=e;return a.a.createElement(mo,oo({},e,{value:n,options:{enumOptions:t.enum.map(e=>({label:e,value:e}))}}))}}}},r?{schema:i.C(["title"],r)}:{},{formData:{name:t.name,animationDuration:t.animationDuration,refresh:t.refresh,maxIterations:t.maxIterations,maxSimulationTime:t.maxSimulationTime},onSubmit:s})))))};function yo(){return(yo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const ho=e=>{const{createPlaylistDialog:t,onCreatePlaylist:n,isOpen:r,onChange:o}=e,[{onEvent:s,playlists:c=[]}]=Rn(e=>({onEvent:e.onEvent,playlists:e.playlists})),[d,u]=Object(y.a)({createPlaylistDialog:{name:""},selectedPlaylistIds:[]}),m=d.selectedPlaylistIds.length>0;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ya,{isOpen:r},()=>a.a.createElement(a.a.Fragment,null,a.a.createElement(g.c,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"}},a.a.createElement(g.c,{style:{flexDirection:"row",alignItems:"center"}},a.a.createElement(Xa,{onClick:()=>o(!r)},"Playlists"))),r&&m&&a.a.createElement(Mi.a,{style:{display:"flex",flexDirection:"row",height:32,width:"100%"}},a.a.createElement(Fi.a,null,a.a.createElement(Bi.a,{onClick:e=>e.stopPropagation(),checked:!i.q(d.selectedPlaylistIds)&&d.selectedPlaylistIds.length===c.length,onChange:e=>{const{checked:t}=e.target;u(e=>{e.selectedPlaylistIds=t?c.map(e=>e.id):[]})},inputProps:{"aria-label":"primary checkbox"}}),a.a.createElement(br.a,{onClick:e=>{e.stopPropagation(),u(e=>{e.selectedPlaylistIds=[]}),s({type:fe,payload:{itemIds:d.selectedPlaylistIds}})}},a.a.createElement(Ea,{name:"delete_rounded"})))),r&&a.a.createElement(Ka,null,0===c.length&&a.a.createElement(Ua.a,{variant:"subtitle2"},"Let's create a playlist."),a.a.createElement(li.a,{dense:!0},a.a.createElement(Pi,{onReorder:e=>s({type:Ae,payload:{fromIndex:e.source.index,toIndex:e.destination.index}}),data:c,renderItem:({provided:e,item:t})=>{const{events:n,id:r,name:i}=t;return a.a.createElement(Wi.a,yo({key:r,ref:e.innerRef},e.draggableProps),a.a.createElement(Yi.a,{"aria-controls":"panel1a-content"},a.a.createElement(g.c,{style:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"}},a.a.createElement(g.c,{style:{flexDirection:"row",alignItems:"center"}},a.a.createElement(Bi.a,{onClick:e=>e.stopPropagation(),checked:m&&d.selectedPlaylistIds.includes(t.id),onChange:e=>{const{checked:n}=e.target;u(e=>{n?e.selectedPlaylistIds.push(t.id):e.selectedPlaylistIds=e.selectedPlaylistIds.filter(e=>e!==t.id)})},inputProps:{"aria-label":"primary checkbox"}}),a.a.createElement(Ua.a,{variant:"h6"},i)),a.a.createElement(g.c,{style:{flexDirection:"row",alignItems:"center"}},a.a.createElement(Li,{actions:[{name:"Delete",icon:{name:"delete_rounded"},onClick:e=>{e.stopPropagation(),u(e=>{e.selectedPlaylistIds=[]}),s({type:fe,payload:{itemIds:[t.id]}})}},{name:"Play",icon:{name:"play_arrow"},onClick:e=>{e.stopPropagation(),s({type:Ce,payload:{events:t.events}})}}]}),a.a.createElement(br.a,yo({edge:"end",disableFocusRipple:!0,disableRipple:!0,disableTouchRipple:!0},e.dragHandleProps),a.a.createElement(Ea,{name:"drag_handle"}))))),a.a.createElement($i.a,null,n.map(e=>a.a.createElement(Fi.a,{key:e.id},a.a.createElement(Vi.a,null,a.a.createElement(Bi.a,{inputProps:{"aria-label":"primary checkbox"},onClick:e=>e.stopPropagation()})),a.a.createElement(Ui.a,{primary:e.type}),a.a.createElement(Hi.a,null,a.a.createElement(br.a,{edge:"end","aria-label":"delete",onClick:e=>{e.stopPropagation()}},a.a.createElement(Ea,{name:"delete_rounded"})))))))}}))))),a.a.createElement(qi.a,{onClose:t.onClose,"aria-labelledby":"create-playlist-dialog-title",open:t.visible},a.a.createElement(Gi.a,{id:"create-playlist-dialog-title"},"Create Playlist"),a.a.createElement(g.c,{style:{width:"50%",padding:10,justifyContent:"center"}},a.a.createElement(zi.a,{style:{marginBottom:10,width:"50vw"},fullWidth:!0,label:"name",value:d.createPlaylistDialog.name,onChange:({target:{value:e}})=>u(t=>{t.createPlaylistDialog.name=e})}),a.a.createElement(l.a,{fullWidth:!0,onClick:()=>{n({id:i.ab(),name:d.createPlaylistDialog.name}),u(e=>{e.createPlaylistDialog.name=""})}},"Create"))))};function vo(){return(vo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bo(Object(n),!0).forEach((function(t){Oo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const wo="layout",xo="history",Do="playlist",Io="clusters",Co=["layout","history","playlist","clusters"],jo=Object(g.m)(e=>{var t;const{isOpen:n=!1,forms:r=[],createClusterForm:o,defaults:l={}}=e,[{onEvent:s,eventHistory:c,clusters:d,playlists:u,layout:m}]=Rn(e=>{var t,n;return{onEvent:e.onEvent,eventHistory:e.eventHistory,playlists:e.playlists,clusters:null===(t=e.graphConfig)||void 0===t?void 0:t.clusters,layout:null===(n=e.graphConfig)||void 0===n?void 0:n.layout}}),p=a.a.useRef({width:260,height:530}),{style:f,ref:h}=Object(g.g)({from:{width:0},to:{width:p.current.width},autoPlay:!1},[p.current.width]);a.a.useEffect(()=>{h.current.play(n)},[h,n]);const[v,b,E]=Object(y.a)({createPlaylistDialog:{visible:!1},selectedEventIds:[],sections:{}});a.a.useMemo(()=>{const e=(e,t)=>{Object.keys(e.sections).forEach(t=>{e.sections[t].isOpen=!1})};b(t=>(r.forEach((n,r)=>{const a="form"+r;t.sections[a]={isOpen:!1,onChange:t=>{b(n=>{e(n),n.sections[a].isOpen=t})}}}),Co.forEach(n=>{t.sections[n]={isOpen:!1,onChange:t=>{b(r=>{e(r),r.sections[n].isOpen=t})}}}),{silent:!0}))},[r]);const O=E.get(),w=a.a.useRef(),x=ai({ref:w,onDrag:({x:e,y:t},n)=>{p.current.width=n.width-e,p.current.height=n.height-t;const r=w.current;r.style.width=p.current.width+"px",r.style.height=p.current.height+"px"}});return a.a.createElement(vr.a,{ref:w,style:Eo({position:"absolute",height:"60%",top:0,left:2},f)},a.a.createElement(ii.a,{sx:{boxShadow:2,borderColor:"grey.500",borderWidth:2,overflow:"hidden",height:"100%",width:"100%",display:"flex",flexDirection:"row"}},a.a.createElement(g.c,{style:{overflowY:"auto",overflowX:"hidden",height:"100%",flex:1}},r.map((e,t)=>{var n,r;const o=null!==(n=null===(r=e.schema)||void 0===r?void 0:r.title)&&void 0!==n?n:"Form-"+t,l=O.sections["form"+t],{isOpen:c}=l;return a.a.createElement(a.a.Fragment,{key:o},a.a.createElement(Ya,{isOpen:c},()=>a.a.createElement(a.a.Fragment,null,a.a.createElement(Xa,{onClick:()=>l.onChange(!c)},o),c&&a.a.createElement(Ka,null,a.a.createElement(Ii,vo({},e,{schema:i.C(["title"])(e.schema),onSubmit:n=>s({type:Ve,payload:{form:e,value:n.formData,index:t}}),onClear:n=>s({type:Ue,payload:{form:e,value:n.formData,index:t}})}))))),a.a.createElement(g.c,{style:{marginTop:5,marginBottom:5}}))}),a.a.createElement(go,vo({},O.sections[wo],{layout:m,onEvent:s},null!==(t=l.layout)&&void 0!==t?t:{})),c&&a.a.createElement(a.a.Fragment,null,a.a.createElement(g.c,{style:{width:"100%"}},a.a.createElement(ao,vo({},O.sections[xo],{onCreatePlaylistClick:e=>b(t=>{t.createPlaylistDialog.visible=!0,t.selectedEventIds=e})})))),u&&a.a.createElement(ho,vo({},O.sections[Do],{createPlaylistDialog:Eo(Eo({},O.createPlaylistDialog),{},{onClose:()=>b(e=>{e.createPlaylistDialog.visible=!1})}),onCreatePlaylist:e=>{const t=O.selectedEventIds.map(e=>c.events.find(t=>t.id===e)).sort((e,t)=>e.date>t.date?1:-1);b(e=>{e.createPlaylistDialog.visible=!1}),s({type:te,payload:{items:[Eo(Eo({},e),{},{events:t})]}})}})),d&&a.a.createElement(a.a.Fragment,null,a.a.createElement(g.c,{style:{width:"100%"}},a.a.createElement(Qi,vo({},O.sections[Io],{createClusterForm:o}))),a.a.createElement(wa.a,{style:{marginTop:5,marginBottom:5}}))),a.a.createElement(ri,{onMouseDown:x})),a.a.createElement(g.c,{style:{flexDirection:"row",position:"absolute",right:-112,top:2}},a.a.createElement(br.a,{style:{fontSize:24},onClick:()=>{s({type:Ge,avoidHistoryRecording:!0})}},a.a.createElement(Ea,{name:"settings_outlined"})),a.a.createElement(br.a,{style:{fontSize:24},onClick:()=>{s({type:qe,avoidHistoryRecording:!0})}},a.a.createElement(Ea,{name:"article_outlined"})),a.a.createElement(br.a,{style:{fontSize:24},onClick:()=>{s({type:He,avoidHistoryRecording:!0})}},a.a.createElement(Ea,{name:"app_registration_outlined"}))))},{});var Po=n(1161);function ko(){return(ko=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const So=e=>{var t;const{isOpen:n=!1,render:r,form:o,onClose:s,name:c}=e,[{onEvent:d}]=Rn(e=>({onEvent:e.onEvent})),u=a.a.useCallback(()=>{null===s||void 0===s||s(),d({type:K,payload:{name:c}})},[s]);return a.a.createElement(Po.a,{open:n,onClose:u,onBackdropClick:u,style:{display:"flex",alignItems:"center",justifyContent:"center"}},o?a.a.createElement(ii.a,{style:{maxWidth:"80%",maxHeight:"90%",overflow:"scroll",padding:2}},a.a.createElement(Ii,ko({},o,{schema:i.C(["title"])(o.schema)}),null!==(t=o.children)&&void 0!==t?t:a.a.createElement(l.a,{type:"submit",fullWidth:!0,variant:"contained"},"Apply"))):a.a.createElement(a.a.Fragment,null,null===r||void 0===r?void 0:r({})))},To=e=>{const{name:t,cursor:n=!1}=e,[,r]=a.a.useState({x:0,y:0});return a.a.useEffect(()=>{const e=e=>{if(n)return;const t=Ut(e);r({x:t.x+30,y:t.y+30})};return document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e)}},[n]),a.a.useEffect(()=>{n&&(document.body.style.cursor=`url(${t}), auto`)},[n,t]),t&&!n?a.a.createElement("span",null,t):null};var Lo=n(470),_o=n(17),Ro=n.n(_o);const Ao=({value:e,schema:t,onChange:n,name:r})=>{var i;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ua.a,{id:t.title+"-color-picker",gutterBottom:!0},null!==(i=t.title)&&void 0!==i?i:r),a.a.createElement(wa.a,null),a.a.createElement(Lo.a,{color:Ro()(e).hex(),onChangeComplete:e=>n(Ro()(e.hex).rgbNumber())}))};var No=n(434),Mo=n.n(No),Fo=n(435),Bo=n.n(Fo),Vo=n(1152),Uo=n(1185);function Ho(){return(Ho=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Go(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(n),!0).forEach((function(t){zo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Wo=e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.id)&&void 0!==t?t:e},$o=e=>{var t,n;const{sidebar:r=Qo,components:i=Jo,isOpen:o=!1}=e,[{onEvent:s,graphConfig:c}]=Rn(e=>({onEvent:e.onEvent,graphEditorLocalDataRef:e.localDataRef,graphConfig:e.graphConfig})),u=a.a.useMemo(()=>{var e;const t=e=>{var n;return"string"===typeof e?{id:e,label:e}:Go(Go({label:e.id},e),{},{children:null===(n=e.children)||void 0===n?void 0:n.map(e=>t(e))})};return null!==(e=null===r||void 0===r?void 0:r.map(e=>t(e)))&&void 0!==e?e:[]},[r]),[m,p]=a.a.useMemo(()=>{const e=Xo(u[0],[Wo(u[0])]),t=Object(g.f)(["children"],e,u);return[Wo(t),e]},[]),[f,h]=Object(y.a)({componentId:m,selectedPath:p}),v=a.a.useCallback(e=>{const t=Object(g.f)(["children"],e,u);h(n=>{n.selectedPath=e,n.componentId=Wo(t)})},[]),b=a.a.useMemo(()=>Yo({sidebar:u,onSelect:v,selectedPath:f.selectedPath}),[u,i,f.selectedPath]),E=null!==(t=i[f.componentId])&&void 0!==t?t:a.a.Fragment;let O=i[f.componentId](c);const w=!O.schema,x=i[f.componentId];return a.a.createElement(Po.a,{open:o,onClose:()=>s({type:We}),style:{display:"flex",alignItems:"center",justifyContent:"center"}},a.a.createElement(ii.a,{style:{display:"flex",flexDirection:"column",width:"80vw",height:"80vh"}},a.a.createElement(g.c,null,a.a.createElement(Ua.a,{variant:"h6"},"Preferences")),a.a.createElement(g.c,{style:{flexDirection:"row",height:"95%"}},a.a.createElement(g.c,{style:{marginRight:4,flexDirection:"row"}},a.a.createElement(d.a,{in:!0},b),a.a.createElement(wa.a,{orientation:"vertical",flexItem:!0})),a.a.createElement(g.c,{style:{flex:1}},x&&(w?a.a.createElement(E,null):a.a.createElement(ii.a,{style:{width:"97%",height:"97%",overflow:"scroll",padding:2}},a.a.createElement(Ii,Ho({},O,{style:{width:"100%",height:"100%"},schema:O.schema,onSubmit:({formData:e})=>{s({type:Pe,payload:{value:e,preferenceId:f.componentId,preferencePath:f.selectedPath}})},onClear:({formData:e})=>{s({type:je,payload:{value:e,preferenceId:f.componentId,preferencePath:f.selectedPath}})}}),null!==(n=O.children)&&void 0!==n?n:a.a.createElement(l.a,{type:"submit",fullWidth:!0,variant:"contained"},"Save"))))))))},Yo=e=>{const{sidebar:t,onSelect:n,selectedPath:r}=e;return a.a.createElement(g.c,null,a.a.createElement(wa.a,null),a.a.createElement(li.a,null,a.a.createElement(g.a,{data:t,extraData:[r,n],accessor:["children"],renderItem:e=>{const{children:t}=e,i=e.item;return a.a.createElement(Ko,{item:i,onSelect:n,path:e.path,selectedPath:r},t)}})))},Xo=(e,t=[])=>{var n;const r=null===e||void 0===e||null===(n=e.children)||void 0===n?void 0:n[0];return r?Xo(r,[...t,Wo(r)]):t},Ko=e=>{const{children:t,item:n,onSelect:r,path:o,selectedPath:l}=e,[s,c]=a.a.useState(!1),d=i.p(String)(n)?{label:n,id:n}:n,u=!!d.children,m=l.join("").includes(o.join(""));return a.a.createElement(a.a.Fragment,null,a.a.createElement(Fi.a,{button:!0,onClick:()=>{r(Xo(n,o)),c(!s)},selected:m},a.a.createElement(Vo.a,null,d.icon),a.a.createElement(Ui.a,{primary:d.label}),u?s?a.a.createElement(Mo.a,null):a.a.createElement(Bo.a,null):null),a.a.createElement(Uo.a,{in:s,timeout:"auto",unmountOnExit:!0},a.a.createElement(li.a,{component:"div",disablePadding:!0,sx:{ml:2}},t)))},Jo={NodeView:e=>({schema:{type:"object",properties:{width:{title:"Width",type:"number"},height:{title:"Height",type:"number"},radius:{title:"Radius",type:"number"},fill:{title:"Fill",type:"object",properties:{default:{title:"Default",type:"number"},hovered:{title:"Hovered",type:"number"},selected:{title:"Selected",type:"number"},edgeSelected:{title:"Edge Selected",type:"number"}},required:["default","hovered","selected","edgeSelected"]},labelVisible:{title:"Label Visible",type:"boolean"}},required:["width","height","radius","fill","labelVisible"]},uiSchema:{fill:{selected:{"ui:widget":Ao},hovered:{"ui:widget":Ao},edgeSelected:{"ui:widget":Ao},default:{"ui:widget":Ao}}},formData:i.C(["ids"],e.nodes.view)}),EdgeView:e=>({schema:{type:"object",properties:{width:{title:"Width",type:"number"},alpha:{title:"Alpha",type:"number"},lineType:{title:"Line Type",type:"string",enum:["line","bezier","segments"],enumNames:["Line","Bezier","Segments"]},fill:{title:"Fill",type:"object",properties:{default:{title:"Default",type:"number"},hovered:{title:"Hovered",type:"number"},selected:{title:"Selected",type:"number"},nodeSelected:{title:"Node Selected",type:"number"}},required:["default","hovered","selected","nodeSelected"]},labelVisible:{title:"Label Visible",type:"boolean"}},required:["width","fill","labelVisible"]},uiSchema:{fill:{selected:{"ui:widget":Ao},hovered:{"ui:widget":Ao},nodeSelected:{"ui:widget":Ao},default:{"ui:widget":Ao}}},formData:i.C(["ids"],e.edges.view)})},Qo=[{id:"General",icon:a.a.createElement(Ea,{name:"settings"}),label:"General",children:[{id:"NodeView"},{id:"EdgeView"}]}];function Zo(){return(Zo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function el(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?el(Object(n),!0).forEach((function(t){nl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):el(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const rl=e=>{var t;const{timeoutManager:n,onClose:r}=e,i=!n.finished,[o,s]=a.a.useState({alert:{visible:!1}}),c=null===(t=n.timers)||void 0===t?void 0:t[n.currentIndex],{duration:d,totalDuration:u,currentIndex:m,paused:p,timeoutInstances:f}=n;return a.a.createElement(Po.a,{open:i,style:{display:"flex",flexDirection:"column-reverse"},BackdropProps:{style:{backgroundColor:"rgba(0, 0, 0, 0)"},onClick:()=>{s(tl(tl({},o),{},{alert:tl(tl({},o.alert),{},{visible:!0})})),setTimeout(()=>{s(tl(tl({},o),{},{alert:tl(tl({},o.alert),{},{visible:!1})}))},1500)}}},a.a.createElement(ii.a,{style:{display:"flex",flexDirection:"column"}},a.a.createElement(g.c,{style:{flexDirection:"row",justifyContent:"space-between"}},a.a.createElement(Ua.a,{variant:"h6"},"Play Events"),o.alert.visible&&a.a.createElement(Ua.a,{variant:"h6",color:"error"},"You cannot take action while the events are playing")),a.a.createElement(g.c,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},a.a.createElement(g.c,{style:{flexDirection:"row"}},a.a.createElement(l.a,{color:p?"primary":"secondary",onClick:()=>{p?n.start():n.pause()}},p?"Play":"Pause"),a.a.createElement(l.a,{color:"secondary",onClick:()=>{r()}},"Close")),a.a.createElement(Ua.a,{variant:"subtitle1"},"Current Event: "+(null===c||void 0===c?void 0:c.type)),a.a.createElement(g.c,{style:{flexDirection:"row",height:"100%",alignItems:"center"}},a.a.createElement(Ua.a,{variant:"subtitle2"},`Events: ${m} / ${f.length}`),a.a.createElement(al,{value:d/u*100})))))};function al(e){return a.a.createElement(g.c,null,a.a.createElement(c.a,Zo({variant:"determinate"},e)),a.a.createElement(g.c,{style:{position:"absolute",top:0,left:0,bottom:0,right:0,alignItems:"center",justifyContent:"center"}},a.a.createElement(Ua.a,{variant:"caption",component:"div",color:"textSecondary"},Math.round(e.value)+"%")))}const il=["onEvent","renderEdge","renderNode","graphConfig","style","settingsBar","actionBar","dataBar","preferencesModal","nodes","edges","selectedElementIds","label","mode","events","eventHistory","config","playlists","networkStatistics","isLoading","modals","isFocusMode"],ol=["item","element"],ll=["item","element"];function sl(){return(sl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function cl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cl(Object(n),!0).forEach((function(t){ul(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ul(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ml(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const pl={[Ze.ADD]:"https://img.icons8.com/material/0.8x/plus-math.png",[Ze.DELETE]:"https://img.icons8.com/material/0.8x/minus--v2.png",[Ze.CONTINUES_ADD]:"https://img.icons8.com/material/0.8x/plus.png",[Ze.CONTINUES_DELETE]:"https://img.icons8.com/material/0.8x/minus-sign.png",[Ze.ADD_CLUSTER_ELEMENT]:"https://img.icons8.com/material/0.8x/doctors-folder.png",[Ze.DEFAULT]:null},fl=i.k,gl={enableNetworkStatistics:!0},yl=e=>(e=>{const t=[];return JSON.stringify(e,(e,n)=>{if("object"===typeof n&&null!==n){if(t.includes(n))return null;t.push(n)}return n&&(n.isNode||"function"===typeof n||Dr.isValidElementType(n)||n.$$typeof)?null:n})})(e),hl=Object(g.m)((e,t)=>{const{onEvent:n=fl,renderEdge:r,renderNode:o,graphConfig:l,style:d,settingsBar:u,actionBar:m,dataBar:p={},preferencesModal:f={},nodes:h,edges:v,selectedElementIds:b=[],label:E,mode:O=Ze.DEFAULT,events:w,eventHistory:x,config:D=gl,playlists:I,networkStatistics:C,isLoading:j=!1,modals:P={},isFocusMode:k=!1}=e,S=ml(e,il),T=a.a.useMemo(()=>{var e,t;return dl(dl({},null!==l&&void 0!==l?l:{}),{},{nodes:i.y([ft,null!==(e=null===l||void 0===l?void 0:l.nodes)&&void 0!==e?e:{}]),edges:i.y([gt,null!==(t=null===l||void 0===l?void 0:l.edges)&&void 0!==t?t:{}])})},[l]),_=a.a.useRef({initialized:!1,targetNode:null,props:e,issuedClusterId:null,newClusterBoxSelection:{elementIds:[]},networkStatistics:{local:null},contextMenu:{itemIds:[]}}),[R,A]=Object(y.a)({eventsModal:{visible:!1},contextMenu:{visible:!1,position:{x:0,y:0}},isLoading:!1});_.current.props=e,a.a.useEffect(()=>{_.current.initialized=!0},[]);const N=a.a.useMemo(()=>{var e;return null!==(e=null===T||void 0===T?void 0:T.graphId)&&void 0!==e?e:i.ab()},[null===T||void 0===T?void 0:T.graphId]),B=Object(g.j)(t);a.a.useEffect(()=>{setTimeout(()=>{t.current=B.current},1e3)},[B.current]);const U=a.a.useMemo(()=>{var e,t;const n=null===(e=B.current)||void 0===e||null===(t=e.cy)||void 0===t?void 0:t.$id(i.v(b));return 0===(null===n||void 0===n?void 0:n.length)?null:n},[h,v,b]),H=U&&St(U,{nodes:h,edges:v}).item,q=a.a.useCallback(e=>{const{props:{nodes:t,edges:r}}=_.current;switch(e.type){case ke:_.current.issuedClusterId=e.payload.clusterId;break;case Q:{var a,o,l;const{config:s={},name:c}=e.payload,d=vn[c].getByItem(dl({cy:null===(a=B.current)||void 0===a?void 0:a.cy,nodes:t,edges:r},s));let u=(null!==(o=null===T||void 0===T||null===(l=T.clusters)||void 0===l?void 0:l.length)&&void 0!==o?o:0)-1;const m=d.map(e=>{const t=e.map(e=>e.id());return u+=1,{id:i.ab(),name:"Cluster-"+u,ids:t,childClusterIds:[]}}).filter(e=>!!e);return void(0===m.length?alert("There is no clusters with this configuration!"):n({id:i.ab(),date:(new Date).toString(),type:ee,payload:{items:m}}))}}n(dl(dl(dl({},U?{elementId:U.id()}:{}),e),{},{id:i.ab(),date:(new Date).toString()},e.event?{event:i.F([["data","originalEvent","metaKey"]])(e.event)}:{}))},[n,null===H||void 0===H?void 0:H.id]),G=((e,t,n={})=>{const{deps:r=[],renderOnTimeout:i=!1,renderOnFinished:o=!1,renderOnPlayChanged:l=!1,onFinish:s,autostart:c=!0}=n,[,d]=a.a.useState({}),u=a.a.useMemo(()=>xr(e,(e,n,r)=>{t(e,n,r),i&&d({})},{onFinish:()=>{null===s||void 0===s||s(),o&&d({})},onPlayChanged:()=>{l&&d({})},autostart:c}),r);return a.a.useEffect(()=>()=>{u.clear()},r),u})((null!==w&&void 0!==w?w:[]).map((e,t)=>dl(dl({},e),{},{after:null!==w&&void 0!==w&&w[t-1]?new Date(e.date).getTime()-new Date(w[t-1].date).getTime():0})),e=>{n(e)},{deps:[w],renderOnFinished:!0,renderOnPlayChanged:!0,autostart:!1});a.a.useMemo(()=>{_.current.networkStatistics.local=null===C||void 0===C?void 0:C.local},[null===C||void 0===C?void 0:C.local]),a.a.useEffect(()=>{_.current.targetNode=null},[O]);const z=a.a.useMemo(()=>({config:D,eventHistory:x,events:w,graphConfig:T,label:E,mode:O,onEvent:q,playlists:I,selectedElementIds:b,localDataRef:_,selectedItem:H,selectedElement:U,networkStatistics:C,graphEditorRef:B,nodes:h,edges:v}),[D,x,w,T,E,O,q,I,b,H,U,C,B,h,v]);return B.current&&(B.current.context=z),a.a.createElement(_n,{value:z},a.a.createElement(vr.a,{style:dl(dl({},d),{},{overflow:"hidden",position:"relative"}),onMouseMove:t=>{((e,t,n)=>{const r=(new Date).getTime(),a=null!==n&&void 0!==n?n:i.ab();(Mt[a]?r-Mt[a]:r)>t&&(Mt[a]=r,e(a))})(()=>{const{pageY:n}=t.nativeEvent,{offsetHeight:r,offsetTop:a}=t.currentTarget;if(e.actionBar&&e.actionBar.autoOpen){var i,o;if(n+25>=a+r&&(null===(i=e.actionBar)||void 0===i||!i.isOpen))return q({type:He,avoidHistoryRecording:!0});if(n+50<=a+r&&null!==(o=e.actionBar)&&void 0!==o&&o.isOpen)return q({type:He,avoidHistoryRecording:!0})}},1e3,"GraphEditorOnMouseMove")}},a.a.createElement(pr,sl({ref:B,style:{width:null===d||void 0===d?void 0:d.width,height:null===d||void 0===d?void 0:d.height},nodes:h,edges:v},S,{extraData:{label:E,extraData:S.extraData},config:dl(dl({},T),{},{graphId:N}),selectedElementIds:b,onPress:({position:e})=>{R.contextMenu.visible&&A(e=>{e.contextMenu.visible=!1});const{mode:t}=_.current.props;[Ze.ADD,Ze.CONTINUES_ADD].includes(t)?q({type:F,payload:{items:[{id:i.ab(),position:e,data:{}}]}}):q({type:Se,payload:{position:e},avoidHistoryRecording:!0})},onBoxSelection:e=>{const{mode:t}=_.current.props,{itemIds:n}=e;Ze.ADD_CLUSTER_ELEMENT!==t?(_.current.newClusterBoxSelection.elementIds=n,n.length>0&&(_.current.contextMenu.itemIds=n,A(t=>{const n=e.event.data.originalEvent;t.contextMenu.visible=!0,t.contextMenu.position=Ut(n)},()=>{q({type:V,payload:{itemIds:n}})}))):q({type:L,payload:{clusterId:_.current.issuedClusterId,itemIds:n}})},renderNode:e=>{var t,n,r,l,s,c,d,u,m;let{item:p,element:f}=e,g=ml(e,ol);return a.a.createElement(pr.View,{interactive:!0,rightclick:e=>{_.current.contextMenu.itemIds=[f.id()],A(t=>{t.contextMenu.visible=!0,t.contextMenu.position=Ut(e.data.originalEvent)}),e.stopPropagation()},pointertap:e=>{const{mode:t}=_.current.props,n=f.id();[Ze.DELETE,Ze.CONTINUES_DELETE].includes(t)?q({type:pe,payload:{itemIds:[p.id]},event:e}):[Ze.ADD,Ze.CONTINUES_ADD].includes(t)?_.current.targetNode?(q({type:M,payload:{items:[{id:i.ab(),source:_.current.targetNode.id(),target:n}]},event:e}),_.current.targetNode=null):_.current.targetNode=f:Ze.ADD_CLUSTER_ELEMENT!==t?q({type:ye,payload:{itemIds:[f.id()]},event:e,avoidHistoryRecording:!0}):q({type:L,payload:{clusterId:_.current.issuedClusterId,itemIds:[n]}})}},(null!==o&&void 0!==o?o:tr)(dl({item:p,element:f,label:Lt(null!==E&&void 0!==E&&E.isGlobalFirst?null!==(t=null===E||void 0===E?void 0:E.global.nodes)&&void 0!==t?t:null===E||void 0===E||null===(n=E.nodes)||void 0===n?void 0:n[p.id]:null!==(r=null===E||void 0===E||null===(l=E.nodes)||void 0===l?void 0:l[p.id])&&void 0!==r?r:null===E||void 0===E?void 0:E.global.nodes,p),labelPath:null!==(s=null!==E&&void 0!==E&&E.isGlobalFirst?null!==(c=null===E||void 0===E?void 0:E.global.nodes)&&void 0!==c?c:null===E||void 0===E||null===(d=E.nodes)||void 0===d?void 0:d[p.id]:null!==(u=null===E||void 0===E||null===(m=E.nodes)||void 0===m?void 0:m[p.id])&&void 0!==u?u:null===E||void 0===E?void 0:E.global.nodes)&&void 0!==s?s:[]},g)))},renderEdge:e=>{var t,n,i,o,l,s,c,d,u;let{item:m,element:p}=e,f=ml(e,ll);return a.a.createElement(pr.View,{interactive:!0,rightclick:e=>{q({type:ye,payload:{itemIds:[p.id()]},event:e,avoidHistoryRecording:!0}),A(e=>{e.contextMenu.visible=!0}),e.stopPropagation()},pointertap:e=>{const{mode:t}=_.current.props;[Ze.DELETE,Ze.CONTINUES_DELETE].includes(t)?q({type:ue,payload:{itemIds:[m.id]},event:e}):q({type:ye,payload:{itemIds:[p.id()]},avoidHistoryRecording:!0})}},(null!==r&&void 0!==r?r:er)(dl({item:m,label:Lt(null!==E&&void 0!==E&&E.isGlobalFirst?null!==(t=null===E||void 0===E?void 0:E.global.edges)&&void 0!==t?t:null===E||void 0===E||null===(n=E.edges)||void 0===n?void 0:n[m.id]:null!==(i=null===E||void 0===E||null===(o=E.edges)||void 0===o?void 0:o[m.id])&&void 0!==i?i:null===E||void 0===E?void 0:E.global.edges,m),labelPath:null!==(l=null!==E&&void 0!==E&&E.isGlobalFirst?null!==(s=null===E||void 0===E?void 0:E.global.edges)&&void 0!==s?s:null===E||void 0===E||null===(c=E.edges)||void 0===c?void 0:c[m.id]:null!==(d=null===E||void 0===E||null===(u=E.edges)||void 0===u?void 0:u[m.id])&&void 0!==d?d:null===E||void 0===E?void 0:E.global.edges)&&void 0!==l?l:[],element:p},f)))}})),u&&a.a.createElement(jo,u),a.a.createElement(Ei,p),m&&a.a.createElement(Ba,sl({onAction:({type:t,value:n})=>{switch(t){case Ee:q({type:Ee,payload:{value:yl(e)}});break;case $:q({type:$,payload:{value:n}});break;default:q({type:t,payload:n})}}},m)),a.a.createElement(To,{name:pl[O],cursor:!0}),a.a.createElement(rl,{timeoutManager:G,onClose:()=>{A(()=>{}),G.clear()}}),a.a.createElement(hr,{graphEditorRef:B,items:[{value:"CreateCluster",label:"Create Cluster"},{value:"Delete",label:"Delete"},{value:"Focus",label:"Focus"}],onSelect:e=>{var t,n;const{current:{contextMenu:{itemIds:r}}}=_;switch(e){case"CreateCluster":q({type:ee,payload:{items:[{id:i.ab(),name:"Cluster-"+(null!==(t=null===T||void 0===T||null===(n=T.clusters)||void 0===n?void 0:n.length)&&void 0!==t?t:0),ids:r,childClusterIds:[]}]}});break;case"Delete":q({type:pe,payload:{itemIds:r}});break;case"Settings":q({type:he,payload:{itemIds:r}});break;case"Focus":q({type:Oe,payload:{itemIds:r}})}_.current.newClusterBoxSelection.elementIds=[],_.current.contextMenu.itemIds=[],A(e=>{e.contextMenu.visible=!1})},position:R.contextMenu.position,open:R.contextMenu.visible})),a.a.createElement($o,f),Object.keys(P).map(e=>{var t;return a.a.createElement(So,sl({key:e},null!==(t=P[e])&&void 0!==t?t:{},{name:e}))}),a.a.createElement(s.a,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:j||R.isLoading},a.a.createElement(c.a,{color:"inherit"})),a.a.createElement(br.a,{onClick:()=>q({type:ne}),style:{position:"absolute",left:"49%",visibility:k?"visible":"hidden"}},a.a.createElement(Ea,{name:"cancel_rounded"})))},{isEqual:(e,t)=>!!i.p(Function,e)||e===t,isForwardRef:!0});var vl=n(1163);const bl=({formData:e,schema:t,onChange:n,name:r})=>{var i;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ua.a,{id:t.title+"-continuous-slider",gutterBottom:!0},null!==(i=t.title)&&void 0!==i?i:r),a.a.createElement(vl.a,{value:null!==e&&void 0!==e?e:[t.minimum,t.maximum],onChange:e=>{n(e.target.value)},valueLabelDisplay:"auto","aria-labelledby":t.title+"-continuous-slider",min:t.minimum,max:t.maximum}))},El={schema:{title:"Visualisation",type:"object",required:[],additionalProperties:!1,properties:{nodeSize:{type:"string",title:"Node Size",enum:["degree","out_degree","in_degree","year"]},nodeColor:{type:"string",title:"Node Color",enum:["community","degree","out_degree","in_degree","year"]}}}};function Ol(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const xl={items:[],currentIndex:0},Dl="REDO",Il="UNDO",Cl="UNDO_ALL",jl="REDO_ALL",Pl=e=>{const{onEvent:t=(()=>{})}=e,n={current:null},r=i.c(xl),a={record:r,add:e=>{const{currentIndex:t,items:n}=r;r.items=i.O(0,t)(n),r.items.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ol(Object(n),!0).forEach((function(t){wl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ol(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:i.ab()},e)),r.currentIndex=r.items.length},clear:()=>{const{current:e}=n;e.set(i.c(xl))},set:e=>{Object.keys(e).forEach(t=>{r[t]=e[t]})},undo:()=>{var e;const n=null===r||void 0===r||null===(e=r.items)||void 0===e?void 0:e[r.currentIndex-1];if(n){var a;(null===(a=t({item:n,type:Il,actions:n.undo}))||void 0===a||a)&&(r.currentIndex-=1)}},redo:()=>{var e;const{currentIndex:n}=r,a=null===r||void 0===r||null===(e=r.items)||void 0===e?void 0:e[n];if(a){var i;(null===(i=t({item:a,type:Dl,actions:a.do}))||void 0===i||i)&&(r.currentIndex=n+1)}},undoAll:()=>i.bb(i.a([i.s,()=>r.items.length>r.currentIndex]),()=>{const{items:e}=r,n=i.O(0,r.currentIndex+1)(e),a=i.Y(i.w(e=>e.undo,n)),o=i.Y(i.w(e=>e.do,n));t({item:{id:i.ab,do:o,undo:a},actions:a,items:n,type:Cl}),r.currentIndex=0})(r),redoAll:()=>i.bb(i.a([i.s,()=>r.items.length>r.currentIndex]),()=>{const{items:e}=r,n=i.O(0,r.currentIndex+1)(e),a=i.Y(i.w(e=>e.undo,n)),o=i.Y(i.w(e=>e.do,n));t({item:{id:i.ab,do:o,undo:a},actions:o,items:n,type:jl}),r.currentIndex=0})(r),delete:e=>{r.items=r.items.filter((t,n)=>{const a=e.includes(t.id);return a&&n<r.currentIndex&&(r.currentIndex-=1),!a})},getEventIdsByDoItemIds:e=>r.items.filter(t=>{const n=t.do.map(e=>e.id);return i.o(n,e).length>0}).map(e=>e.id),reorder:(e,t)=>{r.items=i.L(e,t)(r.items)}};return n.current=a,a};var kl=n(95);function Sl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sl(Object(n),!0).forEach((function(t){Ll(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ll(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _l=e=>{e.actionBar.isOpen=!1,e.dataBar.isOpen=!1,e.settingsBar.isOpen=!1},Rl=(e,t)=>{const n=a.a.useMemo(()=>i.z([Nl,e]),[]),r=a.a.useMemo(()=>Pl({onEvent:e=>{const{actions:t}=e;t.map(m)}}),[]),o=a.a.useRef(null),l=null!==t&&void 0!==t?t:o,s=a.a.useRef({recordedEvents:[]}),[c,d]=Object(y.a)(n),u=a.a.useCallback(e=>{d(t=>{e(t,{graphEditorRef:l})})},[d,l]),m=a.a.useCallback(e=>{const{type:t,payload:a={},index:o=0,dataItem:d={},event:p,elementId:f,avoidEventRecording:g,avoidHistoryRecording:y}=e,h=l.current,v=f?h.cy.$id(""+f):null;u(l=>{var f,b,E,O,w,x,D,I,j,P,k,S,U,J,Q,Z,Ve;try{var Ue,Je,Qe;if(!y){const{addHistory:t,events:n}=((e,t)=>{const{controllerState:n,graphEditor:r}=t,a=i.Y(e.map(e=>{var t,a,i,o,l,s;const{type:c,payload:d}=e,u=n.selectedElementIds,{selectedItem:m}=Tt(n,r);switch(c){case L:return[{type:ie,payload:d}];case M:return[{type:ue,payload:d}];case F:return[{type:pe,payload:d}];case $:return[{type:$,payload:{value:null===(t=n.actionBar)||void 0===t||null===(a=t.theming)||void 0===a?void 0:a.value}}];case H:return[{type:H,payload:It(It({},d),{},{value:!d.value})}];case Y:return[{type:Me,payload:{value:n.label.global.nodes}}];case X:return[{type:Fe,payload:{value:n.label.nodes[m.id]}}];case te:return[{type:fe,payload:{itemIds:null===(i=d.items)||void 0===i?void 0:i.map(e=>e.id)}}];case ee:return[{type:oe,payload:{itemIds:null===(o=d.items)||void 0===o?void 0:o.map(e=>e.id)}}];case oe:{var p,f;const{itemIds:e=[]}=d,t=null===(p=n.graphConfig)||void 0===p||null===(f=p.clusters)||void 0===f?void 0:f.filter(t=>e.includes(t.id));return[{type:ee,payload:{items:t}}]}case ie:return[{type:L,payload:d}];case ue:return[{type:M,payload:{items:n.edges.filter(e=>d.itemIds.includes(e.id))}}];case pe:{const{itemIds:e}=d,t=n.edges.filter(t=>e.includes(t.source)||e.includes(t.target));return[{type:F,payload:{items:n.nodes.filter(t=>e.includes(t.id)).map(e=>{const t=r.cy.$id(e.id).position();return It(It({},e),{},{position:t})}),edgeItems:t}}]}case fe:return[{type:te,payload:{items:n.playlists.filter(e=>d.itemIds.includes(e.id))}}];case ye:case ge:return u&&u.length>0?[It(It({},e),{},{type:ye,payload:{itemIds:u}})]:[{type:Se,payload:{x:r.viewport.center.x,y:r.viewport.center.y}}];case De:return[{type:Be,payload:{oldLayout:null===(l=n.graphConfig)||void 0===l?void 0:l.layout,positions:r.cy.nodes().map(e=>({position:{x:e.position().x,y:e.position().y},elementId:e.id()}))}}];case Ie:return[{type:Ie,payload:{value:n.mode}}];case Se:return u?[It(It({},e),{},{payload:{itemIds:u},type:ye,event:{data:{originalEvent:{metaKey:!1}}}})]:[];case Me:return[{type:Me,payload:{value:n.label.global.nodes}}];case Fe:return[{type:Fe,payload:{value:n.label.nodes[m.id]}}];case Ke:return[{type:Ke,payload:{value:m.data}}];case Be:return[{type:Be,payload:{oldLayout:null===(s=n.graphConfig)||void 0===s?void 0:s.layout,positions:d.positions.map(({elementId:e})=>{const t=r.cy.$id(""+e);return{position:{x:t.position().x,y:t.position().y},elementId:e}})}}]}return[]}));return{addHistory:!i.q(a),events:a}})([e],{graphEditor:h,controllerState:c});t&&r.add({do:[Tl(Tl({},e),{},{event:p,avoidEventRecording:!0,avoidHistoryRecording:!0})],undo:n.map(e=>Tl(Tl({},e),{},{avoidEventRecording:!0,avoidHistoryRecording:!0}))})}null!==(Ue=l.actionBar)&&void 0!==Ue&&Ue.eventRecording&&t!==$e&&!g&&s.current.recordedEvents.push(Tl(Tl({},e),{},{event:p}));if(!1===(null===(Je=n.onEvent)||void 0===Je?void 0:Je.call(n,Tl(Tl({},e),{},{graphEditor:h,update:u,state:c}),l)))return;const{item:vt}=null!==(Qe=v&&St(v,l))&&void 0!==Qe?Qe:{},bt=null===vt||void 0===vt?void 0:vt.data;switch(t){case Le:r.redo();break;case Xe:r.undo();break;case Ke:{const{selectedItem:e}=Tt(l,h);e.data=a.value;break}case N:bt.push(Tl(Tl({},a),{},{value:[a.value]}));break;case F:{const{items:e,edgeItems:t}=a;l.nodes=l.nodes.concat(e),l.edges=l.edges.concat(null!==t&&void 0!==t?t:[]),l.mode===Ze.ADD&&(l.mode=Ze.DEFAULT);break}case pe:{const{itemIds:e=[]}=a;l.nodes=l.nodes.filter(t=>!e.includes(t.id)),l.edges=l.edges.filter(t=>!e.includes(t.source)&&!e.includes(t.target)),l.mode===Ze.DELETE&&(l.mode=Ze.DEFAULT);break}case M:l.edges=l.edges.concat(a.items),l.mode===Ze.ADD&&(l.mode=Ze.DEFAULT);break;case ue:{const{itemIds:e=[]}=a;l.edges=l.edges.filter(t=>!e.includes(t.id)),l.mode===Ze.DELETE&&(l.mode=Ze.DEFAULT);break}case Se:l.selectedElementIds=[];break;case ge:{const{itemIds:e}=a;l.selectedElementIds=e;const{selectedElement:t}=Tt(Tl(Tl({},c),{},{selectedElementIds:e}),h);if(t){const{viewport:e}=h,n=2e3;let r;r=t.isNode()?t.position():zt(ht.a.fromObject(t.source().position()),ht.a.fromObject(t.target().position()));const a={x:r.x+n/4,y:r.y},i=new C.l(a.x,a.y);e.center=i}break}case V:{const{itemIds:e}=a;l.selectedElementIds=e;break}case ye:{const{itemIds:e}=a;l.selectedElementIds=e;const{selectedElement:t}=Tt(Tl(Tl({},c),{},{selectedElementIds:e}),h);if(p&&p.data.originalEvent.metaKey&&null!==t&&void 0!==t&&t.isNode()){l.dataBar.isOpen=!0;const{viewport:e}=h,n=2e3,r=t.position(),a={x:r.x+n/4,y:r.y};t.neighborhood().layout(Tl(Tl({},pr.Layouts.circle),{},{boundingBox:{x1:a.x-n/2,y1:a.y-n/3,w:n/2,h:n/2}})).start(),e.snapZoom({center:new C.l(a.x,a.y),width:n,forceStart:!0,time:pr.Layouts.grid.animationDuration+500,removeOnComplete:!0,removeOnInterrupt:!0})}break}case Oe:{const{itemIds:e=[]}=a;l.previousDataList||(l.previousDataList=[]),l.previousDataList.push({nodes:l.nodes.map(e=>Tl(Tl({},e),{},{position:{x:null===h||void 0===h?void 0:h.cy.$id(e.id).position().x,y:null===h||void 0===h?void 0:h.cy.$id(e.id).position().y}})),edges:l.edges}),l.nodes=l.nodes.filter(t=>e.includes(t.id)),l.edges=l.edges.filter(t=>e.includes(t.source)&&e.includes(t.target)),l.isFocusMode=!0;break}case ne:if(l.previousDataList){const e=l.previousDataList.pop();l.nodes=e.nodes,l.edges=e.edges,0===l.previousDataList.length&&(l.isFocusMode=!1)}break;case Ie:l.mode=a.value;break;case G:bt[o].name=a.value;break;case W:bt[o].value[a.valueIndex]=Al(d.type,a.value);break;case A:bt[o].value.push(a.value);break;case ce:bt[o].value.splice(a.valueIndex,1);break;case ae:{const{value:e}=bt[o],{length:t}=e,n=e[a.valueIndex],r=(0===a.valueIndex?t-1:a.valueIndex-1)%t;e[a.valueIndex]=e[r],e[r]=n;break}case re:{const{value:e}=bt[o],{length:t}=e,n=e[a.valueIndex],r=(a.valueIndex+1)%t;e[a.valueIndex]=e[r],e[r]=n;break}case de:bt.splice(o,1);break;case q:bt[o].additional[a.index].name=a.value;break;case z:{const e=bt[o].additional[a.index];bt[o].additional[a.index].value[a.valueIndex]=Al(e.type,a.value);break}case _:bt[o].additional.push(a);break;case R:bt[o].additional[a.index].value.push(a.value);break;case se:bt[o].additional[a.index].value.splice(a.valueIndex,1);break;case le:bt[o].additional.splice(a.index,1);break;case Ge:l.settingsBar.isOpen=!(null!==(f=l.settingsBar)&&void 0!==f&&f.isOpen);break;case We:l.preferencesModal.isOpen=!(null!==(b=l.preferencesModal)&&void 0!==b&&b.isOpen);break;case qe:l.dataBar.isOpen=!(null!==(E=l.dataBar)&&void 0!==E&&E.isOpen);break;case He:l.actionBar.isOpen=!(null!==(O=l.actionBar)&&void 0!==O&&O.isOpen);break;case we:{var et;i.x((e,t)=>{l[t]=e})(a.value);const{eventHistory:e}=null!==(et=a.value)&&void 0!==et?et:{};r.set({currentIndex:e.events.length,items:e.events.map((t,n)=>({id:i.ab(),do:[t],undo:[e.undoEvents[n]]}))});break}case xe:_l(l),l.events=[...null!==(w=a.value)&&void 0!==w?w:[]];break;case Ce:_l(l),l.events=[...null!==(x=a.events)&&void 0!==x?x:[]];break;case B:a.events.map(e=>m(e));break;case Ee:Object(kl.a)(a.value,"perfect-graph.json");break;case Ye:l.actionBar.recording=!(null!==(D=l.actionBar)&&void 0!==D&&D.recording);break;case $e:null!==(I=l.actionBar)&&void 0!==I&&I.eventRecording&&(Object(kl.a)(JSON.stringify(s.current.recordedEvents),"recorded-events.json"),s.current.recordedEvents=[]),l.actionBar.eventRecording=!(null!==(j=l.actionBar)&&void 0!==j&&j.eventRecording);break;case Te:Object(kl.a)(e.payload.value,"perfect-graph.mp4");break;case De:{let e;a.value.name&&(e=i.E(e=>i.s(e))(Tl(Tl({},T[a.value.name]),a.value))),l.graphConfig.layout=e;break}case Be:{const{positions:e,oldLayout:t}=a;e.forEach(e=>{null===h||void 0===h||h.cy.$id(e.elementId).position(e.position)}),l.graphConfig.layout=t;break}case Fe:{const{value:e}=a;l.label.nodes[vt.id]=e;break}case X:delete l.label.nodes[vt.id];break;case ze:var tt;l.label.isGlobalFirst.nodes=!(null!==(tt=l.label)&&void 0!==tt&&tt.isGlobalFirst.nodes);break;case Me:{const{value:e}=a;l.label.global.nodes=e;break}case Y:l.label.global.nodes=[];break;case Ne:{var nt,rt;const{itemIds:e=[]}=a,t=null===(nt=l.graphConfig)||void 0===nt||null===(rt=nt.clusters)||void 0===rt?void 0:rt.filter(t=>e.includes(t.id));l.selectedElementIds=i.d(t.map(e=>e.ids));break}case oe:{var at,it;const{itemIds:e=[]}=a;l.graphConfig.clusters=null===(at=l.graphConfig)||void 0===at||null===(it=at.clusters)||void 0===it?void 0:it.filter(t=>!e.includes(t.id));break}case ie:{var ot,lt;const{clusterId:e,itemIds:t=[]}=a,n=null===(ot=l.graphConfig)||void 0===ot||null===(lt=ot.clusters)||void 0===lt?void 0:lt.find(t=>t.id===e);n.ids=n.ids.filter(e=>!t.includes(e));break}case ee:{var st,ct,dt;const{items:e=[]}=a;l.graphConfig.clusters=(null!==(st=null===(ct=l.graphConfig)||void 0===ct||null===(dt=ct.clusters)||void 0===dt?void 0:dt.concat(e))&&void 0!==st?st:[]).map(e=>Tl(Tl({},e),{},{position:Wt(h)}));break}case ke:if(l.mode===Ze.ADD_CLUSTER_ELEMENT)return void(l.mode=Ze.DEFAULT);l.mode=Ze.ADD_CLUSTER_ELEMENT;break;case L:{var ut,mt,pt;const{clusterId:e,itemIds:t}=a,n=null===(ut=l.graphConfig)||void 0===ut||null===(mt=ut.clusters)||void 0===mt?void 0:mt.find(t=>t.id===e);n.ids=i.W(null!==(pt=null===n||void 0===n?void 0:n.ids)&&void 0!==pt?pt:[],t);break}case H:{var ft,gt;const{clusterId:e,value:t}=a;(null===(ft=l.graphConfig)||void 0===ft||null===(gt=ft.clusters)||void 0===gt?void 0:gt.find(t=>t.id===e)).visible=t;break}case me:{const{itemIds:e=[]}=a;r.delete(r.getEventIdsByDoItemIds(e));break}case Re:{const{fromIndex:e,toIndex:t}=a;r.reorder(e,t);break}case _e:{const{fromIndex:e,toIndex:t}=a;l.graphConfig.clusters=i.L(e,t,l.graphConfig.clusters);break}case te:{const{items:e=[]}=a;l.playlists=l.playlists.concat(e);break}case Ae:{const{fromIndex:e,toIndex:t}=a;l.playlists=i.L(e,t,l.playlists);break}case fe:{const{itemIds:e=[]}=a;l.playlists=l.playlists.filter(t=>!e.includes(t.id));break}case he:var yt;null!==(yt=l.modals)&&void 0!==yt&&yt.ElementSettings&&(l.modals.ElementSettings.isOpen=!0);break;case ve:{const{name:e}=a;e;break}case be:{const{name:e}=a;e;break}case je:{const{value:e,preferenceId:t}=a;switch(t){case"NodeView":l.graphConfig.nodes.view=Tl(Tl({},null===(P=l.graphConfig)||void 0===P||null===(k=P.nodes)||void 0===k?void 0:k.view),e);break;case"EdgeView":l.graphConfig.edges.view=Tl(Tl({},null===(S=l.graphConfig)||void 0===S||null===(U=S.edges)||void 0===U?void 0:U.view),e)}break}case Pe:{const{value:e,preferenceId:t}=a;switch(t){case"NodeView":l.graphConfig.nodes.view=Tl(Tl({},null===(J=l.graphConfig)||void 0===J||null===(Q=J.nodes)||void 0===Q?void 0:Q.view),e);break;case"EdgeView":l.graphConfig.edges.view=Tl(Tl({},null===(Z=l.graphConfig)||void 0===Z||null===(Ve=Z.edges)||void 0===Ve?void 0:Ve.view),e)}break}case K:{const{name:e}=a;l.modals[e].isOpen=!1;break}}}catch(vt){console.log("error",vt)}})},[c]);return[Tl(Tl(Tl({},c),t?{}:{ref:o}),{},{eventHistory:{currentIndex:r.record.currentIndex-1,events:i.Y(i.w(e=>e.do,r.record.items)),undoEvents:i.Y(i.w(e=>e.undo,r.record.items))},onEvent:m}),{update:u,onEvent:m}]},Al=(e,t)=>t,Nl={nodes:[],edges:[],isLoading:!1,label:{global:{nodes:["id"],edges:["id"]},nodes:{},edges:{},isGlobalFirst:{edges:!1,nodes:!1}},actionBar:{isOpen:!1},dataBar:{isOpen:!1},settingsBar:{isOpen:!1},mode:Ze.DEFAULT,selectedElementIds:[],graphConfig:{clusters:[],nodes:ft,edges:gt},playlists:[],modals:{}};var Ml=n(436),Fl=n.n(Ml);function Bl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bl(Object(n),!0).forEach((function(t){Ul(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ul(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hl=n(1156);function ql(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ql(Object(n),!0).forEach((function(t){zl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ql(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Wl=e=>Gl(Gl(Gl({},e),e.position?{position:JSON.parse(e.position)}:{}),{},{data:JSON.parse(e.data)});var $l=n(443),Yl=n.n($l);const Xl=({formData:e,schema:t,onChange:n,name:r})=>{var i;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ua.a,{id:t.title+"-continuous-slider",gutterBottom:!0},null!==(i=t.title)&&void 0!==i?i:r),a.a.createElement(vl.a,{value:null!==e&&void 0!==e?e:[t.minimum,t.maximum],onChange:e=>{n(e.target.value)},valueLabelDisplay:"auto","aria-labelledby":t.title+"-continuous-slider",min:t.minimum,max:t.maximum}))},Kl=()=>({schema:{title:"Fetch Data",type:"object",required:[],additionalProperties:!1,properties:{DataSources:{type:"array",title:"Data sources",uniqueItems:!0,items:{enum:["RS","ECHR","Eurlex"],enumNames:["Rechtspraak","European Court of Human Rights","Eurlex"],type:"string"}},Eclis:{type:"string",title:"ECLIs"},Keywords:{type:"string",title:"Keywords"},Articles:{type:"string",title:"Articles"},Date:{type:"array",title:"Date",items:{type:"number"},minimum:1969,maximum:2015},Instances:{type:"array",title:"Instances",uniqueItems:!0,items:{enum:["","Hoge Raad","Raad van State","Centrale Raad van Beroep","College van Beroep voor het bedrijfsleven","Gerechtshof Arnhem-Leeuwarden","Gerechtshof Amsterdam"],type:"string"}},Domains:{type:"array",title:"Domains",uniqueItems:!0,items:{enum:["","Not","Sure","What"],type:"string"}},Doctypes:{type:"array",title:"Document types",uniqueItems:!0,items:{enum:["","DEC","OPI"],enumNames:["","Decision","Opinion"],type:"string"}},DegreesSources:{type:"integer",title:"Degrees Sources",minimum:1,maximum:5},DegreesTargets:{type:"integer",title:"Degrees Targets",minimum:1,maximum:5}}},uiSchema:{Date:{"ui:field":Xl}}});function Jl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ql(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Zl=e=>{const t=e.Date;return console.log(t),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jl(Object(n),!0).forEach((function(t){Ql(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({DateStart:t[0]+"-01-01",DateEnd:t[1]+"-12-31"},e)},es=e=>{const{isOpen:t,onStart:n,onError:r,onFinish:i,query:o,onClose:l}=e,[s,c]=a.a.useState(o);return a.a.createElement(Po.a,{open:t,style:{display:"flex",justifyContent:"center",alignItems:"center"},BackdropProps:{}},a.a.createElement(ii.a,{style:{display:"flex",flexDirection:"column",width:"80%",height:"80%",padding:10,overflow:"scroll"}},a.a.createElement(vr.a,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:10}},a.a.createElement(Ua.a,{variant:"h6"},"Query Builder"),a.a.createElement(br.a,{"aria-label":"Example",onClick:l},a.a.createElement(Yl.a,null))),a.a.createElement(vr.a,{style:{display:"flex",flexDirection:"column"}},a.a.createElement(Oi.a,{schema:Kl().schema,uiSchema:Kl().uiSchema,onChange:e=>c(e.formData),formData:s,onSubmit:async e=>{n();try{let t=await async function(e){try{console.log(e);const t=(await Hl.a.graphql({query:"query QueryNetworkByUserInput(\n  $DataSources: [String]\n  $Keywords: String\n  $Articles: String\n  $Eclis: String\n  $DegreesSources: Int\n  $DegreesTargets: Int\n  $DateStart: AWSDate\n  $DateEnd: AWSDate\n  $Instances: [String]\n  $Domains: [String]\n  $Doctypes: [String]\n) {\n  queryNetworkByUserInput(\n    DataSources: $DataSources\n    Keywords: $Keywords\n    Articles: $Articles\n    Eclis: $Eclis\n    DegreesSources: $DegreesSources\n    DegreesTargets: $DegreesTargets\n    DateStart: $DateStart\n    DateEnd: $DateEnd\n    Instances: $Instances\n    Domains: $Domains\n    Doctypes: $Doctypes\n  ) {\n    nodes {\n      id\n      data\n    }\n    edges {\n      id\n      source\n      target\n      data\n    }\n    statistics\n    message\n  }\n}",variables:e})).data.queryNetworkByUserInput;return console.log(t),{nodes:t.nodes.map(Wl),edges:t.edges.map(Wl),networkStatistics:JSON.parse(t.statistics),message:t.message}}catch(t){console.log("error creating node:",t)}}(Zl(e.formData));if(0==t.nodes.length)throw new Error("No cases returned");i({nodes:t.nodes,edges:t.edges,networkStatistics:t.networkStatistics,message:t.message})}catch(e){console.log(e),r(e)}}}))))},ts=e=>{const{isOpen:t,videoId:n,onClose:r}=e;return a.a.createElement(Po.a,{open:t,onClose:r,style:{display:"flex",justifyContent:"center",alignItems:"center"}},a.a.createElement("iframe",{width:"853",height:"480",src:"https://www.youtube.com/embed/"+n,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"}))},ns=["changeMUITheme","dispatch","width","height"];function rs(){return(rs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function as(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function is(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function os(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?is(Object(n),!0).forEach((function(t){ls(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):is(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ls(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ss="TEST_API",cs=Object(o.a)({palette:{mode:"dark"}}),ds=Object(o.a)({palette:{mode:"light"}}),us=(ms=10,ps=10,{nodes:i.I(0,ms).map(e=>({id:"node-"+e,data:{name:"perfect-graph",address:{city:"Maastricht",country:"Netherlands"},type:"package"}})),edges:i.I(0,ps).map(e=>{let t;for(;;){const n=Math.floor(Math.random()*ms),r=Math.floor(Math.random()*ms);if(n!==r){t={id:"edge-"+e,source:"node-"+n,target:"node-"+r};break}}return t})});var ms,ps;console.log("NODES:",us.nodes.length),console.log("EDGES:",us.edges.length);fs=us.nodes,Vl(Vl({},Fl()(i.y(fs),{objects:{additionalProperties:!1},arrays:{mode:"tuple"}})),{},{title:"Filter"});var fs;const gs=()=>a.a.createElement(g.c,{style:{flexDirection:"row",justifyContent:"space-between"}},a.a.createElement(l.a,{color:"secondary"},"Signout")),ys=e=>{let{changeMUITheme:t,dispatch:n,width:r,height:o}=e,d=as(e,ns);const u=a.a.useRef(null),m=a.a.useRef({visualization:{nodeSize:null,nodeColor:null},fetching:{source:["Rechtspraak"],year:[1969,2015],instances:["Hoge Raad","Raad van State","Centrale Raad van Beroep","College van Beroep voor het bedrijfsleven","Gerechtshof Arnhem-Leeuwarden"],domains:["Not"],doctypes:["DEC","OPI"],degreesSources:3,popup:!1,liPermission:!1,keywords:"test",degreesTargets:3,eclis:"",articles:""},filtering:{year:[1960,2021],degree:[0,100],indegree:[0,100],outdegree:[0,100]}}),p=a.a.useMemo(()=>((e={})=>{const{}=e;return{schema:{title:"Filter",type:"object",required:[],additionalProperties:!1,properties:{year:{type:"array",items:{type:"number"},minimum:1969,maximum:2015},degree:{type:"array",items:{type:"number"},minimum:0,maximum:100},indegree:{type:"array",items:{type:"number"},minimum:0,maximum:100},outdegree:{type:"array",items:{type:"number"},minimum:0,maximum:100}}},uiSchema:{year:{"ui:field":bl},degree:{"ui:field":bl},indegree:{"ui:field":bl},outdegree:{"ui:field":bl}}}})(),[]),f=a.a.useMemo(()=>(e=>{const{onPopupPress:t}=e;return{children:a.a.createElement("div",null),schema:{title:"Fetch Data",type:"object",additionalProperties:!1,properties:{popup:{title:"Build Query",type:"boolean"}}},uiSchema:{Date:{"ui:field":bl},popup:{"ui:field":({formData:e,schema:n,onChange:r})=>a.a.createElement(l.a,{onClick:t},"Open Query Builder")}}}})({onPopupPress:async()=>{O(e=>{e.queryBuilder.visible=!0})}}),[]),b={Dark:v,Default:h},[E,O]=(a.a.useRef({}),Object(y.a)({queryBuilder:{visible:!1,query:{DataSources:["RS"],Date:[1969,2015],Instances:["Hoge Raad","Raad van State"],Domains:[""],Doctypes:["DEC","OPI"],DegreesSources:1,Keywords:"",DegreesTargets:1,Eclis:"ECLI:NL:GHSGR:1972:AB4988",Articles:""}},helpModal:{isOpen:!1}})),w=a.a.useMemo(()=>()=>a.a.createElement(g.c,{style:{flexDirection:"row"}},a.a.createElement(l.a,{onClick:()=>O(e=>{e.helpModal.isOpen=!0})},"Help"),a.a.createElement(l.a,{onClick:()=>n({type:ss})},"Test the API")),[n]),[x,D]=Rl(os(os({},us),{},{graphConfig:{layout:pr.Layouts.circle,zoom:.2,nodes:{},config:{nodes:{view:{size:12}}},clusters:[]},preferencesModal:{},settingsBar:{isOpen:!0,forms:[os(os({},f),{},{formData:m.current.fetching}),El,os(os({},p),{},{formData:m.current.filtering})],createClusterForm:os(os({},p),{},{schema:os(os({},p.schema),{},{title:"Create Cluster"}),formData:m.current.filtering})},dataBar:{isOpen:!0,editable:!0,header:gs},actionBar:{right:w,eventRecording:!1,actions:{},theming:{options:[{name:"Dark",value:"Dark"},{name:"Default",value:"Default"}],value:"Default"}},onEvent:async({type:e,payload:n,elementId:r,graphRef:a,graphEditor:o,update:l,state:s},c)=>{const{cy:d}=o;d.$id(r);switch(e){case ye:{const{itemIds:e}=n;c.selectedElementIds=e;const{selectedItem:t}=Tt(c,o);let r=null;r&&!i.q(r)&&(t.data=r);break}case Z:{const{name:e,formData:t}=n,{year:r,degree:a,indegree:l,outdegree:s}=t,u=c.nodes.filter(e=>{var t;const n=d.$id(e.id);return i.m(r[0],r[1])(null===(t=e.data)||void 0===t?void 0:t.year)&&i.m(a[0],a[1])(n.degree())&&i.m(l[0],l[1])(n.indegree())&&i.m(s[0],s[1])(n.outdegree())}).map(e=>e.id);return c.graphConfig.clusters.push({id:i.ab(),name:e,ids:u,childClusterIds:[],position:Wt(o)}),!1}case Ve:return c.settingsBar.forms[n.index].formData=n.value,n.form.schema.title===p.schema.title?(m.current=os(os({},m.current),{},{filtering:n.value}),c.graphConfig.nodes.filter={test:({element:e,item:t})=>{var r;const{year:a,degree:o,indegree:l,outdegree:s}=n.value;return i.m(a[0],a[1])(null===(r=t.data)||void 0===r?void 0:r.year)&&i.m(o[0],o[1])(e.degree())&&i.m(l[0],l[1])(e.indegree())&&i.m(s[0],s[1])(e.outdegree())},settings:{opacity:.2}}):m.current=os(os({},m.current),{},{visualization:n.value}),!1;case $:{const{value:e}=n;return c.graphConfig.theme=b[e],t(e),c.actionBar.theming.value=e,!1}}return null}}));return a.a.useEffect(()=>{},[]),a.a.useEffect(()=>{},[]),a.a.createElement(g.c,{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%"}},a.a.createElement(hl,rs({},x,{payload:[m.current],style:{width:r,height:o}},d)),a.a.createElement(es,{isOpen:E.queryBuilder.visible,query:E.queryBuilder.query,onClose:()=>O(e=>{e.queryBuilder.visible=!1}),onStart:()=>{D.update(e=>{e.isLoading=!0}),O(e=>{e.queryBuilder.visible=!1})},onError:e=>{D.update(e=>{e.isLoading=!1}),O(e=>{e.queryBuilder.visible=!0}),u.current.alert({type:"warning",text:e.message})},onFinish:({nodes:e=[],edges:t=[],networkStatistics:n,message:r}={})=>{D.update(r=>{r.nodes=e,r.edges=t,r.networkStatistics={local:n},r.isLoading=!1,r.graphConfig.layout=pr.Layouts.circle}),r&&u.current.alert({type:"warning",text:r})}}),a.a.createElement(ts,{isOpen:E.helpModal.isOpen,onClose:()=>O(e=>{e.helpModal.isOpen=!1}),videoId:"OrzMIhLpVps"}),a.a.createElement(hs,{ref:u}),a.a.createElement(s.a,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:x.isLoading},a.a.createElement(c.a,{color:"inherit"})))},hs=a.a.forwardRef((e,t)=>{var n;const[r,o]=a.a.useState(!1),[l,s]=a.a.useState(void 0),c=(Object(g.j)(t,{},()=>({alert:e=>{s(os({key:i.ab()},e)),o(!0)}})),(e,t)=>{o(!1)}),f=a.a.useCallback(e=>a.a.createElement(d.a,rs({},e,{direction:"down",handleExited:()=>{s(void 0)}})),[]);return a.a.createElement(u.a,{key:null===l||void 0===l?void 0:l.key,anchorOrigin:{vertical:"top",horizontal:"right"},open:r,autoHideDuration:4e3,TransitionComponent:f,onClose:c},a.a.createElement(m.a,{onClose:c,severity:null!==(n=null===l||void 0===l?void 0:l.type)&&void 0!==n?n:"error"},a.a.createElement(p.a,null,l?i.Z(l.type):""),null===l||void 0===l?void 0:l.text))}),vs={Dark:cs,Light:ds};var bs=e=>{const[t,n]=a.a.useState(vs.Light);return a.a.createElement(f.a,{theme:t},a.a.createElement(ys,rs({changeMUITheme:e=>n(vs[e])},e)))},Es=n(444),Os=n.n(Es),ws=n(445),xs=n.n(ws),Ds=n(446),Is=n.n(Ds),Cs=n(447),js=n.n(Cs),Ps=n(448),ks=n.n(Ps),Ss=n(449),Ts=n.n(Ss),Ls=n(450),_s=n.n(Ls),Rs=n(451),As=n.n(Rs);const Ns=Object(o.a)();En.a.use(As.a),_s()(En.a),En.a.use(Ts.a),En.a.use(ks.a),En.a.use(Os.a),En.a.use(xs.a),En.a.use(js.a),En.a.use(Is.a);t.a=()=>{const[e,{width:t,height:n,initialized:r}]=Object(g.k)();return a.a.createElement(f.a,{theme:Ns},a.a.createElement(g.c,{ref:e,style:{width:"100%",height:"100%"}},r&&a.a.createElement(bs,{dispatch:()=>{},width:t,height:n})))}},673:function(e,t,n){e.exports=n(1022)},893:function(e,t){}},[[673,1,2]]]);